{
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/cli.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\nvar utils = require('requirefrom')('src/utils');\nvar pkg = utils('packageJson');\nvar Command = require('./Command');\n\nvar argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\nvar program = new Command('bin/kibana');\n\nprogram.version(pkg.version).description('Kibana is an open source (Apache Licensed), browser ' + 'based analytics and search dashboard for Elasticsearch.');\n\n// attach commands\nrequire('./serve/serve')(program);\nrequire('./plugin/plugin')(program);\n\nprogram.command('help <command>').description('Get the help for a specific command').action(function (cmdName) {\n  var cmd = _.find(program.commands, { _name: cmdName });\n  if (!cmd) return this.error('unknown command ' + cmdName);\n  cmd.help();\n});\n\nprogram.command('*', null, { noHelp: true }).action(function (cmd, options) {\n  program.error('unknown command ' + cmd);\n});\n\n// check for no command name\nvar subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\n\nif (!subCommand) {\n  if (_.intersection(argv.slice(2), ['-h', '--help']).length) {\n    program.defaultHelp();\n  } else {\n    argv.splice(2, 0, ['serve']);\n  }\n}\n\nprogram.parse(argv);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL2NsaS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFMUIsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ2hELElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUMvQixJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7O0FBRW5DLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3BHLElBQUksT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDOztBQUV4QyxPQUFPLENBQ04sT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FDcEIsV0FBVyxDQUNWLHNEQUFzRCxHQUN0RCx5REFBeUQsQ0FDMUQsQ0FBQzs7O0FBR0YsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2xDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDOztBQUVwQyxPQUFPLENBQ04sT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQ3pCLFdBQVcsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUNsRCxNQUFNLENBQUMsVUFBVSxPQUFPLEVBQUU7QUFDekIsTUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDdkQsTUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLElBQUksQ0FBQyxLQUFLLHNCQUFvQixPQUFPLENBQUcsQ0FBQztBQUMxRCxLQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7Q0FDWixDQUFDLENBQUM7O0FBRUgsT0FBTyxDQUNOLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQ3BDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsRUFBRSxPQUFPLEVBQUU7QUFDOUIsU0FBTyxDQUFDLEtBQUssc0JBQW9CLEdBQUcsQ0FBRyxDQUFDO0NBQ3pDLENBQUMsQ0FBQzs7O0FBR0gsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQzs7QUFFbkUsSUFBSSxDQUFDLFVBQVUsRUFBRTtBQUNmLE1BQUksQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFO0FBQzFELFdBQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQztHQUN2QixNQUFNO0FBQ0wsUUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztHQUM5QjtDQUNGOztBQUVELE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9jbGkvY2xpLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuXHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJ3JlcXVpcmVmcm9tJykoJ3NyYy91dGlscycpO1xyXG5sZXQgcGtnID0gdXRpbHMoJ3BhY2thZ2VKc29uJyk7XHJcbmxldCBDb21tYW5kID0gcmVxdWlyZSgnLi9Db21tYW5kJyk7XHJcblxyXG5sZXQgYXJndiA9IHByb2Nlc3MuZW52LmtibldvcmtlckFyZ3YgPyBKU09OLnBhcnNlKHByb2Nlc3MuZW52LmtibldvcmtlckFyZ3YpIDogcHJvY2Vzcy5hcmd2LnNsaWNlKCk7XHJcbmxldCBwcm9ncmFtID0gbmV3IENvbW1hbmQoJ2Jpbi9raWJhbmEnKTtcclxuXHJcbnByb2dyYW1cclxuLnZlcnNpb24ocGtnLnZlcnNpb24pXHJcbi5kZXNjcmlwdGlvbihcclxuICAnS2liYW5hIGlzIGFuIG9wZW4gc291cmNlIChBcGFjaGUgTGljZW5zZWQpLCBicm93c2VyICcgK1xyXG4gICdiYXNlZCBhbmFseXRpY3MgYW5kIHNlYXJjaCBkYXNoYm9hcmQgZm9yIEVsYXN0aWNzZWFyY2guJ1xyXG4pO1xyXG5cclxuLy8gYXR0YWNoIGNvbW1hbmRzXHJcbnJlcXVpcmUoJy4vc2VydmUvc2VydmUnKShwcm9ncmFtKTtcclxucmVxdWlyZSgnLi9wbHVnaW4vcGx1Z2luJykocHJvZ3JhbSk7XHJcblxyXG5wcm9ncmFtXHJcbi5jb21tYW5kKCdoZWxwIDxjb21tYW5kPicpXHJcbi5kZXNjcmlwdGlvbignR2V0IHRoZSBoZWxwIGZvciBhIHNwZWNpZmljIGNvbW1hbmQnKVxyXG4uYWN0aW9uKGZ1bmN0aW9uIChjbWROYW1lKSB7XHJcbiAgbGV0IGNtZCA9IF8uZmluZChwcm9ncmFtLmNvbW1hbmRzLCB7IF9uYW1lOiBjbWROYW1lIH0pO1xyXG4gIGlmICghY21kKSByZXR1cm4gdGhpcy5lcnJvcihgdW5rbm93biBjb21tYW5kICR7Y21kTmFtZX1gKTtcclxuICBjbWQuaGVscCgpO1xyXG59KTtcclxuXHJcbnByb2dyYW1cclxuLmNvbW1hbmQoJyonLCBudWxsLCB7IG5vSGVscDogdHJ1ZSB9KVxyXG4uYWN0aW9uKGZ1bmN0aW9uIChjbWQsIG9wdGlvbnMpIHtcclxuICBwcm9ncmFtLmVycm9yKGB1bmtub3duIGNvbW1hbmQgJHtjbWR9YCk7XHJcbn0pO1xyXG5cclxuLy8gY2hlY2sgZm9yIG5vIGNvbW1hbmQgbmFtZVxyXG5sZXQgc3ViQ29tbWFuZCA9IGFyZ3ZbMl0gJiYgIVN0cmluZyhhcmd2WzJdWzBdKS5tYXRjaCgvXi18XlxcLnxcXC8vKTtcclxuXHJcbmlmICghc3ViQ29tbWFuZCkge1xyXG4gIGlmIChfLmludGVyc2VjdGlvbihhcmd2LnNsaWNlKDIpLCBbJy1oJywgJy0taGVscCddKS5sZW5ndGgpIHtcclxuICAgIHByb2dyYW0uZGVmYXVsdEhlbHAoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXJndi5zcGxpY2UoMiwgMCwgWydzZXJ2ZSddKTtcclxuICB9XHJcbn1cclxuXHJcbnByb2dyYW0ucGFyc2UoYXJndik7XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/cli.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE1B,IAAI,KAAK,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,CAAC;AAChD,IAAI,GAAG,GAAG,KAAK,CAAC,aAAa,CAAC,CAAC;AAC/B,IAAI,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;;AAEnC,IAAI,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;AACpG,IAAI,OAAO,GAAG,IAAI,OAAO,CAAC,YAAY,CAAC,CAAC;;AAExC,OAAO,CACN,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CACpB,WAAW,CACV,sDAAsD,GACtD,yDAAyD,CAC1D,CAAC;;;AAGF,OAAO,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,CAAC;AAClC,OAAO,CAAC,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC;;AAEpC,OAAO,CACN,OAAO,CAAC,gBAAgB,CAAC,CACzB,WAAW,CAAC,qCAAqC,CAAC,CAClD,MAAM,CAAC,UAAU,OAAO,EAAE;AACzB,MAAI,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;AACvD,MAAI,CAAC,GAAG,EAAE,OAAO,IAAI,CAAC,KAAK,sBAAoB,OAAO,CAAG,CAAC;AAC1D,KAAG,CAAC,IAAI,EAAE,CAAC;CACZ,CAAC,CAAC;;AAEH,OAAO,CACN,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CACpC,MAAM,CAAC,UAAU,GAAG,EAAE,OAAO,EAAE;AAC9B,SAAO,CAAC,KAAK,sBAAoB,GAAG,CAAG,CAAC;CACzC,CAAC,CAAC;;;AAGH,IAAI,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;;AAEnE,IAAI,CAAC,UAAU,EAAE;AACf,MAAI,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,MAAM,EAAE;AAC1D,WAAO,CAAC,WAAW,EAAE,CAAC;GACvB,MAAM;AACL,QAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;GAC9B;CACF;;AAED,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC",
      "file": "D:/backup/oplate/kibana1/src/cli/cli.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\n\r\nlet utils = require('requirefrom')('src/utils');\r\nlet pkg = utils('packageJson');\r\nlet Command = require('./Command');\r\n\r\nlet argv = process.env.kbnWorkerArgv ? JSON.parse(process.env.kbnWorkerArgv) : process.argv.slice();\r\nlet program = new Command('bin/kibana');\r\n\r\nprogram\r\n.version(pkg.version)\r\n.description(\r\n  'Kibana is an open source (Apache Licensed), browser ' +\r\n  'based analytics and search dashboard for Elasticsearch.'\r\n);\r\n\r\n// attach commands\r\nrequire('./serve/serve')(program);\r\nrequire('./plugin/plugin')(program);\r\n\r\nprogram\r\n.command('help <command>')\r\n.description('Get the help for a specific command')\r\n.action(function (cmdName) {\r\n  let cmd = _.find(program.commands, { _name: cmdName });\r\n  if (!cmd) return this.error(`unknown command ${cmdName}`);\r\n  cmd.help();\r\n});\r\n\r\nprogram\r\n.command('*', null, { noHelp: true })\r\n.action(function (cmd, options) {\r\n  program.error(`unknown command ${cmd}`);\r\n});\r\n\r\n// check for no command name\r\nlet subCommand = argv[2] && !String(argv[2][0]).match(/^-|^\\.|\\//);\r\n\r\nif (!subCommand) {\r\n  if (_.intersection(argv.slice(2), ['-h', '--help']).length) {\r\n    program.defaultHelp();\r\n  } else {\r\n    argv.splice(2, 0, ['serve']);\r\n  }\r\n}\r\n\r\nprogram.parse(argv);\r\n"
      ]
    },
    "mtime": 1472703413694
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/utils/packageJson.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _require = require('path');\n\nvar join = _require.join;\n\nvar existsSync = require('fs').existsSync;\n\nvar packageDir = undefined;\nvar packagePath = undefined;\n\nwhile (!packagePath || !existsSync(packagePath)) {\n  var prev = packageDir;\n  packageDir = prev ? join(prev, '..') : __dirname;\n  packagePath = join(packageDir, 'package.json');\n\n  if (prev === packageDir) {\n    // if going up a directory doesn't work, we\n    // are already at the root of the filesystem\n    throw new Error('unable to find package.json');\n  }\n}\n\nmodule.exports = require(packagePath);\nmodule.exports.__filename = packagePath;\nmodule.exports.__dirname = packageDir;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvdXRpbHMvcGFja2FnZUpzb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7ZUFBZSxPQUFPLENBQUMsTUFBTSxDQUFDOztJQUF4QixJQUFJLFlBQUosSUFBSTs7QUFDVixJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsVUFBVSxDQUFDOztBQUUxQyxJQUFJLFVBQVUsWUFBQSxDQUFDO0FBQ2YsSUFBSSxXQUFXLFlBQUEsQ0FBQzs7QUFFaEIsT0FBTyxDQUFDLFdBQVcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsRUFBRTtBQUMvQyxNQUFJLElBQUksR0FBRyxVQUFVLENBQUM7QUFDdEIsWUFBVSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQztBQUNqRCxhQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxjQUFjLENBQUMsQ0FBQzs7QUFFL0MsTUFBSSxJQUFJLEtBQUssVUFBVSxFQUFFOzs7QUFHdkIsVUFBTSxJQUFJLEtBQUssQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0dBQ2hEO0NBQ0Y7O0FBR0QsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO0FBQ3hDLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3V0aWxzL3BhY2thZ2VKc29uLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHsgam9pbiB9ID0gcmVxdWlyZSgncGF0aCcpO1xyXG5sZXQgZXhpc3RzU3luYyA9IHJlcXVpcmUoJ2ZzJykuZXhpc3RzU3luYztcclxuXHJcbmxldCBwYWNrYWdlRGlyO1xyXG5sZXQgcGFja2FnZVBhdGg7XHJcblxyXG53aGlsZSAoIXBhY2thZ2VQYXRoIHx8ICFleGlzdHNTeW5jKHBhY2thZ2VQYXRoKSkge1xyXG4gIGxldCBwcmV2ID0gcGFja2FnZURpcjtcclxuICBwYWNrYWdlRGlyID0gcHJldiA/IGpvaW4ocHJldiwgJy4uJykgOiBfX2Rpcm5hbWU7XHJcbiAgcGFja2FnZVBhdGggPSBqb2luKHBhY2thZ2VEaXIsICdwYWNrYWdlLmpzb24nKTtcclxuXHJcbiAgaWYgKHByZXYgPT09IHBhY2thZ2VEaXIpIHtcclxuICAgIC8vIGlmIGdvaW5nIHVwIGEgZGlyZWN0b3J5IGRvZXNuJ3Qgd29yaywgd2VcclxuICAgIC8vIGFyZSBhbHJlYWR5IGF0IHRoZSByb290IG9mIHRoZSBmaWxlc3lzdGVtXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuYWJsZSB0byBmaW5kIHBhY2thZ2UuanNvbicpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShwYWNrYWdlUGF0aCk7XHJcbm1vZHVsZS5leHBvcnRzLl9fZmlsZW5hbWUgPSBwYWNrYWdlUGF0aDtcclxubW9kdWxlLmV4cG9ydHMuX19kaXJuYW1lID0gcGFja2FnZURpcjtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/utils/packageJson.js"
      ],
      "names": [],
      "mappings": ";;eAAe,OAAO,CAAC,MAAM,CAAC;;IAAxB,IAAI,YAAJ,IAAI;;AACV,IAAI,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC;;AAE1C,IAAI,UAAU,YAAA,CAAC;AACf,IAAI,WAAW,YAAA,CAAC;;AAEhB,OAAO,CAAC,WAAW,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,EAAE;AAC/C,MAAI,IAAI,GAAG,UAAU,CAAC;AACtB,YAAU,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,SAAS,CAAC;AACjD,aAAW,GAAG,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;;AAE/C,MAAI,IAAI,KAAK,UAAU,EAAE;;;AAGvB,UAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;GAChD;CACF;;AAGD,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACtC,MAAM,CAAC,OAAO,CAAC,UAAU,GAAG,WAAW,CAAC;AACxC,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,UAAU,CAAC",
      "file": "D:/backup/oplate/kibana1/src/utils/packageJson.js",
      "sourcesContent": [
        "var { join } = require('path');\r\nlet existsSync = require('fs').existsSync;\r\n\r\nlet packageDir;\r\nlet packagePath;\r\n\r\nwhile (!packagePath || !existsSync(packagePath)) {\r\n  let prev = packageDir;\r\n  packageDir = prev ? join(prev, '..') : __dirname;\r\n  packagePath = join(packageDir, 'package.json');\r\n\r\n  if (prev === packageDir) {\r\n    // if going up a directory doesn't work, we\r\n    // are already at the root of the filesystem\r\n    throw new Error('unable to find package.json');\r\n  }\r\n}\r\n\r\n\r\nmodule.exports = require(packagePath);\r\nmodule.exports.__filename = packagePath;\r\nmodule.exports.__dirname = packageDir;\r\n"
      ]
    },
    "mtime": 1472703422601
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/Command.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar Command = require('commander').Command;\n\nvar red = require('./color').red;\nvar yellow = require('./color').yellow;\nvar help = require('./help');\n\nCommand.prototype.error = function (err) {\n  if (err && err.message) err = err.message;\n\n  console.log('\\n' + red(' ERROR ') + ' ' + err + '\\n\\n' + help(this, '  ') + '\\n');\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\nCommand.prototype.defaultHelp = function () {\n  console.log('\\n' + help(this, '  ') + '\\n\\n');\n\n  process.exit(64); // eslint-disable-line no-process-exit\n};\n\nCommand.prototype.unknownArgv = function (argv) {\n  if (argv) this.__unknownArgv = argv;\n  return this.__unknownArgv ? this.__unknownArgv.slice(0) : [];\n};\n\n/**\r\n * setup the command to accept arbitrary configuration via the cli\r\n * @return {[type]} [description]\r\n */\nCommand.prototype.collectUnknownOptions = function () {\n  var title = 'Extra ' + this._name + ' options';\n\n  this.allowUnknownOption();\n  this.getUnknownOptions = function () {\n    var opts = {};\n    var unknowns = this.unknownArgv();\n\n    while (unknowns.length) {\n      var opt = unknowns.shift().split('=');\n      if (opt[0].slice(0, 2) !== '--') {\n        this.error(title + ' \"' + opt[0] + '\" must start with \"--\"');\n      }\n\n      if (opt.length === 1) {\n        if (!unknowns.length || unknowns[0][0] === '-') {\n          this.error(title + ' \"' + opt[0] + '\" must have a value');\n        }\n\n        opt.push(unknowns.shift());\n      }\n\n      var val = opt[1];\n      try {\n        val = JSON.parse(opt[1]);\n      } catch (e) {\n        val = opt[1];\n      }\n\n      _.set(opts, opt[0].slice(2), val);\n    }\n\n    return opts;\n  };\n\n  return this;\n};\n\nCommand.prototype.parseOptions = _.wrap(Command.prototype.parseOptions, function (parse, argv) {\n  var opts = parse.call(this, argv);\n  this.unknownArgv(opts.unknown);\n  return opts;\n});\n\nCommand.prototype.action = _.wrap(Command.prototype.action, function (action, fn) {\n  return action.call(this, function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var ret = fn.apply(this, args);\n    if (ret && typeof ret.then === 'function') {\n      ret.then(null, function (e) {\n        console.log('FATAL CLI ERROR', e.stack);\n        process.exit(1);\n      });\n    }\n  });\n});\n\nmodule.exports = Command;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL0NvbW1hbmQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sQ0FBQzs7QUFFM0MsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUNqQyxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQ3ZDLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFN0IsT0FBTyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBVSxHQUFHLEVBQUU7QUFDdkMsTUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQzs7QUFFMUMsU0FBTyxDQUFDLEdBQUcsUUFFWCxHQUFHLENBQUMsU0FBUyxDQUFDLFNBQUksR0FBRyxZQUVyQixJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUVmLENBQUM7O0FBRUYsU0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUNsQixDQUFDOztBQUVGLE9BQU8sQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLFlBQVk7QUFDMUMsU0FBTyxDQUFDLEdBQUcsUUFFWCxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUdmLENBQUM7O0FBRUYsU0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUNsQixDQUFDOztBQUVGLE9BQU8sQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLFVBQVUsSUFBSSxFQUFFO0FBQzlDLE1BQUksSUFBSSxFQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO0FBQ3BD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Q0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLEVBQUU7QUFDMUIsZUFBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDeEMsZUFBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztPQUNqQixDQUFDLENBQUM7S0FDSjtHQUNGLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQzs7QUFFSCxNQUFNLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL2NsaS9Db21tYW5kLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxubGV0IENvbW1hbmQgPSByZXF1aXJlKCdjb21tYW5kZXInKS5Db21tYW5kO1xyXG5cclxubGV0IHJlZCA9IHJlcXVpcmUoJy4vY29sb3InKS5yZWQ7XHJcbmxldCB5ZWxsb3cgPSByZXF1aXJlKCcuL2NvbG9yJykueWVsbG93O1xyXG5sZXQgaGVscCA9IHJlcXVpcmUoJy4vaGVscCcpO1xyXG5cclxuQ29tbWFuZC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgaWYgKGVyciAmJiBlcnIubWVzc2FnZSkgZXJyID0gZXJyLm1lc3NhZ2U7XHJcblxyXG4gIGNvbnNvbGUubG9nKFxyXG5gXHJcbiR7cmVkKCcgRVJST1IgJyl9ICR7ZXJyfVxyXG5cclxuJHtoZWxwKHRoaXMsICcgICcpfVxyXG5gXHJcbiAgKTtcclxuXHJcbiAgcHJvY2Vzcy5leGl0KDY0KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm9jZXNzLWV4aXRcclxufTtcclxuXHJcbkNvbW1hbmQucHJvdG90eXBlLmRlZmF1bHRIZWxwID0gZnVuY3Rpb24gKCkge1xyXG4gIGNvbnNvbGUubG9nKFxyXG5gXHJcbiR7aGVscCh0aGlzLCAnICAnKX1cclxuXHJcbmBcclxuICApO1xyXG5cclxuICBwcm9jZXNzLmV4aXQoNjQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxyXG59O1xyXG5cclxuQ29tbWFuZC5wcm90b3R5cGUudW5rbm93bkFyZ3YgPSBmdW5jdGlvbiAoYXJndikge1xyXG4gIGlmIChhcmd2KSB0aGlzLl9fdW5rbm93bkFyZ3YgPSBhcmd2O1xyXG4gIHJldHVybiB0aGlzLl9fdW5rbm93bkFyZ3YgPyB0aGlzLl9fdW5rbm93bkFyZ3Yuc2xpY2UoMCkgOiBbXTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBzZXR1cCB0aGUgY29tbWFuZCB0byBhY2NlcHQgYXJiaXRyYXJ5IGNvbmZpZ3VyYXRpb24gdmlhIHRoZSBjbGlcclxuICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXHJcbiAqL1xyXG5Db21tYW5kLnByb3RvdHlwZS5jb2xsZWN0VW5rbm93bk9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgbGV0IHRpdGxlID0gYEV4dHJhICR7dGhpcy5fbmFtZX0gb3B0aW9uc2A7XHJcblxyXG4gIHRoaXMuYWxsb3dVbmtub3duT3B0aW9uKCk7XHJcbiAgdGhpcy5nZXRVbmtub3duT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBvcHRzID0ge307XHJcbiAgICBsZXQgdW5rbm93bnMgPSB0aGlzLnVua25vd25Bcmd2KCk7XHJcblxyXG4gICAgd2hpbGUgKHVua25vd25zLmxlbmd0aCkge1xyXG4gICAgICBsZXQgb3B0ID0gdW5rbm93bnMuc2hpZnQoKS5zcGxpdCgnPScpO1xyXG4gICAgICBpZiAob3B0WzBdLnNsaWNlKDAsIDIpICE9PSAnLS0nKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvcihgJHt0aXRsZX0gXCIke29wdFswXX1cIiBtdXN0IHN0YXJ0IHdpdGggXCItLVwiYCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChvcHQubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgaWYgKCF1bmtub3ducy5sZW5ndGggfHwgdW5rbm93bnNbMF1bMF0gPT09ICctJykge1xyXG4gICAgICAgICAgdGhpcy5lcnJvcihgJHt0aXRsZX0gXCIke29wdFswXX1cIiBtdXN0IGhhdmUgYSB2YWx1ZWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb3B0LnB1c2godW5rbm93bnMuc2hpZnQoKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB2YWwgPSBvcHRbMV07XHJcbiAgICAgIHRyeSB7IHZhbCA9IEpTT04ucGFyc2Uob3B0WzFdKTsgfVxyXG4gICAgICBjYXRjaCAoZSkgeyB2YWwgPSBvcHRbMV07IH1cclxuXHJcbiAgICAgIF8uc2V0KG9wdHMsIG9wdFswXS5zbGljZSgyKSwgdmFsKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb3B0cztcclxuICB9O1xyXG5cclxuICByZXR1cm4gdGhpcztcclxufTtcclxuXHJcbkNvbW1hbmQucHJvdG90eXBlLnBhcnNlT3B0aW9ucyA9IF8ud3JhcChDb21tYW5kLnByb3RvdHlwZS5wYXJzZU9wdGlvbnMsIGZ1bmN0aW9uIChwYXJzZSwgYXJndikge1xyXG4gIGxldCBvcHRzID0gcGFyc2UuY2FsbCh0aGlzLCBhcmd2KTtcclxuICB0aGlzLnVua25vd25Bcmd2KG9wdHMudW5rbm93bik7XHJcbiAgcmV0dXJuIG9wdHM7XHJcbn0pO1xyXG5cclxuQ29tbWFuZC5wcm90b3R5cGUuYWN0aW9uID0gXy53cmFwKENvbW1hbmQucHJvdG90eXBlLmFjdGlvbiwgZnVuY3Rpb24gKGFjdGlvbiwgZm4pIHtcclxuICByZXR1cm4gYWN0aW9uLmNhbGwodGhpcywgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgIGxldCByZXQgPSBmbi5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIGlmIChyZXQgJiYgdHlwZW9mIHJldC50aGVuID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHJldC50aGVuKG51bGwsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ZBVEFMwqBDTEkgRVJST1InLCBlLnN0YWNrKTtcclxuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ29tbWFuZDtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/Command.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/cli/Command.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet Command = require('commander').Command;\r\n\r\nlet red = require('./color').red;\r\nlet yellow = require('./color').yellow;\r\nlet help = require('./help');\r\n\r\nCommand.prototype.error = function (err) {\r\n  if (err && err.message) err = err.message;\r\n\r\n  console.log(\r\n`\r\n${red(' ERROR ')} ${err}\r\n\r\n${help(this, '  ')}\r\n`\r\n  );\r\n\r\n  process.exit(64); // eslint-disable-line no-process-exit\r\n};\r\n\r\nCommand.prototype.defaultHelp = function () {\r\n  console.log(\r\n`\r\n${help(this, '  ')}\r\n\r\n`\r\n  );\r\n\r\n  process.exit(64); // eslint-disable-line no-process-exit\r\n};\r\n\r\nCommand.prototype.unknownArgv = function (argv) {\r\n  if (argv) this.__unknownArgv = argv;\r\n  return this.__unknownArgv ? this.__unknownArgv.slice(0) : [];\r\n};\r\n\r\n/**\r\n * setup the command to accept arbitrary configuration via the cli\r\n * @return {[type]} [description]\r\n */\r\nCommand.prototype.collectUnknownOptions = function () {\r\n  let title = `Extra ${this._name} options`;\r\n\r\n  this.allowUnknownOption();\r\n  this.getUnknownOptions = function () {\r\n    let opts = {};\r\n    let unknowns = this.unknownArgv();\r\n\r\n    while (unknowns.length) {\r\n      let opt = unknowns.shift().split('=');\r\n      if (opt[0].slice(0, 2) !== '--') {\r\n        this.error(`${title} \"${opt[0]}\" must start with \"--\"`);\r\n      }\r\n\r\n      if (opt.length === 1) {\r\n        if (!unknowns.length || unknowns[0][0] === '-') {\r\n          this.error(`${title} \"${opt[0]}\" must have a value`);\r\n        }\r\n\r\n        opt.push(unknowns.shift());\r\n      }\r\n\r\n      let val = opt[1];\r\n      try { val = JSON.parse(opt[1]); }\r\n      catch (e) { val = opt[1]; }\r\n\r\n      _.set(opts, opt[0].slice(2), val);\r\n    }\r\n\r\n    return opts;\r\n  };\r\n\r\n  return this;\r\n};\r\n\r\nCommand.prototype.parseOptions = _.wrap(Command.prototype.parseOptions, function (parse, argv) {\r\n  let opts = parse.call(this, argv);\r\n  this.unknownArgv(opts.unknown);\r\n  return opts;\r\n});\r\n\r\nCommand.prototype.action = _.wrap(Command.prototype.action, function (action, fn) {\r\n  return action.call(this, function (...args) {\r\n    let ret = fn.apply(this, args);\r\n    if (ret && typeof ret.then === 'function') {\r\n      ret.then(null, function (e) {\r\n        console.log('FATAL CLI ERROR', e.stack);\r\n        process.exit(1);\r\n      });\r\n    }\r\n  });\r\n});\r\n\r\nmodule.exports = Command;\r\n"
      ]
    },
    "mtime": 1466137312645
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/color.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar ansicolors = require('ansicolors');\n\nexports.green = _.flow(ansicolors.black, ansicolors.bgGreen);\nexports.red = _.flow(ansicolors.white, ansicolors.bgRed);\nexports.yellow = _.flow(ansicolors.black, ansicolors.bgYellow);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL2NvbG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQzs7QUFFdkMsT0FBTyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzdELE9BQU8sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6RCxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9jbGkvY29sb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxubGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxubGV0IGFuc2ljb2xvcnMgPSByZXF1aXJlKCdhbnNpY29sb3JzJyk7XHJcblxyXG5leHBvcnRzLmdyZWVuID0gXy5mbG93KGFuc2ljb2xvcnMuYmxhY2ssIGFuc2ljb2xvcnMuYmdHcmVlbik7XHJcbmV4cG9ydHMucmVkID0gXy5mbG93KGFuc2ljb2xvcnMud2hpdGUsIGFuc2ljb2xvcnMuYmdSZWQpO1xyXG5leHBvcnRzLnllbGxvdyA9IF8uZmxvdyhhbnNpY29sb3JzLmJsYWNrLCBhbnNpY29sb3JzLmJnWWVsbG93KTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/color.js"
      ],
      "names": [],
      "mappings": ";;AACA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,UAAU,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;;AAEvC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC;AAC7D,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC;AACzD,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,QAAQ,CAAC,CAAC",
      "file": "D:/backup/oplate/kibana1/src/cli/color.js",
      "sourcesContent": [
        "\r\nlet _ = require('lodash');\r\nlet ansicolors = require('ansicolors');\r\n\r\nexports.green = _.flow(ansicolors.black, ansicolors.bgGreen);\r\nexports.red = _.flow(ansicolors.white, ansicolors.bgRed);\r\nexports.yellow = _.flow(ansicolors.black, ansicolors.bgYellow);\r\n"
      ]
    },
    "mtime": 1465716669904
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/help.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\nmodule.exports = function (command, spaces) {\n  if (!_.size(command.commands)) {\n    return command.outputHelp();\n  }\n\n  var defCmd = _.find(command.commands, function (cmd) {\n    return cmd._name === 'serve';\n  });\n\n  var desc = !command.description() ? '' : command.description();\n  var cmdDef = !defCmd ? '' : '=' + defCmd._name;\n\n  return ('\\nUsage: ' + command._name + ' [command' + cmdDef + '] [options]\\n\\n' + desc + '\\n\\nCommands:\\n' + indent(commandsSummary(command), 2) + '\\n\\n' + cmdHelp(defCmd) + '\\n').trim().replace(/^/gm, spaces || '');\n};\n\nfunction indent(str, n) {\n  return String(str || '').trim().replace(/^/gm, _.repeat(' ', n));\n}\n\nfunction commandsSummary(program) {\n  var cmds = _.compact(program.commands.map(function (cmd) {\n    var name = cmd._name;\n    if (name === '*') return;\n    var opts = cmd.options.length ? ' [options]' : '';\n    var args = cmd._args.map(function (arg) {\n      return humanReadableArgName(arg);\n    }).join(' ');\n\n    return [name + ' ' + opts + ' ' + args, cmd.description()];\n  }));\n\n  var cmdLColWidth = cmds.reduce(function (width, cmd) {\n    return Math.max(width, cmd[0].length);\n  }, 0);\n\n  return cmds.reduce(function (help, cmd) {\n    return '' + (help || '') + _.padRight(cmd[0], cmdLColWidth) + ' ' + (cmd[1] || '') + '\\n';\n  }, '');\n}\n\nfunction cmdHelp(cmd) {\n  if (!cmd) return '';\n  return ('\\n\"' + cmd._name + '\" Options:\\n\\n' + indent(cmd.optionHelp(), 2) + '\\n').trim();\n}\n\nfunction humanReadableArgName(arg) {\n  var nameOutput = arg.name + (arg.variadic === true ? '...' : '');\n  return arg.required ? '<' + nameOutput + '>' : '[' + nameOutput + ']';\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL2hlbHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTFCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQzFDLE1BQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUM3QixXQUFPLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQztHQUM3Qjs7QUFFRCxNQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsVUFBVSxHQUFHLEVBQUU7QUFDbkQsV0FBTyxHQUFHLENBQUMsS0FBSyxLQUFLLE9BQU8sQ0FBQztHQUM5QixDQUFDLENBQUM7O0FBRUgsTUFBSSxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLEdBQUcsRUFBRSxHQUFHLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUMvRCxNQUFJLE1BQU0sR0FBRyxDQUFDLE1BQU0sR0FBRyxFQUFFLFNBQU8sTUFBTSxDQUFDLEtBQUssQUFBRSxDQUFDOztBQUUvQyxTQUFPLGVBRUEsT0FBTyxDQUFDLEtBQUssaUJBQVksTUFBTSx1QkFFdEMsSUFBSSx1QkFHSixNQUFNLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUVuQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBRWIsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUM7Q0FDdkMsQ0FBQzs7QUFFRixTQUFTLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFO0FBQ3RCLFNBQU8sTUFBTSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDbEU7O0FBRUQsU0FBUyxlQUFlLENBQUMsT0FBTyxFQUFFO0FBQ2hDLE1BQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDdkQsUUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQztBQUNyQixRQUFJLElBQUksS0FBSyxHQUFHLEVBQUUsT0FBTztBQUN6QixRQUFJLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxZQUFZLEdBQUcsRUFBRSxDQUFDO0FBQ2xELFFBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxFQUFFO0FBQ3RDLGFBQU8sb0JBQW9CLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDbEMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFYixXQUFPLENBQ0YsSUFBSSxTQUFJLElBQUksU0FBSSxJQUFJLEVBQ3ZCLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FDbEIsQ0FBQztHQUNILENBQUMsQ0FBQyxDQUFDOztBQUVKLE1BQUksWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxLQUFLLEVBQUUsR0FBRyxFQUFFO0FBQ25ELFdBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0dBQ3ZDLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0FBRU4sU0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUN0QyxpQkFBVSxJQUFJLElBQUksRUFBRSxDQUFBLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLFVBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQSxRQUFLO0dBQzdFLEVBQUUsRUFBRSxDQUFDLENBQUM7Q0FDUjs7QUFFRCxTQUFTLE9BQU8sQ0FBQyxHQUFHLEVBQUU7QUFDcEIsTUFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsQ0FBQztBQUNwQixTQUFPLFNBR04sR0FBRyxDQUFDLEtBQUssc0JBRVYsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLENBQUMsU0FHekIsSUFBSSxFQUFFLENBQUM7Q0FFVjs7QUFFRCxTQUFTLG9CQUFvQixDQUFDLEdBQUcsRUFBRTtBQUNqQyxNQUFJLFVBQVUsR0FBRyxHQUFHLENBQUMsSUFBSSxJQUFJLEdBQUcsQ0FBQyxRQUFRLEtBQUssSUFBSSxHQUFHLEtBQUssR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDO0FBQ2pFLFNBQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxHQUFHLEdBQUcsVUFBVSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsVUFBVSxHQUFHLEdBQUcsQ0FBQztDQUN2RSIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL2NsaS9oZWxwLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNvbW1hbmQsIHNwYWNlcykge1xyXG4gIGlmICghXy5zaXplKGNvbW1hbmQuY29tbWFuZHMpKSB7XHJcbiAgICByZXR1cm4gY29tbWFuZC5vdXRwdXRIZWxwKCk7XHJcbiAgfVxyXG5cclxuICBsZXQgZGVmQ21kID0gXy5maW5kKGNvbW1hbmQuY29tbWFuZHMsIGZ1bmN0aW9uIChjbWQpIHtcclxuICAgIHJldHVybiBjbWQuX25hbWUgPT09ICdzZXJ2ZSc7XHJcbiAgfSk7XHJcblxyXG4gIGxldCBkZXNjID0gIWNvbW1hbmQuZGVzY3JpcHRpb24oKSA/ICcnIDogY29tbWFuZC5kZXNjcmlwdGlvbigpO1xyXG4gIGxldCBjbWREZWYgPSAhZGVmQ21kID8gJycgOiBgPSR7ZGVmQ21kLl9uYW1lfWA7XHJcblxyXG4gIHJldHVybiAoXHJcbmBcclxuVXNhZ2U6ICR7Y29tbWFuZC5fbmFtZX0gW2NvbW1hbmQke2NtZERlZn1dIFtvcHRpb25zXVxyXG5cclxuJHtkZXNjfVxyXG5cclxuQ29tbWFuZHM6XHJcbiR7aW5kZW50KGNvbW1hbmRzU3VtbWFyeShjb21tYW5kKSwgMil9XHJcblxyXG4ke2NtZEhlbHAoZGVmQ21kKX1cclxuYFxyXG4gICkudHJpbSgpLnJlcGxhY2UoL14vZ20sIHNwYWNlcyB8fCAnJyk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBpbmRlbnQoc3RyLCBuKSB7XHJcbiAgcmV0dXJuIFN0cmluZyhzdHIgfHwgJycpLnRyaW0oKS5yZXBsYWNlKC9eL2dtLCBfLnJlcGVhdCgnICcsIG4pKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29tbWFuZHNTdW1tYXJ5KHByb2dyYW0pIHtcclxuICBsZXQgY21kcyA9IF8uY29tcGFjdChwcm9ncmFtLmNvbW1hbmRzLm1hcChmdW5jdGlvbiAoY21kKSB7XHJcbiAgICBsZXQgbmFtZSA9IGNtZC5fbmFtZTtcclxuICAgIGlmIChuYW1lID09PSAnKicpIHJldHVybjtcclxuICAgIGxldCBvcHRzID0gY21kLm9wdGlvbnMubGVuZ3RoID8gJyBbb3B0aW9uc10nIDogJyc7XHJcbiAgICBsZXQgYXJncyA9IGNtZC5fYXJncy5tYXAoZnVuY3Rpb24gKGFyZykge1xyXG4gICAgICByZXR1cm4gaHVtYW5SZWFkYWJsZUFyZ05hbWUoYXJnKTtcclxuICAgIH0pLmpvaW4oJyAnKTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBgJHtuYW1lfSAke29wdHN9ICR7YXJnc31gLFxyXG4gICAgICBjbWQuZGVzY3JpcHRpb24oKVxyXG4gICAgXTtcclxuICB9KSk7XHJcblxyXG4gIGxldCBjbWRMQ29sV2lkdGggPSBjbWRzLnJlZHVjZShmdW5jdGlvbiAod2lkdGgsIGNtZCkge1xyXG4gICAgcmV0dXJuIE1hdGgubWF4KHdpZHRoLCBjbWRbMF0ubGVuZ3RoKTtcclxuICB9LCAwKTtcclxuXHJcbiAgcmV0dXJuIGNtZHMucmVkdWNlKGZ1bmN0aW9uIChoZWxwLCBjbWQpIHtcclxuICAgIHJldHVybiBgJHtoZWxwIHx8ICcnfSR7Xy5wYWRSaWdodChjbWRbMF0sIGNtZExDb2xXaWR0aCl9ICR7Y21kWzFdIHx8ICcnfVxcbmA7XHJcbiAgfSwgJycpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbWRIZWxwKGNtZCkge1xyXG4gIGlmICghY21kKSByZXR1cm4gJyc7XHJcbiAgcmV0dXJuIChcclxuXHJcbmBcclxuXCIke2NtZC5fbmFtZX1cIiBPcHRpb25zOlxyXG5cclxuJHtpbmRlbnQoY21kLm9wdGlvbkhlbHAoKSwgMil9XHJcbmBcclxuXHJcbiAgKS50cmltKCk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBodW1hblJlYWRhYmxlQXJnTmFtZShhcmcpIHtcclxuICBsZXQgbmFtZU91dHB1dCA9IGFyZy5uYW1lICsgKGFyZy52YXJpYWRpYyA9PT0gdHJ1ZSA/ICcuLi4nIDogJycpO1xyXG4gIHJldHVybiBhcmcucmVxdWlyZWQgPyAnPCcgKyBuYW1lT3V0cHV0ICsgJz4nIDogJ1snICsgbmFtZU91dHB1dCArICddJztcclxufVxyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/help.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/cli/help.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\n\r\nmodule.exports = function (command, spaces) {\r\n  if (!_.size(command.commands)) {\r\n    return command.outputHelp();\r\n  }\r\n\r\n  let defCmd = _.find(command.commands, function (cmd) {\r\n    return cmd._name === 'serve';\r\n  });\r\n\r\n  let desc = !command.description() ? '' : command.description();\r\n  let cmdDef = !defCmd ? '' : `=${defCmd._name}`;\r\n\r\n  return (\r\n`\r\nUsage: ${command._name} [command${cmdDef}] [options]\r\n\r\n${desc}\r\n\r\nCommands:\r\n${indent(commandsSummary(command), 2)}\r\n\r\n${cmdHelp(defCmd)}\r\n`\r\n  ).trim().replace(/^/gm, spaces || '');\r\n};\r\n\r\nfunction indent(str, n) {\r\n  return String(str || '').trim().replace(/^/gm, _.repeat(' ', n));\r\n}\r\n\r\nfunction commandsSummary(program) {\r\n  let cmds = _.compact(program.commands.map(function (cmd) {\r\n    let name = cmd._name;\r\n    if (name === '*') return;\r\n    let opts = cmd.options.length ? ' [options]' : '';\r\n    let args = cmd._args.map(function (arg) {\r\n      return humanReadableArgName(arg);\r\n    }).join(' ');\r\n\r\n    return [\r\n      `${name} ${opts} ${args}`,\r\n      cmd.description()\r\n    ];\r\n  }));\r\n\r\n  let cmdLColWidth = cmds.reduce(function (width, cmd) {\r\n    return Math.max(width, cmd[0].length);\r\n  }, 0);\r\n\r\n  return cmds.reduce(function (help, cmd) {\r\n    return `${help || ''}${_.padRight(cmd[0], cmdLColWidth)} ${cmd[1] || ''}\\n`;\r\n  }, '');\r\n}\r\n\r\nfunction cmdHelp(cmd) {\r\n  if (!cmd) return '';\r\n  return (\r\n\r\n`\r\n\"${cmd._name}\" Options:\r\n\r\n${indent(cmd.optionHelp(), 2)}\r\n`\r\n\r\n  ).trim();\r\n\r\n}\r\n\r\nfunction humanReadableArgName(arg) {\r\n  let nameOutput = arg.name + (arg.variadic === true ? '...' : '');\r\n  return arg.required ? '<' + nameOutput + '>' : '[' + nameOutput + ']';\r\n}\r\n"
      ]
    },
    "mtime": 1465716669904
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/serve/serve.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _ = require('lodash');\n\nvar _require = require('cluster');\n\nvar isWorker = _require.isWorker;\n\nvar _require2 = require('path');\n\nvar resolve = _require2.resolve;\n\nvar cwd = process.cwd();\nvar src = require('requirefrom')('src');\nvar fromRoot = src('utils/fromRoot');\n\nvar canCluster = undefined;\ntry {\n  require.resolve('../cluster/ClusterManager');\n  canCluster = true;\n} catch (e) {\n  canCluster = false;\n}\n\nvar pathCollector = function pathCollector() {\n  var paths = [];\n  return function (path) {\n    paths.push(resolve(process.cwd(), path));\n    return paths;\n  };\n};\n\nvar pluginDirCollector = pathCollector();\nvar pluginPathCollector = pathCollector();\n\nmodule.exports = function (program) {\n  var command = program.command('serve');\n\n  command.description('Run the kibana server').collectUnknownOptions().option('-e, --elasticsearch <uri>', 'Elasticsearch instance').option('-c, --config <path>', 'Path to the config file, can be changed with the CONFIG_PATH environment variable as well', process.env.CONFIG_PATH || fromRoot('config/kibana.yml')).option('-p, --port <port>', 'The port to bind to', parseInt).option('-q, --quiet', 'Prevent all logging except errors').option('-Q, --silent', 'Prevent all logging').option('--verbose', 'Turns on verbose logging').option('-H, --host <host>', 'The host to bind to').option('-l, --log-file <path>', 'The file to log to').option('--plugin-dir <path>', 'A path to scan for plugins, this can be specified multiple ' + 'times to specify multiple directories', pluginDirCollector, [fromRoot('installedPlugins'), fromRoot('src/plugins')]).option('--plugin-path <path>', 'A path to a plugin which should be included by the server, ' + 'this can be specified multiple times to specify multiple paths', pluginPathCollector, []).option('--plugins <path>', 'an alias for --plugin-dir', pluginDirCollector);\n\n  if (canCluster) {\n    command.option('--dev', 'Run the server with development mode defaults').option('--no-watch', 'Prevents automatic restarts of the server in --dev mode');\n  }\n\n  command.action(function callee$1$0(opts) {\n    var ClusterManager, readYamlConfig, KbnServer, settings, set, get, kbnServer, _kbnServer, server;\n\n    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {\n      while (1) switch (context$2$0.prev = context$2$0.next) {\n        case 0:\n          if (!(canCluster && opts.dev && !isWorker)) {\n            context$2$0.next = 4;\n            break;\n          }\n\n          ClusterManager = require('../cluster/ClusterManager');\n\n          new ClusterManager(opts);\n          return context$2$0.abrupt('return');\n\n        case 4:\n          readYamlConfig = require('./read_yaml_config');\n          KbnServer = src('server/KbnServer');\n          settings = readYamlConfig(opts.config);\n\n          if (opts.dev) {\n            try {\n              _.merge(settings, readYamlConfig(fromRoot('config/kibana.dev.yml')));\n            } catch (e) {\n              null;\n            }\n          }\n\n          set = _.partial(_.set, settings);\n          get = _.partial(_.get, settings);\n\n          if (opts.dev) {\n            set('env', 'development');\n            set('optimize.lazy', true);\n          }\n\n          if (opts.elasticsearch) set('elasticsearch.url', opts.elasticsearch);\n          if (opts.port) set('server.port', opts.port);\n          if (opts.host) set('server.host', opts.host);\n          if (opts.quiet) set('logging.quiet', true);\n          if (opts.silent) set('logging.silent', true);\n          if (opts.verbose) set('logging.verbose', true);\n          if (opts.logFile) set('logging.dest', opts.logFile);\n\n          set('plugins.scanDirs', _.compact([].concat(get('plugins.scanDirs'), opts.pluginDir)));\n\n          set('plugins.paths', [].concat(opts.pluginPath || []));\n\n          kbnServer = {};\n          context$2$0.prev = 21;\n\n          kbnServer = new KbnServer(_.merge(settings, this.getUnknownOptions()));\n          context$2$0.next = 25;\n          return _regeneratorRuntime.awrap(kbnServer.ready());\n\n        case 25:\n          context$2$0.next = 35;\n          break;\n\n        case 27:\n          context$2$0.prev = 27;\n          context$2$0.t0 = context$2$0['catch'](21);\n          _kbnServer = kbnServer;\n          server = _kbnServer.server;\n\n          if (server) server.log(['fatal'], context$2$0.t0);\n          console.error('FATAL', context$2$0.t0);\n\n          kbnServer.close();\n          process.exit(1); // eslint-disable-line no-process-exit\n\n        case 35:\n          return context$2$0.abrupt('return', kbnServer);\n\n        case 36:\n        case 'end':\n          return context$2$0.stop();\n      }\n    }, null, this, [[21, 27]]);\n  });\n};\n\n// stop processing the action and handoff to cluster manager\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3NlcnZlL3NlcnZlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O2VBQ1AsT0FBTyxDQUFDLFNBQVMsQ0FBQzs7SUFBL0IsUUFBUSxZQUFSLFFBQVE7O2dCQUNJLE9BQU8sQ0FBQyxNQUFNLENBQUM7O0lBQTNCLE9BQU8sYUFBUCxPQUFPOztBQUViLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUN4QixJQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDeEMsSUFBSSxRQUFRLEdBQUcsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUM7O0FBRXJDLElBQUksVUFBVSxZQUFBLENBQUM7QUFDZixJQUFJO0FBQ0YsU0FBTyxDQUFDLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0FBQzdDLFlBQVUsR0FBRyxJQUFJLENBQUM7Q0FDbkIsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLFlBQVUsR0FBRyxLQUFLLENBQUM7Q0FDcEI7O0FBRUQsSUFBSSxhQUFhLEdBQUcsU0FBaEIsYUFBYSxHQUFlO0FBQzlCLE1BQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLFNBQU8sVUFBVSxJQUFJLEVBQUU7QUFDckIsU0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDekMsV0FBTyxLQUFLLENBQUM7R0FDZCxDQUFDO0NBQ0gsQ0FBQzs7QUFFRixJQUFJLGtCQUFrQixHQUFHLGFBQWEsRUFBRSxDQUFDO0FBQ3pDLElBQUksbUJBQW1CLEdBQUcsYUFBYSxFQUFFLENBQUM7O0FBRTFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxPQUFPLEVBQUU7QUFDbEMs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LE9BQU8saUJBQU0sQ0FBQzs7QUFFNUIsbUJBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNsQixpQkFBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzs7OzhDQUdYLFNBQVM7Ozs7Ozs7R0FDakIsQ0FBQyxDQUFDO0NBQ0osQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL2NsaS9zZXJ2ZS9zZXJ2ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmxldCB7IGlzV29ya2VyIH0gPSByZXF1aXJlKCdjbHVzdGVyJyk7XHJcbmxldCB7IHJlc29sdmUgfSA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuXHJcbmxldCBjd2QgPSBwcm9jZXNzLmN3ZCgpO1xyXG5sZXQgc3JjID0gcmVxdWlyZSgncmVxdWlyZWZyb20nKSgnc3JjJyk7XHJcbmxldCBmcm9tUm9vdCA9IHNyYygndXRpbHMvZnJvbVJvb3QnKTtcclxuXHJcbmxldCBjYW5DbHVzdGVyO1xyXG50cnkge1xyXG4gIHJlcXVpcmUucmVzb2x2ZSgnLi4vY2x1c3Rlci9DbHVzdGVyTWFuYWdlcicpO1xyXG4gIGNhbkNsdXN0ZXIgPSB0cnVlO1xyXG59IGNhdGNoIChlKSB7XHJcbiAgY2FuQ2x1c3RlciA9IGZhbHNlO1xyXG59XHJcblxyXG5sZXQgcGF0aENvbGxlY3RvciA9IGZ1bmN0aW9uICgpIHtcclxuICBsZXQgcGF0aHMgPSBbXTtcclxuICByZXR1cm4gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgIHBhdGhzLnB1c2gocmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCBwYXRoKSk7XHJcbiAgICByZXR1cm4gcGF0aHM7XHJcbiAgfTtcclxufTtcclxuXHJcbmxldCBwbHVnaW5EaXJDb2xsZWN0b3IgPSBwYXRoQ29sbGVjdG9yKCk7XHJcbmxldCBwbHVnaW5QYXRoQ29sbGVjdG9yID0gcGF0aENvbGxlY3RvcigpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocHJvZ3JhbSkge1xyXG4gIGxldCBjb21tYW5kID0gcHJvZ3JhbS5jb21tYW5kKCdzZXJ2ZScpO1xyXG5cclxuICBjb21tYW5kXHJcbiAgLmRlc2NyaXB0aW9uKCdSdW4gdGhlIGtpYmFuYSBzZXJ2ZXInKVxyXG4gIC5jb2xsZWN0VW5rbm93bk9wdGlvbnMoKVxyXG4gIC5vcHRpb24oJy1lLCAtLWVsYXN0aWNzZWFyY2ggPHVyaT4nLCAnRWxhc3RpY3NlYXJjaCBpbnN0YW5jZScpXHJcbiAgLm9wdGlvbihcclxuICAgICctYywgLS1jb25maWcgPHBhdGg+JyxcclxuICAgICdQYXRoIHRvIHRoZSBjb25maWcgZmlsZSwgY2FuIGJlIGNoYW5nZWQgd2l0aCB0aGUgQ09ORklHX1BBVEggZW52aXJvbm1lbnQgdmFyaWFibGUgYXMgd2VsbCcsXHJcbiAgICBwcm9jZXNzLmVudi5DT05GSUdfUEFUSCB8fCBmcm9tUm9vdCgnY29uZmlnL2tpYmFuYS55bWwnKSlcclxuICAub3B0aW9uKCctcCwgLS1wb3J0IDxwb3J0PicsICdUaGUgcG9ydCB0byBiaW5kIHRvJywgcGFyc2VJbnQpXHJcbiAgLm9wdGlvbignLXEsIC0tcXVpZXQnLCAnUHJldmVudCBhbGwgbG9nZ2luZyBleGNlcHQgZXJyb3JzJylcclxuICAub3B0aW9uKCctUSwgLS1zaWxlbnQnLCAnUHJldmVudCBhbGwgbG9nZ2luZycpXHJcbiAgLm9wdGlvbignLS12ZXJib3NlJywgJ1R1cm5zIG9uIHZlcmJvc2UgbG9nZ2luZycpXHJcbiAgLm9wdGlvbignLUgsIC0taG9zdCA8aG9zdD4nLCAnVGhlIGhvc3QgdG8gYmluZCB0bycpXHJcbiAgLm9wdGlvbignLWwsIC0tbG9nLWZpbGUgPHBhdGg+JywgJ1RoZSBmaWxlIHRvIGxvZyB0bycpXHJcbiAgLm9wdGlvbihcclxuICAgICctLXBsdWdpbi1kaXIgPHBhdGg+JyxcclxuICAgICdBIHBhdGggdG8gc2NhbiBmb3IgcGx1Z2lucywgdGhpcyBjYW4gYmUgc3BlY2lmaWVkIG11bHRpcGxlICcgK1xyXG4gICAgJ3RpbWVzIHRvIHNwZWNpZnkgbXVsdGlwbGUgZGlyZWN0b3JpZXMnLFxyXG4gICAgcGx1Z2luRGlyQ29sbGVjdG9yLFxyXG4gICAgW1xyXG4gICAgICBmcm9tUm9vdCgnaW5zdGFsbGVkUGx1Z2lucycpLFxyXG4gICAgICBmcm9tUm9vdCgnc3JjL3BsdWdpbnMnKVxyXG4gICAgXVxyXG4gIClcclxuICAub3B0aW9uKFxyXG4gICAgJy0tcGx1Z2luLXBhdGggPHBhdGg+JyxcclxuICAgICdBIHBhdGggdG8gYSBwbHVnaW4gd2hpY2ggc2hvdWxkIGJlIGluY2x1ZGVkIGJ5IHRoZSBzZXJ2ZXIsICcgK1xyXG4gICAgJ3RoaXMgY2FuIGJlIHNwZWNpZmllZCBtdWx0aXBsZSB0aW1lcyB0byBzcGVjaWZ5IG11bHRpcGxlIHBhdGhzJyxcclxuICAgIHBsdWdpblBhdGhDb2xsZWN0b3IsXHJcbiAgICBbXVxyXG4gIClcclxuICAub3B0aW9uKCctLXBsdWdpbnMgPHBhdGg+JywgJ2FuIGFsaWFzIGZvciAtLXBsdWdpbi1kaXInLCBwbHVnaW5EaXJDb2xsZWN0b3IpO1xyXG5cclxuICBpZiAoY2FuQ2x1c3Rlcikge1xyXG4gICAgY29tbWFuZFxyXG4gICAgLm9wdGlvbignLS1kZXYnLCAnUnVuIHRoZSBzZXJ2ZXIgd2l0aCBkZXZlbG9wbWVudCBtb2RlIGRlZmF1bHRzJylcclxuICAgIC5vcHRpb24oJy0tbm8td2F0Y2gnLCAnUHJldmVudHMgYXV0b21hdGljIHJlc3RhcnRzIG9mIHRoZSBzZXJ2ZXIgaW4gLS1kZXYgbW9kZScpO1xyXG4gIH1cclxuXHJcbiAgY29tbWFuZFxyXG4gIC5hY3Rpb24oYXN5bmMgZnVuY3Rpb24gKG9wdHMpIHtcclxuICAgIGlmIChjYW5DbHVzdGVyICYmIG9wdHMuZGV2ICYmICFpc1dvcmtlcikge1xyXG4gICAgICAvLyBzdG9wIHByb2Nlc3NpbmcgdGhlIGFjdGlvbiBhbmQgaGFuZG9mZiB0byBjbHVzdGVyIG1hbmFnZXJcclxuICAgICAgbGV0IENsdXN0ZXJNYW5hZ2VyID0gcmVxdWlyZSgnLi4vY2x1c3Rlci9DbHVzdGVyTWFuYWdlcicpO1xyXG4gICAgICBuZXcgQ2x1c3Rlck1hbmFnZXIob3B0cyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVhZFlhbWxDb25maWcgPSByZXF1aXJlKCcuL3JlYWRfeWFtbF9jb25maWcnKTtcclxuICAgIGxldCBLYm5TZXJ2ZXIgPSBzcmMoJ3NlcnZlci9LYm5TZXJ2ZXInKTtcclxuXHJcbiAgICBsZXQgc2V0dGluZ3MgPSByZWFkWWFtbENvbmZpZyhvcHRzLmNvbmZpZyk7XHJcblxyXG4gICAgaWYgKG9wdHMuZGV2KSB7XHJcbiAgICAgIHRyeSB7IF8ubWVyZ2Uoc2V0dGluZ3MsIHJlYWRZYW1sQ29uZmlnKGZyb21Sb290KCdjb25maWcva2liYW5hLmRldi55bWwnKSkpOyB9XHJcbiAgICAgIGNhdGNoIChlKSB7IG51bGw7IH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2V0ID0gXy5wYXJ0aWFsKF8uc2V0LCBzZXR0aW5ncyk7XHJcbiAgICBsZXQgZ2V0ID0gXy5wYXJ0aWFsKF8uZ2V0LCBzZXR0aW5ncyk7XHJcblxyXG4gICAgaWYgKG9wdHMuZGV2KSB7XHJcbiAgICAgIHNldCgnZW52JywgJ2RldmVsb3BtZW50Jyk7XHJcbiAgICAgIHNldCgnb3B0aW1pemUubGF6eScsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRzLmVsYXN0aWNzZWFyY2gpIHNldCgnZWxhc3RpY3NlYXJjaC51cmwnLCBvcHRzLmVsYXN0aWNzZWFyY2gpO1xyXG4gICAgaWYgKG9wdHMucG9ydCkgc2V0KCdzZXJ2ZXIucG9ydCcsIG9wdHMucG9ydCk7XHJcbiAgICBpZiAob3B0cy5ob3N0KSBzZXQoJ3NlcnZlci5ob3N0Jywgb3B0cy5ob3N0KTtcclxuICAgIGlmIChvcHRzLnF1aWV0KSBzZXQoJ2xvZ2dpbmcucXVpZXQnLCB0cnVlKTtcclxuICAgIGlmIChvcHRzLnNpbGVudCkgc2V0KCdsb2dnaW5nLnNpbGVudCcsIHRydWUpO1xyXG4gICAgaWYgKG9wdHMudmVyYm9zZSkgc2V0KCdsb2dnaW5nLnZlcmJvc2UnLCB0cnVlKTtcclxuICAgIGlmIChvcHRzLmxvZ0ZpbGUpIHNldCgnbG9nZ2luZy5kZXN0Jywgb3B0cy5sb2dGaWxlKTtcclxuXHJcbiAgICBzZXQoJ3BsdWdpbnMuc2NhbkRpcnMnLCBfLmNvbXBhY3QoW10uY29uY2F0KFxyXG4gICAgICBnZXQoJ3BsdWdpbnMuc2NhbkRpcnMnKSxcclxuICAgICAgb3B0cy5wbHVnaW5EaXJcclxuICAgICkpKTtcclxuXHJcbiAgICBzZXQoJ3BsdWdpbnMucGF0aHMnLCBbXS5jb25jYXQob3B0cy5wbHVnaW5QYXRoIHx8IFtdKSk7XHJcblxyXG4gICAgbGV0IGtiblNlcnZlciA9IHt9O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGtiblNlcnZlciA9IG5ldyBLYm5TZXJ2ZXIoXy5tZXJnZShzZXR0aW5ncywgdGhpcy5nZXRVbmtub3duT3B0aW9ucygpKSk7XHJcbiAgICAgIGF3YWl0IGtiblNlcnZlci5yZWFkeSgpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycikge1xyXG4gICAgICBsZXQgeyBzZXJ2ZXIgfSA9IGtiblNlcnZlcjtcclxuXHJcbiAgICAgIGlmIChzZXJ2ZXIpIHNlcnZlci5sb2coWydmYXRhbCddLCBlcnIpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGQVRBTCcsIGVycik7XHJcblxyXG4gICAgICBrYm5TZXJ2ZXIuY2xvc2UoKTtcclxuICAgICAgcHJvY2Vzcy5leGl0KDEpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBrYm5TZXJ2ZXI7XHJcbiAgfSk7XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/serve/serve.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/cli/serve/serve.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet { isWorker } = require('cluster');\r\nlet { resolve } = require('path');\r\n\r\nlet cwd = process.cwd();\r\nlet src = require('requirefrom')('src');\r\nlet fromRoot = src('utils/fromRoot');\r\n\r\nlet canCluster;\r\ntry {\r\n  require.resolve('../cluster/ClusterManager');\r\n  canCluster = true;\r\n} catch (e) {\r\n  canCluster = false;\r\n}\r\n\r\nlet pathCollector = function () {\r\n  let paths = [];\r\n  return function (path) {\r\n    paths.push(resolve(process.cwd(), path));\r\n    return paths;\r\n  };\r\n};\r\n\r\nlet pluginDirCollector = pathCollector();\r\nlet pluginPathCollector = pathCollector();\r\n\r\nmodule.exports = function (program) {\r\n  let command = program.command('serve');\r\n\r\n  command\r\n  .description('Run the kibana server')\r\n  .collectUnknownOptions()\r\n  .option('-e, --elasticsearch <uri>', 'Elasticsearch instance')\r\n  .option(\r\n    '-c, --config <path>',\r\n    'Path to the config file, can be changed with the CONFIG_PATH environment variable as well',\r\n    process.env.CONFIG_PATH || fromRoot('config/kibana.yml'))\r\n  .option('-p, --port <port>', 'The port to bind to', parseInt)\r\n  .option('-q, --quiet', 'Prevent all logging except errors')\r\n  .option('-Q, --silent', 'Prevent all logging')\r\n  .option('--verbose', 'Turns on verbose logging')\r\n  .option('-H, --host <host>', 'The host to bind to')\r\n  .option('-l, --log-file <path>', 'The file to log to')\r\n  .option(\r\n    '--plugin-dir <path>',\r\n    'A path to scan for plugins, this can be specified multiple ' +\r\n    'times to specify multiple directories',\r\n    pluginDirCollector,\r\n    [\r\n      fromRoot('installedPlugins'),\r\n      fromRoot('src/plugins')\r\n    ]\r\n  )\r\n  .option(\r\n    '--plugin-path <path>',\r\n    'A path to a plugin which should be included by the server, ' +\r\n    'this can be specified multiple times to specify multiple paths',\r\n    pluginPathCollector,\r\n    []\r\n  )\r\n  .option('--plugins <path>', 'an alias for --plugin-dir', pluginDirCollector);\r\n\r\n  if (canCluster) {\r\n    command\r\n    .option('--dev', 'Run the server with development mode defaults')\r\n    .option('--no-watch', 'Prevents automatic restarts of the server in --dev mode');\r\n  }\r\n\r\n  command\r\n  .action(async function (opts) {\r\n    if (canCluster && opts.dev && !isWorker) {\r\n      // stop processing the action and handoff to cluster manager\r\n      let ClusterManager = require('../cluster/ClusterManager');\r\n      new ClusterManager(opts);\r\n      return;\r\n    }\r\n\r\n    let readYamlConfig = require('./read_yaml_config');\r\n    let KbnServer = src('server/KbnServer');\r\n\r\n    let settings = readYamlConfig(opts.config);\r\n\r\n    if (opts.dev) {\r\n      try { _.merge(settings, readYamlConfig(fromRoot('config/kibana.dev.yml'))); }\r\n      catch (e) { null; }\r\n    }\r\n\r\n    let set = _.partial(_.set, settings);\r\n    let get = _.partial(_.get, settings);\r\n\r\n    if (opts.dev) {\r\n      set('env', 'development');\r\n      set('optimize.lazy', true);\r\n    }\r\n\r\n    if (opts.elasticsearch) set('elasticsearch.url', opts.elasticsearch);\r\n    if (opts.port) set('server.port', opts.port);\r\n    if (opts.host) set('server.host', opts.host);\r\n    if (opts.quiet) set('logging.quiet', true);\r\n    if (opts.silent) set('logging.silent', true);\r\n    if (opts.verbose) set('logging.verbose', true);\r\n    if (opts.logFile) set('logging.dest', opts.logFile);\r\n\r\n    set('plugins.scanDirs', _.compact([].concat(\r\n      get('plugins.scanDirs'),\r\n      opts.pluginDir\r\n    )));\r\n\r\n    set('plugins.paths', [].concat(opts.pluginPath || []));\r\n\r\n    let kbnServer = {};\r\n\r\n    try {\r\n      kbnServer = new KbnServer(_.merge(settings, this.getUnknownOptions()));\r\n      await kbnServer.ready();\r\n    }\r\n    catch (err) {\r\n      let { server } = kbnServer;\r\n\r\n      if (server) server.log(['fatal'], err);\r\n      console.error('FATAL', err);\r\n\r\n      kbnServer.close();\r\n      process.exit(1); // eslint-disable-line no-process-exit\r\n    }\r\n\r\n    return kbnServer;\r\n  });\r\n};\r\n"
      ]
    },
    "mtime": 1472703414757
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/utils/fromRoot.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar root = require('./packageJson').__dirname;\n\nvar _require = require('path');\n\nvar join = _require.join;\nvar dirname = _require.dirname;\nvar normalize = _require.normalize;\n\nmodule.exports = _.flow(_.partial(join, root), normalize);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvdXRpbHMvZnJvbVJvb3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFNBQVMsQ0FBQzs7ZUFDWCxPQUFPLENBQUMsTUFBTSxDQUFDOztJQUE1QyxJQUFJLFlBQUosSUFBSTtJQUFFLE9BQU8sWUFBUCxPQUFPO0lBQUUsU0FBUyxZQUFULFNBQVM7O0FBRTlCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3V0aWxzL2Zyb21Sb290LmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxubGV0IHJvb3QgPSByZXF1aXJlKCcuL3BhY2thZ2VKc29uJykuX19kaXJuYW1lO1xyXG52YXIgeyBqb2luLCBkaXJuYW1lLCBub3JtYWxpemUgfSA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gXy5mbG93KF8ucGFydGlhbChqb2luLCByb290KSwgbm9ybWFsaXplKTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/utils/fromRoot.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,IAAI,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,SAAS,CAAC;;eACX,OAAO,CAAC,MAAM,CAAC;;IAA5C,IAAI,YAAJ,IAAI;IAAE,OAAO,YAAP,OAAO;IAAE,SAAS,YAAT,SAAS;;AAE9B,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,SAAS,CAAC,CAAC",
      "file": "D:/backup/oplate/kibana1/src/utils/fromRoot.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet root = require('./packageJson').__dirname;\r\nvar { join, dirname, normalize } = require('path');\r\n\r\nmodule.exports = _.flow(_.partial(join, root), normalize);\r\n"
      ]
    },
    "mtime": 1465716672576
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/plugin.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "pluginCli",
            "program"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "pluginCli",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "program",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = pluginCli;\nvar utils = require('requirefrom')('src/utils');\nvar fromRoot = utils('fromRoot');\nvar settingParser = require('./setting_parser');\nvar installer = require('./plugin_installer');\nvar remover = require('./plugin_remover');\nvar lister = require('./plugin_lister');\nvar pluginLogger = require('./plugin_logger');\n\nfunction pluginCli(program) {\n  function processCommand(command, options) {\n    var settings = undefined;\n    try {\n      settings = settingParser(command).parse();\n    } catch (ex) {\n      //The logger has not yet been initialized.\n      console.error(ex.message);\n      process.exit(64); // eslint-disable-line no-process-exit\n    }\n\n    var logger = pluginLogger(settings);\n\n    switch (settings.action) {\n      case 'install':\n        installer.install(settings, logger);\n        break;\n      case 'remove':\n        remover.remove(settings, logger);\n        break;\n      case 'list':\n        lister.list(settings, logger);\n        break;\n    }\n  }\n\n  program.command('plugin').option('-i, --install <org>/<plugin>/<version>', 'The plugin to install').option('-r, --remove <plugin>', 'The plugin to remove').option('-l, --list', 'List installed plugins').option('-q, --quiet', 'Disable all process messaging except errors').option('-s, --silent', 'Disable all process messaging').option('-u, --url <url>', 'Specify download url').option('-c, --config <path>', 'Path to the config file', fromRoot('config/kibana.yml')).option('-t, --timeout <duration>', 'Length of time before failing; 0 for never fail', settingParser.parseMilliseconds).option('-d, --plugin-dir <path>', 'The path to the directory where plugins are stored', fromRoot('installedPlugins')).description('Maintain Plugins', '\\n  Common examples:\\n    -i username/sample\\n      attempts to download the latest version from the following url:\\n        https://download.elastic.co/username/sample/sample-latest.tar.gz\\n\\n    -i username/sample/v1.1.1\\n      attempts to download version v1.1.1 from the following url:\\n        https://download.elastic.co/username/sample/sample-v1.1.1.tar.gz\\n\\n    -i sample -u http://www.example.com/other_name.tar.gz\\n      attempts to download from the specified url,\\n      and installs the plugin found at that url as \"sample\"\\n').action(processCommand);\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBUXdCLFNBQVM7QUFSakMsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ2xELElBQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNuQyxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUNsRCxJQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUNoRCxJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUM1QyxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUMxQyxJQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQzs7QUFFakMsU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFO0FBQ3pDLFdBQVMsY0FBYyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDeEMsUUFBSSxRQUFRLFlBQUEsQ0FBQztBQUNiLFFBQUk7QUFDRixjQUFRLEdBQUcsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO0tBQzNDLENBQUMsT0FBTyxFQUFFLEVBQUU7O0FBRVgsYUFBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDMUIsYUFBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUNsQjs7QUFFRCxRQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRXRDLFlBQVEsUUFBUSxDQUFDLE1BQU07QUFDckIsV0FBSyxTQUFTO0FBQ1osaUJBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3BDLGNBQU07QUFBQSxBQUNSLFdBQUssUUFBUTtBQUNYLGVBQU8sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ2pDLGNBQU07QUFBQSxBQUNSLFdBQUssTUFBTTtBQUNULGNBQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzlCLGNBQU07QUFBQSxLQUNUO0dBQ0Y7O0FBRUQsU0FBTyxDQUNKLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FDakIsTUFBTSxDQUFDLHdDQUF3QyxFQUFFLHVCQUF1QixDQUFDLENBQ3pFLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUN2RCxNQUFNLENBQUMsWUFBWSxFQUFFLHdCQUF3QixDQUFDLENBQzlDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsNkNBQTZDLENBQUMsQ0FDcEUsTUFBTSxDQUFDLGNBQWMsRUFBRSwrQkFBK0IsQ0FBQyxDQUN2RCxNQUFNLENBQUMsaUJBQWlCLEVBQUUsc0JBQXNCLENBQUMsQ0FDakQsTUFBTSxDQUNMLHFCQUFxQixFQUNyQix5QkFBeUIsRUFDekIsUUFBUSxDQUFDLG1CQUFtQixDQUFDLENBQzlCLENBQ0EsTUFBTSxDQUNMLDBCQUEwQixFQUMxQixpREFBaUQsRUFDakQsYUFBYSxDQUFDLGlCQUFpQixDQUNoQyxDQUNBLE1BQU0sQ0FDTCx5QkFBeUIsRUFDekIsb0RBQW9ELEVBQ3BELFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUM3QixDQUNBLFdBQVcsQ0FDVixrQkFBa0IsZ2lCQWVuQixDQUNBLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQztDQUMzQjs7QUFBQSxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB1dGlscyA9IHJlcXVpcmUoJ3JlcXVpcmVmcm9tJykoJ3NyYy91dGlscycpO1xyXG5jb25zdCBmcm9tUm9vdCA9IHV0aWxzKCdmcm9tUm9vdCcpO1xyXG5jb25zdCBzZXR0aW5nUGFyc2VyID0gcmVxdWlyZSgnLi9zZXR0aW5nX3BhcnNlcicpO1xyXG5jb25zdCBpbnN0YWxsZXIgPSByZXF1aXJlKCcuL3BsdWdpbl9pbnN0YWxsZXInKTtcclxuY29uc3QgcmVtb3ZlciA9IHJlcXVpcmUoJy4vcGx1Z2luX3JlbW92ZXInKTtcclxuY29uc3QgbGlzdGVyID0gcmVxdWlyZSgnLi9wbHVnaW5fbGlzdGVyJyk7XHJcbmNvbnN0IHBsdWdpbkxvZ2dlciA9IHJlcXVpcmUoJy4vcGx1Z2luX2xvZ2dlcicpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGx1Z2luQ2xpKHByb2dyYW0pIHtcclxuICBmdW5jdGlvbiBwcm9jZXNzQ29tbWFuZChjb21tYW5kLCBvcHRpb25zKSB7XHJcbiAgICBsZXQgc2V0dGluZ3M7XHJcbiAgICB0cnkge1xyXG4gICAgICBzZXR0aW5ncyA9IHNldHRpbmdQYXJzZXIoY29tbWFuZCkucGFyc2UoKTtcclxuICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgIC8vVGhlIGxvZ2dlciBoYXMgbm90IHlldCBiZWVuIGluaXRpYWxpemVkLlxyXG4gICAgICBjb25zb2xlLmVycm9yKGV4Lm1lc3NhZ2UpO1xyXG4gICAgICBwcm9jZXNzLmV4aXQoNjQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxvZ2dlciA9IHBsdWdpbkxvZ2dlcihzZXR0aW5ncyk7XHJcblxyXG4gICAgc3dpdGNoIChzZXR0aW5ncy5hY3Rpb24pIHtcclxuICAgICAgY2FzZSAnaW5zdGFsbCc6XHJcbiAgICAgICAgaW5zdGFsbGVyLmluc3RhbGwoc2V0dGluZ3MsIGxvZ2dlcik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3JlbW92ZSc6XHJcbiAgICAgICAgcmVtb3Zlci5yZW1vdmUoc2V0dGluZ3MsIGxvZ2dlcik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xpc3QnOlxyXG4gICAgICAgIGxpc3Rlci5saXN0KHNldHRpbmdzLCBsb2dnZXIpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvZ3JhbVxyXG4gICAgLmNvbW1hbmQoJ3BsdWdpbicpXHJcbiAgICAub3B0aW9uKCctaSwgLS1pbnN0YWxsIDxvcmc+LzxwbHVnaW4+Lzx2ZXJzaW9uPicsICdUaGUgcGx1Z2luIHRvIGluc3RhbGwnKVxyXG4gICAgLm9wdGlvbignLXIsIC0tcmVtb3ZlIDxwbHVnaW4+JywgJ1RoZSBwbHVnaW4gdG8gcmVtb3ZlJylcclxuICAgIC5vcHRpb24oJy1sLCAtLWxpc3QnLCAnTGlzdCBpbnN0YWxsZWQgcGx1Z2lucycpXHJcbiAgICAub3B0aW9uKCctcSwgLS1xdWlldCcsICdEaXNhYmxlIGFsbCBwcm9jZXNzIG1lc3NhZ2luZyBleGNlcHQgZXJyb3JzJylcclxuICAgIC5vcHRpb24oJy1zLCAtLXNpbGVudCcsICdEaXNhYmxlIGFsbCBwcm9jZXNzIG1lc3NhZ2luZycpXHJcbiAgICAub3B0aW9uKCctdSwgLS11cmwgPHVybD4nLCAnU3BlY2lmeSBkb3dubG9hZCB1cmwnKVxyXG4gICAgLm9wdGlvbihcclxuICAgICAgJy1jLCAtLWNvbmZpZyA8cGF0aD4nLFxyXG4gICAgICAnUGF0aCB0byB0aGUgY29uZmlnIGZpbGUnLFxyXG4gICAgICBmcm9tUm9vdCgnY29uZmlnL2tpYmFuYS55bWwnKVxyXG4gICAgKVxyXG4gICAgLm9wdGlvbihcclxuICAgICAgJy10LCAtLXRpbWVvdXQgPGR1cmF0aW9uPicsXHJcbiAgICAgICdMZW5ndGggb2YgdGltZSBiZWZvcmUgZmFpbGluZzsgMCBmb3IgbmV2ZXIgZmFpbCcsXHJcbiAgICAgIHNldHRpbmdQYXJzZXIucGFyc2VNaWxsaXNlY29uZHNcclxuICAgIClcclxuICAgIC5vcHRpb24oXHJcbiAgICAgICctZCwgLS1wbHVnaW4tZGlyIDxwYXRoPicsXHJcbiAgICAgICdUaGUgcGF0aCB0byB0aGUgZGlyZWN0b3J5IHdoZXJlIHBsdWdpbnMgYXJlIHN0b3JlZCcsXHJcbiAgICAgIGZyb21Sb290KCdpbnN0YWxsZWRQbHVnaW5zJylcclxuICAgIClcclxuICAgIC5kZXNjcmlwdGlvbihcclxuICAgICAgJ01haW50YWluIFBsdWdpbnMnLFxyXG5gXHJcbiAgQ29tbW9uIGV4YW1wbGVzOlxyXG4gICAgLWkgdXNlcm5hbWUvc2FtcGxlXHJcbiAgICAgIGF0dGVtcHRzIHRvIGRvd25sb2FkIHRoZSBsYXRlc3QgdmVyc2lvbiBmcm9tIHRoZSBmb2xsb3dpbmcgdXJsOlxyXG4gICAgICAgIGh0dHBzOi8vZG93bmxvYWQuZWxhc3RpYy5jby91c2VybmFtZS9zYW1wbGUvc2FtcGxlLWxhdGVzdC50YXIuZ3pcclxuXHJcbiAgICAtaSB1c2VybmFtZS9zYW1wbGUvdjEuMS4xXHJcbiAgICAgIGF0dGVtcHRzIHRvIGRvd25sb2FkIHZlcnNpb24gdjEuMS4xIGZyb20gdGhlIGZvbGxvd2luZyB1cmw6XHJcbiAgICAgICAgaHR0cHM6Ly9kb3dubG9hZC5lbGFzdGljLmNvL3VzZXJuYW1lL3NhbXBsZS9zYW1wbGUtdjEuMS4xLnRhci5nelxyXG5cclxuICAgIC1pIHNhbXBsZSAtdSBodHRwOi8vd3d3LmV4YW1wbGUuY29tL290aGVyX25hbWUudGFyLmd6XHJcbiAgICAgIGF0dGVtcHRzIHRvIGRvd25sb2FkIGZyb20gdGhlIHNwZWNpZmllZCB1cmwsXHJcbiAgICAgIGFuZCBpbnN0YWxscyB0aGUgcGx1Z2luIGZvdW5kIGF0IHRoYXQgdXJsIGFzIFwic2FtcGxlXCJcclxuYFxyXG4gICAgKVxyXG4gICAgLmFjdGlvbihwcm9jZXNzQ29tbWFuZCk7XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/plugin.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAQwB,SAAS;AARjC,IAAM,KAAK,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,CAAC;AAClD,IAAM,QAAQ,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;AACnC,IAAM,aAAa,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAClD,IAAM,SAAS,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AAChD,IAAM,OAAO,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAC5C,IAAM,MAAM,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AAC1C,IAAM,YAAY,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;;AAEjC,SAAS,SAAS,CAAC,OAAO,EAAE;AACzC,WAAS,cAAc,CAAC,OAAO,EAAE,OAAO,EAAE;AACxC,QAAI,QAAQ,YAAA,CAAC;AACb,QAAI;AACF,cAAQ,GAAG,aAAa,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC;KAC3C,CAAC,OAAO,EAAE,EAAE;;AAEX,aAAO,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;AAC1B,aAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KAClB;;AAED,QAAM,MAAM,GAAG,YAAY,CAAC,QAAQ,CAAC,CAAC;;AAEtC,YAAQ,QAAQ,CAAC,MAAM;AACrB,WAAK,SAAS;AACZ,iBAAS,CAAC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AACpC,cAAM;AAAA,AACR,WAAK,QAAQ;AACX,eAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AACjC,cAAM;AAAA,AACR,WAAK,MAAM;AACT,cAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AAC9B,cAAM;AAAA,KACT;GACF;;AAED,SAAO,CACJ,OAAO,CAAC,QAAQ,CAAC,CACjB,MAAM,CAAC,wCAAwC,EAAE,uBAAuB,CAAC,CACzE,MAAM,CAAC,uBAAuB,EAAE,sBAAsB,CAAC,CACvD,MAAM,CAAC,YAAY,EAAE,wBAAwB,CAAC,CAC9C,MAAM,CAAC,aAAa,EAAE,6CAA6C,CAAC,CACpE,MAAM,CAAC,cAAc,EAAE,+BAA+B,CAAC,CACvD,MAAM,CAAC,iBAAiB,EAAE,sBAAsB,CAAC,CACjD,MAAM,CACL,qBAAqB,EACrB,yBAAyB,EACzB,QAAQ,CAAC,mBAAmB,CAAC,CAC9B,CACA,MAAM,CACL,0BAA0B,EAC1B,iDAAiD,EACjD,aAAa,CAAC,iBAAiB,CAChC,CACA,MAAM,CACL,yBAAyB,EACzB,oDAAoD,EACpD,QAAQ,CAAC,kBAAkB,CAAC,CAC7B,CACA,WAAW,CACV,kBAAkB,giBAenB,CACA,MAAM,CAAC,cAAc,CAAC,CAAC;CAC3B;;AAAA,CAAC",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/plugin.js",
      "sourcesContent": [
        "const utils = require('requirefrom')('src/utils');\r\nconst fromRoot = utils('fromRoot');\r\nconst settingParser = require('./setting_parser');\r\nconst installer = require('./plugin_installer');\r\nconst remover = require('./plugin_remover');\r\nconst lister = require('./plugin_lister');\r\nconst pluginLogger = require('./plugin_logger');\r\n\r\nexport default function pluginCli(program) {\r\n  function processCommand(command, options) {\r\n    let settings;\r\n    try {\r\n      settings = settingParser(command).parse();\r\n    } catch (ex) {\r\n      //The logger has not yet been initialized.\r\n      console.error(ex.message);\r\n      process.exit(64); // eslint-disable-line no-process-exit\r\n    }\r\n\r\n    const logger = pluginLogger(settings);\r\n\r\n    switch (settings.action) {\r\n      case 'install':\r\n        installer.install(settings, logger);\r\n        break;\r\n      case 'remove':\r\n        remover.remove(settings, logger);\r\n        break;\r\n      case 'list':\r\n        lister.list(settings, logger);\r\n        break;\r\n    }\r\n  }\r\n\r\n  program\r\n    .command('plugin')\r\n    .option('-i, --install <org>/<plugin>/<version>', 'The plugin to install')\r\n    .option('-r, --remove <plugin>', 'The plugin to remove')\r\n    .option('-l, --list', 'List installed plugins')\r\n    .option('-q, --quiet', 'Disable all process messaging except errors')\r\n    .option('-s, --silent', 'Disable all process messaging')\r\n    .option('-u, --url <url>', 'Specify download url')\r\n    .option(\r\n      '-c, --config <path>',\r\n      'Path to the config file',\r\n      fromRoot('config/kibana.yml')\r\n    )\r\n    .option(\r\n      '-t, --timeout <duration>',\r\n      'Length of time before failing; 0 for never fail',\r\n      settingParser.parseMilliseconds\r\n    )\r\n    .option(\r\n      '-d, --plugin-dir <path>',\r\n      'The path to the directory where plugins are stored',\r\n      fromRoot('installedPlugins')\r\n    )\r\n    .description(\r\n      'Maintain Plugins',\r\n`\r\n  Common examples:\r\n    -i username/sample\r\n      attempts to download the latest version from the following url:\r\n        https://download.elastic.co/username/sample/sample-latest.tar.gz\r\n\r\n    -i username/sample/v1.1.1\r\n      attempts to download version v1.1.1 from the following url:\r\n        https://download.elastic.co/username/sample/sample-v1.1.1.tar.gz\r\n\r\n    -i sample -u http://www.example.com/other_name.tar.gz\r\n      attempts to download from the specified url,\r\n      and installs the plugin found at that url as \"sample\"\r\n`\r\n    )\r\n    .action(processCommand);\r\n};\r\n"
      ]
    },
    "mtime": 1466137313423
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/setting_parser.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "intersection"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "intersection",
                "local": "intersection"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "createSettingParser",
            "options"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "createSettingParser",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "options",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _Object$keys = require('babel-runtime/core-js/object/keys')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = createSettingParser;\n\nvar _lodash = require('lodash');\n\nvar _require = require('path');\n\nvar resolve = _require.resolve;\n\nvar expiry = require('expiry-js');\n\nfunction createSettingParser(options) {\n  function parseMilliseconds(val) {\n    var result = undefined;\n\n    try {\n      var timeVal = expiry(val);\n      result = timeVal.asMilliseconds();\n    } catch (ex) {\n      result = 0;\n    }\n\n    return result;\n  }\n\n  function generateDownloadUrl(settings) {\n    var version = settings.version || 'latest';\n    var filename = settings['package'] + '-' + version + '.tar.gz';\n\n    return 'https://download.elastic.co/' + settings.organization + '/' + settings['package'] + '/' + filename;\n  }\n\n  function areMultipleOptionsChosen(options, choices) {\n    return (0, _lodash.intersection)(_Object$keys(options), choices).length > 1;\n  }\n\n  function parse() {\n    var parts = undefined;\n    var settings = {\n      timeout: 0,\n      silent: false,\n      quiet: false,\n      urls: []\n    };\n\n    if (options.timeout) {\n      settings.timeout = options.timeout;\n    }\n\n    if (options.parent && options.parent.quiet) {\n      settings.quiet = options.parent.quiet;\n    }\n\n    if (options.silent) {\n      settings.silent = options.silent;\n    }\n\n    if (options.url) {\n      settings.urls.push(options.url);\n    }\n\n    if (options.config) {\n      settings.config = options.config;\n    }\n\n    if (options.install) {\n      settings.action = 'install';\n      parts = options.install.split('/');\n\n      if (options.url) {\n        if (parts.length !== 1) {\n          throw new Error('Invalid install option. When providing a url, please use the format <plugin>.');\n        }\n\n        settings['package'] = parts.shift();\n      } else {\n        if (parts.length < 2 || parts.length > 3) {\n          throw new Error('Invalid install option. Please use the format <org>/<plugin>/<version>.');\n        }\n\n        settings.organization = parts.shift();\n        settings['package'] = parts.shift();\n        settings.version = parts.shift();\n\n        settings.urls.push(generateDownloadUrl(settings));\n      }\n    }\n\n    if (options.remove) {\n      settings.action = 'remove';\n      parts = options.remove.split('/');\n\n      if (parts.length !== 1) {\n        throw new Error('Invalid remove option. Please use the format <plugin>.');\n      }\n      settings['package'] = parts.shift();\n    }\n\n    if (options.list) {\n      settings.action = 'list';\n    }\n\n    if (!settings.action || areMultipleOptionsChosen(options, ['install', 'remove', 'list'])) {\n      throw new Error('Please specify either --install, --remove, or --list.');\n    }\n\n    settings.pluginDir = options.pluginDir;\n    if (settings['package']) {\n      settings.pluginPath = resolve(settings.pluginDir, settings['package']);\n      settings.workingPath = resolve(settings.pluginDir, '.plugin.installing');\n      settings.tempArchiveFile = resolve(settings.workingPath, 'archive.part');\n    }\n\n    return settings;\n  }\n\n  return {\n    parse: parse,\n    parseMilliseconds: parseMilliseconds\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9zZXR0aW5nX3BhcnNlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O3FCQUl3QixtQkFBbUI7O3NCQUZkLFFBQVE7O2VBRmpCLE9BQU8sQ0FBQyxNQUFNLENBQUM7O0lBQTNCLE9BQU8sWUFBUCxPQUFPOztBQUNmLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQzs7QUFHckIsU0FBUyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUU7QUFDbkQsV0FBUyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUU7QUFDOUIsUUFBSSxNQUFNLFlBQUEsQ0FBQzs7QUFFWCxRQUFJO0FBQ0YsVUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFCLFlBQU0sR0FBRyxPQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7S0FDbkMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtBQUNYLFlBQU0sR0FBRyxDQUFDLENBQUM7S0FDWjs7QUFFRCxXQUFPLE1BQU0sQ0FBQztHQUNmOztBQUVELFdBQVMsbUJBQW1CLENBQUMsUUFBUSxFQUFFO0FBQ3JDLFFBQU0sT0FBTyxHQUFHLEFBQUMsUUFBUSxDQUFDLE9BQU8sSUFBSyxRQUFRLENBQUM7QUFDL0MsUUFBTSxRQUFRLEdBQUcsUUFBUSxXQUFRLEdBQUcsR0FBRyxHQUFHLE9BQU8sR0FBRyxTQUFTLENBQUM7O0FBRTlELFdBQU8sOEJBQThCLEdBQUcsUUFBUSxDQUFDLFlBQVksR0FBRyxHQUFHLEdBQUcsUUFBUSxXQUFRLEdBQUcsR0FBRyxHQUFHLFFBQVEsQ0FBQztHQUN6Rzs7QUFFRCxXQUFTLHdCQUF3QixDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDbEQsV0FBTywwQkFBYSxhQUFZLE9BQU8sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7R0FDL0Q7O0FBRUQsV0FBUyxLQUFLLEdBQUc7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Q0FBQztBQUN2QyxRQUFJLFFBQVEsV0FBUSxFQUFFO0FBQ3BCLGNBQVEsQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsUUFBUSxXQUFRLENBQUMsQ0FBQztBQUNwRSxjQUFRLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLG9CQUFvQixDQUFDLENBQUM7QUFDekUsY0FBUSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsQ0FBQztLQUMxRTs7QUFFRCxXQUFPLFFBQVEsQ0FBQztHQUNqQjs7QUFFRCxTQUFPO0FBQ0wsU0FBSyxFQUFFLEtBQUs7QUFDWixxQkFBaUIsRUFBRSxpQkFBaUI7R0FDckMsQ0FBQztDQUNIOztBQUFBLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9jbGkvcGx1Z2luL3NldHRpbmdfcGFyc2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyByZXNvbHZlIH0gPSByZXF1aXJlKCdwYXRoJyk7XHJcbmNvbnN0IGV4cGlyeSA9IHJlcXVpcmUoJ2V4cGlyeS1qcycpO1xyXG5pbXBvcnQgeyBpbnRlcnNlY3Rpb24gfSBmcm9tICdsb2Rhc2gnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlU2V0dGluZ1BhcnNlcihvcHRpb25zKSB7XHJcbiAgZnVuY3Rpb24gcGFyc2VNaWxsaXNlY29uZHModmFsKSB7XHJcbiAgICBsZXQgcmVzdWx0O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCB0aW1lVmFsID0gZXhwaXJ5KHZhbCk7XHJcbiAgICAgIHJlc3VsdCA9IHRpbWVWYWwuYXNNaWxsaXNlY29uZHMoKTtcclxuICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgIHJlc3VsdCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlRG93bmxvYWRVcmwoc2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHZlcnNpb24gPSAoc2V0dGluZ3MudmVyc2lvbikgfHwgJ2xhdGVzdCc7XHJcbiAgICBjb25zdCBmaWxlbmFtZSA9IHNldHRpbmdzLnBhY2thZ2UgKyAnLScgKyB2ZXJzaW9uICsgJy50YXIuZ3onO1xyXG5cclxuICAgIHJldHVybiAnaHR0cHM6Ly9kb3dubG9hZC5lbGFzdGljLmNvLycgKyBzZXR0aW5ncy5vcmdhbml6YXRpb24gKyAnLycgKyBzZXR0aW5ncy5wYWNrYWdlICsgJy8nICsgZmlsZW5hbWU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhcmVNdWx0aXBsZU9wdGlvbnNDaG9zZW4ob3B0aW9ucywgY2hvaWNlcykge1xyXG4gICAgcmV0dXJuIGludGVyc2VjdGlvbihPYmplY3Qua2V5cyhvcHRpb25zKSwgY2hvaWNlcykubGVuZ3RoID4gMTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBhcnNlKCkge1xyXG4gICAgbGV0IHBhcnRzO1xyXG4gICAgbGV0IHNldHRpbmdzID0ge1xyXG4gICAgICB0aW1lb3V0OiAwLFxyXG4gICAgICBzaWxlbnQ6IGZhbHNlLFxyXG4gICAgICBxdWlldDogZmFsc2UsXHJcbiAgICAgIHVybHM6IFtdXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChvcHRpb25zLnRpbWVvdXQpIHtcclxuICAgICAgc2V0dGluZ3MudGltZW91dCA9IG9wdGlvbnMudGltZW91dDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9ucy5wYXJlbnQgJiYgb3B0aW9ucy5wYXJlbnQucXVpZXQpIHtcclxuICAgICAgc2V0dGluZ3MucXVpZXQgPSBvcHRpb25zLnBhcmVudC5xdWlldDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3B0aW9ucy5zaWxlbnQpIHtcclxuICAgICAgc2V0dGluZ3Muc2lsZW50ID0gb3B0aW9ucy5zaWxlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG9wdGlvbnMudXJsKSB7XHJcbiAgICAgIHNldHRpbmdzLnVybHMucHVzaChvcHRpb25zLnVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG9wdGlvbnMuY29uZmlnKSB7XHJcbiAgICAgIHNldHRpbmdzLmNvbmZpZyA9IG9wdGlvbnMuY29uZmlnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRpb25zLmluc3RhbGwpIHtcclxuICAgICAgc2V0dGluZ3MuYWN0aW9uID0gJ2luc3RhbGwnO1xyXG4gICAgICBwYXJ0cyA9IG9wdGlvbnMuaW5zdGFsbC5zcGxpdCgnLycpO1xyXG5cclxuICAgICAgaWYgKG9wdGlvbnMudXJsKSB7XHJcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGluc3RhbGwgb3B0aW9uLiBXaGVuIHByb3ZpZGluZyBhIHVybCwgcGxlYXNlIHVzZSB0aGUgZm9ybWF0IDxwbHVnaW4+LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0dGluZ3MucGFja2FnZSA9IHBhcnRzLnNoaWZ0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDIgfHwgcGFydHMubGVuZ3RoID4gMykge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGluc3RhbGwgb3B0aW9uLiBQbGVhc2UgdXNlIHRoZSBmb3JtYXQgPG9yZz4vPHBsdWdpbj4vPHZlcnNpb24+LicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0dGluZ3Mub3JnYW5pemF0aW9uID0gcGFydHMuc2hpZnQoKTtcclxuICAgICAgICBzZXR0aW5ncy5wYWNrYWdlID0gcGFydHMuc2hpZnQoKTtcclxuICAgICAgICBzZXR0aW5ncy52ZXJzaW9uID0gcGFydHMuc2hpZnQoKTtcclxuXHJcbiAgICAgICAgc2V0dGluZ3MudXJscy5wdXNoKGdlbmVyYXRlRG93bmxvYWRVcmwoc2V0dGluZ3MpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChvcHRpb25zLnJlbW92ZSkge1xyXG4gICAgICBzZXR0aW5ncy5hY3Rpb24gPSAncmVtb3ZlJztcclxuICAgICAgcGFydHMgPSBvcHRpb25zLnJlbW92ZS5zcGxpdCgnLycpO1xyXG5cclxuICAgICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZW1vdmUgb3B0aW9uLiBQbGVhc2UgdXNlIHRoZSBmb3JtYXQgPHBsdWdpbj4uJyk7XHJcbiAgICAgIH1cclxuICAgICAgc2V0dGluZ3MucGFja2FnZSA9IHBhcnRzLnNoaWZ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG9wdGlvbnMubGlzdCkge1xyXG4gICAgICBzZXR0aW5ncy5hY3Rpb24gPSAnbGlzdCc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFzZXR0aW5ncy5hY3Rpb24gfHwgYXJlTXVsdGlwbGVPcHRpb25zQ2hvc2VuKG9wdGlvbnMsIFsgJ2luc3RhbGwnLCAncmVtb3ZlJywgJ2xpc3QnIF0pKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHNwZWNpZnkgZWl0aGVyIC0taW5zdGFsbCwgLS1yZW1vdmUsIG9yIC0tbGlzdC4nKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR0aW5ncy5wbHVnaW5EaXIgPSBvcHRpb25zLnBsdWdpbkRpcjtcclxuICAgIGlmIChzZXR0aW5ncy5wYWNrYWdlKSB7XHJcbiAgICAgIHNldHRpbmdzLnBsdWdpblBhdGggPSByZXNvbHZlKHNldHRpbmdzLnBsdWdpbkRpciwgc2V0dGluZ3MucGFja2FnZSk7XHJcbiAgICAgIHNldHRpbmdzLndvcmtpbmdQYXRoID0gcmVzb2x2ZShzZXR0aW5ncy5wbHVnaW5EaXIsICcucGx1Z2luLmluc3RhbGxpbmcnKTtcclxuICAgICAgc2V0dGluZ3MudGVtcEFyY2hpdmVGaWxlID0gcmVzb2x2ZShzZXR0aW5ncy53b3JraW5nUGF0aCwgJ2FyY2hpdmUucGFydCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzZXR0aW5ncztcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBwYXJzZTogcGFyc2UsXHJcbiAgICBwYXJzZU1pbGxpc2Vjb25kczogcGFyc2VNaWxsaXNlY29uZHNcclxuICB9O1xyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/setting_parser.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/setting_parser.js",
      "sourcesContent": [
        "const { resolve } = require('path');\r\nconst expiry = require('expiry-js');\r\nimport { intersection } from 'lodash';\r\n\r\nexport default function createSettingParser(options) {\r\n  function parseMilliseconds(val) {\r\n    let result;\r\n\r\n    try {\r\n      let timeVal = expiry(val);\r\n      result = timeVal.asMilliseconds();\r\n    } catch (ex) {\r\n      result = 0;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  function generateDownloadUrl(settings) {\r\n    const version = (settings.version) || 'latest';\r\n    const filename = settings.package + '-' + version + '.tar.gz';\r\n\r\n    return 'https://download.elastic.co/' + settings.organization + '/' + settings.package + '/' + filename;\r\n  }\r\n\r\n  function areMultipleOptionsChosen(options, choices) {\r\n    return intersection(Object.keys(options), choices).length > 1;\r\n  }\r\n\r\n  function parse() {\r\n    let parts;\r\n    let settings = {\r\n      timeout: 0,\r\n      silent: false,\r\n      quiet: false,\r\n      urls: []\r\n    };\r\n\r\n    if (options.timeout) {\r\n      settings.timeout = options.timeout;\r\n    }\r\n\r\n    if (options.parent && options.parent.quiet) {\r\n      settings.quiet = options.parent.quiet;\r\n    }\r\n\r\n    if (options.silent) {\r\n      settings.silent = options.silent;\r\n    }\r\n\r\n    if (options.url) {\r\n      settings.urls.push(options.url);\r\n    }\r\n\r\n    if (options.config) {\r\n      settings.config = options.config;\r\n    }\r\n\r\n    if (options.install) {\r\n      settings.action = 'install';\r\n      parts = options.install.split('/');\r\n\r\n      if (options.url) {\r\n        if (parts.length !== 1) {\r\n          throw new Error('Invalid install option. When providing a url, please use the format <plugin>.');\r\n        }\r\n\r\n        settings.package = parts.shift();\r\n      } else {\r\n        if (parts.length < 2 || parts.length > 3) {\r\n          throw new Error('Invalid install option. Please use the format <org>/<plugin>/<version>.');\r\n        }\r\n\r\n        settings.organization = parts.shift();\r\n        settings.package = parts.shift();\r\n        settings.version = parts.shift();\r\n\r\n        settings.urls.push(generateDownloadUrl(settings));\r\n      }\r\n    }\r\n\r\n    if (options.remove) {\r\n      settings.action = 'remove';\r\n      parts = options.remove.split('/');\r\n\r\n      if (parts.length !== 1) {\r\n        throw new Error('Invalid remove option. Please use the format <plugin>.');\r\n      }\r\n      settings.package = parts.shift();\r\n    }\r\n\r\n    if (options.list) {\r\n      settings.action = 'list';\r\n    }\r\n\r\n    if (!settings.action || areMultipleOptionsChosen(options, [ 'install', 'remove', 'list' ])) {\r\n      throw new Error('Please specify either --install, --remove, or --list.');\r\n    }\r\n\r\n    settings.pluginDir = options.pluginDir;\r\n    if (settings.package) {\r\n      settings.pluginPath = resolve(settings.pluginDir, settings.package);\r\n      settings.workingPath = resolve(settings.pluginDir, '.plugin.installing');\r\n      settings.tempArchiveFile = resolve(settings.workingPath, 'archive.part');\r\n    }\r\n\r\n    return settings;\r\n  }\r\n\r\n  return {\r\n    parse: parse,\r\n    parseMilliseconds: parseMilliseconds\r\n  };\r\n};\r\n"
      ]
    },
    "mtime": 1465716670029
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/plugin_installer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar _ = require('lodash');\nvar utils = require('requirefrom')('src/utils');\nvar fromRoot = utils('fromRoot');\nvar pluginDownloader = require('./plugin_downloader');\nvar pluginCleaner = require('./plugin_cleaner');\nvar pluginExtractor = require('./plugin_extractor');\nvar KbnServer = require('../../server/KbnServer');\nvar readYamlConfig = require('../serve/read_yaml_config');\n\nvar _require = require('fs');\n\nvar statSync = _require.statSync;\nvar renameSync = _require.renameSync;\n\nvar Promise = require('bluebird');\nvar rimrafSync = require('rimraf').sync;\nvar mkdirp = Promise.promisify(require('mkdirp'));\n\nexports['default'] = {\n  install: install\n};\n\nfunction checkForExistingInstall(settings, logger) {\n  try {\n    statSync(settings.pluginPath);\n\n    logger.error('Plugin ' + settings['package'] + ' already exists, please remove before installing a new version');\n    process.exit(70); // eslint-disable-line no-process-exit\n  } catch (e) {\n    if (e.code !== 'ENOENT') throw e;\n  }\n}\n\nfunction rebuildKibanaCache(settings, logger) {\n  var serverConfig, kbnServer;\n  return _regeneratorRuntime.async(function rebuildKibanaCache$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        logger.log('Optimizing and caching browser bundles...');\n        serverConfig = _.merge(readYamlConfig(settings.config), {\n          env: 'production',\n          logging: {\n            silent: settings.silent,\n            quiet: !settings.silent,\n            verbose: false\n          },\n          optimize: {\n            useBundleCache: false\n          },\n          server: {\n            autoListen: false\n          },\n          plugins: {\n            initialize: false,\n            scanDirs: [settings.pluginDir, fromRoot('src/plugins')]\n          }\n        });\n        kbnServer = new KbnServer(serverConfig);\n        context$1$0.next = 5;\n        return _regeneratorRuntime.awrap(kbnServer.ready());\n\n      case 5:\n        context$1$0.next = 7;\n        return _regeneratorRuntime.awrap(kbnServer.close());\n\n      case 7:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\nfunction install(settings, logger) {\n  var cleaner, downloader, _ref, archiveType;\n\n  return _regeneratorRuntime.async(function install$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        logger.log('Installing ' + settings['package']);\n\n        cleaner = pluginCleaner(settings, logger);\n        context$1$0.prev = 2;\n\n        checkForExistingInstall(settings, logger);\n\n        context$1$0.next = 6;\n        return _regeneratorRuntime.awrap(cleaner.cleanPrevious());\n\n      case 6:\n        context$1$0.next = 8;\n        return _regeneratorRuntime.awrap(mkdirp(settings.workingPath));\n\n      case 8:\n        downloader = pluginDownloader(settings, logger);\n        context$1$0.next = 11;\n        return _regeneratorRuntime.awrap(downloader.download());\n\n      case 11:\n        _ref = context$1$0.sent;\n        archiveType = _ref.archiveType;\n        context$1$0.next = 15;\n        return _regeneratorRuntime.awrap(pluginExtractor(settings, logger, archiveType));\n\n      case 15:\n\n        rimrafSync(settings.tempArchiveFile);\n\n        renameSync(settings.workingPath, settings.pluginPath);\n\n        context$1$0.next = 19;\n        return _regeneratorRuntime.awrap(rebuildKibanaCache(settings, logger));\n\n      case 19:\n\n        logger.log('Plugin installation complete');\n        context$1$0.next = 27;\n        break;\n\n      case 22:\n        context$1$0.prev = 22;\n        context$1$0.t0 = context$1$0['catch'](2);\n\n        logger.error('Plugin installation was unsuccessful due to error \"' + context$1$0.t0.message + '\"');\n        cleaner.cleanError();\n        process.exit(70); // eslint-disable-line no-process-exit\n\n      case 27:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this, [[2, 22]]);\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW5faW5zdGFsbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDNUIsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ2xELElBQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNuQyxJQUFNLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ3hELElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ2xELElBQU0sZUFBZSxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3RELElBQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ3BELElBQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDOztlQUMzQixPQUFPLENBQUMsSUFBSSxDQUFDOztJQUF0QyxRQUFRLFlBQVIsUUFBUTtJQUFFLFVBQVUsWUFBVixVQUFVOztBQUM1QixJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDcEMsSUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUMxQyxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDOztxQkFFckM7QUFDYixTQUFPLEVBQUUsT0FBTztDQUNqQjs7QUFFRCxTQUFTLHVCQUF1QixDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUU7QUFDakQsTUFBSTtBQUNGLFlBQVEsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBRTlCLFVBQU0sQ0FBQyxLQUFLLGFBQVcsUUFBUSxXQUFRLG9FQUFpRSxDQUFDO0FBQ3pHLFdBQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7R0FDbEIsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLFFBQUksQ0FBQyxDQUFDLElBQUksS0FBSyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7R0FDbEM7Q0FDRjs7QUFFRCxTQUFlLGtCQUFrQixDQUFDLFFBQVEsRUFBRSxNQUFNO01BRTFDLFlBQVksRUFzQlosU0FBUzs7OztBQXZCZixjQUFNLENBQUMsR0FBRyxDQUFDLDJDQUEyQyxDQUFDLENBQUM7QUFDbEQsb0JBQVksR0FBRyxDQUFDLENBQUMsS0FBSyxDQUMxQixjQUFjLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUMvQjtBQUNFLGFBQUcsRUFBRSxZQUFZO0FBQ2pCLGlCQUFPLEVBQUU7QUFDUCxrQkFBTSxFQUFFLFFBQVEsQ0FBQyxNQUFNO0FBQ3ZCLGlCQUFLLEVBQUUsQ0FBQyxRQUFRLENBQUMsTUFBTTtBQUN2QixtQkFBTyxFQUFFLEtBQUs7V0FDZjtBQUNELGtCQUFRLEVBQUU7QUFDUiwwQkFBYyxFQUFFLEtBQUs7V0FDdEI7QUFDRCxnQkFBTSxFQUFFO0FBQ04sc0JBQVUsRUFBRSxLQUFLO1dBQ2xCO0FBQ0QsaUJBQU8sRUFBRTtBQUNQLHNCQUFVLEVBQUUsS0FBSztBQUNqQixvQkFBUSxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7V0FDeEQ7U0FDRixDQUNGO0FBRUssaUJBQVMsR0FBRyxJQUFJLFNBQVMsQ0FBQyxZQUFZLENBQUM7O3lDQUN2QyxTQUFTLENBQUMsS0FBSyxFQUFFOzs7O3lDQUNqQixTQUFTLENBQUMsS0FBSyxFQUFFOzs7Ozs7O0NBQ3hCOztBQUVELFNBQWUsT0FBTyxDQUFDLFFBQVEsRUFBRSxNQUFNO01BRy9CLE9BQU8sRUFTTCxVQUFVLFFBQ1IsV0FBVzs7Ozs7QUFackIsY0FBTSxDQUFDLEdBQUcsaUJBQWUsUUFBUSxXQUFRLENBQUcsQ0FBQzs7QUFFdkMsZUFBTyxHQUFHLGFBQWEsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDOzs7QUFHN0MsK0JBQXVCLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDOzs7eUNBRXBDLE9BQU8sQ0FBQyxhQUFhLEVBQUU7Ozs7eUNBRXZCLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDOzs7QUFFNUIsa0JBQVUsR0FBRyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDOzt5Q0FDdkIsVUFBVSxDQUFDLFFBQVEsRUFBRTs7OztBQUEzQyxtQkFBVyxRQUFYLFdBQVc7O3lDQUViLGVBQWUsQ0FBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQzs7OztBQUVyRCxrQkFBVSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFckMsa0JBQVUsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQzs7O3lDQUVoRCxrQkFBa0IsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDOzs7O0FBRTFDLGNBQU0sQ0FBQyxHQUFHLENBQUMsOEJBQThCLENBQUMsQ0FBQzs7Ozs7Ozs7QUFFM0MsY0FBTSxDQUFDLEtBQUsseURBQXVELGVBQUksT0FBTyxPQUFJLENBQUM7QUFDbkYsZUFBTyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3JCLGVBQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Ozs7Ozs7Q0FFcEIiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9jbGkvcGx1Z2luL3BsdWdpbl9pbnN0YWxsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmNvbnN0IHV0aWxzID0gcmVxdWlyZSgncmVxdWlyZWZyb20nKSgnc3JjL3V0aWxzJyk7XHJcbmNvbnN0IGZyb21Sb290ID0gdXRpbHMoJ2Zyb21Sb290Jyk7XHJcbmNvbnN0IHBsdWdpbkRvd25sb2FkZXIgPSByZXF1aXJlKCcuL3BsdWdpbl9kb3dubG9hZGVyJyk7XHJcbmNvbnN0IHBsdWdpbkNsZWFuZXIgPSByZXF1aXJlKCcuL3BsdWdpbl9jbGVhbmVyJyk7XHJcbmNvbnN0IHBsdWdpbkV4dHJhY3RvciA9IHJlcXVpcmUoJy4vcGx1Z2luX2V4dHJhY3RvcicpO1xyXG5jb25zdCBLYm5TZXJ2ZXIgPSByZXF1aXJlKCcuLi8uLi9zZXJ2ZXIvS2JuU2VydmVyJyk7XHJcbmNvbnN0IHJlYWRZYW1sQ29uZmlnID0gcmVxdWlyZSgnLi4vc2VydmUvcmVhZF95YW1sX2NvbmZpZycpO1xyXG5jb25zdCB7IHN0YXRTeW5jLCByZW5hbWVTeW5jIH0gPSByZXF1aXJlKCdmcycpO1xyXG5jb25zdCBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcclxuY29uc3QgcmltcmFmU3luYyA9IHJlcXVpcmUoJ3JpbXJhZicpLnN5bmM7XHJcbmNvbnN0IG1rZGlycCA9IFByb21pc2UucHJvbWlzaWZ5KHJlcXVpcmUoJ21rZGlycCcpKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBpbnN0YWxsOiBpbnN0YWxsXHJcbn07XHJcblxyXG5mdW5jdGlvbiBjaGVja0ZvckV4aXN0aW5nSW5zdGFsbChzZXR0aW5ncywgbG9nZ2VyKSB7XHJcbiAgdHJ5IHtcclxuICAgIHN0YXRTeW5jKHNldHRpbmdzLnBsdWdpblBhdGgpO1xyXG5cclxuICAgIGxvZ2dlci5lcnJvcihgUGx1Z2luICR7c2V0dGluZ3MucGFja2FnZX0gYWxyZWFkeSBleGlzdHMsIHBsZWFzZSByZW1vdmUgYmVmb3JlIGluc3RhbGxpbmcgYSBuZXcgdmVyc2lvbmApO1xyXG4gICAgcHJvY2Vzcy5leGl0KDcwKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm9jZXNzLWV4aXRcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBpZiAoZS5jb2RlICE9PSAnRU5PRU5UJykgdGhyb3cgZTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYnVpbGRLaWJhbmFDYWNoZShzZXR0aW5ncywgbG9nZ2VyKSB7XHJcbiAgbG9nZ2VyLmxvZygnT3B0aW1pemluZyBhbmQgY2FjaGluZyBicm93c2VyIGJ1bmRsZXMuLi4nKTtcclxuICBjb25zdCBzZXJ2ZXJDb25maWcgPSBfLm1lcmdlKFxyXG4gICAgcmVhZFlhbWxDb25maWcoc2V0dGluZ3MuY29uZmlnKSxcclxuICAgIHtcclxuICAgICAgZW52OiAncHJvZHVjdGlvbicsXHJcbiAgICAgIGxvZ2dpbmc6IHtcclxuICAgICAgICBzaWxlbnQ6IHNldHRpbmdzLnNpbGVudCxcclxuICAgICAgICBxdWlldDogIXNldHRpbmdzLnNpbGVudCxcclxuICAgICAgICB2ZXJib3NlOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBvcHRpbWl6ZToge1xyXG4gICAgICAgIHVzZUJ1bmRsZUNhY2hlOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBzZXJ2ZXI6IHtcclxuICAgICAgICBhdXRvTGlzdGVuOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBwbHVnaW5zOiB7XHJcbiAgICAgICAgaW5pdGlhbGl6ZTogZmFsc2UsXHJcbiAgICAgICAgc2NhbkRpcnM6IFtzZXR0aW5ncy5wbHVnaW5EaXIsIGZyb21Sb290KCdzcmMvcGx1Z2lucycpXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgKTtcclxuXHJcbiAgY29uc3Qga2JuU2VydmVyID0gbmV3IEtiblNlcnZlcihzZXJ2ZXJDb25maWcpO1xyXG4gIGF3YWl0IGtiblNlcnZlci5yZWFkeSgpO1xyXG4gIGF3YWl0IGtiblNlcnZlci5jbG9zZSgpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBpbnN0YWxsKHNldHRpbmdzLCBsb2dnZXIpIHtcclxuICBsb2dnZXIubG9nKGBJbnN0YWxsaW5nICR7c2V0dGluZ3MucGFja2FnZX1gKTtcclxuXHJcbiAgY29uc3QgY2xlYW5lciA9IHBsdWdpbkNsZWFuZXIoc2V0dGluZ3MsIGxvZ2dlcik7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjaGVja0ZvckV4aXN0aW5nSW5zdGFsbChzZXR0aW5ncywgbG9nZ2VyKTtcclxuXHJcbiAgICBhd2FpdCBjbGVhbmVyLmNsZWFuUHJldmlvdXMoKTtcclxuXHJcbiAgICBhd2FpdCBta2RpcnAoc2V0dGluZ3Mud29ya2luZ1BhdGgpO1xyXG5cclxuICAgIGNvbnN0IGRvd25sb2FkZXIgPSBwbHVnaW5Eb3dubG9hZGVyKHNldHRpbmdzLCBsb2dnZXIpO1xyXG4gICAgY29uc3QgeyBhcmNoaXZlVHlwZSB9ID0gYXdhaXQgZG93bmxvYWRlci5kb3dubG9hZCgpO1xyXG5cclxuICAgIGF3YWl0IHBsdWdpbkV4dHJhY3RvciAoc2V0dGluZ3MsIGxvZ2dlciwgYXJjaGl2ZVR5cGUpO1xyXG5cclxuICAgIHJpbXJhZlN5bmMoc2V0dGluZ3MudGVtcEFyY2hpdmVGaWxlKTtcclxuXHJcbiAgICByZW5hbWVTeW5jKHNldHRpbmdzLndvcmtpbmdQYXRoLCBzZXR0aW5ncy5wbHVnaW5QYXRoKTtcclxuXHJcbiAgICBhd2FpdCByZWJ1aWxkS2liYW5hQ2FjaGUoc2V0dGluZ3MsIGxvZ2dlcik7XHJcblxyXG4gICAgbG9nZ2VyLmxvZygnUGx1Z2luIGluc3RhbGxhdGlvbiBjb21wbGV0ZScpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgbG9nZ2VyLmVycm9yKGBQbHVnaW4gaW5zdGFsbGF0aW9uIHdhcyB1bnN1Y2Nlc3NmdWwgZHVlIHRvIGVycm9yIFwiJHtlcnIubWVzc2FnZX1cImApO1xyXG4gICAgY2xlYW5lci5jbGVhbkVycm9yKCk7XHJcbiAgICBwcm9jZXNzLmV4aXQoNzApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxyXG4gIH1cclxufVxyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/plugin_installer.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/plugin_installer.js",
      "sourcesContent": [
        "const _ = require('lodash');\r\nconst utils = require('requirefrom')('src/utils');\r\nconst fromRoot = utils('fromRoot');\r\nconst pluginDownloader = require('./plugin_downloader');\r\nconst pluginCleaner = require('./plugin_cleaner');\r\nconst pluginExtractor = require('./plugin_extractor');\r\nconst KbnServer = require('../../server/KbnServer');\r\nconst readYamlConfig = require('../serve/read_yaml_config');\r\nconst { statSync, renameSync } = require('fs');\r\nconst Promise = require('bluebird');\r\nconst rimrafSync = require('rimraf').sync;\r\nconst mkdirp = Promise.promisify(require('mkdirp'));\r\n\r\nexport default {\r\n  install: install\r\n};\r\n\r\nfunction checkForExistingInstall(settings, logger) {\r\n  try {\r\n    statSync(settings.pluginPath);\r\n\r\n    logger.error(`Plugin ${settings.package} already exists, please remove before installing a new version`);\r\n    process.exit(70); // eslint-disable-line no-process-exit\r\n  } catch (e) {\r\n    if (e.code !== 'ENOENT') throw e;\r\n  }\r\n}\r\n\r\nasync function rebuildKibanaCache(settings, logger) {\r\n  logger.log('Optimizing and caching browser bundles...');\r\n  const serverConfig = _.merge(\r\n    readYamlConfig(settings.config),\r\n    {\r\n      env: 'production',\r\n      logging: {\r\n        silent: settings.silent,\r\n        quiet: !settings.silent,\r\n        verbose: false\r\n      },\r\n      optimize: {\r\n        useBundleCache: false\r\n      },\r\n      server: {\r\n        autoListen: false\r\n      },\r\n      plugins: {\r\n        initialize: false,\r\n        scanDirs: [settings.pluginDir, fromRoot('src/plugins')]\r\n      }\r\n    }\r\n  );\r\n\r\n  const kbnServer = new KbnServer(serverConfig);\r\n  await kbnServer.ready();\r\n  await kbnServer.close();\r\n}\r\n\r\nasync function install(settings, logger) {\r\n  logger.log(`Installing ${settings.package}`);\r\n\r\n  const cleaner = pluginCleaner(settings, logger);\r\n\r\n  try {\r\n    checkForExistingInstall(settings, logger);\r\n\r\n    await cleaner.cleanPrevious();\r\n\r\n    await mkdirp(settings.workingPath);\r\n\r\n    const downloader = pluginDownloader(settings, logger);\r\n    const { archiveType } = await downloader.download();\r\n\r\n    await pluginExtractor (settings, logger, archiveType);\r\n\r\n    rimrafSync(settings.tempArchiveFile);\r\n\r\n    renameSync(settings.workingPath, settings.pluginPath);\r\n\r\n    await rebuildKibanaCache(settings, logger);\r\n\r\n    logger.log('Plugin installation complete');\r\n  } catch (err) {\r\n    logger.error(`Plugin installation was unsuccessful due to error \"${err.message}\"`);\r\n    cleaner.cleanError();\r\n    process.exit(70); // eslint-disable-line no-process-exit\r\n  }\r\n}\r\n"
      ]
    },
    "mtime": 1465716670029
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/plugin_downloader.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "createPluginDownloader",
            "settings",
            "logger"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "createPluginDownloader",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = createPluginDownloader;\nvar _ = require('lodash');\nvar urlParse = require('url').parse;\nvar downloadHttpFile = require('./downloaders/http');\nvar downloadLocalFile = require('./downloaders/file');\n\nfunction createPluginDownloader(settings, logger) {\n  var archiveType = undefined;\n  var sourceType = undefined;\n\n  //Attempts to download each url in turn until one is successful\n  function download() {\n    var urls = settings.urls.slice(0);\n\n    function tryNext() {\n      var sourceUrl = urls.shift();\n      if (!sourceUrl) {\n        throw new Error('No valid url specified.');\n      }\n\n      logger.log('Attempting to transfer from ' + sourceUrl);\n\n      return downloadSingle(sourceUrl)['catch'](function (err) {\n        if (err.message === 'ENOTFOUND') {\n          return tryNext();\n        }\n        throw err;\n      });\n    }\n\n    return tryNext();\n  }\n\n  function downloadSingle(sourceUrl) {\n    var urlInfo = urlParse(sourceUrl);\n    var downloadPromise = undefined;\n\n    if (/^file/.test(urlInfo.protocol)) {\n      downloadPromise = downloadLocalFile(logger, urlInfo.path, settings.tempArchiveFile);\n    } else {\n      downloadPromise = downloadHttpFile(logger, sourceUrl, settings.tempArchiveFile, settings.timeout);\n    }\n\n    return downloadPromise;\n  }\n\n  return {\n    download: download,\n    _downloadSingle: downloadSingle\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW5fZG93bmxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFLd0Isc0JBQXNCO0FBTDlDLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM1QixJQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDO0FBQ3RDLElBQU0sZ0JBQWdCLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDdkQsSUFBTSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQzs7QUFFekMsU0FBUyxzQkFBc0IsQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFO0FBQy9ELE1BQUksV0FBVyxZQUFBLENBQUM7QUFDaEIsTUFBSSxVQUFVLFlBQUEsQ0FBQzs7O0FBR2YsV0FBUyxRQUFRLEdBQUc7QUFDbEIsUUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRXBDLGFBQVMsT0FBTyxHQUFHO0FBQ2pCLFVBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUMvQixVQUFJLENBQUMsU0FBUyxFQUFFO0FBQ2QsY0FBTSxJQUFJLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO09BQzVDOztBQUVELFlBQU0sQ0FBQyxHQUFHLGtDQUFnQyxTQUFTLENBQUcsQ0FBQzs7QUFFdkQsYUFBTyxjQUFjLENBQUMsU0FBUyxDQUFDLFNBQzFCLENBQUMsVUFBQyxHQUFHLEVBQUs7QUFDZCxZQUFJLEdBQUcsQ0FBQyxPQUFPLEtBQUssV0FBVyxFQUFFO0FBQy9CLGlCQUFPLE9BQU8sRUFBRSxDQUFDO1NBQ2xCO0FBQ0QsY0FBTyxHQUFHLENBQUU7T0FDYixDQUFDLENBQUM7S0FDSjs7QUFFRCxXQUFPLE9BQU8sRUFBRSxDQUFDO0dBQ2xCOztBQUVELFdBQVMsY0FBYyxDQUFDLFNBQVMsRUFBRTtBQUNqQyxRQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDcEMsUUFBSSxlQUFlLFlBQUEsQ0FBQzs7QUFFcEIsUUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUNsQyxxQkFBZSxHQUFHLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQztLQUNyRixNQUFNO0FBQ0wscUJBQWUsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsQ0FBQyxlQUFlLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0tBQ25HOztBQUVELFdBQU8sZUFBZSxDQUFDO0dBQ3hCOztBQUVELFNBQU87QUFDTCxZQUFRLEVBQUUsUUFBUTtBQUNsQixtQkFBZSxFQUFFLGNBQWM7R0FDaEMsQ0FBQztDQUNIOztBQUFBLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9jbGkvcGx1Z2luL3BsdWdpbl9kb3dubG9hZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5jb25zdCB1cmxQYXJzZSA9IHJlcXVpcmUoJ3VybCcpLnBhcnNlO1xyXG5jb25zdCBkb3dubG9hZEh0dHBGaWxlID0gcmVxdWlyZSgnLi9kb3dubG9hZGVycy9odHRwJyk7XHJcbmNvbnN0IGRvd25sb2FkTG9jYWxGaWxlID0gcmVxdWlyZSgnLi9kb3dubG9hZGVycy9maWxlJyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVQbHVnaW5Eb3dubG9hZGVyKHNldHRpbmdzLCBsb2dnZXIpIHtcclxuICBsZXQgYXJjaGl2ZVR5cGU7XHJcbiAgbGV0IHNvdXJjZVR5cGU7XHJcblxyXG4gIC8vQXR0ZW1wdHMgdG8gZG93bmxvYWQgZWFjaCB1cmwgaW4gdHVybiB1bnRpbCBvbmUgaXMgc3VjY2Vzc2Z1bFxyXG4gIGZ1bmN0aW9uIGRvd25sb2FkKCkge1xyXG4gICAgY29uc3QgdXJscyA9IHNldHRpbmdzLnVybHMuc2xpY2UoMCk7XHJcblxyXG4gICAgZnVuY3Rpb24gdHJ5TmV4dCgpIHtcclxuICAgICAgY29uc3Qgc291cmNlVXJsID0gdXJscy5zaGlmdCgpO1xyXG4gICAgICBpZiAoIXNvdXJjZVVybCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdmFsaWQgdXJsIHNwZWNpZmllZC4nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbG9nZ2VyLmxvZyhgQXR0ZW1wdGluZyB0byB0cmFuc2ZlciBmcm9tICR7c291cmNlVXJsfWApO1xyXG5cclxuICAgICAgcmV0dXJuIGRvd25sb2FkU2luZ2xlKHNvdXJjZVVybClcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBpZiAoZXJyLm1lc3NhZ2UgPT09ICdFTk9URk9VTkQnKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ5TmV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyAoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRyeU5leHQoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRvd25sb2FkU2luZ2xlKHNvdXJjZVVybCkge1xyXG4gICAgY29uc3QgdXJsSW5mbyA9IHVybFBhcnNlKHNvdXJjZVVybCk7XHJcbiAgICBsZXQgZG93bmxvYWRQcm9taXNlO1xyXG5cclxuICAgIGlmICgvXmZpbGUvLnRlc3QodXJsSW5mby5wcm90b2NvbCkpIHtcclxuICAgICAgZG93bmxvYWRQcm9taXNlID0gZG93bmxvYWRMb2NhbEZpbGUobG9nZ2VyLCB1cmxJbmZvLnBhdGgsIHNldHRpbmdzLnRlbXBBcmNoaXZlRmlsZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkb3dubG9hZFByb21pc2UgPSBkb3dubG9hZEh0dHBGaWxlKGxvZ2dlciwgc291cmNlVXJsLCBzZXR0aW5ncy50ZW1wQXJjaGl2ZUZpbGUsIHNldHRpbmdzLnRpbWVvdXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkb3dubG9hZFByb21pc2U7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZG93bmxvYWQ6IGRvd25sb2FkLFxyXG4gICAgX2Rvd25sb2FkU2luZ2xlOiBkb3dubG9hZFNpbmdsZVxyXG4gIH07XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/plugin_downloader.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAKwB,sBAAsB;AAL9C,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAM,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC;AACtC,IAAM,gBAAgB,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AACvD,IAAM,iBAAiB,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;;AAEzC,SAAS,sBAAsB,CAAC,QAAQ,EAAE,MAAM,EAAE;AAC/D,MAAI,WAAW,YAAA,CAAC;AAChB,MAAI,UAAU,YAAA,CAAC;;;AAGf,WAAS,QAAQ,GAAG;AAClB,QAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;AAEpC,aAAS,OAAO,GAAG;AACjB,UAAM,SAAS,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AAC/B,UAAI,CAAC,SAAS,EAAE;AACd,cAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;OAC5C;;AAED,YAAM,CAAC,GAAG,kCAAgC,SAAS,CAAG,CAAC;;AAEvD,aAAO,cAAc,CAAC,SAAS,CAAC,SAC1B,CAAC,UAAC,GAAG,EAAK;AACd,YAAI,GAAG,CAAC,OAAO,KAAK,WAAW,EAAE;AAC/B,iBAAO,OAAO,EAAE,CAAC;SAClB;AACD,cAAO,GAAG,CAAE;OACb,CAAC,CAAC;KACJ;;AAED,WAAO,OAAO,EAAE,CAAC;GAClB;;AAED,WAAS,cAAc,CAAC,SAAS,EAAE;AACjC,QAAM,OAAO,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC;AACpC,QAAI,eAAe,YAAA,CAAC;;AAEpB,QAAI,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAClC,qBAAe,GAAG,iBAAiB,CAAC,MAAM,EAAE,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,eAAe,CAAC,CAAC;KACrF,MAAM;AACL,qBAAe,GAAG,gBAAgB,CAAC,MAAM,EAAE,SAAS,EAAE,QAAQ,CAAC,eAAe,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC;KACnG;;AAED,WAAO,eAAe,CAAC;GACxB;;AAED,SAAO;AACL,YAAQ,EAAE,QAAQ;AAClB,mBAAe,EAAE,cAAc;GAChC,CAAC;CACH;;AAAA,CAAC",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/plugin_downloader.js",
      "sourcesContent": [
        "const _ = require('lodash');\r\nconst urlParse = require('url').parse;\r\nconst downloadHttpFile = require('./downloaders/http');\r\nconst downloadLocalFile = require('./downloaders/file');\r\n\r\nexport default function createPluginDownloader(settings, logger) {\r\n  let archiveType;\r\n  let sourceType;\r\n\r\n  //Attempts to download each url in turn until one is successful\r\n  function download() {\r\n    const urls = settings.urls.slice(0);\r\n\r\n    function tryNext() {\r\n      const sourceUrl = urls.shift();\r\n      if (!sourceUrl) {\r\n        throw new Error('No valid url specified.');\r\n      }\r\n\r\n      logger.log(`Attempting to transfer from ${sourceUrl}`);\r\n\r\n      return downloadSingle(sourceUrl)\r\n      .catch((err) => {\r\n        if (err.message === 'ENOTFOUND') {\r\n          return tryNext();\r\n        }\r\n        throw (err);\r\n      });\r\n    }\r\n\r\n    return tryNext();\r\n  }\r\n\r\n  function downloadSingle(sourceUrl) {\r\n    const urlInfo = urlParse(sourceUrl);\r\n    let downloadPromise;\r\n\r\n    if (/^file/.test(urlInfo.protocol)) {\r\n      downloadPromise = downloadLocalFile(logger, urlInfo.path, settings.tempArchiveFile);\r\n    } else {\r\n      downloadPromise = downloadHttpFile(logger, sourceUrl, settings.tempArchiveFile, settings.timeout);\r\n    }\r\n\r\n    return downloadPromise;\r\n  }\r\n\r\n  return {\r\n    download: download,\r\n    _downloadSingle: downloadSingle\r\n  };\r\n};\r\n"
      ]
    },
    "mtime": 1465716669983
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/downloaders/http.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../file_type",
            "imported": [
              "default",
              "ZIP",
              "TAR"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fileType"
              },
              {
                "kind": "named",
                "imported": "ZIP",
                "local": "ZIP"
              },
              {
                "kind": "named",
                "imported": "TAR",
                "local": "TAR"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _Promise = require('babel-runtime/core-js/promise')['default'];\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _file_type = require('../file_type');\n\nvar _file_type2 = _interopRequireDefault(_file_type);\n\nvar _require = require('bluebird');\n\nvar fn = _require.fromNode;\n\nvar _require2 = require('fs');\n\nvar createWriteStream = _require2.createWriteStream;\nvar unlinkSync = _require2.unlinkSync;\n\nvar Wreck = require('wreck');\nvar getProgressReporter = require('../progress_reporter');\n\nfunction sendRequest(_ref) {\n  var sourceUrl = _ref.sourceUrl;\n  var timeout = _ref.timeout;\n\n  var maxRedirects = 11; //Because this one goes to 11.\n  return fn(function (cb) {\n    var req = Wreck.request('GET', sourceUrl, { timeout: timeout, redirects: maxRedirects }, function (err, resp) {\n      if (err) {\n        if (err.code === 'ECONNREFUSED') {\n          err = new Error('ENOTFOUND');\n        }\n\n        return cb(err);\n      }\n\n      if (resp.statusCode >= 400) {\n        return cb(new Error('ENOTFOUND'));\n      }\n\n      cb(null, { req: req, resp: resp });\n    });\n  });\n}\n\nfunction downloadResponse(_ref2) {\n  var resp = _ref2.resp;\n  var targetPath = _ref2.targetPath;\n  var progressReporter = _ref2.progressReporter;\n\n  return new _Promise(function (resolve, reject) {\n    var writeStream = createWriteStream(targetPath);\n\n    // if either stream errors, fail quickly\n    resp.on('error', reject);\n    writeStream.on('error', reject);\n\n    // report progress as we download\n    resp.on('data', function (chunk) {\n      progressReporter.progress(chunk.length);\n    });\n\n    // write the download to the file system\n    resp.pipe(writeStream);\n\n    // when the write is done, we are done\n    writeStream.on('finish', resolve);\n  });\n}\n\nfunction getArchiveTypeFromResponse(resp, sourceUrl) {\n  var contentType = resp.headers['content-type'] || '';\n\n  switch (contentType.toLowerCase()) {\n    case 'application/zip':\n      return _file_type.ZIP;\n    case 'application/x-gzip':\n      return _file_type.TAR;\n    default:\n      //If we can't infer the archive type from the content-type header,\n      //fall back to checking the extension in the url\n      return (0, _file_type2['default'])(sourceUrl);\n  }\n}\n\n/*\r\nResponsible for managing http transfers\r\n*/\n\nexports['default'] = function downloadUrl(logger, sourceUrl, targetPath, timeout) {\n  var _ref3, req, resp, totalSize, progressReporter, archiveType;\n\n  return _regeneratorRuntime.async(function downloadUrl$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        context$1$0.prev = 0;\n        context$1$0.next = 3;\n        return _regeneratorRuntime.awrap(sendRequest({ sourceUrl: sourceUrl, timeout: timeout }));\n\n      case 3:\n        _ref3 = context$1$0.sent;\n        req = _ref3.req;\n        resp = _ref3.resp;\n        context$1$0.prev = 6;\n        totalSize = parseFloat(resp.headers['content-length']) || 0;\n        progressReporter = getProgressReporter(logger);\n\n        progressReporter.init(totalSize);\n\n        context$1$0.next = 12;\n        return _regeneratorRuntime.awrap(downloadResponse({ resp: resp, targetPath: targetPath, progressReporter: progressReporter }));\n\n      case 12:\n\n        progressReporter.complete();\n        context$1$0.next = 19;\n        break;\n\n      case 15:\n        context$1$0.prev = 15;\n        context$1$0.t0 = context$1$0['catch'](6);\n\n        req.abort();\n        throw context$1$0.t0;\n\n      case 19:\n        archiveType = getArchiveTypeFromResponse(resp, sourceUrl);\n        return context$1$0.abrupt('return', { archiveType: archiveType });\n\n      case 23:\n        context$1$0.prev = 23;\n        context$1$0.t1 = context$1$0['catch'](0);\n\n        if (context$1$0.t1.message !== 'ENOTFOUND') {\n          logger.error(context$1$0.t1);\n        }\n        throw context$1$0.t1;\n\n      case 27:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this, [[0, 23], [6, 15]]);\n};\n\nmodule.exports = exports['default'];\n\n// all is well, return our archive type\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9kb3dubG9hZGVycy9odHRwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozt5QkFJbUMsY0FBYzs7OztlQUp4QixPQUFPLENBQUMsVUFBVSxDQUFDOztJQUExQixFQUFFLFlBQVosUUFBUTs7Z0JBQzBCLE9BQU8sQ0FBQyxJQUFJLENBQUM7O0lBQS9DLGlCQUFpQixhQUFqQixpQkFBaUI7SUFBRSxVQUFVLGFBQVYsVUFBVTs7QUFDckMsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQy9CLElBQU0sbUJBQW1CLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7O0FBRzVELFNBQVMsV0FBVyxDQUFDLElBQXNCLEVBQUU7TUFBdEIsU0FBUyxHQUFYLElBQXNCLENBQXBCLFNBQVM7TUFBRSxPQUFPLEdBQXBCLElBQXNCLENBQVQsT0FBTzs7QUFDdkMsTUFBTSxZQUFZLEdBQUcsRUFBRSxDQUFDO0FBQ3hCLFNBQU8sRUFBRSxDQUFDLFVBQUEsRUFBRSxFQUFJO0FBQ2QsUUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLEVBQUUsT0FBTyxFQUFQLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEVBQUUsVUFBQyxHQUFHLEVBQUUsSUFBSSxFQUFLO0FBQy9GLFVBQUksR0FBRyxFQUFFO0FBQ1AsWUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLGNBQWMsRUFBRTtBQUMvQixhQUFHLEdBQUcsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDOUI7O0FBRUQsZUFBTyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7T0FDaEI7O0FBRUQsVUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLEdBQUcsRUFBRTtBQUMxQixlQUFPLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO09BQ25DOztBQUVELFFBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUgsR0FBRyxFQUFFLElBQUksRUFBSixJQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQ3pCLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQztDQUNKOztBQUVELFNBQVMsZ0JBQWdCLENBQUMsS0FBc0MsRUFBRTtNQUF0QyxJQUFJLEdBQU4sS0FBc0MsQ0FBcEMsSUFBSTtNQUFFLFVBQVUsR0FBbEIsS0FBc0MsQ0FBOUIsVUFBVTtNQUFFLGdCQUFnQixHQUFwQyxLQUFzQyxDQUFsQixnQkFBZ0I7O0FBQzVELFNBQU8sYUFBWSxVQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUs7QUFDdEMsUUFBTSxXQUFXLEdBQUcsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7OztBQUdsRCxRQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN6QixlQUFXLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQzs7O0FBR2hDLFFBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFVBQUMsS0FBSyxFQUFLO0FBQ3pCLHNCQUFnQixDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDekMsQ0FBQyxDQUFDOzs7QUFHSCxRQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDOzs7QUFHdkIsZUFBVyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDbkMsQ0FBQyxDQUFDO0NBQ0o7O0FBRUQsU0FBUywwQkFBMEIsQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFO0FBQ25ELE1BQU0sV0FBVyxHQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxBQUFDLENBQUM7O0FBRXpELFVBQVEsV0FBVyxDQUFDLFdBQVcsRUFBRTtBQUMvQixTQUFLLGlCQUFpQjtBQUFFLDRCQUFXO0FBQUEsQUFDbkMsU0FBSyxvQkFBb0I7QUFBRSw0QkFBVztBQUFBLEFBQ3RDOzs7QUFHRSxhQUFPLDRCQUFTLFNBQVMsQ0FBQyxDQUFDO0FBQUEsR0FDOUI7Q0FDRjs7Ozs7O3FCQUtjLFNBQWUsV0FBVyxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE9BQU87YUFFcEUsR0FBRyxFQUFFLElBQUksRUFHWCxTQUFTLEVBQ1AsZ0JBQWdCLEVBWWxCLFdBQVc7Ozs7Ozs7eUNBaEJXLFdBQVcsQ0FBQyxFQUFFLFNBQVMsRUFBVCxTQUFTLEVBQUUsT0FBTyxFQUFQLE9BQU8sRUFBRSxDQUFDOzs7O0FBQXZELFdBQUcsU0FBSCxHQUFHO0FBQUUsWUFBSSxTQUFKLElBQUk7O0FBR1gsaUJBQVMsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUN6RCx3QkFBZ0IsR0FBRyxtQkFBbUIsQ0FBQyxNQUFNLENBQUM7O0FBQ3BELHdCQUFnQixDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQzs7O3lDQUUzQixnQkFBZ0IsQ0FBQyxFQUFFLElBQUksRUFBSixJQUFJLEVBQUUsVUFBVSxFQUFWLFVBQVUsRUFBRSxnQkFBZ0IsRUFBaEIsZ0JBQWdCLEVBQUUsQ0FBQzs7OztBQUU5RCx3QkFBZ0IsQ0FBQyxRQUFRLEVBQUUsQ0FBQzs7Ozs7Ozs7QUFFNUIsV0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDOzs7O0FBS1IsbUJBQVcsR0FBRywwQkFBMEIsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDOzRDQUN4RCxFQUFFLFdBQVcsRUFBWCxXQUFXLEVBQUU7Ozs7OztBQUV0QixZQUFJLGVBQUksT0FBTyxLQUFLLFdBQVcsRUFBRTtBQUMvQixnQkFBTSxDQUFDLEtBQUssZ0JBQUssQ0FBQztTQUNuQjs7Ozs7Ozs7Q0FHSiIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL2NsaS9wbHVnaW4vZG93bmxvYWRlcnMvaHR0cC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgZnJvbU5vZGU6IGZuIH0gPSByZXF1aXJlKCdibHVlYmlyZCcpO1xyXG5jb25zdCB7IGNyZWF0ZVdyaXRlU3RyZWFtLCB1bmxpbmtTeW5jIH0gPSByZXF1aXJlKCdmcycpO1xyXG5jb25zdCBXcmVjayA9IHJlcXVpcmUoJ3dyZWNrJyk7XHJcbmNvbnN0IGdldFByb2dyZXNzUmVwb3J0ZXIgPSByZXF1aXJlKCcuLi9wcm9ncmVzc19yZXBvcnRlcicpO1xyXG5pbXBvcnQgZmlsZVR5cGUsIHsgWklQLCBUQVIgfSBmcm9tICcuLi9maWxlX3R5cGUnO1xyXG5cclxuZnVuY3Rpb24gc2VuZFJlcXVlc3QoeyBzb3VyY2VVcmwsIHRpbWVvdXQgfSkge1xyXG4gIGNvbnN0IG1heFJlZGlyZWN0cyA9IDExOyAvL0JlY2F1c2UgdGhpcyBvbmUgZ29lcyB0byAxMS5cclxuICByZXR1cm4gZm4oY2IgPT4ge1xyXG4gICAgY29uc3QgcmVxID0gV3JlY2sucmVxdWVzdCgnR0VUJywgc291cmNlVXJsLCB7IHRpbWVvdXQsIHJlZGlyZWN0czogbWF4UmVkaXJlY3RzIH0sIChlcnIsIHJlc3ApID0+IHtcclxuICAgICAgaWYgKGVycikge1xyXG4gICAgICAgIGlmIChlcnIuY29kZSA9PT0gJ0VDT05OUkVGVVNFRCcpIHtcclxuICAgICAgICAgIGVyciA9IG5ldyBFcnJvcignRU5PVEZPVU5EJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY2IoZXJyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHJlc3Auc3RhdHVzQ29kZSA+PSA0MDApIHtcclxuICAgICAgICByZXR1cm4gY2IobmV3IEVycm9yKCdFTk9URk9VTkQnKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNiKG51bGwsIHsgcmVxLCByZXNwIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRvd25sb2FkUmVzcG9uc2UoeyByZXNwLCB0YXJnZXRQYXRoLCBwcm9ncmVzc1JlcG9ydGVyIH0pIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgY29uc3Qgd3JpdGVTdHJlYW0gPSBjcmVhdGVXcml0ZVN0cmVhbSh0YXJnZXRQYXRoKTtcclxuXHJcbiAgICAvLyBpZiBlaXRoZXIgc3RyZWFtIGVycm9ycywgZmFpbCBxdWlja2x5XHJcbiAgICByZXNwLm9uKCdlcnJvcicsIHJlamVjdCk7XHJcbiAgICB3cml0ZVN0cmVhbS5vbignZXJyb3InLCByZWplY3QpO1xyXG5cclxuICAgIC8vIHJlcG9ydCBwcm9ncmVzcyBhcyB3ZSBkb3dubG9hZFxyXG4gICAgcmVzcC5vbignZGF0YScsIChjaHVuaykgPT4ge1xyXG4gICAgICBwcm9ncmVzc1JlcG9ydGVyLnByb2dyZXNzKGNodW5rLmxlbmd0aCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyB3cml0ZSB0aGUgZG93bmxvYWQgdG8gdGhlIGZpbGUgc3lzdGVtXHJcbiAgICByZXNwLnBpcGUod3JpdGVTdHJlYW0pO1xyXG5cclxuICAgIC8vIHdoZW4gdGhlIHdyaXRlIGlzIGRvbmUsIHdlIGFyZSBkb25lXHJcbiAgICB3cml0ZVN0cmVhbS5vbignZmluaXNoJywgcmVzb2x2ZSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEFyY2hpdmVUeXBlRnJvbVJlc3BvbnNlKHJlc3AsIHNvdXJjZVVybCkge1xyXG4gIGNvbnN0IGNvbnRlbnRUeXBlID0gKHJlc3AuaGVhZGVyc1snY29udGVudC10eXBlJ10gfHwgJycpO1xyXG5cclxuICBzd2l0Y2ggKGNvbnRlbnRUeXBlLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgIGNhc2UgJ2FwcGxpY2F0aW9uL3ppcCc6IHJldHVybiBaSVA7XHJcbiAgICBjYXNlICdhcHBsaWNhdGlvbi94LWd6aXAnOiByZXR1cm4gVEFSO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgLy9JZiB3ZSBjYW4ndCBpbmZlciB0aGUgYXJjaGl2ZSB0eXBlIGZyb20gdGhlIGNvbnRlbnQtdHlwZSBoZWFkZXIsXHJcbiAgICAgIC8vZmFsbCBiYWNrIHRvIGNoZWNraW5nIHRoZSBleHRlbnNpb24gaW4gdGhlIHVybFxyXG4gICAgICByZXR1cm4gZmlsZVR5cGUoc291cmNlVXJsKTtcclxuICB9XHJcbn1cclxuXHJcbi8qXHJcblJlc3BvbnNpYmxlIGZvciBtYW5hZ2luZyBodHRwIHRyYW5zZmVyc1xyXG4qL1xyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBkb3dubG9hZFVybChsb2dnZXIsIHNvdXJjZVVybCwgdGFyZ2V0UGF0aCwgdGltZW91dCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHJlcSwgcmVzcCB9ID0gYXdhaXQgc2VuZFJlcXVlc3QoeyBzb3VyY2VVcmwsIHRpbWVvdXQgfSk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgbGV0IHRvdGFsU2l6ZSA9IHBhcnNlRmxvYXQocmVzcC5oZWFkZXJzWydjb250ZW50LWxlbmd0aCddKSB8fCAwO1xyXG4gICAgICBjb25zdCBwcm9ncmVzc1JlcG9ydGVyID0gZ2V0UHJvZ3Jlc3NSZXBvcnRlcihsb2dnZXIpO1xyXG4gICAgICBwcm9ncmVzc1JlcG9ydGVyLmluaXQodG90YWxTaXplKTtcclxuXHJcbiAgICAgIGF3YWl0IGRvd25sb2FkUmVzcG9uc2UoeyByZXNwLCB0YXJnZXRQYXRoLCBwcm9ncmVzc1JlcG9ydGVyIH0pO1xyXG5cclxuICAgICAgcHJvZ3Jlc3NSZXBvcnRlci5jb21wbGV0ZSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHJlcS5hYm9ydCgpO1xyXG4gICAgICB0aHJvdyBlcnI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYWxsIGlzIHdlbGwsIHJldHVybiBvdXIgYXJjaGl2ZSB0eXBlXHJcbiAgICBjb25zdCBhcmNoaXZlVHlwZSA9IGdldEFyY2hpdmVUeXBlRnJvbVJlc3BvbnNlKHJlc3AsIHNvdXJjZVVybCk7XHJcbiAgICByZXR1cm4geyBhcmNoaXZlVHlwZSB9O1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgaWYgKGVyci5tZXNzYWdlICE9PSAnRU5PVEZPVU5EJykge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoZXJyKTtcclxuICAgIH1cclxuICAgIHRocm93IGVycjtcclxuICB9XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/downloaders/http.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/downloaders/http.js",
      "sourcesContent": [
        "const { fromNode: fn } = require('bluebird');\r\nconst { createWriteStream, unlinkSync } = require('fs');\r\nconst Wreck = require('wreck');\r\nconst getProgressReporter = require('../progress_reporter');\r\nimport fileType, { ZIP, TAR } from '../file_type';\r\n\r\nfunction sendRequest({ sourceUrl, timeout }) {\r\n  const maxRedirects = 11; //Because this one goes to 11.\r\n  return fn(cb => {\r\n    const req = Wreck.request('GET', sourceUrl, { timeout, redirects: maxRedirects }, (err, resp) => {\r\n      if (err) {\r\n        if (err.code === 'ECONNREFUSED') {\r\n          err = new Error('ENOTFOUND');\r\n        }\r\n\r\n        return cb(err);\r\n      }\r\n\r\n      if (resp.statusCode >= 400) {\r\n        return cb(new Error('ENOTFOUND'));\r\n      }\r\n\r\n      cb(null, { req, resp });\r\n    });\r\n  });\r\n}\r\n\r\nfunction downloadResponse({ resp, targetPath, progressReporter }) {\r\n  return new Promise((resolve, reject) => {\r\n    const writeStream = createWriteStream(targetPath);\r\n\r\n    // if either stream errors, fail quickly\r\n    resp.on('error', reject);\r\n    writeStream.on('error', reject);\r\n\r\n    // report progress as we download\r\n    resp.on('data', (chunk) => {\r\n      progressReporter.progress(chunk.length);\r\n    });\r\n\r\n    // write the download to the file system\r\n    resp.pipe(writeStream);\r\n\r\n    // when the write is done, we are done\r\n    writeStream.on('finish', resolve);\r\n  });\r\n}\r\n\r\nfunction getArchiveTypeFromResponse(resp, sourceUrl) {\r\n  const contentType = (resp.headers['content-type'] || '');\r\n\r\n  switch (contentType.toLowerCase()) {\r\n    case 'application/zip': return ZIP;\r\n    case 'application/x-gzip': return TAR;\r\n    default:\r\n      //If we can't infer the archive type from the content-type header,\r\n      //fall back to checking the extension in the url\r\n      return fileType(sourceUrl);\r\n  }\r\n}\r\n\r\n/*\r\nResponsible for managing http transfers\r\n*/\r\nexport default async function downloadUrl(logger, sourceUrl, targetPath, timeout) {\r\n  try {\r\n    const { req, resp } = await sendRequest({ sourceUrl, timeout });\r\n\r\n    try {\r\n      let totalSize = parseFloat(resp.headers['content-length']) || 0;\r\n      const progressReporter = getProgressReporter(logger);\r\n      progressReporter.init(totalSize);\r\n\r\n      await downloadResponse({ resp, targetPath, progressReporter });\r\n\r\n      progressReporter.complete();\r\n    } catch (err) {\r\n      req.abort();\r\n      throw err;\r\n    }\r\n\r\n    // all is well, return our archive type\r\n    const archiveType = getArchiveTypeFromResponse(resp, sourceUrl);\r\n    return { archiveType };\r\n  } catch (err) {\r\n    if (err.message !== 'ENOTFOUND') {\r\n      logger.error(err);\r\n    }\r\n    throw err;\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716669967
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/file_type.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "TAR",
            "ZIP",
            "fileType",
            "filename"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "TAR",
              "exported": "TAR"
            },
            {
              "kind": "local",
              "local": "ZIP",
              "exported": "ZIP"
            },
            {
              "kind": "local",
              "local": "fileType",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "filename",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = fileType;\nvar TAR = '.tar.gz';\nexports.TAR = TAR;\nvar ZIP = '.zip';\n\nexports.ZIP = ZIP;\n\nfunction fileType(filename) {\n  if (/\\.zip$/i.test(filename)) {\n    return ZIP;\n  }\n  if (/\\.tar\\.gz$/i.test(filename)) {\n    return TAR;\n  }\n  if (/\\.tgz$/i.test(filename)) {\n    return TAR;\n  }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9maWxlX3R5cGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBR3dCLFFBQVE7QUFIekIsSUFBTSxHQUFHLEdBQUcsU0FBUyxDQUFDOztBQUN0QixJQUFNLEdBQUcsR0FBRyxNQUFNLENBQUM7Ozs7QUFFWCxTQUFTLFFBQVEsQ0FBQyxRQUFRLEVBQUU7QUFDekMsTUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFO0FBQzVCLFdBQU8sR0FBRyxDQUFDO0dBQ1o7QUFDRCxNQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUU7QUFDaEMsV0FBTyxHQUFHLENBQUM7R0FDWjtBQUNELE1BQUksU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUM1QixXQUFPLEdBQUcsQ0FBQztHQUNaO0NBQ0YiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9jbGkvcGx1Z2luL2ZpbGVfdHlwZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBUQVIgPSAnLnRhci5neic7XHJcbmV4cG9ydCBjb25zdCBaSVAgPSAnLnppcCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmaWxlVHlwZShmaWxlbmFtZSkge1xyXG4gIGlmICgvXFwuemlwJC9pLnRlc3QoZmlsZW5hbWUpKSB7XHJcbiAgICByZXR1cm4gWklQO1xyXG4gIH1cclxuICBpZiAoL1xcLnRhclxcLmd6JC9pLnRlc3QoZmlsZW5hbWUpKSB7XHJcbiAgICByZXR1cm4gVEFSO1xyXG4gIH1cclxuICBpZiAoL1xcLnRneiQvaS50ZXN0KGZpbGVuYW1lKSkge1xyXG4gICAgcmV0dXJuIFRBUjtcclxuICB9XHJcbn1cclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/file_type.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAGwB,QAAQ;AAHzB,IAAM,GAAG,GAAG,SAAS,CAAC;;AACtB,IAAM,GAAG,GAAG,MAAM,CAAC;;;;AAEX,SAAS,QAAQ,CAAC,QAAQ,EAAE;AACzC,MAAI,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;AAC5B,WAAO,GAAG,CAAC;GACZ;AACD,MAAI,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;AAChC,WAAO,GAAG,CAAC;GACZ;AACD,MAAI,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;AAC5B,WAAO,GAAG,CAAC;GACZ;CACF",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/file_type.js",
      "sourcesContent": [
        "export const TAR = '.tar.gz';\r\nexport const ZIP = '.zip';\r\n\r\nexport default function fileType(filename) {\r\n  if (/\\.zip$/i.test(filename)) {\r\n    return ZIP;\r\n  }\r\n  if (/\\.tar\\.gz$/i.test(filename)) {\r\n    return TAR;\r\n  }\r\n  if (/\\.tgz$/i.test(filename)) {\r\n    return TAR;\r\n  }\r\n}\r\n"
      ]
    },
    "mtime": 1465716669967
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/progress_reporter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "createProgressReporter",
            "logger"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "createProgressReporter",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "/*\r\nGenerates file transfer progress messages\r\n*/\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = createProgressReporter;\n\nfunction createProgressReporter(logger) {\n  var dotCount = 0;\n  var runningTotal = 0;\n  var totalSize = 0;\n\n  function init(size) {\n    totalSize = size;\n    var totalDesc = totalSize || 'unknown number of';\n\n    logger.log('Transferring ' + totalDesc + ' bytes', true);\n  }\n\n  //Should log a dot for every 5% of progress\n  function progress(size) {\n    if (!totalSize) return;\n\n    runningTotal += size;\n    var newDotCount = Math.round(runningTotal / totalSize * 100 / 5);\n    if (newDotCount > 20) newDotCount = 20;\n    for (var i = 0; i < newDotCount - dotCount; i++) {\n      logger.log('.', true);\n    }\n    dotCount = newDotCount;\n  }\n\n  function complete() {\n    logger.log('Transfer complete', false);\n  }\n\n  return {\n    init: init,\n    progress: progress,\n    complete: complete\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wcm9ncmVzc19yZXBvcnRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztxQkFHd0Isc0JBQXNCOztBQUEvQixTQUFTLHNCQUFzQixDQUFDLE1BQU0sRUFBRTtBQUNyRCxNQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDakIsTUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBQ3JCLE1BQUksU0FBUyxHQUFHLENBQUMsQ0FBQzs7QUFFbEIsV0FBUyxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ2xCLGFBQVMsR0FBRyxJQUFJLENBQUM7QUFDakIsUUFBSSxTQUFTLEdBQUcsU0FBUyxJQUFJLG1CQUFtQixDQUFDOztBQUVqRCxVQUFNLENBQUMsR0FBRyxtQkFBaUIsU0FBUyxhQUFVLElBQUksQ0FBQyxDQUFDO0dBQ3JEOzs7QUFHRCxXQUFTLFFBQVEsQ0FBQyxJQUFJLEVBQUU7QUFDdEIsUUFBSSxDQUFDLFNBQVMsRUFBRSxPQUFPOztBQUV2QixnQkFBWSxJQUFJLElBQUksQ0FBQztBQUNyQixRQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksR0FBRyxTQUFTLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ2pFLFFBQUksV0FBVyxHQUFHLEVBQUUsRUFBRSxXQUFXLEdBQUcsRUFBRSxDQUFDO0FBQ3ZDLFNBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBSSxXQUFXLEdBQUcsUUFBUSxBQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDakQsWUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDdkI7QUFDRCxZQUFRLEdBQUcsV0FBVyxDQUFDO0dBQ3hCOztBQUVELFdBQVMsUUFBUSxHQUFHO0FBQ2xCLFVBQU0sQ0FBQyxHQUFHLHNCQUFzQixLQUFLLENBQUMsQ0FBQztHQUN4Qzs7QUFFRCxTQUFPO0FBQ0wsUUFBSSxFQUFFLElBQUk7QUFDVixZQUFRLEVBQUUsUUFBUTtBQUNsQixZQUFRLEVBQUUsUUFBUTtHQUNuQixDQUFDO0NBQ0g7O0FBQUEsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL2NsaS9wbHVnaW4vcHJvZ3Jlc3NfcmVwb3J0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5HZW5lcmF0ZXMgZmlsZSB0cmFuc2ZlciBwcm9ncmVzcyBtZXNzYWdlc1xyXG4qL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVQcm9ncmVzc1JlcG9ydGVyKGxvZ2dlcikge1xyXG4gIGxldCBkb3RDb3VudCA9IDA7XHJcbiAgbGV0IHJ1bm5pbmdUb3RhbCA9IDA7XHJcbiAgbGV0IHRvdGFsU2l6ZSA9IDA7XHJcblxyXG4gIGZ1bmN0aW9uIGluaXQoc2l6ZSkge1xyXG4gICAgdG90YWxTaXplID0gc2l6ZTtcclxuICAgIGxldCB0b3RhbERlc2MgPSB0b3RhbFNpemUgfHwgJ3Vua25vd24gbnVtYmVyIG9mJztcclxuXHJcbiAgICBsb2dnZXIubG9nKGBUcmFuc2ZlcnJpbmcgJHt0b3RhbERlc2N9IGJ5dGVzYCwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICAvL1Nob3VsZCBsb2cgYSBkb3QgZm9yIGV2ZXJ5IDUlIG9mIHByb2dyZXNzXHJcbiAgZnVuY3Rpb24gcHJvZ3Jlc3Moc2l6ZSkge1xyXG4gICAgaWYgKCF0b3RhbFNpemUpIHJldHVybjtcclxuXHJcbiAgICBydW5uaW5nVG90YWwgKz0gc2l6ZTtcclxuICAgIGxldCBuZXdEb3RDb3VudCA9IE1hdGgucm91bmQocnVubmluZ1RvdGFsIC8gdG90YWxTaXplICogMTAwIC8gNSk7XHJcbiAgICBpZiAobmV3RG90Q291bnQgPiAyMCkgbmV3RG90Q291bnQgPSAyMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKG5ld0RvdENvdW50IC0gZG90Q291bnQpOyBpKyspIHtcclxuICAgICAgbG9nZ2VyLmxvZygnLicsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgZG90Q291bnQgPSBuZXdEb3RDb3VudDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xyXG4gICAgbG9nZ2VyLmxvZyhgVHJhbnNmZXIgY29tcGxldGVgLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogaW5pdCxcclxuICAgIHByb2dyZXNzOiBwcm9ncmVzcyxcclxuICAgIGNvbXBsZXRlOiBjb21wbGV0ZVxyXG4gIH07XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/progress_reporter.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;qBAGwB,sBAAsB;;AAA/B,SAAS,sBAAsB,CAAC,MAAM,EAAE;AACrD,MAAI,QAAQ,GAAG,CAAC,CAAC;AACjB,MAAI,YAAY,GAAG,CAAC,CAAC;AACrB,MAAI,SAAS,GAAG,CAAC,CAAC;;AAElB,WAAS,IAAI,CAAC,IAAI,EAAE;AAClB,aAAS,GAAG,IAAI,CAAC;AACjB,QAAI,SAAS,GAAG,SAAS,IAAI,mBAAmB,CAAC;;AAEjD,UAAM,CAAC,GAAG,mBAAiB,SAAS,aAAU,IAAI,CAAC,CAAC;GACrD;;;AAGD,WAAS,QAAQ,CAAC,IAAI,EAAE;AACtB,QAAI,CAAC,SAAS,EAAE,OAAO;;AAEvB,gBAAY,IAAI,IAAI,CAAC;AACrB,QAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,SAAS,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;AACjE,QAAI,WAAW,GAAG,EAAE,EAAE,WAAW,GAAG,EAAE,CAAC;AACvC,SAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAI,WAAW,GAAG,QAAQ,AAAC,EAAE,CAAC,EAAE,EAAE;AACjD,YAAM,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;KACvB;AACD,YAAQ,GAAG,WAAW,CAAC;GACxB;;AAED,WAAS,QAAQ,GAAG;AAClB,UAAM,CAAC,GAAG,sBAAsB,KAAK,CAAC,CAAC;GACxC;;AAED,SAAO;AACL,QAAI,EAAE,IAAI;AACV,YAAQ,EAAE,QAAQ;AAClB,YAAQ,EAAE,QAAQ;GACnB,CAAC;CACH;;AAAA,CAAC",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/progress_reporter.js",
      "sourcesContent": [
        "/*\r\nGenerates file transfer progress messages\r\n*/\r\nexport default function createProgressReporter(logger) {\r\n  let dotCount = 0;\r\n  let runningTotal = 0;\r\n  let totalSize = 0;\r\n\r\n  function init(size) {\r\n    totalSize = size;\r\n    let totalDesc = totalSize || 'unknown number of';\r\n\r\n    logger.log(`Transferring ${totalDesc} bytes`, true);\r\n  }\r\n\r\n  //Should log a dot for every 5% of progress\r\n  function progress(size) {\r\n    if (!totalSize) return;\r\n\r\n    runningTotal += size;\r\n    let newDotCount = Math.round(runningTotal / totalSize * 100 / 5);\r\n    if (newDotCount > 20) newDotCount = 20;\r\n    for (let i = 0; i < (newDotCount - dotCount); i++) {\r\n      logger.log('.', true);\r\n    }\r\n    dotCount = newDotCount;\r\n  }\r\n\r\n  function complete() {\r\n    logger.log(`Transfer complete`, false);\r\n  }\r\n\r\n  return {\r\n    init: init,\r\n    progress: progress,\r\n    complete: complete\r\n  };\r\n};\r\n"
      ]
    },
    "mtime": 1465716670029
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/downloaders/file.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../file_type",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fileType"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _Promise = require('babel-runtime/core-js/promise')['default'];\n\nvar _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _file_type = require('../file_type');\n\nvar _file_type2 = _interopRequireDefault(_file_type);\n\nvar _require = require('fs');\n\nvar createWriteStream = _require.createWriteStream;\nvar createReadStream = _require.createReadStream;\nvar unlinkSync = _require.unlinkSync;\nvar statSync = _require.statSync;\n\nvar getProgressReporter = require('../progress_reporter');\n\nfunction openSourceFile(_ref) {\n  var sourcePath = _ref.sourcePath;\n\n  try {\n    var fileInfo = statSync(sourcePath);\n\n    var readStream = createReadStream(sourcePath);\n\n    return { readStream: readStream, fileInfo: fileInfo };\n  } catch (err) {\n    if (err.code === 'ENOENT') {\n      throw new Error('ENOTFOUND');\n    }\n\n    throw err;\n  }\n}\n\nfunction copyFile(_ref2) {\n  var readStream = _ref2.readStream;\n  var writeStream = _ref2.writeStream;\n  var progressReporter = _ref2.progressReporter;\n  return _regeneratorRuntime.async(function copyFile$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        context$1$0.next = 2;\n        return _regeneratorRuntime.awrap(new _Promise(function (resolve, reject) {\n          // if either stream errors, fail quickly\n          readStream.on('error', reject);\n          writeStream.on('error', reject);\n\n          // report progress as we transfer\n          readStream.on('data', function (chunk) {\n            progressReporter.progress(chunk.length);\n          });\n\n          // write the download to the file system\n          readStream.pipe(writeStream);\n\n          // when the write is done, we are done\n          writeStream.on('finish', resolve);\n        }));\n\n      case 2:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\n/*\r\n// Responsible for managing local file transfers\r\n*/\n\nexports['default'] = function copyLocalFile(logger, sourcePath, targetPath) {\n  var _openSourceFile, readStream, fileInfo, writeStream, progressReporter, archiveType;\n\n  return _regeneratorRuntime.async(function copyLocalFile$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        context$1$0.prev = 0;\n        _openSourceFile = openSourceFile({ sourcePath: sourcePath });\n        readStream = _openSourceFile.readStream;\n        fileInfo = _openSourceFile.fileInfo;\n        writeStream = createWriteStream(targetPath);\n        context$1$0.prev = 5;\n        progressReporter = getProgressReporter(logger);\n\n        progressReporter.init(fileInfo.size);\n\n        context$1$0.next = 10;\n        return _regeneratorRuntime.awrap(copyFile({ readStream: readStream, writeStream: writeStream, progressReporter: progressReporter }));\n\n      case 10:\n\n        progressReporter.complete();\n        context$1$0.next = 18;\n        break;\n\n      case 13:\n        context$1$0.prev = 13;\n        context$1$0.t0 = context$1$0['catch'](5);\n\n        readStream.close();\n        writeStream.close();\n        throw context$1$0.t0;\n\n      case 18:\n        archiveType = (0, _file_type2['default'])(sourcePath);\n        return context$1$0.abrupt('return', { archiveType: archiveType });\n\n      case 22:\n        context$1$0.prev = 22;\n        context$1$0.t1 = context$1$0['catch'](0);\n\n        logger.error(context$1$0.t1);\n        throw context$1$0.t1;\n\n      case 26:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this, [[0, 22], [5, 13]]);\n};\n\nmodule.exports = exports['default'];\n\n// all is well, return our archive type\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9kb3dubG9hZGVycy9maWxlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozt5QkFFcUIsY0FBYzs7OztlQUZtQyxPQUFPLENBQUMsSUFBSSxDQUFDOztJQUEzRSxpQkFBaUIsWUFBakIsaUJBQWlCO0lBQUUsZ0JBQWdCLFlBQWhCLGdCQUFnQjtJQUFFLFVBQVUsWUFBVixVQUFVO0lBQUUsUUFBUSxZQUFSLFFBQVE7O0FBQ2pFLElBQU0sbUJBQW1CLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7O0FBRzVELFNBQVMsY0FBYyxDQUFDLElBQWMsRUFBRTtNQUFkLFVBQVUsR0FBWixJQUFjLENBQVosVUFBVTs7QUFDbEMsTUFBSTtBQUNGLFFBQUksUUFBUSxHQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQzs7QUFFcEMsUUFBTSxVQUFVLEdBQUcsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBRWhELFdBQU8sRUFBRSxVQUFVLEVBQVYsVUFBVSxFQUFFLFFBQVEsRUFBUixRQUFRLEVBQUUsQ0FBQztHQUNqQyxDQUFDLE9BQU8sR0FBRyxFQUFFO0FBQ1osUUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRTtBQUN6QixZQUFNLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0tBQzlCOztBQUVELFVBQU0sR0FBRyxDQUFDO0dBQ1g7Q0FDRjs7QUFFRCxTQUFlLFFBQVEsQ0FBQyxLQUE2QztNQUEzQyxVQUFVLEdBQVosS0FBNkMsQ0FBM0MsVUFBVTtNQUFFLFdBQVcsR0FBekIsS0FBNkMsQ0FBL0IsV0FBVztNQUFFLGdCQUFnQixHQUEzQyxLQUE2QyxDQUFsQixnQkFBZ0I7Ozs7O3lDQUMzRCxhQUFZLFVBQUMsT0FBTyxFQUFFLE1BQU0sRUFBSzs7QUFFckMsb0JBQVUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLHFCQUFXLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQzs7O0FBR2hDLG9CQUFVLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFDLEtBQUssRUFBSztBQUMvQiw0QkFBZ0IsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1dBQ3pDLENBQUMsQ0FBQzs7O0FBR0gsb0JBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7OztBQUc3QixxQkFBVyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDbkMsQ0FBQzs7Ozs7OztDQUNIOzs7Ozs7cUJBS2MsU0FBZSxhQUFhLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxVQUFVO3VCQUU5RCxVQUFVLEVBQUUsUUFBUSxFQUN0QixXQUFXLEVBR1QsZ0JBQWdCLEVBYWxCLFdBQVc7Ozs7OzswQkFqQmdCLGNBQWMsQ0FBQyxFQUFFLFVBQVUsRUFBVixVQUFVLEVBQUUsQ0FBQztBQUF2RCxrQkFBVSxtQkFBVixVQUFVO0FBQUUsZ0JBQVEsbUJBQVIsUUFBUTtBQUN0QixtQkFBVyxHQUFHLGlCQUFpQixDQUFDLFVBQVUsQ0FBQzs7QUFHekMsd0JBQWdCLEdBQUcsbUJBQW1CLENBQUMsTUFBTSxDQUFDOztBQUNwRCx3QkFBZ0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDOzs7eUNBRS9CLFFBQVEsQ0FBQyxFQUFFLFVBQVUsRUFBVixVQUFVLEVBQUUsV0FBVyxFQUFYLFdBQVcsRUFBRSxnQkFBZ0IsRUFBaEIsZ0JBQWdCLEVBQUUsQ0FBQzs7OztBQUU3RCx3QkFBZ0IsQ0FBQyxRQUFRLEVBQUUsQ0FBQzs7Ozs7Ozs7QUFFNUIsa0JBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNuQixtQkFBVyxDQUFDLEtBQUssRUFBRSxDQUFDOzs7O0FBS2hCLG1CQUFXLEdBQUcsNEJBQVMsVUFBVSxDQUFDOzRDQUNqQyxFQUFFLFdBQVcsRUFBWCxXQUFXLEVBQUU7Ozs7OztBQUV0QixjQUFNLENBQUMsS0FBSyxnQkFBSyxDQUFDOzs7Ozs7OztDQUdyQiIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL2NsaS9wbHVnaW4vZG93bmxvYWRlcnMvZmlsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgY3JlYXRlV3JpdGVTdHJlYW0sIGNyZWF0ZVJlYWRTdHJlYW0sIHVubGlua1N5bmMsIHN0YXRTeW5jIH0gPSByZXF1aXJlKCdmcycpO1xyXG5jb25zdCBnZXRQcm9ncmVzc1JlcG9ydGVyID0gcmVxdWlyZSgnLi4vcHJvZ3Jlc3NfcmVwb3J0ZXInKTtcclxuaW1wb3J0IGZpbGVUeXBlIGZyb20gJy4uL2ZpbGVfdHlwZSc7XHJcblxyXG5mdW5jdGlvbiBvcGVuU291cmNlRmlsZSh7IHNvdXJjZVBhdGggfSkge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgZmlsZUluZm8gPSBzdGF0U3luYyhzb3VyY2VQYXRoKTtcclxuXHJcbiAgICBjb25zdCByZWFkU3RyZWFtID0gY3JlYXRlUmVhZFN0cmVhbShzb3VyY2VQYXRoKTtcclxuXHJcbiAgICByZXR1cm4geyByZWFkU3RyZWFtLCBmaWxlSW5mbyB9O1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgaWYgKGVyci5jb2RlID09PSAnRU5PRU5UJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VOT1RGT1VORCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHRocm93IGVycjtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNvcHlGaWxlKHsgcmVhZFN0cmVhbSwgd3JpdGVTdHJlYW0sIHByb2dyZXNzUmVwb3J0ZXIgfSkge1xyXG4gIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIC8vIGlmIGVpdGhlciBzdHJlYW0gZXJyb3JzLCBmYWlsIHF1aWNrbHlcclxuICAgIHJlYWRTdHJlYW0ub24oJ2Vycm9yJywgcmVqZWN0KTtcclxuICAgIHdyaXRlU3RyZWFtLm9uKCdlcnJvcicsIHJlamVjdCk7XHJcblxyXG4gICAgLy8gcmVwb3J0IHByb2dyZXNzIGFzIHdlIHRyYW5zZmVyXHJcbiAgICByZWFkU3RyZWFtLm9uKCdkYXRhJywgKGNodW5rKSA9PiB7XHJcbiAgICAgIHByb2dyZXNzUmVwb3J0ZXIucHJvZ3Jlc3MoY2h1bmsubGVuZ3RoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIHdyaXRlIHRoZSBkb3dubG9hZCB0byB0aGUgZmlsZSBzeXN0ZW1cclxuICAgIHJlYWRTdHJlYW0ucGlwZSh3cml0ZVN0cmVhbSk7XHJcblxyXG4gICAgLy8gd2hlbiB0aGUgd3JpdGUgaXMgZG9uZSwgd2UgYXJlIGRvbmVcclxuICAgIHdyaXRlU3RyZWFtLm9uKCdmaW5pc2gnLCByZXNvbHZlKTtcclxuICB9KTtcclxufVxyXG5cclxuLypcclxuLy8gUmVzcG9uc2libGUgZm9yIG1hbmFnaW5nIGxvY2FsIGZpbGUgdHJhbnNmZXJzXHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGNvcHlMb2NhbEZpbGUobG9nZ2VyLCBzb3VyY2VQYXRoLCB0YXJnZXRQYXRoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgcmVhZFN0cmVhbSwgZmlsZUluZm8gfSA9IG9wZW5Tb3VyY2VGaWxlKHsgc291cmNlUGF0aCB9KTtcclxuICAgIGNvbnN0IHdyaXRlU3RyZWFtID0gY3JlYXRlV3JpdGVTdHJlYW0odGFyZ2V0UGF0aCk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcHJvZ3Jlc3NSZXBvcnRlciA9IGdldFByb2dyZXNzUmVwb3J0ZXIobG9nZ2VyKTtcclxuICAgICAgcHJvZ3Jlc3NSZXBvcnRlci5pbml0KGZpbGVJbmZvLnNpemUpO1xyXG5cclxuICAgICAgYXdhaXQgY29weUZpbGUoeyByZWFkU3RyZWFtLCB3cml0ZVN0cmVhbSwgcHJvZ3Jlc3NSZXBvcnRlciB9KTtcclxuXHJcbiAgICAgIHByb2dyZXNzUmVwb3J0ZXIuY29tcGxldGUoKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICByZWFkU3RyZWFtLmNsb3NlKCk7XHJcbiAgICAgIHdyaXRlU3RyZWFtLmNsb3NlKCk7XHJcbiAgICAgIHRocm93IGVycjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBhbGwgaXMgd2VsbCwgcmV0dXJuIG91ciBhcmNoaXZlIHR5cGVcclxuICAgIGNvbnN0IGFyY2hpdmVUeXBlID0gZmlsZVR5cGUoc291cmNlUGF0aCk7XHJcbiAgICByZXR1cm4geyBhcmNoaXZlVHlwZSB9O1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgbG9nZ2VyLmVycm9yKGVycik7XHJcbiAgICB0aHJvdyBlcnI7XHJcbiAgfVxyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/downloaders/file.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;yBAEqB,cAAc;;;;eAFmC,OAAO,CAAC,IAAI,CAAC;;IAA3E,iBAAiB,YAAjB,iBAAiB;IAAE,gBAAgB,YAAhB,gBAAgB;IAAE,UAAU,YAAV,UAAU;IAAE,QAAQ,YAAR,QAAQ;;AACjE,IAAM,mBAAmB,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC;;AAG5D,SAAS,cAAc,CAAC,IAAc,EAAE;MAAd,UAAU,GAAZ,IAAc,CAAZ,UAAU;;AAClC,MAAI;AACF,QAAI,QAAQ,GAAG,QAAQ,CAAC,UAAU,CAAC,CAAC;;AAEpC,QAAM,UAAU,GAAG,gBAAgB,CAAC,UAAU,CAAC,CAAC;;AAEhD,WAAO,EAAE,UAAU,EAAV,UAAU,EAAE,QAAQ,EAAR,QAAQ,EAAE,CAAC;GACjC,CAAC,OAAO,GAAG,EAAE;AACZ,QAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE;AACzB,YAAM,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC;KAC9B;;AAED,UAAM,GAAG,CAAC;GACX;CACF;;AAED,SAAe,QAAQ,CAAC,KAA6C;MAA3C,UAAU,GAAZ,KAA6C,CAA3C,UAAU;MAAE,WAAW,GAAzB,KAA6C,CAA/B,WAAW;MAAE,gBAAgB,GAA3C,KAA6C,CAAlB,gBAAgB;;;;;yCAC3D,aAAY,UAAC,OAAO,EAAE,MAAM,EAAK;;AAErC,oBAAU,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AAC/B,qBAAW,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;;;AAGhC,oBAAU,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,KAAK,EAAK;AAC/B,4BAAgB,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;WACzC,CAAC,CAAC;;;AAGH,oBAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;;;AAG7B,qBAAW,CAAC,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;SACnC,CAAC;;;;;;;CACH;;;;;;qBAKc,SAAe,aAAa,CAAC,MAAM,EAAE,UAAU,EAAE,UAAU;uBAE9D,UAAU,EAAE,QAAQ,EACtB,WAAW,EAGT,gBAAgB,EAalB,WAAW;;;;;;0BAjBgB,cAAc,CAAC,EAAE,UAAU,EAAV,UAAU,EAAE,CAAC;AAAvD,kBAAU,mBAAV,UAAU;AAAE,gBAAQ,mBAAR,QAAQ;AACtB,mBAAW,GAAG,iBAAiB,CAAC,UAAU,CAAC;;AAGzC,wBAAgB,GAAG,mBAAmB,CAAC,MAAM,CAAC;;AACpD,wBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;;;yCAE/B,QAAQ,CAAC,EAAE,UAAU,EAAV,UAAU,EAAE,WAAW,EAAX,WAAW,EAAE,gBAAgB,EAAhB,gBAAgB,EAAE,CAAC;;;;AAE7D,wBAAgB,CAAC,QAAQ,EAAE,CAAC;;;;;;;;AAE5B,kBAAU,CAAC,KAAK,EAAE,CAAC;AACnB,mBAAW,CAAC,KAAK,EAAE,CAAC;;;;AAKhB,mBAAW,GAAG,4BAAS,UAAU,CAAC;4CACjC,EAAE,WAAW,EAAX,WAAW,EAAE;;;;;;AAEtB,cAAM,CAAC,KAAK,gBAAK,CAAC;;;;;;;;CAGrB",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/downloaders/file.js",
      "sourcesContent": [
        "const { createWriteStream, createReadStream, unlinkSync, statSync } = require('fs');\r\nconst getProgressReporter = require('../progress_reporter');\r\nimport fileType from '../file_type';\r\n\r\nfunction openSourceFile({ sourcePath }) {\r\n  try {\r\n    let fileInfo = statSync(sourcePath);\r\n\r\n    const readStream = createReadStream(sourcePath);\r\n\r\n    return { readStream, fileInfo };\r\n  } catch (err) {\r\n    if (err.code === 'ENOENT') {\r\n      throw new Error('ENOTFOUND');\r\n    }\r\n\r\n    throw err;\r\n  }\r\n}\r\n\r\nasync function copyFile({ readStream, writeStream, progressReporter }) {\r\n  await new Promise((resolve, reject) => {\r\n    // if either stream errors, fail quickly\r\n    readStream.on('error', reject);\r\n    writeStream.on('error', reject);\r\n\r\n    // report progress as we transfer\r\n    readStream.on('data', (chunk) => {\r\n      progressReporter.progress(chunk.length);\r\n    });\r\n\r\n    // write the download to the file system\r\n    readStream.pipe(writeStream);\r\n\r\n    // when the write is done, we are done\r\n    writeStream.on('finish', resolve);\r\n  });\r\n}\r\n\r\n/*\r\n// Responsible for managing local file transfers\r\n*/\r\nexport default async function copyLocalFile(logger, sourcePath, targetPath) {\r\n  try {\r\n    const { readStream, fileInfo } = openSourceFile({ sourcePath });\r\n    const writeStream = createWriteStream(targetPath);\r\n\r\n    try {\r\n      const progressReporter = getProgressReporter(logger);\r\n      progressReporter.init(fileInfo.size);\r\n\r\n      await copyFile({ readStream, writeStream, progressReporter });\r\n\r\n      progressReporter.complete();\r\n    } catch (err) {\r\n      readStream.close();\r\n      writeStream.close();\r\n      throw err;\r\n    }\r\n\r\n    // all is well, return our archive type\r\n    const archiveType = fileType(sourcePath);\r\n    return { archiveType };\r\n  } catch (err) {\r\n    logger.error(err);\r\n    throw err;\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716669967
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/plugin_cleaner.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "createPluginCleaner",
            "settings",
            "logger"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "createPluginCleaner",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _Promise = require('babel-runtime/core-js/promise')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = createPluginCleaner;\nvar rimraf = require('rimraf');\nvar fs = require('fs');\n\nfunction createPluginCleaner(settings, logger) {\n  function cleanPrevious() {\n    return new _Promise(function (resolve, reject) {\n      try {\n        fs.statSync(settings.workingPath);\n\n        logger.log('Found previous install attempt. Deleting...');\n        try {\n          rimraf.sync(settings.workingPath);\n        } catch (e) {\n          return reject(e);\n        }\n        return resolve();\n      } catch (e) {\n        if (e.code !== 'ENOENT') return reject(e);\n\n        return resolve();\n      }\n    });\n  }\n\n  function cleanError() {\n    // delete the working directory.\n    // At this point we're bailing, so swallow any errors on delete.\n    try {\n      rimraf.sync(settings.workingPath);\n      rimraf.sync(settings.pluginPath);\n    } catch (e) {} // eslint-disable-line no-empty\n  }\n\n  return {\n    cleanPrevious: cleanPrevious,\n    cleanError: cleanError\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW5fY2xlYW5lci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O3FCQUd3QixtQkFBbUI7QUFIM0MsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2pDLElBQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFVixTQUFTLG1CQUFtQixDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUU7QUFDNUQsV0FBUyxhQUFhLEdBQUc7QUFDdkIsV0FBTyxhQUFZLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUM1QyxVQUFJO0FBQ0YsVUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7O0FBRWxDLGNBQU0sQ0FBQyxHQUFHLENBQUMsNkNBQTZDLENBQUMsQ0FBQztBQUMxRCxZQUFJO0FBQ0YsZ0JBQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQ25DLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDVixpQkFBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbEI7QUFDRCxlQUFPLE9BQU8sRUFBRSxDQUFDO09BQ2xCLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDVixZQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssUUFBUSxFQUFFLE9BQU8sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDOztBQUUxQyxlQUFPLE9BQU8sRUFBRSxDQUFDO09BQ2xCO0tBQ0YsQ0FBQyxDQUFDO0dBQ0o7O0FBRUQsV0FBUyxVQUFVLEdBQUc7OztBQUdwQixRQUFJO0FBQ0YsWUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDbEMsWUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDbEMsQ0FDRCxPQUFPLENBQUMsRUFBRSxFQUFFO0dBQ2I7O0FBRUQsU0FBTztBQUNMLGlCQUFhLEVBQUUsYUFBYTtBQUM1QixjQUFVLEVBQUUsVUFBVTtHQUN2QixDQUFDO0NBQ0g7O0FBQUEsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL2NsaS9wbHVnaW4vcGx1Z2luX2NsZWFuZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByaW1yYWYgPSByZXF1aXJlKCdyaW1yYWYnKTtcclxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlUGx1Z2luQ2xlYW5lcihzZXR0aW5ncywgbG9nZ2VyKSB7XHJcbiAgZnVuY3Rpb24gY2xlYW5QcmV2aW91cygpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgZnMuc3RhdFN5bmMoc2V0dGluZ3Mud29ya2luZ1BhdGgpO1xyXG5cclxuICAgICAgICBsb2dnZXIubG9nKCdGb3VuZCBwcmV2aW91cyBpbnN0YWxsIGF0dGVtcHQuIERlbGV0aW5nLi4uJyk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHJpbXJhZi5zeW5jKHNldHRpbmdzLndvcmtpbmdQYXRoKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUuY29kZSAhPT0gJ0VOT0VOVCcpIHJldHVybiByZWplY3QoZSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2xlYW5FcnJvcigpIHtcclxuICAgIC8vIGRlbGV0ZSB0aGUgd29ya2luZyBkaXJlY3RvcnkuXHJcbiAgICAvLyBBdCB0aGlzIHBvaW50IHdlJ3JlIGJhaWxpbmcsIHNvIHN3YWxsb3cgYW55IGVycm9ycyBvbiBkZWxldGUuXHJcbiAgICB0cnkge1xyXG4gICAgICByaW1yYWYuc3luYyhzZXR0aW5ncy53b3JraW5nUGF0aCk7XHJcbiAgICAgIHJpbXJhZi5zeW5jKHNldHRpbmdzLnBsdWdpblBhdGgpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZW1wdHlcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBjbGVhblByZXZpb3VzOiBjbGVhblByZXZpb3VzLFxyXG4gICAgY2xlYW5FcnJvcjogY2xlYW5FcnJvclxyXG4gIH07XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/plugin_cleaner.js"
      ],
      "names": [],
      "mappings": ";;;;;;;qBAGwB,mBAAmB;AAH3C,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,IAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;;AAEV,SAAS,mBAAmB,CAAC,QAAQ,EAAE,MAAM,EAAE;AAC5D,WAAS,aAAa,GAAG;AACvB,WAAO,aAAY,UAAU,OAAO,EAAE,MAAM,EAAE;AAC5C,UAAI;AACF,UAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;;AAElC,cAAM,CAAC,GAAG,CAAC,6CAA6C,CAAC,CAAC;AAC1D,YAAI;AACF,gBAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;SACnC,CAAC,OAAO,CAAC,EAAE;AACV,iBAAO,MAAM,CAAC,CAAC,CAAC,CAAC;SAClB;AACD,eAAO,OAAO,EAAE,CAAC;OAClB,CAAC,OAAO,CAAC,EAAE;AACV,YAAI,CAAC,CAAC,IAAI,KAAK,QAAQ,EAAE,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC;;AAE1C,eAAO,OAAO,EAAE,CAAC;OAClB;KACF,CAAC,CAAC;GACJ;;AAED,WAAS,UAAU,GAAG;;;AAGpB,QAAI;AACF,YAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAClC,YAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;KAClC,CACD,OAAO,CAAC,EAAE,EAAE;GACb;;AAED,SAAO;AACL,iBAAa,EAAE,aAAa;AAC5B,cAAU,EAAE,UAAU;GACvB,CAAC;CACH;;AAAA,CAAC",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/plugin_cleaner.js",
      "sourcesContent": [
        "const rimraf = require('rimraf');\r\nconst fs = require('fs');\r\n\r\nexport default function createPluginCleaner(settings, logger) {\r\n  function cleanPrevious() {\r\n    return new Promise(function (resolve, reject) {\r\n      try {\r\n        fs.statSync(settings.workingPath);\r\n\r\n        logger.log('Found previous install attempt. Deleting...');\r\n        try {\r\n          rimraf.sync(settings.workingPath);\r\n        } catch (e) {\r\n          return reject(e);\r\n        }\r\n        return resolve();\r\n      } catch (e) {\r\n        if (e.code !== 'ENOENT') return reject(e);\r\n\r\n        return resolve();\r\n      }\r\n    });\r\n  }\r\n\r\n  function cleanError() {\r\n    // delete the working directory.\r\n    // At this point we're bailing, so swallow any errors on delete.\r\n    try {\r\n      rimraf.sync(settings.workingPath);\r\n      rimraf.sync(settings.pluginPath);\r\n    }\r\n    catch (e) {} // eslint-disable-line no-empty\r\n  }\r\n\r\n  return {\r\n    cleanPrevious: cleanPrevious,\r\n    cleanError: cleanError\r\n  };\r\n};\r\n"
      ]
    },
    "mtime": 1465716669967
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/plugin_extractor.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./file_type",
            "imported": [
              "ZIP",
              "TAR"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ZIP",
                "local": "ZIP"
              },
              {
                "kind": "named",
                "imported": "TAR",
                "local": "TAR"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "extractArchive",
            "settings",
            "logger",
            "archiveType"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "extractArchive",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "archiveType",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = extractArchive;\n\nvar _file_type = require('./file_type');\n\nvar zipExtract = require('./extractors/zip');\nvar tarGzExtract = require('./extractors/tar_gz');\n\nfunction extractArchive(settings, logger, archiveType) {\n  switch (archiveType) {\n    case _file_type.ZIP:\n      return zipExtract(settings, logger);\n      break;\n    case _file_type.TAR:\n      return tarGzExtract(settings, logger);\n      break;\n    default:\n      throw new Error('Unsupported archive format.');\n  }\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW5fZXh0cmFjdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUl3QixjQUFjOzt5QkFGYixhQUFhOztBQUZ0QyxJQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUMvQyxJQUFNLFlBQVksR0FBRyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQzs7QUFHckMsU0FBUyxjQUFjLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUU7QUFDcEUsVUFBUSxXQUFXO0FBQ2pCO0FBQ0UsYUFBTyxVQUFVLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3BDLFlBQU07QUFBQSxBQUNSO0FBQ0UsYUFBTyxZQUFZLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3RDLFlBQU07QUFBQSxBQUNSO0FBQ0UsWUFBTSxJQUFJLEtBQUssQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO0FBQUEsR0FDbEQ7Q0FDRjs7QUFBQSxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW5fZXh0cmFjdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgemlwRXh0cmFjdCA9IHJlcXVpcmUoJy4vZXh0cmFjdG9ycy96aXAnKTtcclxuY29uc3QgdGFyR3pFeHRyYWN0ID0gcmVxdWlyZSgnLi9leHRyYWN0b3JzL3Rhcl9neicpO1xyXG5pbXBvcnQgeyBaSVAsIFRBUiB9IGZyb20gJy4vZmlsZV90eXBlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGV4dHJhY3RBcmNoaXZlKHNldHRpbmdzLCBsb2dnZXIsIGFyY2hpdmVUeXBlKSB7XHJcbiAgc3dpdGNoIChhcmNoaXZlVHlwZSkge1xyXG4gICAgY2FzZSBaSVA6XHJcbiAgICAgIHJldHVybiB6aXBFeHRyYWN0KHNldHRpbmdzLCBsb2dnZXIpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgVEFSOlxyXG4gICAgICByZXR1cm4gdGFyR3pFeHRyYWN0KHNldHRpbmdzLCBsb2dnZXIpO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgYXJjaGl2ZSBmb3JtYXQuJyk7XHJcbiAgfVxyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/plugin_extractor.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAIwB,cAAc;;yBAFb,aAAa;;AAFtC,IAAM,UAAU,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAC/C,IAAM,YAAY,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;;AAGrC,SAAS,cAAc,CAAC,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAE;AACpE,UAAQ,WAAW;AACjB;AACE,aAAO,UAAU,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AACpC,YAAM;AAAA,AACR;AACE,aAAO,YAAY,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AACtC,YAAM;AAAA,AACR;AACE,YAAM,IAAI,KAAK,CAAC,6BAA6B,CAAC,CAAC;AAAA,GAClD;CACF;;AAAA,CAAC",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/plugin_extractor.js",
      "sourcesContent": [
        "const zipExtract = require('./extractors/zip');\r\nconst tarGzExtract = require('./extractors/tar_gz');\r\nimport { ZIP, TAR } from './file_type';\r\n\r\nexport default function extractArchive(settings, logger, archiveType) {\r\n  switch (archiveType) {\r\n    case ZIP:\r\n      return zipExtract(settings, logger);\r\n      break;\r\n    case TAR:\r\n      return tarGzExtract(settings, logger);\r\n      break;\r\n    default:\r\n      throw new Error('Unsupported archive format.');\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716669998
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/extractors/zip.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _Promise = require('babel-runtime/core-js/promise')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar DecompressZip = require('@bigfunger/decompress-zip');\n\nfunction extractArchive(settings) {\n  return _regeneratorRuntime.async(function extractArchive$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        context$1$0.next = 2;\n        return _regeneratorRuntime.awrap(new _Promise(function (resolve, reject) {\n          var unzipper = new DecompressZip(settings.tempArchiveFile);\n\n          unzipper.on('error', reject);\n\n          unzipper.extract({\n            path: settings.workingPath,\n            strip: 1,\n            filter: function filter(file) {\n              return file.type !== 'SymbolicLink';\n            }\n          });\n\n          unzipper.on('extract', resolve);\n        }));\n\n      case 2:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\nexports['default'] = function extractZip(settings, logger) {\n  return _regeneratorRuntime.async(function extractZip$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        context$1$0.prev = 0;\n\n        logger.log('Extracting plugin archive');\n\n        context$1$0.next = 4;\n        return _regeneratorRuntime.awrap(extractArchive(settings));\n\n      case 4:\n\n        logger.log('Extraction complete');\n        context$1$0.next = 11;\n        break;\n\n      case 7:\n        context$1$0.prev = 7;\n        context$1$0.t0 = context$1$0['catch'](0);\n\n        logger.error(context$1$0.t0);\n        throw new Error('Error extracting plugin archive');\n\n      case 11:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this, [[0, 7]]);\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9leHRyYWN0b3JzL3ppcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7QUFFM0QsU0FBZSxjQUFjLENBQUMsUUFBUTs7Ozs7eUNBQzlCLGFBQVksVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FBQ3JDLGNBQU0sUUFBUSxHQUFHLElBQUksYUFBYSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFN0Qsa0JBQVEsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDOztBQUU3QixrQkFBUSxDQUFDLE9BQU8sQ0FBQztBQUNmLGdCQUFJLEVBQUUsUUFBUSxDQUFDLFdBQVc7QUFDMUIsaUJBQUssRUFBRSxDQUFDO0FBQ1Isa0JBQU0sRUFBQSxnQkFBQyxJQUFJLEVBQUU7QUFDWCxxQkFBTyxJQUFJLENBQUMsSUFBSSxLQUFLLGNBQWMsQ0FBQzthQUNyQztXQUNGLENBQUMsQ0FBQzs7QUFFSCxrQkFBUSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDakMsQ0FBQzs7Ozs7OztDQUNIOztxQkFFYyxTQUFlLFVBQVUsQ0FBQyxRQUFRLEVBQUUsTUFBTTs7Ozs7O0FBRXJELGNBQU0sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7O3lDQUVsQyxjQUFjLENBQUMsUUFBUSxDQUFDOzs7O0FBRTlCLGNBQU0sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQzs7Ozs7Ozs7QUFFbEMsY0FBTSxDQUFDLEtBQUssZ0JBQUssQ0FBQztjQUNaLElBQUksS0FBSyxDQUFDLGlDQUFpQyxDQUFDOzs7Ozs7O0NBRXJEIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9leHRyYWN0b3JzL3ppcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IERlY29tcHJlc3NaaXAgPSByZXF1aXJlKCdAYmlnZnVuZ2VyL2RlY29tcHJlc3MtemlwJyk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBleHRyYWN0QXJjaGl2ZShzZXR0aW5ncykge1xyXG4gIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IHVuemlwcGVyID0gbmV3IERlY29tcHJlc3NaaXAoc2V0dGluZ3MudGVtcEFyY2hpdmVGaWxlKTtcclxuXHJcbiAgICB1bnppcHBlci5vbignZXJyb3InLCByZWplY3QpO1xyXG5cclxuICAgIHVuemlwcGVyLmV4dHJhY3Qoe1xyXG4gICAgICBwYXRoOiBzZXR0aW5ncy53b3JraW5nUGF0aCxcclxuICAgICAgc3RyaXA6IDEsXHJcbiAgICAgIGZpbHRlcihmaWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbGUudHlwZSAhPT0gJ1N5bWJvbGljTGluayc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHVuemlwcGVyLm9uKCdleHRyYWN0JywgcmVzb2x2ZSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGV4dHJhY3RaaXAoc2V0dGluZ3MsIGxvZ2dlcikge1xyXG4gIHRyeSB7XHJcbiAgICBsb2dnZXIubG9nKCdFeHRyYWN0aW5nIHBsdWdpbiBhcmNoaXZlJyk7XHJcblxyXG4gICAgYXdhaXQgZXh0cmFjdEFyY2hpdmUoc2V0dGluZ3MpO1xyXG5cclxuICAgIGxvZ2dlci5sb2coJ0V4dHJhY3Rpb24gY29tcGxldGUnKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGxvZ2dlci5lcnJvcihlcnIpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBleHRyYWN0aW5nIHBsdWdpbiBhcmNoaXZlJyk7XHJcbiAgfVxyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/extractors/zip.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;AAAA,IAAM,aAAa,GAAG,OAAO,CAAC,2BAA2B,CAAC,CAAC;;AAE3D,SAAe,cAAc,CAAC,QAAQ;;;;;yCAC9B,aAAY,UAAC,OAAO,EAAE,MAAM,EAAK;AACrC,cAAM,QAAQ,GAAG,IAAI,aAAa,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;;AAE7D,kBAAQ,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;;AAE7B,kBAAQ,CAAC,OAAO,CAAC;AACf,gBAAI,EAAE,QAAQ,CAAC,WAAW;AAC1B,iBAAK,EAAE,CAAC;AACR,kBAAM,EAAA,gBAAC,IAAI,EAAE;AACX,qBAAO,IAAI,CAAC,IAAI,KAAK,cAAc,CAAC;aACrC;WACF,CAAC,CAAC;;AAEH,kBAAQ,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;SACjC,CAAC;;;;;;;CACH;;qBAEc,SAAe,UAAU,CAAC,QAAQ,EAAE,MAAM;;;;;;AAErD,cAAM,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;;;yCAElC,cAAc,CAAC,QAAQ,CAAC;;;;AAE9B,cAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;;;;;;;;AAElC,cAAM,CAAC,KAAK,gBAAK,CAAC;cACZ,IAAI,KAAK,CAAC,iCAAiC,CAAC;;;;;;;CAErD",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/extractors/zip.js",
      "sourcesContent": [
        "const DecompressZip = require('@bigfunger/decompress-zip');\r\n\r\nasync function extractArchive(settings) {\r\n  await new Promise((resolve, reject) => {\r\n    const unzipper = new DecompressZip(settings.tempArchiveFile);\r\n\r\n    unzipper.on('error', reject);\r\n\r\n    unzipper.extract({\r\n      path: settings.workingPath,\r\n      strip: 1,\r\n      filter(file) {\r\n        return file.type !== 'SymbolicLink';\r\n      }\r\n    });\r\n\r\n    unzipper.on('extract', resolve);\r\n  });\r\n}\r\n\r\nexport default async function extractZip(settings, logger) {\r\n  try {\r\n    logger.log('Extracting plugin archive');\r\n\r\n    await extractArchive(settings);\r\n\r\n    logger.log('Extraction complete');\r\n  } catch (err) {\r\n    logger.error(err);\r\n    throw new Error('Error extracting plugin archive');\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716669967
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/extractors/tar_gz.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _Promise = require('babel-runtime/core-js/promise')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar zlib = require('zlib');\nvar fs = require('fs');\nvar tar = require('tar');\n\nfunction extractArchive(settings) {\n  return _regeneratorRuntime.async(function extractArchive$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        context$1$0.next = 2;\n        return _regeneratorRuntime.awrap(new _Promise(function (resolve, reject) {\n          var gunzip = zlib.createGunzip();\n          var tarExtract = new tar.Extract({ path: settings.workingPath, strip: 1 });\n          var readStream = fs.createReadStream(settings.tempArchiveFile);\n\n          readStream.on('error', reject);\n          gunzip.on('error', reject);\n          tarExtract.on('error', reject);\n\n          readStream.pipe(gunzip).pipe(tarExtract);\n\n          tarExtract.on('finish', resolve);\n        }));\n\n      case 2:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this);\n}\n\nexports['default'] = function extractTarball(settings, logger) {\n  return _regeneratorRuntime.async(function extractTarball$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        context$1$0.prev = 0;\n\n        logger.log('Extracting plugin archive');\n\n        context$1$0.next = 4;\n        return _regeneratorRuntime.awrap(extractArchive(settings));\n\n      case 4:\n\n        logger.log('Extraction complete');\n        context$1$0.next = 11;\n        break;\n\n      case 7:\n        context$1$0.prev = 7;\n        context$1$0.t0 = context$1$0['catch'](0);\n\n        logger.error(context$1$0.t0);\n        throw new Error('Error extracting plugin archive');\n\n      case 11:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this, [[0, 7]]);\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9leHRyYWN0b3JzL3Rhcl9nei5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pCLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQzs7QUFFM0IsU0FBZSxjQUFjLENBQUMsUUFBUTs7Ozs7eUNBQzlCLGFBQVksVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FBQ3JDLGNBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUNuQyxjQUFNLFVBQVUsR0FBRyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLFdBQVcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM3RSxjQUFNLFVBQVUsR0FBRyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDOztBQUVqRSxvQkFBVSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDL0IsZ0JBQU0sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzNCLG9CQUFVLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQzs7QUFFL0Isb0JBQVUsQ0FDVCxJQUFJLENBQUMsTUFBTSxDQUFDLENBQ1osSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDOztBQUVsQixvQkFBVSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDbEMsQ0FBQzs7Ozs7OztDQUNIOztxQkFFYyxTQUFlLGNBQWMsQ0FBQyxRQUFRLEVBQUUsTUFBTTs7Ozs7O0FBRXpELGNBQU0sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLENBQUMsQ0FBQzs7O3lDQUVsQyxjQUFjLENBQUMsUUFBUSxDQUFDOzs7O0FBRTlCLGNBQU0sQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQzs7Ozs7Ozs7QUFFbEMsY0FBTSxDQUFDLEtBQUssZ0JBQUssQ0FBQztjQUNaLElBQUksS0FBSyxDQUFDLGlDQUFpQyxDQUFDOzs7Ozs7O0NBRXJEIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9leHRyYWN0b3JzL3Rhcl9nei5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHpsaWIgPSByZXF1aXJlKCd6bGliJyk7XHJcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuY29uc3QgdGFyID0gcmVxdWlyZSgndGFyJyk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBleHRyYWN0QXJjaGl2ZShzZXR0aW5ncykge1xyXG4gIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IGd1bnppcCA9IHpsaWIuY3JlYXRlR3VuemlwKCk7XHJcbiAgICBjb25zdCB0YXJFeHRyYWN0ID0gbmV3IHRhci5FeHRyYWN0KHsgcGF0aDogc2V0dGluZ3Mud29ya2luZ1BhdGgsIHN0cmlwOiAxIH0pO1xyXG4gICAgY29uc3QgcmVhZFN0cmVhbSA9IGZzLmNyZWF0ZVJlYWRTdHJlYW0oc2V0dGluZ3MudGVtcEFyY2hpdmVGaWxlKTtcclxuXHJcbiAgICByZWFkU3RyZWFtLm9uKCdlcnJvcicsIHJlamVjdCk7XHJcbiAgICBndW56aXAub24oJ2Vycm9yJywgcmVqZWN0KTtcclxuICAgIHRhckV4dHJhY3Qub24oJ2Vycm9yJywgcmVqZWN0KTtcclxuXHJcbiAgICByZWFkU3RyZWFtXHJcbiAgICAucGlwZShndW56aXApXHJcbiAgICAucGlwZSh0YXJFeHRyYWN0KTtcclxuXHJcbiAgICB0YXJFeHRyYWN0Lm9uKCdmaW5pc2gnLCByZXNvbHZlKTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdFRhcmJhbGwoc2V0dGluZ3MsIGxvZ2dlcikge1xyXG4gIHRyeSB7XHJcbiAgICBsb2dnZXIubG9nKCdFeHRyYWN0aW5nIHBsdWdpbiBhcmNoaXZlJyk7XHJcblxyXG4gICAgYXdhaXQgZXh0cmFjdEFyY2hpdmUoc2V0dGluZ3MpO1xyXG5cclxuICAgIGxvZ2dlci5sb2coJ0V4dHJhY3Rpb24gY29tcGxldGUnKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGxvZ2dlci5lcnJvcihlcnIpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBleHRyYWN0aW5nIHBsdWdpbiBhcmNoaXZlJyk7XHJcbiAgfVxyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/extractors/tar_gz.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;AAAA,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,IAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACzB,IAAM,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;;AAE3B,SAAe,cAAc,CAAC,QAAQ;;;;;yCAC9B,aAAY,UAAC,OAAO,EAAE,MAAM,EAAK;AACrC,cAAM,MAAM,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;AACnC,cAAM,UAAU,GAAG,IAAI,GAAG,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;AAC7E,cAAM,UAAU,GAAG,EAAE,CAAC,gBAAgB,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;;AAEjE,oBAAU,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AAC/B,gBAAM,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AAC3B,oBAAU,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;;AAE/B,oBAAU,CACT,IAAI,CAAC,MAAM,CAAC,CACZ,IAAI,CAAC,UAAU,CAAC,CAAC;;AAElB,oBAAU,CAAC,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;SAClC,CAAC;;;;;;;CACH;;qBAEc,SAAe,cAAc,CAAC,QAAQ,EAAE,MAAM;;;;;;AAEzD,cAAM,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;;;yCAElC,cAAc,CAAC,QAAQ,CAAC;;;;AAE9B,cAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;;;;;;;;AAElC,cAAM,CAAC,KAAK,gBAAK,CAAC;cACZ,IAAI,KAAK,CAAC,iCAAiC,CAAC;;;;;;;CAErD",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/extractors/tar_gz.js",
      "sourcesContent": [
        "const zlib = require('zlib');\r\nconst fs = require('fs');\r\nconst tar = require('tar');\r\n\r\nasync function extractArchive(settings) {\r\n  await new Promise((resolve, reject) => {\r\n    const gunzip = zlib.createGunzip();\r\n    const tarExtract = new tar.Extract({ path: settings.workingPath, strip: 1 });\r\n    const readStream = fs.createReadStream(settings.tempArchiveFile);\r\n\r\n    readStream.on('error', reject);\r\n    gunzip.on('error', reject);\r\n    tarExtract.on('error', reject);\r\n\r\n    readStream\r\n    .pipe(gunzip)\r\n    .pipe(tarExtract);\r\n\r\n    tarExtract.on('finish', resolve);\r\n  });\r\n}\r\n\r\nexport default async function extractTarball(settings, logger) {\r\n  try {\r\n    logger.log('Extracting plugin archive');\r\n\r\n    await extractArchive(settings);\r\n\r\n    logger.log('Extraction complete');\r\n  } catch (err) {\r\n    logger.error(err);\r\n    throw new Error('Error extracting plugin archive');\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716669967
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/KbnServer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _getIterator = require('babel-runtime/core-js/get-iterator')['default'];\n\nvar _require = require('lodash');\n\nvar constant = _require.constant;\nvar once = _require.once;\nvar compact = _require.compact;\nvar flatten = _require.flatten;\n\nvar _require2 = require('bluebird');\n\nvar promisify = _require2.promisify;\nvar resolve = _require2.resolve;\nvar fromNode = _require2.fromNode;\n\nvar Hapi = require('hapi');\n\nvar utils = require('requirefrom')('src/utils');\nvar rootDir = utils('fromRoot')('.');\nvar pkg = utils('packageJson');\n\nmodule.exports = (function () {\n  function KbnServer(settings) {\n    var _this = this;\n\n    _classCallCheck(this, KbnServer);\n\n    this.name = pkg.name;\n    this.version = pkg.version;\n    this.build = pkg.build || false;\n    this.rootDir = rootDir;\n    this.settings = settings || {};\n\n    this.ready = constant(this.mixin(require('./config/setup'), // sets this.config, reads this.settings\n    require('./http'), // sets this.server\n    require('./logging'), require('./status'),\n\n    // find plugins and set this.plugins\n    require('./plugins/scan'),\n\n    // tell the config we are done loading plugins\n    require('./config/complete'),\n\n    // setup this.uiExports and this.bundles\n    require('../ui'),\n\n    // ensure that all bundles are built, or that the\n    // lazy bundle server is running\n    require('../optimize'),\n\n    // finally, initialize the plugins\n    require('./plugins/initialize'), function () {\n      if (_this.config.get('server.autoListen')) {\n        _this.ready = constant(resolve());\n        return _this.listen();\n      }\n    }));\n\n    this.listen = once(this.listen);\n  }\n\n  /**\r\n   * Extend the KbnServer outside of the constraits of a plugin. This allows access\r\n   * to APIs that are not exposed (intentionally) to the plugins and should only\r\n   * be used when the code will be kept up to date with Kibana.\r\n   *\r\n   * @param {...function} - functions that should be called to mixin functionality.\r\n   *                         They are called with the arguments (kibana, server, config)\r\n   *                         and can return a promise to delay execution of the next mixin\r\n   * @return {Promise} - promise that is resolved when the final mixin completes.\r\n   */\n\n  _createClass(KbnServer, [{\n    key: 'mixin',\n    value: function mixin() {\n      var _iteratorNormalCompletion,\n          _didIteratorError,\n          _iteratorError,\n          _len,\n          fns,\n          _key,\n          _iterator,\n          _step,\n          fn,\n          args$2$0 = arguments;\n\n      return _regeneratorRuntime.async(function mixin$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _iteratorError = undefined;\n            context$2$0.prev = 3;\n\n            for (_len = args$2$0.length, fns = Array(_len), _key = 0; _key < _len; _key++) {\n              fns[_key] = args$2$0[_key];\n            }\n\n            _iterator = _getIterator(compact(flatten(fns)));\n\n          case 6:\n            if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n              context$2$0.next = 13;\n              break;\n            }\n\n            fn = _step.value;\n            context$2$0.next = 10;\n            return _regeneratorRuntime.awrap(fn.call(this, this, this.server, this.config));\n\n          case 10:\n            _iteratorNormalCompletion = true;\n            context$2$0.next = 6;\n            break;\n\n          case 13:\n            context$2$0.next = 19;\n            break;\n\n          case 15:\n            context$2$0.prev = 15;\n            context$2$0.t0 = context$2$0['catch'](3);\n            _didIteratorError = true;\n            _iteratorError = context$2$0.t0;\n\n          case 19:\n            context$2$0.prev = 19;\n            context$2$0.prev = 20;\n\n            if (!_iteratorNormalCompletion && _iterator['return']) {\n              _iterator['return']();\n            }\n\n          case 22:\n            context$2$0.prev = 22;\n\n            if (!_didIteratorError) {\n              context$2$0.next = 25;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 25:\n            return context$2$0.finish(22);\n\n          case 26:\n            return context$2$0.finish(19);\n\n          case 27:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this, [[3, 15, 19, 27], [20,, 22, 26]]);\n    }\n\n    /**\r\n     * Tell the server to listen for incoming requests, or get\r\n     * a promise that will be resolved once the server is listening.\r\n     *\r\n     * @return undefined\r\n     */\n  }, {\n    key: 'listen',\n    value: function listen() {\n      var server, config;\n      return _regeneratorRuntime.async(function listen$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            server = this.server;\n            config = this.config;\n            context$2$0.next = 4;\n            return _regeneratorRuntime.awrap(this.ready());\n\n          case 4:\n            context$2$0.next = 6;\n            return _regeneratorRuntime.awrap(fromNode(function (cb) {\n              return server.start(cb);\n            }));\n\n          case 6:\n            context$2$0.next = 8;\n            return _regeneratorRuntime.awrap(require('./pid')(this, server, config));\n\n          case 8:\n\n            server.log(['listening', 'info'], 'Server running at ' + server.info.uri);\n            return context$2$0.abrupt('return', server);\n\n          case 10:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      return _regeneratorRuntime.async(function close$(context$2$0) {\n        var _this2 = this;\n\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.next = 2;\n            return _regeneratorRuntime.awrap(fromNode(function (cb) {\n              return _this2.server.stop(cb);\n            }));\n\n          case 2:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: 'inject',\n    value: function inject(opts) {\n      return _regeneratorRuntime.async(function inject$(context$2$0) {\n        var _this3 = this;\n\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            if (this.server) {\n              context$2$0.next = 3;\n              break;\n            }\n\n            context$2$0.next = 3;\n            return _regeneratorRuntime.awrap(this.ready());\n\n          case 3:\n            context$2$0.next = 5;\n            return _regeneratorRuntime.awrap(fromNode(function (cb) {\n              try {\n                _this3.server.inject(opts, function (resp) {\n                  cb(null, resp);\n                });\n              } catch (err) {\n                cb(err);\n              }\n            }));\n\n          case 5:\n            return context$2$0.abrupt('return', context$2$0.sent);\n\n          case 6:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }]);\n\n  return KbnServer;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL0tiblNlcnZlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O2VBQTJDLE9BQU8sQ0FBQyxRQUFRLENBQUM7O0lBQXRELFFBQVEsWUFBUixRQUFRO0lBQUUsSUFBSSxZQUFKLElBQUk7SUFBRSxPQUFPLFlBQVAsT0FBTztJQUFFLE9BQU8sWUFBUCxPQUFPOztnQkFDQyxPQUFPLENBQUMsVUFBVSxDQUFDOztJQUFwRCxTQUFTLGFBQVQsU0FBUztJQUFFLE9BQU8sYUFBUCxPQUFPO0lBQUUsUUFBUSxhQUFSLFFBQVE7O0FBQ2xDLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFM0IsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ2hELElBQUksT0FBTyxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyQyxJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7O0FBRS9CLE1BQU0sQ0FBQyxPQUFPO0FBQ0QsV0FEVSxTQUFTLENBQ2xCLFFBQVEsRUFBRTs7OzBCQURELFNBQVM7O0FBRTVCLFFBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztBQUNyQixRQUFJLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUM7QUFDM0IsUUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQztBQUNoQyxRQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUN2QixRQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsSUFBSSxFQUFFLENBQUM7O0FBRS9CLFFBQUksQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQzlCLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUN6QixXQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2pCLFdBQU8sQ0FBQyxXQUFXLENBQUMsRUFDcEIsT0FBTyxDQUFDLFVBQVUsQ0FBQzs7O0FBR25CLFdBQU8sQ0FBQyxnQkFBZ0IsQ0FBQzs7O0FBR3pCLFdBQU8sQ0FBQyxtQkFBbUIsQ0FBQzs7O0FBRzVCLFdBQU8sQ0FBQyxPQUFPLENBQUM7Ozs7QUFJaEIsV0FBTyxDQUFDLGFBQWEsQ0FBQzs7O0FBR3RCLFdBQU8sQ0FBQyxzQkFBc0IsQ0FBQyxFQUUvQixZQUFNO0FBQ0osVUFBSSxNQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsRUFBRTtBQUN4QyxjQUFLLEtBQUssR0FBRyxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztBQUNqQyxlQUFPLE1BQUssTUFBTSxFQUFFLENBQUM7T0FDdEI7S0FDRixDQUNGLENBQUMsQ0FBQzs7QUFFSCxRQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7R0FDakM7Ozs7Ozs7Ozs7Ozs7ZUF2Q29CLFNBQVM7O1dBbURuQjs7Ozs7VUFBSSxHQUFHOzs7O1VBQ1AsRUFBRTs7Ozs7Ozs7Ozs7eUNBREUsR0FBRztBQUFILGlCQUFHOzs7cUNBQ0QsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQzs7Ozs7Ozs7QUFBM0IsY0FBRTs7NkNBQ0gsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQUV0RDs7Ozs7Ozs7OztXQVFXO1VBQ0osTUFBTSxFQUFFLE1BQU07Ozs7QUFBZCxrQkFBTSxHQUFhLElBQUksQ0FBdkIsTUFBTTtBQUFFLGtCQUFNLEdBQUssSUFBSSxDQUFmLE1BQU07OzZDQUVkLElBQUksQ0FBQyxLQUFLLEVBQUU7Ozs7NkNBQ1osUUFBUSxDQUFDLFVBQUEsRUFBRTtxQkFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQzthQUFBLENBQUM7Ozs7NkNBQ2hDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQzs7OztBQUU1QyxrQkFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxNQUFNLENBQUMsRUFBRSxvQkFBb0IsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dEQUNuRSxNQUFNOzs7Ozs7O0tBQ2Q7OztXQUVVOzs7Ozs7OzZDQUNILFFBQVEsQ0FBQyxVQUFBLEVBQUU7cUJBQUksT0FBSyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQzthQUFBLENBQUM7Ozs7Ozs7S0FDM0M7OztXQUVXLGdCQUFDLElBQUk7Ozs7OztnQkFDVixJQUFJLENBQUMsTUFBTTs7Ozs7OzZDQUFRLElBQUksQ0FBQyxLQUFLLEVBQUU7Ozs7NkNBRXZCLFFBQVEsQ0FBQyxVQUFBLEVBQUUsRUFBSTtBQUMxQixrQkFBSTtBQUNGLHVCQUFLLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFVBQUMsSUFBSSxFQUFLO0FBQ2pDLG9CQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO2lCQUNoQixDQUFDLENBQUM7ZUFDSixDQUFDLE9BQU8sR0FBRyxFQUFFO0FBQ1osa0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztlQUNUO2FBQ0YsQ0FBQzs7Ozs7Ozs7OztLQUNIOzs7U0ExRm9CLFNBQVM7SUEyRi9CLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvS2JuU2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHsgY29uc3RhbnQsIG9uY2UsIGNvbXBhY3QsIGZsYXR0ZW4gfSA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5sZXQgeyBwcm9taXNpZnksIHJlc29sdmUsIGZyb21Ob2RlIH0gPSByZXF1aXJlKCdibHVlYmlyZCcpO1xyXG5sZXQgSGFwaSA9IHJlcXVpcmUoJ2hhcGknKTtcclxuXHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJ3JlcXVpcmVmcm9tJykoJ3NyYy91dGlscycpO1xyXG5sZXQgcm9vdERpciA9IHV0aWxzKCdmcm9tUm9vdCcpKCcuJyk7XHJcbmxldCBwa2cgPSB1dGlscygncGFja2FnZUpzb24nKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgS2JuU2VydmVyIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncykge1xyXG4gICAgdGhpcy5uYW1lID0gcGtnLm5hbWU7XHJcbiAgICB0aGlzLnZlcnNpb24gPSBwa2cudmVyc2lvbjtcclxuICAgIHRoaXMuYnVpbGQgPSBwa2cuYnVpbGQgfHwgZmFsc2U7XHJcbiAgICB0aGlzLnJvb3REaXIgPSByb290RGlyO1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xyXG5cclxuICAgIHRoaXMucmVhZHkgPSBjb25zdGFudCh0aGlzLm1peGluKFxyXG4gICAgICByZXF1aXJlKCcuL2NvbmZpZy9zZXR1cCcpLCAvLyBzZXRzIHRoaXMuY29uZmlnLCByZWFkcyB0aGlzLnNldHRpbmdzXHJcbiAgICAgIHJlcXVpcmUoJy4vaHR0cCcpLCAvLyBzZXRzIHRoaXMuc2VydmVyXHJcbiAgICAgIHJlcXVpcmUoJy4vbG9nZ2luZycpLFxyXG4gICAgICByZXF1aXJlKCcuL3N0YXR1cycpLFxyXG5cclxuICAgICAgLy8gZmluZCBwbHVnaW5zIGFuZCBzZXQgdGhpcy5wbHVnaW5zXHJcbiAgICAgIHJlcXVpcmUoJy4vcGx1Z2lucy9zY2FuJyksXHJcblxyXG4gICAgICAvLyB0ZWxsIHRoZSBjb25maWcgd2UgYXJlIGRvbmUgbG9hZGluZyBwbHVnaW5zXHJcbiAgICAgIHJlcXVpcmUoJy4vY29uZmlnL2NvbXBsZXRlJyksXHJcblxyXG4gICAgICAvLyBzZXR1cCB0aGlzLnVpRXhwb3J0cyBhbmQgdGhpcy5idW5kbGVzXHJcbiAgICAgIHJlcXVpcmUoJy4uL3VpJyksXHJcblxyXG4gICAgICAvLyBlbnN1cmUgdGhhdCBhbGwgYnVuZGxlcyBhcmUgYnVpbHQsIG9yIHRoYXQgdGhlXHJcbiAgICAgIC8vIGxhenkgYnVuZGxlIHNlcnZlciBpcyBydW5uaW5nXHJcbiAgICAgIHJlcXVpcmUoJy4uL29wdGltaXplJyksXHJcblxyXG4gICAgICAvLyBmaW5hbGx5LCBpbml0aWFsaXplIHRoZSBwbHVnaW5zXHJcbiAgICAgIHJlcXVpcmUoJy4vcGx1Z2lucy9pbml0aWFsaXplJyksXHJcblxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmdldCgnc2VydmVyLmF1dG9MaXN0ZW4nKSkge1xyXG4gICAgICAgICAgdGhpcy5yZWFkeSA9IGNvbnN0YW50KHJlc29sdmUoKSk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICkpO1xyXG5cclxuICAgIHRoaXMubGlzdGVuID0gb25jZSh0aGlzLmxpc3Rlbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFeHRlbmQgdGhlIEtiblNlcnZlciBvdXRzaWRlIG9mIHRoZSBjb25zdHJhaXRzIG9mIGEgcGx1Z2luLiBUaGlzIGFsbG93cyBhY2Nlc3NcclxuICAgKiB0byBBUElzIHRoYXQgYXJlIG5vdCBleHBvc2VkIChpbnRlbnRpb25hbGx5KSB0byB0aGUgcGx1Z2lucyBhbmQgc2hvdWxkIG9ubHlcclxuICAgKiBiZSB1c2VkIHdoZW4gdGhlIGNvZGUgd2lsbCBiZSBrZXB0IHVwIHRvIGRhdGUgd2l0aCBLaWJhbmEuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gey4uLmZ1bmN0aW9ufSAtIGZ1bmN0aW9ucyB0aGF0IHNob3VsZCBiZSBjYWxsZWQgdG8gbWl4aW4gZnVuY3Rpb25hbGl0eS5cclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICBUaGV5IGFyZSBjYWxsZWQgd2l0aCB0aGUgYXJndW1lbnRzIChraWJhbmEsIHNlcnZlciwgY29uZmlnKVxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBjYW4gcmV0dXJuIGEgcHJvbWlzZSB0byBkZWxheSBleGVjdXRpb24gb2YgdGhlIG5leHQgbWl4aW5cclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBmaW5hbCBtaXhpbiBjb21wbGV0ZXMuXHJcbiAgICovXHJcbiAgYXN5bmMgbWl4aW4oLi4uZm5zKSB7XHJcbiAgICBmb3IgKGxldCBmbiBvZiBjb21wYWN0KGZsYXR0ZW4oZm5zKSkpIHtcclxuICAgICAgYXdhaXQgZm4uY2FsbCh0aGlzLCB0aGlzLCB0aGlzLnNlcnZlciwgdGhpcy5jb25maWcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVsbCB0aGUgc2VydmVyIHRvIGxpc3RlbiBmb3IgaW5jb21pbmcgcmVxdWVzdHMsIG9yIGdldFxyXG4gICAqIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgb25jZSB0aGUgc2VydmVyIGlzIGxpc3RlbmluZy5cclxuICAgKlxyXG4gICAqIEByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICovXHJcbiAgYXN5bmMgbGlzdGVuKCkge1xyXG4gICAgbGV0IHsgc2VydmVyLCBjb25maWcgfSA9IHRoaXM7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5yZWFkeSgpO1xyXG4gICAgYXdhaXQgZnJvbU5vZGUoY2IgPT4gc2VydmVyLnN0YXJ0KGNiKSk7XHJcbiAgICBhd2FpdCByZXF1aXJlKCcuL3BpZCcpKHRoaXMsIHNlcnZlciwgY29uZmlnKTtcclxuXHJcbiAgICBzZXJ2ZXIubG9nKFsnbGlzdGVuaW5nJywgJ2luZm8nXSwgJ1NlcnZlciBydW5uaW5nIGF0ICcgKyBzZXJ2ZXIuaW5mby51cmkpO1xyXG4gICAgcmV0dXJuIHNlcnZlcjtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNsb3NlKCkge1xyXG4gICAgYXdhaXQgZnJvbU5vZGUoY2IgPT4gdGhpcy5zZXJ2ZXIuc3RvcChjYikpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgaW5qZWN0KG9wdHMpIHtcclxuICAgIGlmICghdGhpcy5zZXJ2ZXIpIGF3YWl0IHRoaXMucmVhZHkoKTtcclxuXHJcbiAgICByZXR1cm4gYXdhaXQgZnJvbU5vZGUoY2IgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHRoaXMuc2VydmVyLmluamVjdChvcHRzLCAocmVzcCkgPT4ge1xyXG4gICAgICAgICAgY2IobnVsbCwgcmVzcCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNiKGVycik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/KbnServer.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/server/KbnServer.js",
      "sourcesContent": [
        "let { constant, once, compact, flatten } = require('lodash');\r\nlet { promisify, resolve, fromNode } = require('bluebird');\r\nlet Hapi = require('hapi');\r\n\r\nlet utils = require('requirefrom')('src/utils');\r\nlet rootDir = utils('fromRoot')('.');\r\nlet pkg = utils('packageJson');\r\n\r\nmodule.exports = class KbnServer {\r\n  constructor(settings) {\r\n    this.name = pkg.name;\r\n    this.version = pkg.version;\r\n    this.build = pkg.build || false;\r\n    this.rootDir = rootDir;\r\n    this.settings = settings || {};\r\n\r\n    this.ready = constant(this.mixin(\r\n      require('./config/setup'), // sets this.config, reads this.settings\r\n      require('./http'), // sets this.server\r\n      require('./logging'),\r\n      require('./status'),\r\n\r\n      // find plugins and set this.plugins\r\n      require('./plugins/scan'),\r\n\r\n      // tell the config we are done loading plugins\r\n      require('./config/complete'),\r\n\r\n      // setup this.uiExports and this.bundles\r\n      require('../ui'),\r\n\r\n      // ensure that all bundles are built, or that the\r\n      // lazy bundle server is running\r\n      require('../optimize'),\r\n\r\n      // finally, initialize the plugins\r\n      require('./plugins/initialize'),\r\n\r\n      () => {\r\n        if (this.config.get('server.autoListen')) {\r\n          this.ready = constant(resolve());\r\n          return this.listen();\r\n        }\r\n      }\r\n    ));\r\n\r\n    this.listen = once(this.listen);\r\n  }\r\n\r\n  /**\r\n   * Extend the KbnServer outside of the constraits of a plugin. This allows access\r\n   * to APIs that are not exposed (intentionally) to the plugins and should only\r\n   * be used when the code will be kept up to date with Kibana.\r\n   *\r\n   * @param {...function} - functions that should be called to mixin functionality.\r\n   *                         They are called with the arguments (kibana, server, config)\r\n   *                         and can return a promise to delay execution of the next mixin\r\n   * @return {Promise} - promise that is resolved when the final mixin completes.\r\n   */\r\n  async mixin(...fns) {\r\n    for (let fn of compact(flatten(fns))) {\r\n      await fn.call(this, this, this.server, this.config);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tell the server to listen for incoming requests, or get\r\n   * a promise that will be resolved once the server is listening.\r\n   *\r\n   * @return undefined\r\n   */\r\n  async listen() {\r\n    let { server, config } = this;\r\n\r\n    await this.ready();\r\n    await fromNode(cb => server.start(cb));\r\n    await require('./pid')(this, server, config);\r\n\r\n    server.log(['listening', 'info'], 'Server running at ' + server.info.uri);\r\n    return server;\r\n  }\r\n\r\n  async close() {\r\n    await fromNode(cb => this.server.stop(cb));\r\n  }\r\n\r\n  async inject(opts) {\r\n    if (!this.server) await this.ready();\r\n\r\n    return await fromNode(cb => {\r\n      try {\r\n        this.server.inject(opts, (resp) => {\r\n          cb(null, resp);\r\n        });\r\n      } catch (err) {\r\n        cb(err);\r\n      }\r\n    });\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670780
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/serve/read_yaml_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar fs = require('fs');\nvar yaml = require('js-yaml');\n\nvar utils = require('requirefrom')('src/utils');\nvar fromRoot = utils('fromRoot');\n\nvar legacySettingMap = {\n  // server\n  port: 'server.port',\n  host: 'server.host',\n  pid_file: 'pid.file',\n  ssl_cert_file: 'server.ssl.cert',\n  ssl_key_file: 'server.ssl.key',\n\n  // logging\n  log_file: 'logging.dest',\n\n  // kibana\n  kibana_index: 'kibana.index',\n  default_app_id: 'kibana.defaultAppId',\n\n  // es\n  ca: 'elasticsearch.ssl.ca',\n  elasticsearch_preserve_host: 'elasticsearch.preserveHost',\n  elasticsearch_url: 'elasticsearch.url',\n  kibana_elasticsearch_client_crt: 'elasticsearch.ssl.cert',\n  kibana_elasticsearch_client_key: 'elasticsearch.ssl.key',\n  kibana_elasticsearch_password: 'elasticsearch.password',\n  kibana_elasticsearch_username: 'elasticsearch.username',\n  ping_timeout: 'elasticsearch.pingTimeout',\n  request_timeout: 'elasticsearch.requestTimeout',\n  shard_timeout: 'elasticsearch.shardTimeout',\n  startup_timeout: 'elasticsearch.startupTimeout',\n  verify_ssl: 'elasticsearch.ssl.verify'\n};\n\nvar deprecatedSettings = {\n  'server.xsrf.token': 'server.xsrf.token is deprecated. It is no longer used when providing xsrf protection.'\n};\n\nmodule.exports = function (path) {\n  if (!path) return {};\n\n  var file = yaml.safeLoad(fs.readFileSync(path, 'utf8'));\n\n  function apply(config, val, key) {\n    if (_.isPlainObject(val)) {\n      _.forOwn(val, function (subVal, subKey) {\n        apply(config, subVal, key + '.' + subKey);\n      });\n    } else if (_.isArray(val)) {\n      config[key] = [];\n      val.forEach(function (subVal, i) {\n        apply(config, subVal, key + '.' + i);\n      });\n    } else {\n      _.set(config, key, val);\n    }\n  }\n\n  _.each(deprecatedSettings, function (message, setting) {\n    if (_.has(file, setting)) console.error(message);\n  });\n\n  // transform legeacy options into new namespaced versions\n  return _.transform(file, function (config, val, key) {\n    if (legacySettingMap.hasOwnProperty(key)) {\n      key = legacySettingMap[key];\n    }\n\n    apply(config, val, key);\n  }, {});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3NlcnZlL3JlYWRfeWFtbF9jb25maWcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQzs7QUFFOUIsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ2hELElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQzs7QUFFakMsSUFBSSxnQkFBZ0IsR0FBRzs7QUFFckIsTUFBSSxFQUFFLGFBQWE7QUFDbkIsTUFBSSxFQUFFLGFBQWE7QUFDbkIsVUFBUSxFQUFFLFVBQVU7QUFDcEIsZUFBYSxFQUFFLGlCQUFpQjtBQUNoQyxjQUFZLEVBQUUsZ0JBQWdCOzs7QUFHOUIsVUFBUSxFQUFFLGNBQWM7OztBQUd4QixjQUFZLEVBQUUsY0FBYztBQUM1QixnQkFBYyxFQUFFLHFCQUFxQjs7O0FBR3JDLElBQUUsRUFBRSxzQkFBc0I7QUFDMUIsNkJBQTJCLEVBQUUsNEJBQTRCO0FBQ3pELG1CQUFpQixFQUFFLG1CQUFtQjtBQUN0QyxpQ0FBK0IsRUFBRSx3QkFBd0I7QUFDekQsaUNBQStCLEVBQUUsdUJBQXVCO0FBQ3hELCtCQUE2QixFQUFFLHdCQUF3QjtBQUN2RCwrQkFBNkIsRUFBRSx3QkFBd0I7QUFDdkQsY0FBWSxFQUFFLDJCQUEyQjtBQUN6QyxpQkFBZSxFQUFFLDhCQUE4QjtBQUMvQyxlQUFhLEVBQUUsNEJBQTRCO0FBQzNDLGlCQUFlLEVBQUUsOEJBQThCO0FBQy9DLFlBQVUsRUFBRSwwQkFBMEI7Q0FDdkMsQ0FBQzs7QUFFRixJQUFNLGtCQUFrQixHQUFHO0FBQ3pCLHFCQUFtQixFQUFFLHVGQUF1RjtDQUM3RyxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxJQUFJLEVBQUU7QUFDL0IsTUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsQ0FBQzs7QUFFckIsTUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDOztBQUV4RCxXQUFTLEtBQUssQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRTtBQUMvQixRQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDeEIsT0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsVUFBVSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3RDLGFBQUssQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLENBQUM7T0FDM0MsQ0FBQyxDQUFDO0tBQ0osTUFDSSxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDdkIsWUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNqQixTQUFHLENBQUMsT0FBTyxDQUFDLFVBQUMsTUFBTSxFQUFFLENBQUMsRUFBSztBQUN6QixhQUFLLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO09BQ3RDLENBQUMsQ0FBQztLQUNKLE1BQ0k7QUFDSCxPQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDekI7R0FDRjs7QUFFRCxHQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLFVBQVUsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUNyRCxRQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDbEQsQ0FBQyxDQUFDOzs7QUFHSCxTQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFVBQVUsTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7QUFDbkQsUUFBSSxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDeEMsU0FBRyxHQUFHLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQzdCOztBQUVELFNBQUssQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0dBQ3pCLEVBQUUsRUFBRSxDQUFDLENBQUM7Q0FDUixDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3NlcnZlL3JlYWRfeWFtbF9jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5sZXQgZnMgPSByZXF1aXJlKCdmcycpO1xyXG5sZXQgeWFtbCA9IHJlcXVpcmUoJ2pzLXlhbWwnKTtcclxuXHJcbmxldCB1dGlscyA9IHJlcXVpcmUoJ3JlcXVpcmVmcm9tJykoJ3NyYy91dGlscycpO1xyXG5sZXQgZnJvbVJvb3QgPSB1dGlscygnZnJvbVJvb3QnKTtcclxuXHJcbmxldCBsZWdhY3lTZXR0aW5nTWFwID0ge1xyXG4gIC8vIHNlcnZlclxyXG4gIHBvcnQ6ICdzZXJ2ZXIucG9ydCcsXHJcbiAgaG9zdDogJ3NlcnZlci5ob3N0JyxcclxuICBwaWRfZmlsZTogJ3BpZC5maWxlJyxcclxuICBzc2xfY2VydF9maWxlOiAnc2VydmVyLnNzbC5jZXJ0JyxcclxuICBzc2xfa2V5X2ZpbGU6ICdzZXJ2ZXIuc3NsLmtleScsXHJcblxyXG4gIC8vIGxvZ2dpbmdcclxuICBsb2dfZmlsZTogJ2xvZ2dpbmcuZGVzdCcsXHJcblxyXG4gIC8vIGtpYmFuYVxyXG4gIGtpYmFuYV9pbmRleDogJ2tpYmFuYS5pbmRleCcsXHJcbiAgZGVmYXVsdF9hcHBfaWQ6ICdraWJhbmEuZGVmYXVsdEFwcElkJyxcclxuXHJcbiAgLy8gZXNcclxuICBjYTogJ2VsYXN0aWNzZWFyY2guc3NsLmNhJyxcclxuICBlbGFzdGljc2VhcmNoX3ByZXNlcnZlX2hvc3Q6ICdlbGFzdGljc2VhcmNoLnByZXNlcnZlSG9zdCcsXHJcbiAgZWxhc3RpY3NlYXJjaF91cmw6ICdlbGFzdGljc2VhcmNoLnVybCcsXHJcbiAga2liYW5hX2VsYXN0aWNzZWFyY2hfY2xpZW50X2NydDogJ2VsYXN0aWNzZWFyY2guc3NsLmNlcnQnLFxyXG4gIGtpYmFuYV9lbGFzdGljc2VhcmNoX2NsaWVudF9rZXk6ICdlbGFzdGljc2VhcmNoLnNzbC5rZXknLFxyXG4gIGtpYmFuYV9lbGFzdGljc2VhcmNoX3Bhc3N3b3JkOiAnZWxhc3RpY3NlYXJjaC5wYXNzd29yZCcsXHJcbiAga2liYW5hX2VsYXN0aWNzZWFyY2hfdXNlcm5hbWU6ICdlbGFzdGljc2VhcmNoLnVzZXJuYW1lJyxcclxuICBwaW5nX3RpbWVvdXQ6ICdlbGFzdGljc2VhcmNoLnBpbmdUaW1lb3V0JyxcclxuICByZXF1ZXN0X3RpbWVvdXQ6ICdlbGFzdGljc2VhcmNoLnJlcXVlc3RUaW1lb3V0JyxcclxuICBzaGFyZF90aW1lb3V0OiAnZWxhc3RpY3NlYXJjaC5zaGFyZFRpbWVvdXQnLFxyXG4gIHN0YXJ0dXBfdGltZW91dDogJ2VsYXN0aWNzZWFyY2guc3RhcnR1cFRpbWVvdXQnLFxyXG4gIHZlcmlmeV9zc2w6ICdlbGFzdGljc2VhcmNoLnNzbC52ZXJpZnknLFxyXG59O1xyXG5cclxuY29uc3QgZGVwcmVjYXRlZFNldHRpbmdzID0ge1xyXG4gICdzZXJ2ZXIueHNyZi50b2tlbic6ICdzZXJ2ZXIueHNyZi50b2tlbiBpcyBkZXByZWNhdGVkLiBJdCBpcyBubyBsb25nZXIgdXNlZCB3aGVuIHByb3ZpZGluZyB4c3JmIHByb3RlY3Rpb24uJ1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gIGlmICghcGF0aCkgcmV0dXJuIHt9O1xyXG5cclxuICBsZXQgZmlsZSA9IHlhbWwuc2FmZUxvYWQoZnMucmVhZEZpbGVTeW5jKHBhdGgsICd1dGY4JykpO1xyXG5cclxuICBmdW5jdGlvbiBhcHBseShjb25maWcsIHZhbCwga2V5KSB7XHJcbiAgICBpZiAoXy5pc1BsYWluT2JqZWN0KHZhbCkpIHtcclxuICAgICAgXy5mb3JPd24odmFsLCBmdW5jdGlvbiAoc3ViVmFsLCBzdWJLZXkpIHtcclxuICAgICAgICBhcHBseShjb25maWcsIHN1YlZhbCwga2V5ICsgJy4nICsgc3ViS2V5KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfLmlzQXJyYXkodmFsKSkge1xyXG4gICAgICBjb25maWdba2V5XSA9IFtdO1xyXG4gICAgICB2YWwuZm9yRWFjaCgoc3ViVmFsLCBpKSA9PiB7XHJcbiAgICAgICAgYXBwbHkoY29uZmlnLCBzdWJWYWwsIGtleSArICcuJyArIGkpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBfLnNldChjb25maWcsIGtleSwgdmFsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF8uZWFjaChkZXByZWNhdGVkU2V0dGluZ3MsIGZ1bmN0aW9uIChtZXNzYWdlLCBzZXR0aW5nKSB7XHJcbiAgICBpZiAoXy5oYXMoZmlsZSwgc2V0dGluZykpIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIHRyYW5zZm9ybSBsZWdlYWN5IG9wdGlvbnMgaW50byBuZXcgbmFtZXNwYWNlZCB2ZXJzaW9uc1xyXG4gIHJldHVybiBfLnRyYW5zZm9ybShmaWxlLCBmdW5jdGlvbiAoY29uZmlnLCB2YWwsIGtleSkge1xyXG4gICAgaWYgKGxlZ2FjeVNldHRpbmdNYXAuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICBrZXkgPSBsZWdhY3lTZXR0aW5nTWFwW2tleV07XHJcbiAgICB9XHJcblxyXG4gICAgYXBwbHkoY29uZmlnLCB2YWwsIGtleSk7XHJcbiAgfSwge30pO1xyXG59O1xyXG5cclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/serve/read_yaml_config.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,IAAI,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;;AAE9B,IAAI,KAAK,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,CAAC;AAChD,IAAI,QAAQ,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;;AAEjC,IAAI,gBAAgB,GAAG;;AAErB,MAAI,EAAE,aAAa;AACnB,MAAI,EAAE,aAAa;AACnB,UAAQ,EAAE,UAAU;AACpB,eAAa,EAAE,iBAAiB;AAChC,cAAY,EAAE,gBAAgB;;;AAG9B,UAAQ,EAAE,cAAc;;;AAGxB,cAAY,EAAE,cAAc;AAC5B,gBAAc,EAAE,qBAAqB;;;AAGrC,IAAE,EAAE,sBAAsB;AAC1B,6BAA2B,EAAE,4BAA4B;AACzD,mBAAiB,EAAE,mBAAmB;AACtC,iCAA+B,EAAE,wBAAwB;AACzD,iCAA+B,EAAE,uBAAuB;AACxD,+BAA6B,EAAE,wBAAwB;AACvD,+BAA6B,EAAE,wBAAwB;AACvD,cAAY,EAAE,2BAA2B;AACzC,iBAAe,EAAE,8BAA8B;AAC/C,eAAa,EAAE,4BAA4B;AAC3C,iBAAe,EAAE,8BAA8B;AAC/C,YAAU,EAAE,0BAA0B;CACvC,CAAC;;AAEF,IAAM,kBAAkB,GAAG;AACzB,qBAAmB,EAAE,uFAAuF;CAC7G,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,UAAU,IAAI,EAAE;AAC/B,MAAI,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC;;AAErB,MAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC;;AAExD,WAAS,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE;AAC/B,QAAI,CAAC,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE;AACxB,OAAC,CAAC,MAAM,CAAC,GAAG,EAAE,UAAU,MAAM,EAAE,MAAM,EAAE;AACtC,aAAK,CAAC,MAAM,EAAE,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,MAAM,CAAC,CAAC;OAC3C,CAAC,CAAC;KACJ,MACI,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AACvB,YAAM,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AACjB,SAAG,CAAC,OAAO,CAAC,UAAC,MAAM,EAAE,CAAC,EAAK;AACzB,aAAK,CAAC,MAAM,EAAE,MAAM,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;OACtC,CAAC,CAAC;KACJ,MACI;AACH,OAAC,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;KACzB;GACF;;AAED,GAAC,CAAC,IAAI,CAAC,kBAAkB,EAAE,UAAU,OAAO,EAAE,OAAO,EAAE;AACrD,QAAI,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;GAClD,CAAC,CAAC;;;AAGH,SAAO,CAAC,CAAC,SAAS,CAAC,IAAI,EAAE,UAAU,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE;AACnD,QAAI,gBAAgB,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;AACxC,SAAG,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC;KAC7B;;AAED,SAAK,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;GACzB,EAAE,EAAE,CAAC,CAAC;CACR,CAAC",
      "file": "D:/backup/oplate/kibana1/src/cli/serve/read_yaml_config.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet fs = require('fs');\r\nlet yaml = require('js-yaml');\r\n\r\nlet utils = require('requirefrom')('src/utils');\r\nlet fromRoot = utils('fromRoot');\r\n\r\nlet legacySettingMap = {\r\n  // server\r\n  port: 'server.port',\r\n  host: 'server.host',\r\n  pid_file: 'pid.file',\r\n  ssl_cert_file: 'server.ssl.cert',\r\n  ssl_key_file: 'server.ssl.key',\r\n\r\n  // logging\r\n  log_file: 'logging.dest',\r\n\r\n  // kibana\r\n  kibana_index: 'kibana.index',\r\n  default_app_id: 'kibana.defaultAppId',\r\n\r\n  // es\r\n  ca: 'elasticsearch.ssl.ca',\r\n  elasticsearch_preserve_host: 'elasticsearch.preserveHost',\r\n  elasticsearch_url: 'elasticsearch.url',\r\n  kibana_elasticsearch_client_crt: 'elasticsearch.ssl.cert',\r\n  kibana_elasticsearch_client_key: 'elasticsearch.ssl.key',\r\n  kibana_elasticsearch_password: 'elasticsearch.password',\r\n  kibana_elasticsearch_username: 'elasticsearch.username',\r\n  ping_timeout: 'elasticsearch.pingTimeout',\r\n  request_timeout: 'elasticsearch.requestTimeout',\r\n  shard_timeout: 'elasticsearch.shardTimeout',\r\n  startup_timeout: 'elasticsearch.startupTimeout',\r\n  verify_ssl: 'elasticsearch.ssl.verify',\r\n};\r\n\r\nconst deprecatedSettings = {\r\n  'server.xsrf.token': 'server.xsrf.token is deprecated. It is no longer used when providing xsrf protection.'\r\n};\r\n\r\nmodule.exports = function (path) {\r\n  if (!path) return {};\r\n\r\n  let file = yaml.safeLoad(fs.readFileSync(path, 'utf8'));\r\n\r\n  function apply(config, val, key) {\r\n    if (_.isPlainObject(val)) {\r\n      _.forOwn(val, function (subVal, subKey) {\r\n        apply(config, subVal, key + '.' + subKey);\r\n      });\r\n    }\r\n    else if (_.isArray(val)) {\r\n      config[key] = [];\r\n      val.forEach((subVal, i) => {\r\n        apply(config, subVal, key + '.' + i);\r\n      });\r\n    }\r\n    else {\r\n      _.set(config, key, val);\r\n    }\r\n  }\r\n\r\n  _.each(deprecatedSettings, function (message, setting) {\r\n    if (_.has(file, setting)) console.error(message);\r\n  });\r\n\r\n  // transform legeacy options into new namespaced versions\r\n  return _.transform(file, function (config, val, key) {\r\n    if (legacySettingMap.hasOwnProperty(key)) {\r\n      key = legacySettingMap[key];\r\n    }\r\n\r\n    apply(config, val, key);\r\n  }, {});\r\n};\r\n\r\n"
      ]
    },
    "mtime": 1465716670029
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/plugin_remover.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar fs = require('fs');\nvar rimraf = require('rimraf');\n\nmodule.exports = {\n  remove: remove\n};\n\nfunction remove(settings, logger) {\n  try {\n    try {\n      fs.statSync(settings.pluginPath);\n    } catch (e) {\n      logger.log('Plugin ' + settings['package'] + ' does not exist');\n      return;\n    }\n\n    logger.log('Removing ' + settings['package'] + '...');\n    rimraf.sync(settings.pluginPath);\n  } catch (err) {\n    logger.error('Unable to remove plugin \"' + settings['package'] + '\" because of error: \"' + err.message + '\"');\n    process.exit(74); // eslint-disable-line no-process-exit\n  }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW5fcmVtb3Zlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QixJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRWpDLE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFDZixRQUFNLEVBQUUsTUFBTTtDQUNmLENBQUM7O0FBRUYsU0FBUyxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUNoQyxNQUFJO0FBQ0YsUUFBSTtBQUNGLFFBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ2xDLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDVixZQUFNLENBQUMsR0FBRyxhQUFXLFFBQVEsV0FBUSxxQkFBa0IsQ0FBQztBQUN4RCxhQUFPO0tBQ1I7O0FBRUQsVUFBTSxDQUFDLEdBQUcsZUFBYSxRQUFRLFdBQVEsU0FBTSxDQUFDO0FBQzlDLFVBQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0dBQ2xDLENBQUMsT0FBTyxHQUFHLEVBQUU7QUFDWixVQUFNLENBQUMsS0FBSywrQkFBNkIsUUFBUSxXQUFRLDZCQUF3QixHQUFHLENBQUMsT0FBTyxPQUFJLENBQUM7QUFDakcsV0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztHQUNsQjtDQUNGIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW5fcmVtb3Zlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuY29uc3QgcmltcmFmID0gcmVxdWlyZSgncmltcmFmJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICByZW1vdmU6IHJlbW92ZVxyXG59O1xyXG5cclxuZnVuY3Rpb24gcmVtb3ZlKHNldHRpbmdzLCBsb2dnZXIpIHtcclxuICB0cnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgZnMuc3RhdFN5bmMoc2V0dGluZ3MucGx1Z2luUGF0aCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGxvZ2dlci5sb2coYFBsdWdpbiAke3NldHRpbmdzLnBhY2thZ2V9IGRvZXMgbm90IGV4aXN0YCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsb2dnZXIubG9nKGBSZW1vdmluZyAke3NldHRpbmdzLnBhY2thZ2V9Li4uYCk7XHJcbiAgICByaW1yYWYuc3luYyhzZXR0aW5ncy5wbHVnaW5QYXRoKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGxvZ2dlci5lcnJvcihgVW5hYmxlIHRvIHJlbW92ZSBwbHVnaW4gXCIke3NldHRpbmdzLnBhY2thZ2V9XCIgYmVjYXVzZSBvZiBlcnJvcjogXCIke2Vyci5tZXNzYWdlfVwiYCk7XHJcbiAgICBwcm9jZXNzLmV4aXQoNzQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb2Nlc3MtZXhpdFxyXG4gIH1cclxufVxyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/plugin_remover.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACzB,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO,GAAG;AACf,QAAM,EAAE,MAAM;CACf,CAAC;;AAEF,SAAS,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE;AAChC,MAAI;AACF,QAAI;AACF,QAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;KAClC,CAAC,OAAO,CAAC,EAAE;AACV,YAAM,CAAC,GAAG,aAAW,QAAQ,WAAQ,qBAAkB,CAAC;AACxD,aAAO;KACR;;AAED,UAAM,CAAC,GAAG,eAAa,QAAQ,WAAQ,SAAM,CAAC;AAC9C,UAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;GAClC,CAAC,OAAO,GAAG,EAAE;AACZ,UAAM,CAAC,KAAK,+BAA6B,QAAQ,WAAQ,6BAAwB,GAAG,CAAC,OAAO,OAAI,CAAC;AACjG,WAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GAClB;CACF",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/plugin_remover.js",
      "sourcesContent": [
        "const fs = require('fs');\r\nconst rimraf = require('rimraf');\r\n\r\nmodule.exports = {\r\n  remove: remove\r\n};\r\n\r\nfunction remove(settings, logger) {\r\n  try {\r\n    try {\r\n      fs.statSync(settings.pluginPath);\r\n    } catch (e) {\r\n      logger.log(`Plugin ${settings.package} does not exist`);\r\n      return;\r\n    }\r\n\r\n    logger.log(`Removing ${settings.package}...`);\r\n    rimraf.sync(settings.pluginPath);\r\n  } catch (err) {\r\n    logger.error(`Unable to remove plugin \"${settings.package}\" because of error: \"${err.message}\"`);\r\n    process.exit(74); // eslint-disable-line no-process-exit\r\n  }\r\n}\r\n"
      ]
    },
    "mtime": 1465716670029
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/plugin_lister.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "list",
            "settings",
            "logger"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "list",
              "exported": "list"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "settings"
            },
            {
              "kind": "local",
              "local": "logger",
              "exported": "logger"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.list = list;\nvar fs = require('fs');\n\nfunction list(settings, logger) {\n  fs.readdirSync(settings.pluginDir).forEach(function (pluginFile) {\n    logger.log(pluginFile);\n  });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW5fbGlzdGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFbEIsU0FBUyxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUNyQyxJQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FDakMsT0FBTyxDQUFDLFVBQVUsVUFBVSxFQUFFO0FBQzdCLFVBQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7R0FDeEIsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9jbGkvcGx1Z2luL3BsdWdpbl9saXN0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGlzdChzZXR0aW5ncywgbG9nZ2VyKSB7XHJcbiAgZnMucmVhZGRpclN5bmMoc2V0dGluZ3MucGx1Z2luRGlyKVxyXG4gIC5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW5GaWxlKSB7XHJcbiAgICBsb2dnZXIubG9nKHBsdWdpbkZpbGUpO1xyXG4gIH0pO1xyXG59XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/plugin_lister.js"
      ],
      "names": [],
      "mappings": ";;;;;;AAAA,IAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;;AAElB,SAAS,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE;AACrC,IAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CACjC,OAAO,CAAC,UAAU,UAAU,EAAE;AAC7B,UAAM,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;GACxB,CAAC,CAAC;CACJ",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/plugin_lister.js",
      "sourcesContent": [
        "const fs = require('fs');\r\n\r\nexport function list(settings, logger) {\r\n  fs.readdirSync(settings.pluginDir)\r\n  .forEach(function (pluginFile) {\r\n    logger.log(pluginFile);\r\n  });\r\n}\r\n"
      ]
    },
    "mtime": 1465716670029
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/cli/plugin/plugin_logger.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "createPluginLogger",
            "settings"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "createPluginLogger",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "settings",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = createPluginLogger;\n\nfunction createPluginLogger(settings) {\n  var previousLineEnded = true;\n  var silent = !!settings.silent;\n  var quiet = !!settings.quiet;\n\n  function log(data, sameLine) {\n    if (silent || quiet) return;\n\n    if (!sameLine && !previousLineEnded) {\n      process.stdout.write('\\n');\n    }\n\n    //if data is a stream, pipe it.\n    if (data.readable) {\n      data.pipe(process.stdout);\n      return;\n    }\n\n    process.stdout.write(data);\n    if (!sameLine) process.stdout.write('\\n');\n    previousLineEnded = !sameLine;\n  }\n\n  function error(data) {\n    if (silent) return;\n\n    if (!previousLineEnded) {\n      process.stderr.write('\\n');\n    }\n\n    //if data is a stream, pipe it.\n    if (data.readable) {\n      data.pipe(process.stderr);\n      return;\n    }\n    process.stderr.write(data + '\\n');\n    previousLineEnded = true;\n  }\n\n  return {\n    log: log,\n    error: error\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvY2xpL3BsdWdpbi9wbHVnaW5fbG9nZ2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUF3QixrQkFBa0I7O0FBQTNCLFNBQVMsa0JBQWtCLENBQUMsUUFBUSxFQUFFO0FBQ25ELE1BQUksaUJBQWlCLEdBQUcsSUFBSSxDQUFDO0FBQzdCLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO0FBQ2pDLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDOztBQUUvQixXQUFTLEdBQUcsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFO0FBQzNCLFFBQUksTUFBTSxJQUFJLEtBQUssRUFBRSxPQUFPOztBQUU1QixRQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7QUFDbkMsYUFBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDNUI7OztBQUdELFFBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtBQUNqQixVQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMxQixhQUFPO0tBQ1I7O0FBRUQsV0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDM0IsUUFBSSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMxQyxxQkFBaUIsR0FBRyxDQUFDLFFBQVEsQ0FBQztHQUMvQjs7QUFFRCxXQUFTLEtBQUssQ0FBQyxJQUFJLEVBQUU7QUFDbkIsUUFBSSxNQUFNLEVBQUUsT0FBTzs7QUFFbkIsUUFBSSxDQUFDLGlCQUFpQixFQUFFO0FBQ3RCLGFBQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzVCOzs7QUFHRCxRQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7QUFDakIsVUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDMUIsYUFBTztLQUNSO0FBQ0QsV0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUksSUFBSSxRQUFLLENBQUM7QUFDbEMscUJBQWlCLEdBQUcsSUFBSSxDQUFDO0dBQzFCOztBQUVELFNBQU87QUFDTCxPQUFHLEVBQUUsR0FBRztBQUNSLFNBQUssRUFBRSxLQUFLO0dBQ2IsQ0FBQztDQUNIOztBQUFBLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9jbGkvcGx1Z2luL3BsdWdpbl9sb2dnZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVQbHVnaW5Mb2dnZXIoc2V0dGluZ3MpIHtcclxuICBsZXQgcHJldmlvdXNMaW5lRW5kZWQgPSB0cnVlO1xyXG4gIGNvbnN0IHNpbGVudCA9ICEhc2V0dGluZ3Muc2lsZW50O1xyXG4gIGNvbnN0IHF1aWV0ID0gISFzZXR0aW5ncy5xdWlldDtcclxuXHJcbiAgZnVuY3Rpb24gbG9nKGRhdGEsIHNhbWVMaW5lKSB7XHJcbiAgICBpZiAoc2lsZW50IHx8IHF1aWV0KSByZXR1cm47XHJcblxyXG4gICAgaWYgKCFzYW1lTGluZSAmJiAhcHJldmlvdXNMaW5lRW5kZWQpIHtcclxuICAgICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoJ1xcbicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vaWYgZGF0YSBpcyBhIHN0cmVhbSwgcGlwZSBpdC5cclxuICAgIGlmIChkYXRhLnJlYWRhYmxlKSB7XHJcbiAgICAgIGRhdGEucGlwZShwcm9jZXNzLnN0ZG91dCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShkYXRhKTtcclxuICAgIGlmICghc2FtZUxpbmUpIHByb2Nlc3Muc3Rkb3V0LndyaXRlKCdcXG4nKTtcclxuICAgIHByZXZpb3VzTGluZUVuZGVkID0gIXNhbWVMaW5lO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZXJyb3IoZGF0YSkge1xyXG4gICAgaWYgKHNpbGVudCkgcmV0dXJuO1xyXG5cclxuICAgIGlmICghcHJldmlvdXNMaW5lRW5kZWQpIHtcclxuICAgICAgcHJvY2Vzcy5zdGRlcnIud3JpdGUoJ1xcbicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vaWYgZGF0YSBpcyBhIHN0cmVhbSwgcGlwZSBpdC5cclxuICAgIGlmIChkYXRhLnJlYWRhYmxlKSB7XHJcbiAgICAgIGRhdGEucGlwZShwcm9jZXNzLnN0ZGVycik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHByb2Nlc3Muc3RkZXJyLndyaXRlKGAke2RhdGF9XFxuYCk7XHJcbiAgICBwcmV2aW91c0xpbmVFbmRlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbG9nOiBsb2csXHJcbiAgICBlcnJvcjogZXJyb3JcclxuICB9O1xyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/cli/plugin/plugin_logger.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,kBAAkB;;AAA3B,SAAS,kBAAkB,CAAC,QAAQ,EAAE;AACnD,MAAI,iBAAiB,GAAG,IAAI,CAAC;AAC7B,MAAM,MAAM,GAAG,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC;AACjC,MAAM,KAAK,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC;;AAE/B,WAAS,GAAG,CAAC,IAAI,EAAE,QAAQ,EAAE;AAC3B,QAAI,MAAM,IAAI,KAAK,EAAE,OAAO;;AAE5B,QAAI,CAAC,QAAQ,IAAI,CAAC,iBAAiB,EAAE;AACnC,aAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KAC5B;;;AAGD,QAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,UAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAC1B,aAAO;KACR;;AAED,WAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC3B,QAAI,CAAC,QAAQ,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC1C,qBAAiB,GAAG,CAAC,QAAQ,CAAC;GAC/B;;AAED,WAAS,KAAK,CAAC,IAAI,EAAE;AACnB,QAAI,MAAM,EAAE,OAAO;;AAEnB,QAAI,CAAC,iBAAiB,EAAE;AACtB,aAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KAC5B;;;AAGD,QAAI,IAAI,CAAC,QAAQ,EAAE;AACjB,UAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAC1B,aAAO;KACR;AACD,WAAO,CAAC,MAAM,CAAC,KAAK,CAAI,IAAI,QAAK,CAAC;AAClC,qBAAiB,GAAG,IAAI,CAAC;GAC1B;;AAED,SAAO;AACL,OAAG,EAAE,GAAG;AACR,SAAK,EAAE,KAAK;GACb,CAAC;CACH;;AAAA,CAAC",
      "file": "D:/backup/oplate/kibana1/src/cli/plugin/plugin_logger.js",
      "sourcesContent": [
        "export default function createPluginLogger(settings) {\r\n  let previousLineEnded = true;\r\n  const silent = !!settings.silent;\r\n  const quiet = !!settings.quiet;\r\n\r\n  function log(data, sameLine) {\r\n    if (silent || quiet) return;\r\n\r\n    if (!sameLine && !previousLineEnded) {\r\n      process.stdout.write('\\n');\r\n    }\r\n\r\n    //if data is a stream, pipe it.\r\n    if (data.readable) {\r\n      data.pipe(process.stdout);\r\n      return;\r\n    }\r\n\r\n    process.stdout.write(data);\r\n    if (!sameLine) process.stdout.write('\\n');\r\n    previousLineEnded = !sameLine;\r\n  }\r\n\r\n  function error(data) {\r\n    if (silent) return;\r\n\r\n    if (!previousLineEnded) {\r\n      process.stderr.write('\\n');\r\n    }\r\n\r\n    //if data is a stream, pipe it.\r\n    if (data.readable) {\r\n      data.pipe(process.stderr);\r\n      return;\r\n    }\r\n    process.stderr.write(`${data}\\n`);\r\n    previousLineEnded = true;\r\n  }\r\n\r\n  return {\r\n    log: log,\r\n    error: error\r\n  };\r\n};\r\n"
      ]
    },
    "mtime": 1465716670029
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/config/setup.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (kbnServer) {\n  var Config = require('./config');\n  var schema = require('./schema')();\n\n  kbnServer.config = new Config(schema, kbnServer.settings || {});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9zZXR1cC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxTQUFTLEVBQUU7QUFDcEMsTUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ2pDLE1BQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDOztBQUVuQyxXQUFTLENBQUMsTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsUUFBUSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0NBQ2pFLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvY29uZmlnL3NldHVwLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoa2JuU2VydmVyKSB7XHJcbiAgbGV0IENvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnJyk7XHJcbiAgbGV0IHNjaGVtYSA9IHJlcXVpcmUoJy4vc2NoZW1hJykoKTtcclxuXHJcbiAga2JuU2VydmVyLmNvbmZpZyA9IG5ldyBDb25maWcoc2NoZW1hLCBrYm5TZXJ2ZXIuc2V0dGluZ3MgfHwge30pO1xyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/config/setup.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE;AACpC,MAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACjC,MAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC;;AAEnC,WAAS,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC;CACjE,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/config/setup.js",
      "sourcesContent": [
        "module.exports = function (kbnServer) {\r\n  let Config = require('./config');\r\n  let schema = require('./schema')();\r\n\r\n  kbnServer.config = new Config(schema, kbnServer.settings || {});\r\n};\r\n"
      ]
    },
    "mtime": 1465716670842
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/http/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nmodule.exports = function (kbnServer, server, config) {\n  var _ = require('lodash');\n  var fs = require('fs');\n  var Boom = require('boom');\n  var Hapi = require('hapi');\n  var parse = require('url').parse;\n  var format = require('url').format;\n\n  var getDefaultRoute = require('./getDefaultRoute');\n\n  server = kbnServer.server = new Hapi.Server();\n\n  var shortUrlLookup = require('./short_url_lookup')(server);\n\n  // Create a new connection\n  var connectionOptions = {\n    host: config.get('server.host'),\n    port: config.get('server.port'),\n    state: {\n      strictHeader: false\n    },\n    routes: {\n      cors: config.get('server.cors'),\n      payload: {\n        maxBytes: config.get('server.maxPayloadBytes')\n      }\n    }\n  };\n\n  // enable tls if ssl key and cert are defined\n  if (config.get('server.ssl.key') && config.get('server.ssl.cert')) {\n    connectionOptions.tls = {\n      key: fs.readFileSync(config.get('server.ssl.key')),\n      cert: fs.readFileSync(config.get('server.ssl.cert')),\n      // The default ciphers in node 0.12.x include insecure ciphers, so until\n      // we enforce a more recent version of node, we craft our own list\n      // @see https://github.com/nodejs/node/blob/master/src/node_constants.h#L8-L28\n      ciphers: ['ECDHE-RSA-AES128-GCM-SHA256', 'ECDHE-ECDSA-AES128-GCM-SHA256', 'ECDHE-RSA-AES256-GCM-SHA384', 'ECDHE-ECDSA-AES256-GCM-SHA384', 'DHE-RSA-AES128-GCM-SHA256', 'ECDHE-RSA-AES128-SHA256', 'DHE-RSA-AES128-SHA256', 'ECDHE-RSA-AES256-SHA384', 'DHE-RSA-AES256-SHA384', 'ECDHE-RSA-AES256-SHA256', 'DHE-RSA-AES256-SHA256', 'HIGH', '!aNULL', '!eNULL', '!EXPORT', '!DES', '!RC4', '!MD5', '!PSK', '!SRP', '!CAMELLIA'].join(':'),\n      // We use the server's cipher order rather than the client's to prevent\n      // the BEAST attack\n      honorCipherOrder: true\n    };\n  }\n\n  server.connection(connectionOptions);\n\n  // provide a simple way to expose static directories\n  server.decorate('server', 'exposeStaticDir', function (routePath, dirPath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        directory: {\n          path: dirPath,\n          listing: true,\n          lookupCompressed: true\n        }\n      },\n      config: { auth: false }\n    });\n  });\n\n  // provide a simple way to expose static files\n  server.decorate('server', 'exposeStaticFile', function (routePath, filePath) {\n    this.route({\n      path: routePath,\n      method: 'GET',\n      handler: {\n        file: filePath\n      },\n      config: { auth: false }\n    });\n  });\n\n  // helper for creating view managers for servers\n  server.decorate('server', 'setupViews', function (path, engines) {\n    this.views({\n      path: path,\n      isCached: config.get('optimize.viewCaching'),\n      engines: _.assign({ jade: require('jade') }, engines || {})\n    });\n  });\n\n  server.decorate('server', 'redirectToSlash', function (route) {\n    this.route({\n      path: route,\n      method: 'GET',\n      handler: function handler(req, reply) {\n        return reply.redirect(format({\n          search: req.url.search,\n          pathname: req.url.pathname + '/'\n        }));\n      }\n    });\n  });\n\n  // attach the app name to the server, so we can be sure we are actually talking to kibana\n  server.ext('onPreResponse', function (req, reply) {\n    var response = req.response;\n\n    if (response.isBoom) {\n      response.output.headers['kbn-name'] = kbnServer.name;\n      response.output.headers['kbn-version'] = kbnServer.version;\n    } else {\n      response.header('kbn-name', kbnServer.name);\n      response.header('kbn-version', kbnServer.version);\n    }\n\n    return reply['continue']();\n  });\n\n  server.route({\n    path: '/',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      return reply.view('rootRedirect', {\n        hashRoute: config.get('server.basePath') + '/app/kibana',\n        defaultRoute: getDefaultRoute(kbnServer)\n      });\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/{p*}',\n    handler: function handler(req, reply) {\n      var path = req.path;\n      if (path === '/' || path.charAt(path.length - 1) !== '/') {\n        return reply(Boom.notFound());\n      }\n\n      return reply.redirect(format({\n        search: req.url.search,\n        pathname: path.slice(0, -1)\n      })).permanent(true);\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/goto/{urlId}',\n    handler: function handler(request, reply) {\n      var url;\n      return _regeneratorRuntime.async(function handler$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.prev = 0;\n            context$2$0.next = 3;\n            return _regeneratorRuntime.awrap(shortUrlLookup.getUrl(request.params.urlId));\n\n          case 3:\n            url = context$2$0.sent;\n\n            reply().redirect(config.get('server.basePath') + url);\n            context$2$0.next = 10;\n            break;\n\n          case 7:\n            context$2$0.prev = 7;\n            context$2$0.t0 = context$2$0['catch'](0);\n\n            reply(context$2$0.t0);\n\n          case 10:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this, [[0, 7]]);\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/shorten',\n    handler: function handler(request, reply) {\n      var urlId;\n      return _regeneratorRuntime.async(function handler$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.prev = 0;\n            context$2$0.next = 3;\n            return _regeneratorRuntime.awrap(shortUrlLookup.generateUrlId(request.payload.url));\n\n          case 3:\n            urlId = context$2$0.sent;\n\n            reply(urlId);\n            context$2$0.next = 10;\n            break;\n\n          case 7:\n            context$2$0.prev = 7;\n            context$2$0.t0 = context$2$0['catch'](0);\n\n            reply(context$2$0.t0);\n\n          case 10:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this, [[0, 7]]);\n    }\n  });\n\n  return kbnServer.mixin(require('./xsrf'));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2h0dHAvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwRCxNQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsTUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLE1BQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMzQixNQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IsTUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUNqQyxNQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDOztBQUVuQyxNQUFJLGVBQWUsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQzs7QUFFbkQsUUFBTSxHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7O0FBRTlDLE1BQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDOzs7QUFHN0QsTUFBSSxpQkFBaUIsR0FBRztBQUN0QixRQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUM7QUFDL0IsUUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDO0FBQy9CLFNBQUssRUFBRTtBQUNMLGtCQUFZLEVBQUUsS0FBSztLQUNwQjtBQUNELFVBQU0sRUFBRTtBQUNOLFVBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztBQUMvQixhQUFPLEVBQUU7QUFDUCxnQkFBUSxFQUFFLE1BQU0sQ0FB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Ozs7Ozs2Q0FBUyxjQUFjLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDOzs7QUFBL0QsaUJBQUs7O0FBQ1gsaUJBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQzs7Ozs7Ozs7QUFFYixpQkFBSyxnQkFBSyxDQUFDOzs7Ozs7O0tBRWQ7R0FDRixDQUFDLENBQUM7O0FBRUgsU0FBTyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0NBQzNDLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvaHR0cC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcclxuICBsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG4gIGxldCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XHJcbiAgbGV0IEJvb20gPSByZXF1aXJlKCdib29tJyk7XHJcbiAgbGV0IEhhcGkgPSByZXF1aXJlKCdoYXBpJyk7XHJcbiAgbGV0IHBhcnNlID0gcmVxdWlyZSgndXJsJykucGFyc2U7XHJcbiAgbGV0IGZvcm1hdCA9IHJlcXVpcmUoJ3VybCcpLmZvcm1hdDtcclxuXHJcbiAgbGV0IGdldERlZmF1bHRSb3V0ZSA9IHJlcXVpcmUoJy4vZ2V0RGVmYXVsdFJvdXRlJyk7XHJcblxyXG4gIHNlcnZlciA9IGtiblNlcnZlci5zZXJ2ZXIgPSBuZXcgSGFwaS5TZXJ2ZXIoKTtcclxuXHJcbiAgY29uc3Qgc2hvcnRVcmxMb29rdXAgPSByZXF1aXJlKCcuL3Nob3J0X3VybF9sb29rdXAnKShzZXJ2ZXIpO1xyXG5cclxuICAvLyBDcmVhdGUgYSBuZXcgY29ubmVjdGlvblxyXG4gIGxldCBjb25uZWN0aW9uT3B0aW9ucyA9IHtcclxuICAgIGhvc3Q6IGNvbmZpZy5nZXQoJ3NlcnZlci5ob3N0JyksXHJcbiAgICBwb3J0OiBjb25maWcuZ2V0KCdzZXJ2ZXIucG9ydCcpLFxyXG4gICAgc3RhdGU6IHtcclxuICAgICAgc3RyaWN0SGVhZGVyOiBmYWxzZVxyXG4gICAgfSxcclxuICAgIHJvdXRlczoge1xyXG4gICAgICBjb3JzOiBjb25maWcuZ2V0KCdzZXJ2ZXIuY29ycycpLFxyXG4gICAgICBwYXlsb2FkOiB7XHJcbiAgICAgICAgbWF4Qnl0ZXM6IGNvbmZpZy5nZXQoJ3NlcnZlci5tYXhQYXlsb2FkQnl0ZXMnKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gZW5hYmxlIHRscyBpZiBzc2wga2V5IGFuZCBjZXJ0IGFyZSBkZWZpbmVkXHJcbiAgaWYgKGNvbmZpZy5nZXQoJ3NlcnZlci5zc2wua2V5JykgJiYgY29uZmlnLmdldCgnc2VydmVyLnNzbC5jZXJ0JykpIHtcclxuICAgIGNvbm5lY3Rpb25PcHRpb25zLnRscyA9IHtcclxuICAgICAga2V5OiBmcy5yZWFkRmlsZVN5bmMoY29uZmlnLmdldCgnc2VydmVyLnNzbC5rZXknKSksXHJcbiAgICAgIGNlcnQ6IGZzLnJlYWRGaWxlU3luYyhjb25maWcuZ2V0KCdzZXJ2ZXIuc3NsLmNlcnQnKSksXHJcbiAgICAgIC8vIFRoZSBkZWZhdWx0IGNpcGhlcnMgaW4gbm9kZSAwLjEyLnggaW5jbHVkZSBpbnNlY3VyZSBjaXBoZXJzLCBzbyB1bnRpbFxyXG4gICAgICAvLyB3ZSBlbmZvcmNlIGEgbW9yZSByZWNlbnQgdmVyc2lvbiBvZiBub2RlLCB3ZSBjcmFmdCBvdXIgb3duIGxpc3RcclxuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvYmxvYi9tYXN0ZXIvc3JjL25vZGVfY29uc3RhbnRzLmgjTDgtTDI4XHJcbiAgICAgIGNpcGhlcnM6IFtcclxuICAgICAgICAnRUNESEUtUlNBLUFFUzEyOC1HQ00tU0hBMjU2JyxcclxuICAgICAgICAnRUNESEUtRUNEU0EtQUVTMTI4LUdDTS1TSEEyNTYnLFxyXG4gICAgICAgICdFQ0RIRS1SU0EtQUVTMjU2LUdDTS1TSEEzODQnLFxyXG4gICAgICAgICdFQ0RIRS1FQ0RTQS1BRVMyNTYtR0NNLVNIQTM4NCcsXHJcbiAgICAgICAgJ0RIRS1SU0EtQUVTMTI4LUdDTS1TSEEyNTYnLFxyXG4gICAgICAgICdFQ0RIRS1SU0EtQUVTMTI4LVNIQTI1NicsXHJcbiAgICAgICAgJ0RIRS1SU0EtQUVTMTI4LVNIQTI1NicsXHJcbiAgICAgICAgJ0VDREhFLVJTQS1BRVMyNTYtU0hBMzg0JyxcclxuICAgICAgICAnREhFLVJTQS1BRVMyNTYtU0hBMzg0JyxcclxuICAgICAgICAnRUNESEUtUlNBLUFFUzI1Ni1TSEEyNTYnLFxyXG4gICAgICAgICdESEUtUlNBLUFFUzI1Ni1TSEEyNTYnLFxyXG4gICAgICAgICdISUdIJyxcclxuICAgICAgICAnIWFOVUxMJyxcclxuICAgICAgICAnIWVOVUxMJyxcclxuICAgICAgICAnIUVYUE9SVCcsXHJcbiAgICAgICAgJyFERVMnLFxyXG4gICAgICAgICchUkM0JyxcclxuICAgICAgICAnIU1ENScsXHJcbiAgICAgICAgJyFQU0snLFxyXG4gICAgICAgICchU1JQJyxcclxuICAgICAgICAnIUNBTUVMTElBJ1xyXG4gICAgICBdLmpvaW4oJzonKSxcclxuICAgICAgLy8gV2UgdXNlIHRoZSBzZXJ2ZXIncyBjaXBoZXIgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGNsaWVudCdzIHRvIHByZXZlbnRcclxuICAgICAgLy8gdGhlIEJFQVNUIGF0dGFja1xyXG4gICAgICBob25vckNpcGhlck9yZGVyOiB0cnVlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2VydmVyLmNvbm5lY3Rpb24oY29ubmVjdGlvbk9wdGlvbnMpO1xyXG5cclxuICAvLyBwcm92aWRlIGEgc2ltcGxlIHdheSB0byBleHBvc2Ugc3RhdGljIGRpcmVjdG9yaWVzXHJcbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnZXhwb3NlU3RhdGljRGlyJywgZnVuY3Rpb24gKHJvdXRlUGF0aCwgZGlyUGF0aCkge1xyXG4gICAgdGhpcy5yb3V0ZSh7XHJcbiAgICAgIHBhdGg6IHJvdXRlUGF0aCxcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGFuZGxlcjoge1xyXG4gICAgICAgIGRpcmVjdG9yeToge1xyXG4gICAgICAgICAgcGF0aDogZGlyUGF0aCxcclxuICAgICAgICAgIGxpc3Rpbmc6IHRydWUsXHJcbiAgICAgICAgICBsb29rdXBDb21wcmVzc2VkOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBjb25maWc6IHthdXRoOiBmYWxzZX1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAvLyBwcm92aWRlIGEgc2ltcGxlIHdheSB0byBleHBvc2Ugc3RhdGljIGZpbGVzXHJcbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnZXhwb3NlU3RhdGljRmlsZScsIGZ1bmN0aW9uIChyb3V0ZVBhdGgsIGZpbGVQYXRoKSB7XHJcbiAgICB0aGlzLnJvdXRlKHtcclxuICAgICAgcGF0aDogcm91dGVQYXRoLFxyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBoYW5kbGVyOiB7XHJcbiAgICAgICAgZmlsZTogZmlsZVBhdGhcclxuICAgICAgfSxcclxuICAgICAgY29uZmlnOiB7YXV0aDogZmFsc2V9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gaGVscGVyIGZvciBjcmVhdGluZyB2aWV3IG1hbmFnZXJzIGZvciBzZXJ2ZXJzXHJcbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnc2V0dXBWaWV3cycsIGZ1bmN0aW9uIChwYXRoLCBlbmdpbmVzKSB7XHJcbiAgICB0aGlzLnZpZXdzKHtcclxuICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgaXNDYWNoZWQ6IGNvbmZpZy5nZXQoJ29wdGltaXplLnZpZXdDYWNoaW5nJyksXHJcbiAgICAgIGVuZ2luZXM6IF8uYXNzaWduKHsgamFkZTogcmVxdWlyZSgnamFkZScpIH0sIGVuZ2luZXMgfHwge30pXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAncmVkaXJlY3RUb1NsYXNoJywgZnVuY3Rpb24gKHJvdXRlKSB7XHJcbiAgICB0aGlzLnJvdXRlKHtcclxuICAgICAgcGF0aDogcm91dGUsXHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXEsIHJlcGx5KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcGx5LnJlZGlyZWN0KGZvcm1hdCh7XHJcbiAgICAgICAgICBzZWFyY2g6IHJlcS51cmwuc2VhcmNoLFxyXG4gICAgICAgICAgcGF0aG5hbWU6IHJlcS51cmwucGF0aG5hbWUgKyAnLycsXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gYXR0YWNoIHRoZSBhcHAgbmFtZSB0byB0aGUgc2VydmVyLCBzbyB3ZSBjYW4gYmUgc3VyZSB3ZSBhcmUgYWN0dWFsbHkgdGFsa2luZyB0byBraWJhbmFcclxuICBzZXJ2ZXIuZXh0KCdvblByZVJlc3BvbnNlJywgZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcclxuICAgIGxldCByZXNwb25zZSA9IHJlcS5yZXNwb25zZTtcclxuXHJcbiAgICBpZiAocmVzcG9uc2UuaXNCb29tKSB7XHJcbiAgICAgIHJlc3BvbnNlLm91dHB1dC5oZWFkZXJzWydrYm4tbmFtZSddID0ga2JuU2VydmVyLm5hbWU7XHJcbiAgICAgIHJlc3BvbnNlLm91dHB1dC5oZWFkZXJzWydrYm4tdmVyc2lvbiddID0ga2JuU2VydmVyLnZlcnNpb247XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXNwb25zZS5oZWFkZXIoJ2tibi1uYW1lJywga2JuU2VydmVyLm5hbWUpO1xyXG4gICAgICByZXNwb25zZS5oZWFkZXIoJ2tibi12ZXJzaW9uJywga2JuU2VydmVyLnZlcnNpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXBseS5jb250aW51ZSgpO1xyXG4gIH0pO1xyXG5cclxuICBzZXJ2ZXIucm91dGUoe1xyXG4gICAgcGF0aDogJy8nLFxyXG4gICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXEsIHJlcGx5KSB7XHJcbiAgICAgIHJldHVybiByZXBseS52aWV3KCdyb290UmVkaXJlY3QnLCB7XHJcbiAgICAgICAgaGFzaFJvdXRlOiBgJHtjb25maWcuZ2V0KCdzZXJ2ZXIuYmFzZVBhdGgnKX0vYXBwL2tpYmFuYWAsXHJcbiAgICAgICAgZGVmYXVsdFJvdXRlOiBnZXREZWZhdWx0Um91dGUoa2JuU2VydmVyKSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHNlcnZlci5yb3V0ZSh7XHJcbiAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgcGF0aDogJy97cCp9JyxcclxuICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChyZXEsIHJlcGx5KSB7XHJcbiAgICAgIGxldCBwYXRoID0gcmVxLnBhdGg7XHJcbiAgICAgIGlmIChwYXRoID09PSAnLycgfHwgcGF0aC5jaGFyQXQocGF0aC5sZW5ndGggLSAxKSAhPT0gJy8nKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcGx5KEJvb20ubm90Rm91bmQoKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiByZXBseS5yZWRpcmVjdChmb3JtYXQoe1xyXG4gICAgICAgIHNlYXJjaDogcmVxLnVybC5zZWFyY2gsXHJcbiAgICAgICAgcGF0aG5hbWU6IHBhdGguc2xpY2UoMCwgLTEpLFxyXG4gICAgICB9KSlcclxuICAgICAgLnBlcm1hbmVudCh0cnVlKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgc2VydmVyLnJvdXRlKHtcclxuICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICBwYXRoOiAnL2dvdG8ve3VybElkfScsXHJcbiAgICBoYW5kbGVyOiBhc3luYyBmdW5jdGlvbiAocmVxdWVzdCwgcmVwbHkpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCBzaG9ydFVybExvb2t1cC5nZXRVcmwocmVxdWVzdC5wYXJhbXMudXJsSWQpO1xyXG4gICAgICAgIHJlcGx5KCkucmVkaXJlY3QoY29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJykgKyB1cmwpO1xyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICByZXBseShlcnIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHNlcnZlci5yb3V0ZSh7XHJcbiAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIHBhdGg6ICcvc2hvcnRlbicsXHJcbiAgICBoYW5kbGVyOiBhc3luYyBmdW5jdGlvbiAocmVxdWVzdCwgcmVwbHkpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1cmxJZCA9IGF3YWl0IHNob3J0VXJsTG9va3VwLmdlbmVyYXRlVXJsSWQocmVxdWVzdC5wYXlsb2FkLnVybCk7XHJcbiAgICAgICAgcmVwbHkodXJsSWQpO1xyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICByZXBseShlcnIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBrYm5TZXJ2ZXIubWl4aW4ocmVxdWlyZSgnLi94c3JmJykpO1xyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/http/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/server/http/index.js",
      "sourcesContent": [
        "module.exports = function (kbnServer, server, config) {\r\n  let _ = require('lodash');\r\n  let fs = require('fs');\r\n  let Boom = require('boom');\r\n  let Hapi = require('hapi');\r\n  let parse = require('url').parse;\r\n  let format = require('url').format;\r\n\r\n  let getDefaultRoute = require('./getDefaultRoute');\r\n\r\n  server = kbnServer.server = new Hapi.Server();\r\n\r\n  const shortUrlLookup = require('./short_url_lookup')(server);\r\n\r\n  // Create a new connection\r\n  let connectionOptions = {\r\n    host: config.get('server.host'),\r\n    port: config.get('server.port'),\r\n    state: {\r\n      strictHeader: false\r\n    },\r\n    routes: {\r\n      cors: config.get('server.cors'),\r\n      payload: {\r\n        maxBytes: config.get('server.maxPayloadBytes')\r\n      }\r\n    }\r\n  };\r\n\r\n  // enable tls if ssl key and cert are defined\r\n  if (config.get('server.ssl.key') && config.get('server.ssl.cert')) {\r\n    connectionOptions.tls = {\r\n      key: fs.readFileSync(config.get('server.ssl.key')),\r\n      cert: fs.readFileSync(config.get('server.ssl.cert')),\r\n      // The default ciphers in node 0.12.x include insecure ciphers, so until\r\n      // we enforce a more recent version of node, we craft our own list\r\n      // @see https://github.com/nodejs/node/blob/master/src/node_constants.h#L8-L28\r\n      ciphers: [\r\n        'ECDHE-RSA-AES128-GCM-SHA256',\r\n        'ECDHE-ECDSA-AES128-GCM-SHA256',\r\n        'ECDHE-RSA-AES256-GCM-SHA384',\r\n        'ECDHE-ECDSA-AES256-GCM-SHA384',\r\n        'DHE-RSA-AES128-GCM-SHA256',\r\n        'ECDHE-RSA-AES128-SHA256',\r\n        'DHE-RSA-AES128-SHA256',\r\n        'ECDHE-RSA-AES256-SHA384',\r\n        'DHE-RSA-AES256-SHA384',\r\n        'ECDHE-RSA-AES256-SHA256',\r\n        'DHE-RSA-AES256-SHA256',\r\n        'HIGH',\r\n        '!aNULL',\r\n        '!eNULL',\r\n        '!EXPORT',\r\n        '!DES',\r\n        '!RC4',\r\n        '!MD5',\r\n        '!PSK',\r\n        '!SRP',\r\n        '!CAMELLIA'\r\n      ].join(':'),\r\n      // We use the server's cipher order rather than the client's to prevent\r\n      // the BEAST attack\r\n      honorCipherOrder: true\r\n    };\r\n  }\r\n\r\n  server.connection(connectionOptions);\r\n\r\n  // provide a simple way to expose static directories\r\n  server.decorate('server', 'exposeStaticDir', function (routePath, dirPath) {\r\n    this.route({\r\n      path: routePath,\r\n      method: 'GET',\r\n      handler: {\r\n        directory: {\r\n          path: dirPath,\r\n          listing: true,\r\n          lookupCompressed: true\r\n        }\r\n      },\r\n      config: {auth: false}\r\n    });\r\n  });\r\n\r\n  // provide a simple way to expose static files\r\n  server.decorate('server', 'exposeStaticFile', function (routePath, filePath) {\r\n    this.route({\r\n      path: routePath,\r\n      method: 'GET',\r\n      handler: {\r\n        file: filePath\r\n      },\r\n      config: {auth: false}\r\n    });\r\n  });\r\n\r\n  // helper for creating view managers for servers\r\n  server.decorate('server', 'setupViews', function (path, engines) {\r\n    this.views({\r\n      path: path,\r\n      isCached: config.get('optimize.viewCaching'),\r\n      engines: _.assign({ jade: require('jade') }, engines || {})\r\n    });\r\n  });\r\n\r\n  server.decorate('server', 'redirectToSlash', function (route) {\r\n    this.route({\r\n      path: route,\r\n      method: 'GET',\r\n      handler: function (req, reply) {\r\n        return reply.redirect(format({\r\n          search: req.url.search,\r\n          pathname: req.url.pathname + '/',\r\n        }));\r\n      }\r\n    });\r\n  });\r\n\r\n  // attach the app name to the server, so we can be sure we are actually talking to kibana\r\n  server.ext('onPreResponse', function (req, reply) {\r\n    let response = req.response;\r\n\r\n    if (response.isBoom) {\r\n      response.output.headers['kbn-name'] = kbnServer.name;\r\n      response.output.headers['kbn-version'] = kbnServer.version;\r\n    } else {\r\n      response.header('kbn-name', kbnServer.name);\r\n      response.header('kbn-version', kbnServer.version);\r\n    }\r\n\r\n    return reply.continue();\r\n  });\r\n\r\n  server.route({\r\n    path: '/',\r\n    method: 'GET',\r\n    handler: function (req, reply) {\r\n      return reply.view('rootRedirect', {\r\n        hashRoute: `${config.get('server.basePath')}/app/kibana`,\r\n        defaultRoute: getDefaultRoute(kbnServer),\r\n      });\r\n    }\r\n  });\r\n\r\n  server.route({\r\n    method: 'GET',\r\n    path: '/{p*}',\r\n    handler: function (req, reply) {\r\n      let path = req.path;\r\n      if (path === '/' || path.charAt(path.length - 1) !== '/') {\r\n        return reply(Boom.notFound());\r\n      }\r\n\r\n      return reply.redirect(format({\r\n        search: req.url.search,\r\n        pathname: path.slice(0, -1),\r\n      }))\r\n      .permanent(true);\r\n    }\r\n  });\r\n\r\n  server.route({\r\n    method: 'GET',\r\n    path: '/goto/{urlId}',\r\n    handler: async function (request, reply) {\r\n      try {\r\n        const url = await shortUrlLookup.getUrl(request.params.urlId);\r\n        reply().redirect(config.get('server.basePath') + url);\r\n      } catch (err) {\r\n        reply(err);\r\n      }\r\n    }\r\n  });\r\n\r\n  server.route({\r\n    method: 'POST',\r\n    path: '/shorten',\r\n    handler: async function (request, reply) {\r\n      try {\r\n        const urlId = await shortUrlLookup.generateUrlId(request.payload.url);\r\n        reply(urlId);\r\n      } catch (err) {\r\n        reply(err);\r\n      }\r\n    }\r\n  });\r\n\r\n  return kbnServer.mixin(require('./xsrf'));\r\n};\r\n"
      ]
    },
    "mtime": 1474540385554
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/logging/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar fromNode = require('bluebird').fromNode;\n\nmodule.exports = function (kbnServer, server, config) {\n  return fromNode(function (cb) {\n    var events = config.get('logging.events');\n\n    if (config.get('logging.silent')) {\n      _.defaults(events, {});\n    } else if (config.get('logging.quiet')) {\n      _.defaults(events, {\n        log: ['listening', 'error', 'fatal'],\n        error: '*'\n      });\n    } else if (config.get('logging.verbose')) {\n      _.defaults(events, {\n        log: '*',\n        ops: '*',\n        request: '*',\n        response: '*',\n        error: '*'\n      });\n    } else {\n      _.defaults(events, {\n        log: ['info', 'warning', 'error', 'fatal'],\n        response: config.get('logging.json') ? '*' : '!',\n        error: '*'\n      });\n    }\n\n    server.register({\n      register: require('good'),\n      options: {\n        opsInterval: 5000,\n        requestHeaders: true,\n        requestPayload: true,\n        reporters: [{\n          reporter: require('./LogReporter'),\n          config: {\n            json: config.get('logging.json'),\n            dest: config.get('logging.dest'),\n            // I'm adding the default here because if you add another filter\n            // using the commandline it will remove authorization. I want users\n            // to have to explicitly set --logging.filter.authorization=none to\n            // have it show up int he logs.\n            filter: _.defaults(config.get('logging.filter'), {\n              authorization: 'remove'\n            })\n          },\n          events: _.transform(events, function (filtered, val, key) {\n            // provide a string compatible way to remove events\n            if (val !== '!') filtered[key] = val;\n          }, {})\n        }]\n      }\n    }, cb);\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2xvZ2dpbmcvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLFFBQVEsQ0FBQzs7QUFFNUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BELFNBQU8sUUFBUSxDQUFDLFVBQVUsRUFBRSxFQUFFO0FBQzVCLFFBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7QUFFMUMsUUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7QUFDaEMsT0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7S0FDeEIsTUFDSSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLEVBQUU7QUFDcEMsT0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUU7QUFDakIsV0FBRyxFQUFFLENBQUMsV0FBVyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUM7QUFDcEMsYUFBSyxFQUFFLEdBQUc7T0FDWCxDQUFDLENBQUM7S0FDSixNQUNJLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFO0FBQ3RDLE9BQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFO0FBQ2pCLFdBQUcsRUFBRSxHQUFHO0FBQ1IsV0FBRyxFQUFFLEdBQUc7QUFDUixlQUFPLEVBQUUsR0FBRztBQUNaLGdCQUFRLEVBQUUsR0FBRztBQUNiLGFBQUssRUFBRSxHQUFHO09BQ1gsQ0FBQyxDQUFDO0tBQ0osTUFDSTtBQUNILE9BQUMsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFO0FBQ2pCLFdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQztBQUMxQyxnQkFBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUc7QUFDaEQsYUFBSyxFQUFFLEdBQUc7T0FDWCxDQUFDLENBQUM7S0FDSjs7QUFFRCxVQUFNLENBQUMsUUFBUSxDQUFDO0FBQ2QsY0FBUSxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDekIsYUFBTyxFQUFFO0FBQ1AsbUJBQVcsRUFBRSxJQUFJO0FBQ2pCLHNCQUFjLEVBQUUsSUFBSTtBQUNwQixzQkFBYyxFQUFFLElBQUk7QUFDcEIsaUJBQVMsRUFBRSxDQUNUO0FBQ0Usa0JBQVEsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDO0FBQ2xDLGdCQUFNLEVBQUU7QUFDTixnQkFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO0FBQ2hDLGdCQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7Ozs7O0FBS2hDLGtCQUFNLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7QUFDL0MsMkJBQWEsRUFBRSxRQUFRO2FBQ3hCLENBQUM7V0FDSDtBQUNELGdCQUFNLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsVUFBVSxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRTs7QUFFeEQsZ0JBQUksR0FBRyxLQUFLLEdBQUcsRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO1dBQ3RDLEVBQUUsRUFBRSxDQUFDO1NBQ1AsQ0FDRjtPQUNGO0tBQ0YsRUFBRSxFQUFFLENBQUMsQ0FBQztHQUNSLENBQUMsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvbG9nZ2luZy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmxldCBmcm9tTm9kZSA9IHJlcXVpcmUoJ2JsdWViaXJkJykuZnJvbU5vZGU7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XHJcbiAgcmV0dXJuIGZyb21Ob2RlKGZ1bmN0aW9uIChjYikge1xyXG4gICAgbGV0IGV2ZW50cyA9IGNvbmZpZy5nZXQoJ2xvZ2dpbmcuZXZlbnRzJyk7XHJcblxyXG4gICAgaWYgKGNvbmZpZy5nZXQoJ2xvZ2dpbmcuc2lsZW50JykpIHtcclxuICAgICAgXy5kZWZhdWx0cyhldmVudHMsIHt9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNvbmZpZy5nZXQoJ2xvZ2dpbmcucXVpZXQnKSkge1xyXG4gICAgICBfLmRlZmF1bHRzKGV2ZW50cywge1xyXG4gICAgICAgIGxvZzogWydsaXN0ZW5pbmcnLCAnZXJyb3InLCAnZmF0YWwnXSxcclxuICAgICAgICBlcnJvcjogJyonXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoY29uZmlnLmdldCgnbG9nZ2luZy52ZXJib3NlJykpIHtcclxuICAgICAgXy5kZWZhdWx0cyhldmVudHMsIHtcclxuICAgICAgICBsb2c6ICcqJyxcclxuICAgICAgICBvcHM6ICcqJyxcclxuICAgICAgICByZXF1ZXN0OiAnKicsXHJcbiAgICAgICAgcmVzcG9uc2U6ICcqJyxcclxuICAgICAgICBlcnJvcjogJyonXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIF8uZGVmYXVsdHMoZXZlbnRzLCB7XHJcbiAgICAgICAgbG9nOiBbJ2luZm8nLCAnd2FybmluZycsICdlcnJvcicsICdmYXRhbCddLFxyXG4gICAgICAgIHJlc3BvbnNlOiBjb25maWcuZ2V0KCdsb2dnaW5nLmpzb24nKSA/ICcqJyA6ICchJyxcclxuICAgICAgICBlcnJvcjogJyonXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNlcnZlci5yZWdpc3Rlcih7XHJcbiAgICAgIHJlZ2lzdGVyOiByZXF1aXJlKCdnb29kJyksXHJcbiAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICBvcHNJbnRlcnZhbDogNTAwMCxcclxuICAgICAgICByZXF1ZXN0SGVhZGVyczogdHJ1ZSxcclxuICAgICAgICByZXF1ZXN0UGF5bG9hZDogdHJ1ZSxcclxuICAgICAgICByZXBvcnRlcnM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcmVwb3J0ZXI6IHJlcXVpcmUoJy4vTG9nUmVwb3J0ZXInKSxcclxuICAgICAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICAgICAganNvbjogY29uZmlnLmdldCgnbG9nZ2luZy5qc29uJyksXHJcbiAgICAgICAgICAgICAgZGVzdDogY29uZmlnLmdldCgnbG9nZ2luZy5kZXN0JyksXHJcbiAgICAgICAgICAgICAgLy8gSSdtIGFkZGluZyB0aGUgZGVmYXVsdCBoZXJlIGJlY2F1c2UgaWYgeW91IGFkZCBhbm90aGVyIGZpbHRlclxyXG4gICAgICAgICAgICAgIC8vIHVzaW5nIHRoZSBjb21tYW5kbGluZSBpdCB3aWxsIHJlbW92ZSBhdXRob3JpemF0aW9uLiBJIHdhbnQgdXNlcnNcclxuICAgICAgICAgICAgICAvLyB0byBoYXZlIHRvIGV4cGxpY2l0bHkgc2V0IC0tbG9nZ2luZy5maWx0ZXIuYXV0aG9yaXphdGlvbj1ub25lIHRvXHJcbiAgICAgICAgICAgICAgLy8gaGF2ZSBpdCBzaG93IHVwIGludCBoZSBsb2dzLlxyXG4gICAgICAgICAgICAgIGZpbHRlcjogXy5kZWZhdWx0cyhjb25maWcuZ2V0KCdsb2dnaW5nLmZpbHRlcicpLCB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiAncmVtb3ZlJ1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGV2ZW50czogXy50cmFuc2Zvcm0oZXZlbnRzLCBmdW5jdGlvbiAoZmlsdGVyZWQsIHZhbCwga2V5KSB7XHJcbiAgICAgICAgICAgICAgLy8gcHJvdmlkZSBhIHN0cmluZyBjb21wYXRpYmxlIHdheSB0byByZW1vdmUgZXZlbnRzXHJcbiAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gJyEnKSBmaWx0ZXJlZFtrZXldID0gdmFsO1xyXG4gICAgICAgICAgICB9LCB7fSlcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuICAgIH0sIGNiKTtcclxuICB9KTtcclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/logging/index.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC;;AAE5C,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AACpD,SAAO,QAAQ,CAAC,UAAU,EAAE,EAAE;AAC5B,QAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;;AAE1C,QAAI,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;AAChC,OAAC,CAAC,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;KACxB,MACI,IAAI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;AACpC,OAAC,CAAC,QAAQ,CAAC,MAAM,EAAE;AACjB,WAAG,EAAE,CAAC,WAAW,EAAE,OAAO,EAAE,OAAO,CAAC;AACpC,aAAK,EAAE,GAAG;OACX,CAAC,CAAC;KACJ,MACI,IAAI,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE;AACtC,OAAC,CAAC,QAAQ,CAAC,MAAM,EAAE;AACjB,WAAG,EAAE,GAAG;AACR,WAAG,EAAE,GAAG;AACR,eAAO,EAAE,GAAG;AACZ,gBAAQ,EAAE,GAAG;AACb,aAAK,EAAE,GAAG;OACX,CAAC,CAAC;KACJ,MACI;AACH,OAAC,CAAC,QAAQ,CAAC,MAAM,EAAE;AACjB,WAAG,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC;AAC1C,gBAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,GAAG,GAAG,GAAG;AAChD,aAAK,EAAE,GAAG;OACX,CAAC,CAAC;KACJ;;AAED,UAAM,CAAC,QAAQ,CAAC;AACd,cAAQ,EAAE,OAAO,CAAC,MAAM,CAAC;AACzB,aAAO,EAAE;AACP,mBAAW,EAAE,IAAI;AACjB,sBAAc,EAAE,IAAI;AACpB,sBAAc,EAAE,IAAI;AACpB,iBAAS,EAAE,CACT;AACE,kBAAQ,EAAE,OAAO,CAAC,eAAe,CAAC;AAClC,gBAAM,EAAE;AACN,gBAAI,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AAChC,gBAAI,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;;;;;AAKhC,kBAAM,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;AAC/C,2BAAa,EAAE,QAAQ;aACxB,CAAC;WACH;AACD,gBAAM,EAAE,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE,UAAU,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE;;AAExD,gBAAI,GAAG,KAAK,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;WACtC,EAAE,EAAE,CAAC;SACP,CACF;OACF;KACF,EAAE,EAAE,CAAC,CAAC;GACR,CAAC,CAAC;CACJ,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/logging/index.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet fromNode = require('bluebird').fromNode;\r\n\r\nmodule.exports = function (kbnServer, server, config) {\r\n  return fromNode(function (cb) {\r\n    let events = config.get('logging.events');\r\n\r\n    if (config.get('logging.silent')) {\r\n      _.defaults(events, {});\r\n    }\r\n    else if (config.get('logging.quiet')) {\r\n      _.defaults(events, {\r\n        log: ['listening', 'error', 'fatal'],\r\n        error: '*'\r\n      });\r\n    }\r\n    else if (config.get('logging.verbose')) {\r\n      _.defaults(events, {\r\n        log: '*',\r\n        ops: '*',\r\n        request: '*',\r\n        response: '*',\r\n        error: '*'\r\n      });\r\n    }\r\n    else {\r\n      _.defaults(events, {\r\n        log: ['info', 'warning', 'error', 'fatal'],\r\n        response: config.get('logging.json') ? '*' : '!',\r\n        error: '*'\r\n      });\r\n    }\r\n\r\n    server.register({\r\n      register: require('good'),\r\n      options: {\r\n        opsInterval: 5000,\r\n        requestHeaders: true,\r\n        requestPayload: true,\r\n        reporters: [\r\n          {\r\n            reporter: require('./LogReporter'),\r\n            config: {\r\n              json: config.get('logging.json'),\r\n              dest: config.get('logging.dest'),\r\n              // I'm adding the default here because if you add another filter\r\n              // using the commandline it will remove authorization. I want users\r\n              // to have to explicitly set --logging.filter.authorization=none to\r\n              // have it show up int he logs.\r\n              filter: _.defaults(config.get('logging.filter'), {\r\n                authorization: 'remove'\r\n              })\r\n            },\r\n            events: _.transform(events, function (filtered, val, key) {\r\n              // provide a string compatible way to remove events\r\n              if (val !== '!') filtered[key] = val;\r\n            }, {})\r\n          }\r\n        ]\r\n      }\r\n    }, cb);\r\n  });\r\n};\r\n"
      ]
    },
    "mtime": 1465716670873
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/status/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./wrap_auth_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "wrapAuthConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];\n\nvar _wrap_auth_config = require('./wrap_auth_config');\n\nvar _wrap_auth_config2 = _interopRequireDefault(_wrap_auth_config);\n\nmodule.exports = function (kbnServer, server, config) {\n  var _ = require('lodash');\n  var ServerStatus = require('./ServerStatus');\n\n  var _require = require('path');\n\n  var join = _require.join;\n\n  kbnServer.status = new ServerStatus(kbnServer.server);\n\n  if (server.plugins.good) {\n    kbnServer.mixin(require('./metrics'));\n  }\n\n  var wrapAuth = (0, _wrap_auth_config2['default'])(config.get('status.allowAnonymous'));\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/api/status',\n    handler: function handler(request, reply) {\n      return reply({\n        status: kbnServer.status.toJSON(),\n        metrics: kbnServer.metrics\n      });\n    }\n  }));\n\n  server.decorate('reply', 'renderStatusPage', function () {\n    var app = kbnServer.uiExports.getHiddenApp('statusPage');\n    var resp = app ? this.renderApp(app) : this(kbnServer.status.toString());\n    resp.code(kbnServer.status.isGreen() ? 200 : 503);\n    return resp;\n  });\n\n  server.route(wrapAuth({\n    method: 'GET',\n    path: '/status',\n    handler: function handler(request, reply) {\n      return reply.renderStatusPage();\n    }\n  }));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3N0YXR1cy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O2dDQUEyQixvQkFBb0I7Ozs7QUFFL0MsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BELE1BQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixNQUFJLFlBQVksR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7aUJBQzlCLE9BQU8sQ0FBQyxNQUFNLENBQUM7O01BQXhCLElBQUksWUFBSixJQUFJOztBQUVWLFdBQVMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxZQUFZLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUV0RCxNQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFO0FBQ3ZCLGFBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7R0FDdkM7O0FBRUQsTUFBTSxRQUFRLEdBQUcsbUNBQWUsTUFBTSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUM7O0FBRXJFLFFBQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDO0FBQ3BCLFVBQU0sRUFBRSxLQUFLO0FBQ2IsUUFBSSxFQUFFLGFBQWE7QUFDbkIsV0FBTyxFQUFFLGlCQUFVLE9BQU8sRUFBRSxLQUFLLEVBQUU7QUFDakMsYUFBTyxLQUFLLENBQUM7QUFDWCxjQUFNLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUU7QUFDakMsZUFBTyxFQUFFLFNBQVMsQ0FBQyxPQUFPO09BQzNCLENBQUMsQ0FBQztLQUNKO0dBQ0YsQ0FBQyxDQUFDLENBQUM7O0FBRUosUUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsWUFBWTtBQUN2RCxRQUFJLEdBQUcsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN6RCxRQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ3pFLFFBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDbEQsV0FBTyxJQUFJLENBQUM7R0FDYixDQUFDLENBQUM7O0FBRUgsUUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFDcEIsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsU0FBUztBQUNmLFdBQU8sRUFBRSxpQkFBVSxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ2pDLGFBQU8sS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUM7S0FDakM7R0FDRixDQUFDLENBQUMsQ0FBQztDQUNMLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvc3RhdHVzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHdyYXBBdXRoQ29uZmlnIGZyb20gJy4vd3JhcF9hdXRoX2NvbmZpZyc7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XHJcbiAgbGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuICBsZXQgU2VydmVyU3RhdHVzID0gcmVxdWlyZSgnLi9TZXJ2ZXJTdGF0dXMnKTtcclxuICB2YXIgeyBqb2luIH0gPSByZXF1aXJlKCdwYXRoJyk7XHJcblxyXG4gIGtiblNlcnZlci5zdGF0dXMgPSBuZXcgU2VydmVyU3RhdHVzKGtiblNlcnZlci5zZXJ2ZXIpO1xyXG5cclxuICBpZiAoc2VydmVyLnBsdWdpbnMuZ29vZCkge1xyXG4gICAga2JuU2VydmVyLm1peGluKHJlcXVpcmUoJy4vbWV0cmljcycpKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHdyYXBBdXRoID0gd3JhcEF1dGhDb25maWcoY29uZmlnLmdldCgnc3RhdHVzLmFsbG93QW5vbnltb3VzJykpO1xyXG5cclxuICBzZXJ2ZXIucm91dGUod3JhcEF1dGgoe1xyXG4gICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIHBhdGg6ICcvYXBpL3N0YXR1cycsXHJcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxdWVzdCwgcmVwbHkpIHtcclxuICAgICAgcmV0dXJuIHJlcGx5KHtcclxuICAgICAgICBzdGF0dXM6IGtiblNlcnZlci5zdGF0dXMudG9KU09OKCksXHJcbiAgICAgICAgbWV0cmljczoga2JuU2VydmVyLm1ldHJpY3NcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSkpO1xyXG5cclxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3JlcGx5JywgJ3JlbmRlclN0YXR1c1BhZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgYXBwID0ga2JuU2VydmVyLnVpRXhwb3J0cy5nZXRIaWRkZW5BcHAoJ3N0YXR1c1BhZ2UnKTtcclxuICAgIGxldCByZXNwID0gYXBwID8gdGhpcy5yZW5kZXJBcHAoYXBwKSA6IHRoaXMoa2JuU2VydmVyLnN0YXR1cy50b1N0cmluZygpKTtcclxuICAgIHJlc3AuY29kZShrYm5TZXJ2ZXIuc3RhdHVzLmlzR3JlZW4oKSA/IDIwMCA6IDUwMyk7XHJcbiAgICByZXR1cm4gcmVzcDtcclxuICB9KTtcclxuXHJcbiAgc2VydmVyLnJvdXRlKHdyYXBBdXRoKHtcclxuICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICBwYXRoOiAnL3N0YXR1cycsXHJcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxdWVzdCwgcmVwbHkpIHtcclxuICAgICAgcmV0dXJuIHJlcGx5LnJlbmRlclN0YXR1c1BhZ2UoKTtcclxuICAgIH1cclxuICB9KSk7XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/status/index.js"
      ],
      "names": [],
      "mappings": ";;;;gCAA2B,oBAAoB;;;;AAE/C,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AACpD,MAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,MAAI,YAAY,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;;iBAC9B,OAAO,CAAC,MAAM,CAAC;;MAAxB,IAAI,YAAJ,IAAI;;AAEV,WAAS,CAAC,MAAM,GAAG,IAAI,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;;AAEtD,MAAI,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE;AACvB,aAAS,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;GACvC;;AAED,MAAM,QAAQ,GAAG,mCAAe,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC;;AAErE,QAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;AACpB,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,aAAa;AACnB,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,aAAO,KAAK,CAAC;AACX,cAAM,EAAE,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE;AACjC,eAAO,EAAE,SAAS,CAAC,OAAO;OAC3B,CAAC,CAAC;KACJ;GACF,CAAC,CAAC,CAAC;;AAEJ,QAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,kBAAkB,EAAE,YAAY;AACvD,QAAI,GAAG,GAAG,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;AACzD,QAAI,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;AACzE,QAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;AAClD,WAAO,IAAI,CAAC;GACb,CAAC,CAAC;;AAEH,QAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;AACpB,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,SAAS;AACf,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,aAAO,KAAK,CAAC,gBAAgB,EAAE,CAAC;KACjC;GACF,CAAC,CAAC,CAAC;CACL,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/status/index.js",
      "sourcesContent": [
        "import wrapAuthConfig from './wrap_auth_config';\r\n\r\nmodule.exports = function (kbnServer, server, config) {\r\n  let _ = require('lodash');\r\n  let ServerStatus = require('./ServerStatus');\r\n  var { join } = require('path');\r\n\r\n  kbnServer.status = new ServerStatus(kbnServer.server);\r\n\r\n  if (server.plugins.good) {\r\n    kbnServer.mixin(require('./metrics'));\r\n  }\r\n\r\n  const wrapAuth = wrapAuthConfig(config.get('status.allowAnonymous'));\r\n\r\n  server.route(wrapAuth({\r\n    method: 'GET',\r\n    path: '/api/status',\r\n    handler: function (request, reply) {\r\n      return reply({\r\n        status: kbnServer.status.toJSON(),\r\n        metrics: kbnServer.metrics\r\n      });\r\n    }\r\n  }));\r\n\r\n  server.decorate('reply', 'renderStatusPage', function () {\r\n    let app = kbnServer.uiExports.getHiddenApp('statusPage');\r\n    let resp = app ? this.renderApp(app) : this(kbnServer.status.toString());\r\n    resp.code(kbnServer.status.isGreen() ? 200 : 503);\r\n    return resp;\r\n  });\r\n\r\n  server.route(wrapAuth({\r\n    method: 'GET',\r\n    path: '/status',\r\n    handler: function (request, reply) {\r\n      return reply.renderStatusPage();\r\n    }\r\n  }));\r\n};\r\n"
      ]
    },
    "mtime": 1465716670889
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/status/wrap_auth_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "assign",
              "identity"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "assign",
                "local": "assign"
              },
              {
                "kind": "named",
                "imported": "identity",
                "local": "identity"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nexports['default'] = function (allowAnonymous) {\n  if (allowAnonymous) return function (options) {\n    return (0, _lodash.assign)(options, { config: { auth: false } });\n  };\n  return _lodash.identity;\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3N0YXR1cy93cmFwX2F1dGhfY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztzQkFBK0IsUUFBUTs7cUJBRXhCLFVBQUMsY0FBYyxFQUFLO0FBQ2pDLE1BQUksY0FBYyxFQUFFLE9BQU8sVUFBQSxPQUFPO1dBQUksb0JBQU8sT0FBTyxFQUFFLEVBQUMsTUFBTSxFQUFFLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBQyxFQUFDLENBQUM7R0FBQSxDQUFDO0FBQy9FLDBCQUFnQjtDQUNqQiIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9zdGF0dXMvd3JhcF9hdXRoX2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXNzaWduLCBpZGVudGl0eX0gZnJvbSAnbG9kYXNoJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IChhbGxvd0Fub255bW91cykgPT4ge1xyXG4gIGlmIChhbGxvd0Fub255bW91cykgcmV0dXJuIG9wdGlvbnMgPT4gYXNzaWduKG9wdGlvbnMsIHtjb25maWc6IHthdXRoOiBmYWxzZX19KTtcclxuICByZXR1cm4gaWRlbnRpdHk7XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/status/wrap_auth_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAA+B,QAAQ;;qBAExB,UAAC,cAAc,EAAK;AACjC,MAAI,cAAc,EAAE,OAAO,UAAA,OAAO;WAAI,oBAAO,OAAO,EAAE,EAAC,MAAM,EAAE,EAAC,IAAI,EAAE,KAAK,EAAC,EAAC,CAAC;GAAA,CAAC;AAC/E,0BAAgB;CACjB",
      "file": "D:/backup/oplate/kibana1/src/server/status/wrap_auth_config.js",
      "sourcesContent": [
        "import {assign, identity} from 'lodash';\r\n\r\nexport default (allowAnonymous) => {\r\n  if (allowAnonymous) return options => assign(options, {config: {auth: false}});\r\n  return identity;\r\n};\r\n"
      ]
    },
    "mtime": 1465716558117
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/plugins/scan.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _getIterator = require('babel-runtime/core-js/get-iterator')['default'];\n\nvar _this3 = this;\n\nmodule.exports = function callee$0$0(kbnServer, server, config) {\n  var _, _require, fromNode, _require2, readdir, stat, _require3, resolve, _require4, each, PluginCollection, plugins, scanDirs, pluginPaths, debug, warning, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, path, modulePath;\n\n  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {\n    var _this2 = this;\n\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        _ = require('lodash');\n        _require = require('bluebird');\n        fromNode = _require.fromNode;\n        _require2 = require('fs');\n        readdir = _require2.readdir;\n        stat = _require2.stat;\n        _require3 = require('path');\n        resolve = _require3.resolve;\n        _require4 = require('bluebird');\n        each = _require4.each;\n        PluginCollection = require('./PluginCollection');\n        plugins = kbnServer.plugins = new PluginCollection(kbnServer);\n        scanDirs = [].concat(config.get('plugins.scanDirs') || []);\n        pluginPaths = [].concat(config.get('plugins.paths') || []);\n        debug = _.bindKey(server, 'log', ['plugins', 'debug']);\n        warning = _.bindKey(server, 'log', ['plugins', 'warning']);\n        context$1$0.next = 18;\n        return _regeneratorRuntime.awrap(each(scanDirs, function callee$1$0(dir) {\n          var filenames;\n          return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {\n            var _this = this;\n\n            while (1) switch (context$2$0.prev = context$2$0.next) {\n              case 0:\n                debug({ tmpl: 'Scanning `<%= dir %>` for plugins', dir: dir });\n\n                filenames = null;\n                context$2$0.prev = 2;\n                context$2$0.next = 5;\n                return _regeneratorRuntime.awrap(fromNode(function (cb) {\n                  return readdir(dir, cb);\n                }));\n\n              case 5:\n                filenames = context$2$0.sent;\n                context$2$0.next = 14;\n                break;\n\n              case 8:\n                context$2$0.prev = 8;\n                context$2$0.t0 = context$2$0['catch'](2);\n\n                if (!(context$2$0.t0.code !== 'ENOENT')) {\n                  context$2$0.next = 12;\n                  break;\n                }\n\n                throw context$2$0.t0;\n\n              case 12:\n\n                filenames = [];\n                warning({\n                  tmpl: '<%= err.code %>: Unable to scan non-existent directory for plugins \"<%= dir %>\"',\n                  err: context$2$0.t0,\n                  dir: dir\n                });\n\n              case 14:\n                context$2$0.next = 16;\n                return _regeneratorRuntime.awrap(each(filenames, function callee$2$0(name) {\n                  var path, stats;\n                  return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {\n                    while (1) switch (context$3$0.prev = context$3$0.next) {\n                      case 0:\n                        if (!(name[0] === '.')) {\n                          context$3$0.next = 2;\n                          break;\n                        }\n\n                        return context$3$0.abrupt('return');\n\n                      case 2:\n                        path = resolve(dir, name);\n                        context$3$0.next = 5;\n                        return _regeneratorRuntime.awrap(fromNode(function (cb) {\n                          return stat(path, cb);\n                        }));\n\n                      case 5:\n                        stats = context$3$0.sent;\n\n                        if (stats.isDirectory()) {\n                          pluginPaths.push(path);\n                        }\n\n                      case 7:\n                      case 'end':\n                        return context$3$0.stop();\n                    }\n                  }, null, _this);\n                }));\n\n              case 16:\n              case 'end':\n                return context$2$0.stop();\n            }\n          }, null, _this2, [[2, 8]]);\n        }));\n\n      case 18:\n        _iteratorNormalCompletion = true;\n        _didIteratorError = false;\n        _iteratorError = undefined;\n        context$1$0.prev = 21;\n        _iterator = _getIterator(pluginPaths);\n\n      case 23:\n        if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n          context$1$0.next = 40;\n          break;\n        }\n\n        path = _step.value;\n        modulePath = undefined;\n        context$1$0.prev = 26;\n\n        modulePath = require.resolve(path);\n        context$1$0.next = 34;\n        break;\n\n      case 30:\n        context$1$0.prev = 30;\n        context$1$0.t0 = context$1$0['catch'](26);\n\n        warning({ tmpl: 'Skipping non-plugin directory at <%= path %>', path: path });\n        return context$1$0.abrupt('continue', 37);\n\n      case 34:\n        context$1$0.next = 36;\n        return _regeneratorRuntime.awrap(plugins['new'](path));\n\n      case 36:\n        debug({ tmpl: 'Found plugin at <%= path %>', path: modulePath });\n\n      case 37:\n        _iteratorNormalCompletion = true;\n        context$1$0.next = 23;\n        break;\n\n      case 40:\n        context$1$0.next = 46;\n        break;\n\n      case 42:\n        context$1$0.prev = 42;\n        context$1$0.t1 = context$1$0['catch'](21);\n        _didIteratorError = true;\n        _iteratorError = context$1$0.t1;\n\n      case 46:\n        context$1$0.prev = 46;\n        context$1$0.prev = 47;\n\n        if (!_iteratorNormalCompletion && _iterator['return']) {\n          _iterator['return']();\n        }\n\n      case 49:\n        context$1$0.prev = 49;\n\n        if (!_didIteratorError) {\n          context$1$0.next = 52;\n          break;\n        }\n\n        throw _iteratorError;\n\n      case 52:\n        return context$1$0.finish(49);\n\n      case 53:\n        return context$1$0.finish(46);\n\n      case 54:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, _this3, [[21, 42, 46, 54], [26, 30], [47,, 49, 53]]);\n};\n\n// scan all scanDirs to find pluginPaths\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3BsdWdpbnMvc2Nhbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsb0JBQU8sU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNO01BQzNDLENBQUMsWUFDQyxRQUFRLGFBQ1IsT0FBTyxFQUFFLElBQUksYUFDYixPQUFPLGFBQ1AsSUFBSSxFQUVOLGdCQUFnQixFQUNoQixPQUFPLEVBRVAsUUFBUSxFQUNSLFdBQVcsRUFFWCxLQUFLLEVBQ0wsT0FBTyxrRkFnQ0YsSUFBSSxFQUNQLFVBQVU7Ozs7Ozs7QUE5Q1osU0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7bUJBQ04sT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUFoQyxnQkFBUSxZQUFSLFFBQVE7b0JBQ1UsT0FBTyxDQUFDLElBQUksQ0FBQztBQUEvQixlQUFPLGFBQVAsT0FBTztBQUFFLFlBQUksYUFBSixJQUFJO29CQUNELE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFBM0IsZUFBTyxhQUFQLE9BQU87b0JBQ0UsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUE1QixZQUFJLGFBQUosSUFBSTtBQUVOLHdCQUFnQixHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUNoRCxlQUFPLEdBQUcsU0FBUyxDQUFDLE9BQU8sR0FBRyxJQUFJLGdCQUFnQixDQUFDLFNBQVMsQ0FBQztBQUU3RCxnQkFBUSxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMxRCxtQkFBVyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLENBQUM7QUFFMUQsYUFBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN0RCxlQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDOzt5Q0FHeEQsSUFBSSxDQUFDLFFBQVEsRUFBRSxvQkFBTSxHQUFHO2NBR3hCLFNBQVM7Ozs7OztBQUZiLHFCQUFLLENBQUMsRUFBRSxJQUFJLEVBQUUsbUNBQW1DLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7O0FBRTNELHlCQUFTLEdBQUcsSUFBSTs7O2lEQUdBLFFBQVEsQ0FBQyxVQUFBLEVBQUU7eUJBQUksT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUM7aUJBQUEsQ0FBQzs7O0FBQWxELHlCQUFTOzs7Ozs7OztzQkFFTCxlQUFJLElBQUksS0FBSyxRQUFRLENBQUE7Ozs7Ozs7OztBQUV6Qix5QkFBUyxHQUFHLEVBQUUsQ0FBQztBQUNmLHVCQUFPLENBQUM7QUFDTixzQkFBSSxFQUFFLGlGQUFpRjtBQUN2RixxQkFBRyxnQkFBSztBQUNSLHFCQUFHLEVBQUUsR0FBRztpQkFDVCxDQUFDLENBQUM7Ozs7aURBR0MsSUFBSSxDQUFDLFNBQVMsRUFBRSxvQkFBTSxJQUFJO3NCQUcxQixJQUFJLEVBQ0osS0FBSzs7Ozs4QkFITCxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFBOzs7Ozs7OztBQUVmLDRCQUFJLEdBQUcsT0FBTyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUM7O3lEQUNYLFFBQVEsQ0FBQyxVQUFBLEVBQUU7aUNBQUksSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUM7eUJBQUEsQ0FBQzs7O0FBQTVDLDZCQUFLOztBQUNULDRCQUFJLEtBQUssQ0FBQyxXQUFXLEVBQUUsRUFBRTtBQUN2QixxQ0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzt5QkFDeEI7Ozs7Ozs7aUJBQ0YsQ0FBQzs7Ozs7OztTQUNILENBQUM7Ozs7Ozs7aUNBRWUsV0FBVzs7Ozs7Ozs7QUFBbkIsWUFBSTtBQUNQLGtCQUFVOzs7QUFFWixrQkFBVSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7Ozs7Ozs7O0FBRW5DLGVBQU8sQ0FBQyxFQUFFLElBQUksRUFBRSw4Q0FBOEMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQzs7Ozs7eUNBSTFFLE9BQU8sT0FBSSxDQUFDLElBQUksQ0FBQzs7O0FBQ3ZCLGFBQUssQ0FBQyxFQUFFLElBQUksRUFBRSw2QkFBNkIsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQUVwRSxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3BsdWdpbnMvc2Nhbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpID0+IHtcclxuICBsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG4gIGxldCB7IGZyb21Ob2RlIH0gPSByZXF1aXJlKCdibHVlYmlyZCcpO1xyXG4gIGxldCB7IHJlYWRkaXIsIHN0YXQgfSA9IHJlcXVpcmUoJ2ZzJyk7XHJcbiAgbGV0IHsgcmVzb2x2ZSB9ID0gcmVxdWlyZSgncGF0aCcpO1xyXG4gIGxldCB7IGVhY2ggfSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XHJcblxyXG4gIGxldCBQbHVnaW5Db2xsZWN0aW9uID0gcmVxdWlyZSgnLi9QbHVnaW5Db2xsZWN0aW9uJyk7XHJcbiAgbGV0IHBsdWdpbnMgPSBrYm5TZXJ2ZXIucGx1Z2lucyA9IG5ldyBQbHVnaW5Db2xsZWN0aW9uKGtiblNlcnZlcik7XHJcblxyXG4gIGxldCBzY2FuRGlycyA9IFtdLmNvbmNhdChjb25maWcuZ2V0KCdwbHVnaW5zLnNjYW5EaXJzJykgfHwgW10pO1xyXG4gIGxldCBwbHVnaW5QYXRocyA9IFtdLmNvbmNhdChjb25maWcuZ2V0KCdwbHVnaW5zLnBhdGhzJykgfHwgW10pO1xyXG5cclxuICBsZXQgZGVidWcgPSBfLmJpbmRLZXkoc2VydmVyLCAnbG9nJywgWydwbHVnaW5zJywgJ2RlYnVnJ10pO1xyXG4gIGxldCB3YXJuaW5nID0gXy5iaW5kS2V5KHNlcnZlciwgJ2xvZycsIFsncGx1Z2lucycsICd3YXJuaW5nJ10pO1xyXG5cclxuICAvLyBzY2FuIGFsbCBzY2FuRGlycyB0byBmaW5kIHBsdWdpblBhdGhzXHJcbiAgYXdhaXQgZWFjaChzY2FuRGlycywgYXN5bmMgZGlyID0+IHtcclxuICAgIGRlYnVnKHsgdG1wbDogJ1NjYW5uaW5nIGA8JT0gZGlyICU+YCBmb3IgcGx1Z2lucycsIGRpcjogZGlyIH0pO1xyXG5cclxuICAgIGxldCBmaWxlbmFtZXMgPSBudWxsO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGZpbGVuYW1lcyA9IGF3YWl0IGZyb21Ob2RlKGNiID0+IHJlYWRkaXIoZGlyLCBjYikpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGlmIChlcnIuY29kZSAhPT0gJ0VOT0VOVCcpIHRocm93IGVycjtcclxuXHJcbiAgICAgIGZpbGVuYW1lcyA9IFtdO1xyXG4gICAgICB3YXJuaW5nKHtcclxuICAgICAgICB0bXBsOiAnPCU9IGVyci5jb2RlICU+OiBVbmFibGUgdG8gc2NhbiBub24tZXhpc3RlbnQgZGlyZWN0b3J5IGZvciBwbHVnaW5zIFwiPCU9IGRpciAlPlwiJyxcclxuICAgICAgICBlcnI6IGVycixcclxuICAgICAgICBkaXI6IGRpclxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBlYWNoKGZpbGVuYW1lcywgYXN5bmMgbmFtZSA9PiB7XHJcbiAgICAgIGlmIChuYW1lWzBdID09PSAnLicpIHJldHVybjtcclxuXHJcbiAgICAgIGxldCBwYXRoID0gcmVzb2x2ZShkaXIsIG5hbWUpO1xyXG4gICAgICBsZXQgc3RhdHMgPSBhd2FpdCBmcm9tTm9kZShjYiA9PiBzdGF0KHBhdGgsIGNiKSk7XHJcbiAgICAgIGlmIChzdGF0cy5pc0RpcmVjdG9yeSgpKSB7XHJcbiAgICAgICAgcGx1Z2luUGF0aHMucHVzaChwYXRoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGZvciAobGV0IHBhdGggb2YgcGx1Z2luUGF0aHMpIHtcclxuICAgIGxldCBtb2R1bGVQYXRoO1xyXG4gICAgdHJ5IHtcclxuICAgICAgbW9kdWxlUGF0aCA9IHJlcXVpcmUucmVzb2x2ZShwYXRoKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgd2FybmluZyh7IHRtcGw6ICdTa2lwcGluZyBub24tcGx1Z2luIGRpcmVjdG9yeSBhdCA8JT0gcGF0aCAlPicsIHBhdGg6IHBhdGggfSk7XHJcbiAgICAgIGNvbnRpbnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHBsdWdpbnMubmV3KHBhdGgpO1xyXG4gICAgZGVidWcoeyB0bXBsOiAnRm91bmQgcGx1Z2luIGF0IDwlPSBwYXRoICU+JywgcGF0aDogbW9kdWxlUGF0aCB9KTtcclxuICB9XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/plugins/scan.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/server/plugins/scan.js",
      "sourcesContent": [
        "module.exports = async (kbnServer, server, config) => {\r\n  let _ = require('lodash');\r\n  let { fromNode } = require('bluebird');\r\n  let { readdir, stat } = require('fs');\r\n  let { resolve } = require('path');\r\n  let { each } = require('bluebird');\r\n\r\n  let PluginCollection = require('./PluginCollection');\r\n  let plugins = kbnServer.plugins = new PluginCollection(kbnServer);\r\n\r\n  let scanDirs = [].concat(config.get('plugins.scanDirs') || []);\r\n  let pluginPaths = [].concat(config.get('plugins.paths') || []);\r\n\r\n  let debug = _.bindKey(server, 'log', ['plugins', 'debug']);\r\n  let warning = _.bindKey(server, 'log', ['plugins', 'warning']);\r\n\r\n  // scan all scanDirs to find pluginPaths\r\n  await each(scanDirs, async dir => {\r\n    debug({ tmpl: 'Scanning `<%= dir %>` for plugins', dir: dir });\r\n\r\n    let filenames = null;\r\n\r\n    try {\r\n      filenames = await fromNode(cb => readdir(dir, cb));\r\n    } catch (err) {\r\n      if (err.code !== 'ENOENT') throw err;\r\n\r\n      filenames = [];\r\n      warning({\r\n        tmpl: '<%= err.code %>: Unable to scan non-existent directory for plugins \"<%= dir %>\"',\r\n        err: err,\r\n        dir: dir\r\n      });\r\n    }\r\n\r\n    await each(filenames, async name => {\r\n      if (name[0] === '.') return;\r\n\r\n      let path = resolve(dir, name);\r\n      let stats = await fromNode(cb => stat(path, cb));\r\n      if (stats.isDirectory()) {\r\n        pluginPaths.push(path);\r\n      }\r\n    });\r\n  });\r\n\r\n  for (let path of pluginPaths) {\r\n    let modulePath;\r\n    try {\r\n      modulePath = require.resolve(path);\r\n    } catch (e) {\r\n      warning({ tmpl: 'Skipping non-plugin directory at <%= path %>', path: path });\r\n      continue;\r\n    }\r\n\r\n    await plugins.new(path);\r\n    debug({ tmpl: 'Found plugin at <%= path %>', path: modulePath });\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670873
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/config/complete.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "sliced-to-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _slicedToArray = require('babel-runtime/helpers/sliced-to-array')['default'];\n\nvar _getIterator = require('babel-runtime/core-js/get-iterator')['default'];\n\nmodule.exports = function (kbnServer, server, config) {\n\n  server.decorate('server', 'config', function () {\n    return kbnServer.config;\n  });\n\n  var tmpl = 'Settings for \"<%= key %>\" were not applied, check for spelling errors and ensure the plugin is loaded.';\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = _getIterator(config.getPendingSets()), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _step$value = _slicedToArray(_step.value, 2);\n\n      var key = _step$value[0];\n      var val = _step$value[1];\n\n      server.log(['warning', 'config'], { key: key, val: val, tmpl: tmpl });\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator['return']) {\n        _iterator['return']();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9jb21wbGV0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7O0FBRXBELFFBQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxZQUFZO0FBQzlDLFdBQU8sU0FBUyxDQUFDLE1BQU0sQ0FBQztHQUN6QixDQUFDLENBQUM7O0FBRUgsTUFBSSxJQUFJLEdBQUcsd0dBQXdHLENBQUM7Ozs7OztBQUNwSCxzQ0FBdUIsTUFBTSxDQUFDLGNBQWMsRUFBRSw0R0FBRTs7O1VBQXRDLEdBQUc7VUFBRSxHQUFHOztBQUNoQixZQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFILEdBQUcsRUFBRSxHQUFHLEVBQUgsR0FBRyxFQUFFLElBQUksRUFBSixJQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQ3ZEOzs7Ozs7Ozs7Ozs7Ozs7Q0FDRixDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9jb21wbGV0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtiblNlcnZlciwgc2VydmVyLCBjb25maWcpIHtcclxuXHJcbiAgc2VydmVyLmRlY29yYXRlKCdzZXJ2ZXInLCAnY29uZmlnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIGtiblNlcnZlci5jb25maWc7XHJcbiAgfSk7XHJcblxyXG4gIGxldCB0bXBsID0gJ1NldHRpbmdzIGZvciBcIjwlPSBrZXkgJT5cIiB3ZXJlIG5vdCBhcHBsaWVkLCBjaGVjayBmb3Igc3BlbGxpbmcgZXJyb3JzIGFuZCBlbnN1cmUgdGhlIHBsdWdpbiBpcyBsb2FkZWQuJztcclxuICBmb3IgKGxldCBba2V5LCB2YWxdIG9mIGNvbmZpZy5nZXRQZW5kaW5nU2V0cygpKSB7XHJcbiAgICBzZXJ2ZXIubG9nKFsnd2FybmluZycsICdjb25maWcnXSwgeyBrZXksIHZhbCwgdG1wbCB9KTtcclxuICB9XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/config/complete.js"
      ],
      "names": [],
      "mappings": ";;;;;;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;;AAEpD,QAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,YAAY;AAC9C,WAAO,SAAS,CAAC,MAAM,CAAC;GACzB,CAAC,CAAC;;AAEH,MAAI,IAAI,GAAG,wGAAwG,CAAC;;;;;;AACpH,sCAAuB,MAAM,CAAC,cAAc,EAAE,4GAAE;;;UAAtC,GAAG;UAAE,GAAG;;AAChB,YAAM,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAH,GAAG,EAAE,GAAG,EAAH,GAAG,EAAE,IAAI,EAAJ,IAAI,EAAE,CAAC,CAAC;KACvD;;;;;;;;;;;;;;;CACF,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/config/complete.js",
      "sourcesContent": [
        "module.exports = function (kbnServer, server, config) {\r\n\r\n  server.decorate('server', 'config', function () {\r\n    return kbnServer.config;\r\n  });\r\n\r\n  let tmpl = 'Settings for \"<%= key %>\" were not applied, check for spelling errors and ensure the plugin is loaded.';\r\n  for (let [key, val] of config.getPendingSets()) {\r\n    server.log(['warning', 'config'], { key, val, tmpl });\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670795
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/ui/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _getIterator = require('babel-runtime/core-js/get-iterator')['default'];\n\nvar _this = this;\n\nmodule.exports = function callee$0$0(kbnServer, server, config) {\n  var _require, defaults, Boom, formatUrl, _require2, resolve, readFile, fromRoot, UiExports, UiBundle, UiBundleCollection, UiBundlerEnv, loadingGif, uiExports, bundlerEnv, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, plugin, bundles, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, app, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, gen, bundle, defaultInjectedVars;\n\n  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        _require = require('lodash');\n        defaults = _require.defaults;\n        Boom = require('boom');\n        formatUrl = require('url').format;\n        _require2 = require('path');\n        resolve = _require2.resolve;\n        readFile = require('fs').readFileSync;\n        fromRoot = require('../utils/fromRoot');\n        UiExports = require('./UiExports');\n        UiBundle = require('./UiBundle');\n        UiBundleCollection = require('./UiBundleCollection');\n        UiBundlerEnv = require('./UiBundlerEnv');\n        loadingGif = readFile(fromRoot('src/ui/public/loading.gif'), { encoding: 'base64' });\n        uiExports = kbnServer.uiExports = new UiExports({\n          urlBasePath: config.get('server.basePath')\n        });\n        bundlerEnv = new UiBundlerEnv(config.get('optimize.bundleDir'));\n\n        bundlerEnv.addContext('env', config.get('env.name'));\n        bundlerEnv.addContext('urlBasePath', config.get('server.basePath'));\n        bundlerEnv.addContext('sourceMaps', config.get('optimize.sourceMaps'));\n        bundlerEnv.addContext('kbnVersion', config.get('pkg.version'));\n        bundlerEnv.addContext('buildNum', config.get('pkg.buildNum'));\n        uiExports.addConsumer(bundlerEnv);\n\n        _iteratorNormalCompletion = true;\n        _didIteratorError = false;\n        _iteratorError = undefined;\n        context$1$0.prev = 24;\n        for (_iterator = _getIterator(kbnServer.plugins); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          plugin = _step.value;\n\n          uiExports.consumePlugin(plugin);\n        }\n\n        context$1$0.next = 32;\n        break;\n\n      case 28:\n        context$1$0.prev = 28;\n        context$1$0.t0 = context$1$0['catch'](24);\n        _didIteratorError = true;\n        _iteratorError = context$1$0.t0;\n\n      case 32:\n        context$1$0.prev = 32;\n        context$1$0.prev = 33;\n\n        if (!_iteratorNormalCompletion && _iterator['return']) {\n          _iterator['return']();\n        }\n\n      case 35:\n        context$1$0.prev = 35;\n\n        if (!_didIteratorError) {\n          context$1$0.next = 38;\n          break;\n        }\n\n        throw _iteratorError;\n\n      case 38:\n        return context$1$0.finish(35);\n\n      case 39:\n        return context$1$0.finish(32);\n\n      case 40:\n        bundles = kbnServer.bundles = new UiBundleCollection(bundlerEnv, config.get('optimize.bundleFilter'));\n        _iteratorNormalCompletion2 = true;\n        _didIteratorError2 = false;\n        _iteratorError2 = undefined;\n        context$1$0.prev = 44;\n\n        for (_iterator2 = _getIterator(uiExports.getAllApps()); !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          app = _step2.value;\n\n          bundles.addApp(app);\n        }\n\n        context$1$0.next = 52;\n        break;\n\n      case 48:\n        context$1$0.prev = 48;\n        context$1$0.t1 = context$1$0['catch'](44);\n        _didIteratorError2 = true;\n        _iteratorError2 = context$1$0.t1;\n\n      case 52:\n        context$1$0.prev = 52;\n        context$1$0.prev = 53;\n\n        if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n          _iterator2['return']();\n        }\n\n      case 55:\n        context$1$0.prev = 55;\n\n        if (!_didIteratorError2) {\n          context$1$0.next = 58;\n          break;\n        }\n\n        throw _iteratorError2;\n\n      case 58:\n        return context$1$0.finish(55);\n\n      case 59:\n        return context$1$0.finish(52);\n\n      case 60:\n        _iteratorNormalCompletion3 = true;\n        _didIteratorError3 = false;\n        _iteratorError3 = undefined;\n        context$1$0.prev = 63;\n        _iterator3 = _getIterator(uiExports.getBundleProviders());\n\n      case 65:\n        if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n          context$1$0.next = 74;\n          break;\n        }\n\n        gen = _step3.value;\n        context$1$0.next = 69;\n        return _regeneratorRuntime.awrap(gen(UiBundle, bundlerEnv, uiExports.getAllApps()));\n\n      case 69:\n        bundle = context$1$0.sent;\n\n        if (bundle) bundles.add(bundle);\n\n      case 71:\n        _iteratorNormalCompletion3 = true;\n        context$1$0.next = 65;\n        break;\n\n      case 74:\n        context$1$0.next = 80;\n        break;\n\n      case 76:\n        context$1$0.prev = 76;\n        context$1$0.t2 = context$1$0['catch'](63);\n        _didIteratorError3 = true;\n        _iteratorError3 = context$1$0.t2;\n\n      case 80:\n        context$1$0.prev = 80;\n        context$1$0.prev = 81;\n\n        if (!_iteratorNormalCompletion3 && _iterator3['return']) {\n          _iterator3['return']();\n        }\n\n      case 83:\n        context$1$0.prev = 83;\n\n        if (!_didIteratorError3) {\n          context$1$0.next = 86;\n          break;\n        }\n\n        throw _iteratorError3;\n\n      case 86:\n        return context$1$0.finish(83);\n\n      case 87:\n        return context$1$0.finish(80);\n\n      case 88:\n\n        // render all views from the ui/views directory\n        server.setupViews(resolve(__dirname, 'views'));\n        server.exposeStaticFile('/loading.gif', resolve(__dirname, 'public/loading.gif'));\n\n        server.route({\n          path: '/app/{id}',\n          method: 'GET',\n          handler: function handler(req, reply) {\n            var id = req.params.id;\n            var app = uiExports.apps.byId[id];\n            if (!app) return reply(Boom.notFound('Unknown app ' + id));\n\n            if (kbnServer.status.isGreen()) {\n              return reply.renderApp(app);\n            } else {\n              return reply.renderStatusPage();\n            }\n          }\n        });\n\n        defaultInjectedVars = {};\n\n        if (config.has('kibana')) {\n          defaultInjectedVars.kbnIndex = config.get('kibana.index');\n        }\n        if (config.has('elasticsearch')) {\n          defaultInjectedVars.esRequestTimeout = config.get('elasticsearch.requestTimeout');\n          defaultInjectedVars.esShardTimeout = config.get('elasticsearch.shardTimeout');\n          defaultInjectedVars.esApiVersion = config.get('elasticsearch.apiVersion');\n        }\n\n        server.decorate('reply', 'renderApp', function (app) {\n          var payload = {\n            app: app,\n            nav: uiExports.apps,\n            version: kbnServer.version,\n            buildNum: config.get('pkg.buildNum'),\n            buildSha: config.get('pkg.buildSha'),\n            basePath: config.get('server.basePath'),\n            vars: defaults(app.getInjectedVars(), defaultInjectedVars)\n          };\n\n          return this.view(app.templateName, {\n            app: app,\n            loadingGif: loadingGif,\n            kibanaPayload: payload,\n            bundlePath: config.get('server.basePath') + '/bundles'\n          });\n        });\n\n      case 95:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, _this, [[24, 28, 32, 40], [33,, 35, 39], [44, 48, 52, 60], [53,, 55, 59], [63, 76, 80, 88], [81,, 83, 87]]);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvdWkvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxNQUFNLENBQUMsT0FBTyxHQUFHLG9CQUFPLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTTtnQkFDekMsUUFBUSxFQUNSLElBQUksRUFDSixTQUFTLGFBQ1QsT0FBTyxFQUNQLFFBQVEsRUFFUixRQUFRLEVBQ1IsU0FBUyxFQUNULFFBQVEsRUFDUixrQkFBa0IsRUFDbEIsWUFBWSxFQUNaLFVBQVUsRUFFVixTQUFTLEVBSVQsVUFBVSxrRkFRUCxNQUFNLEVBSVQsT0FBTyx1RkFFSixHQUFHLHVGQUlILEdBQUcsRUFDSixNQUFNLEVBd0JSLG1CQUFtQjs7Ozs7bUJBNUROLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFBOUIsZ0JBQVEsWUFBUixRQUFRO0FBQ1IsWUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDdEIsaUJBQVMsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTTtvQkFDckIsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUEzQixlQUFPLGFBQVAsT0FBTztBQUNQLGdCQUFRLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFlBQVk7QUFFckMsZ0JBQVEsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDdkMsaUJBQVMsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ2xDLGdCQUFRLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUNoQywwQkFBa0IsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFDcEQsb0JBQVksR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDeEMsa0JBQVUsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLDJCQUEyQixDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFDLENBQUM7QUFFbkYsaUJBQVMsR0FBRyxTQUFTLENBQUMsU0FBUyxHQUFHLElBQUksU0FBUyxDQUFDO0FBQ3BELHFCQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQztTQUMzQyxDQUFDO0FBRUksa0JBQVUsR0FBRyxJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUM7O0FBQ3JFLGtCQUFVLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDckQsa0JBQVUsQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0FBQ3BFLGtCQUFVLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQztBQUN2RSxrQkFBVSxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO0FBQy9ELGtCQUFVLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDOUQsaUJBQVMsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7Ozs7OztBQUVsQyxzQ0FBbUIsU0FBUyxDQUFDLE9BQU8scUdBQUU7QUFBN0IsZ0JBQU07O0FBQ2IsbUJBQVMsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDakM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVLLGVBQU8sR0FBRyxTQUFTLENBQUMsT0FBTyxHQUFHLElBQUksa0JBQWtCLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQzs7Ozs7O0FBRTNHLHVDQUFnQixTQUFTLENBQUMsVUFBVSxFQUFFLHlHQUFFO0FBQS9CLGFBQUc7O0FBQ1YsaUJBQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDckI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBRWUsU0FBUyxDQUFDLGtCQUFrQixFQUFFOzs7Ozs7OztBQUFyQyxXQUFHOzt5Q0FDVyxHQUFHLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSxTQUFTLENBQUMsVUFBVSxFQUFFLENBQUM7OztBQUFoRSxjQUFNOztBQUNaLFlBQUksTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSWxDLGNBQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQy9DLGNBQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDLFNBQVMsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7O0FBRWxGLGNBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxjQUFJLEVBQUUsV0FBVztBQUNqQixnQkFBTSxFQUFFLEtBQUs7QUFDYixpQkFBTyxFQUFFLGlCQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDN0IsZ0JBQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO0FBQ3pCLGdCQUFNLEdBQUcsR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNwQyxnQkFBSSxDQUFDLEdBQUcsRUFBRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDOztBQUUzRCxnQkFBSSxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxFQUFFO0FBQzlCLHFCQUFPLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDN0IsTUFBTTtBQUNMLHFCQUFPLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO2FBQ2pDO1dBQ0Y7U0FDRixDQUFDLENBQUM7O0FBRUcsMkJBQW1CLEdBQUcsRUFBRTs7QUFDOUIsWUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFO0FBQ3hCLDZCQUFtQixDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQzNEO0FBQ0QsWUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxFQUFFO0FBQy9CLDZCQUFtQixDQUFDLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsOEJBQThCLENBQUMsQ0FBQztBQUNsRiw2QkFBbUIsQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBQzlFLDZCQUFtQixDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLDBCQUEwQixDQUFDLENBQUM7U0FDM0U7O0FBRUQsY0FBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsV0FBVyxFQUFFLFVBQVUsR0FBRyxFQUFFO0FBQ25ELGNBQU0sT0FBTyxHQUFHO0FBQ2QsZUFBRyxFQUFFLEdBQUc7QUFDUixlQUFHLEVBQUUsU0FBUyxDQUFDLElBQUk7QUFDbkIsbUJBQU8sRUFBRSxTQUFTLENBQUMsT0FBTztBQUMxQixvQkFBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO0FBQ3BDLG9CQUFRLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7QUFDcEMsb0JBQVEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDO0FBQ3ZDLGdCQUFJLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsRUFBRSxtQkFBbUIsQ0FBQztXQUMzRCxDQUFDOztBQUVGLGlCQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRTtBQUNqQyxlQUFHLEVBQUUsR0FBRztBQUNSLHNCQUFVLEVBQUUsVUFBVTtBQUN0Qix5QkFBYSxFQUFFLE9BQU87QUFDdEIsc0JBQVUsRUFBSyxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLGFBQVU7V0FDdkQsQ0FBQyxDQUFDO1NBQ0osQ0FBQyxDQUFDOzs7Ozs7O0NBQ0osQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3VpL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoa2JuU2VydmVyLCBzZXJ2ZXIsIGNvbmZpZykgPT4ge1xyXG4gIGxldCB7IGRlZmF1bHRzIH0gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuICBjb25zdCBCb29tID0gcmVxdWlyZSgnYm9vbScpO1xyXG4gIGNvbnN0IGZvcm1hdFVybCA9IHJlcXVpcmUoJ3VybCcpLmZvcm1hdDtcclxuICBsZXQgeyByZXNvbHZlIH0gPSByZXF1aXJlKCdwYXRoJyk7XHJcbiAgY29uc3QgcmVhZEZpbGUgPSByZXF1aXJlKCdmcycpLnJlYWRGaWxlU3luYztcclxuXHJcbiAgY29uc3QgZnJvbVJvb3QgPSByZXF1aXJlKCcuLi91dGlscy9mcm9tUm9vdCcpO1xyXG4gIGNvbnN0IFVpRXhwb3J0cyA9IHJlcXVpcmUoJy4vVWlFeHBvcnRzJyk7XHJcbiAgY29uc3QgVWlCdW5kbGUgPSByZXF1aXJlKCcuL1VpQnVuZGxlJyk7XHJcbiAgY29uc3QgVWlCdW5kbGVDb2xsZWN0aW9uID0gcmVxdWlyZSgnLi9VaUJ1bmRsZUNvbGxlY3Rpb24nKTtcclxuICBjb25zdCBVaUJ1bmRsZXJFbnYgPSByZXF1aXJlKCcuL1VpQnVuZGxlckVudicpO1xyXG4gIGNvbnN0IGxvYWRpbmdHaWYgPSByZWFkRmlsZShmcm9tUm9vdCgnc3JjL3VpL3B1YmxpYy9sb2FkaW5nLmdpZicpLCB7IGVuY29kaW5nOiAnYmFzZTY0J30pO1xyXG5cclxuICBjb25zdCB1aUV4cG9ydHMgPSBrYm5TZXJ2ZXIudWlFeHBvcnRzID0gbmV3IFVpRXhwb3J0cyh7XHJcbiAgICB1cmxCYXNlUGF0aDogY29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJylcclxuICB9KTtcclxuXHJcbiAgY29uc3QgYnVuZGxlckVudiA9IG5ldyBVaUJ1bmRsZXJFbnYoY29uZmlnLmdldCgnb3B0aW1pemUuYnVuZGxlRGlyJykpO1xyXG4gIGJ1bmRsZXJFbnYuYWRkQ29udGV4dCgnZW52JywgY29uZmlnLmdldCgnZW52Lm5hbWUnKSk7XHJcbiAgYnVuZGxlckVudi5hZGRDb250ZXh0KCd1cmxCYXNlUGF0aCcsIGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpKTtcclxuICBidW5kbGVyRW52LmFkZENvbnRleHQoJ3NvdXJjZU1hcHMnLCBjb25maWcuZ2V0KCdvcHRpbWl6ZS5zb3VyY2VNYXBzJykpO1xyXG4gIGJ1bmRsZXJFbnYuYWRkQ29udGV4dCgna2JuVmVyc2lvbicsIGNvbmZpZy5nZXQoJ3BrZy52ZXJzaW9uJykpO1xyXG4gIGJ1bmRsZXJFbnYuYWRkQ29udGV4dCgnYnVpbGROdW0nLCBjb25maWcuZ2V0KCdwa2cuYnVpbGROdW0nKSk7XHJcbiAgdWlFeHBvcnRzLmFkZENvbnN1bWVyKGJ1bmRsZXJFbnYpO1xyXG5cclxuICBmb3IgKGxldCBwbHVnaW4gb2Yga2JuU2VydmVyLnBsdWdpbnMpIHtcclxuICAgIHVpRXhwb3J0cy5jb25zdW1lUGx1Z2luKHBsdWdpbik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBidW5kbGVzID0ga2JuU2VydmVyLmJ1bmRsZXMgPSBuZXcgVWlCdW5kbGVDb2xsZWN0aW9uKGJ1bmRsZXJFbnYsIGNvbmZpZy5nZXQoJ29wdGltaXplLmJ1bmRsZUZpbHRlcicpKTtcclxuXHJcbiAgZm9yIChsZXQgYXBwIG9mIHVpRXhwb3J0cy5nZXRBbGxBcHBzKCkpIHtcclxuICAgIGJ1bmRsZXMuYWRkQXBwKGFwcCk7XHJcbiAgfVxyXG5cclxuICBmb3IgKGxldCBnZW4gb2YgdWlFeHBvcnRzLmdldEJ1bmRsZVByb3ZpZGVycygpKSB7XHJcbiAgICBjb25zdCBidW5kbGUgPSBhd2FpdCBnZW4oVWlCdW5kbGUsIGJ1bmRsZXJFbnYsIHVpRXhwb3J0cy5nZXRBbGxBcHBzKCkpO1xyXG4gICAgaWYgKGJ1bmRsZSkgYnVuZGxlcy5hZGQoYnVuZGxlKTtcclxuICB9XHJcblxyXG4gIC8vIHJlbmRlciBhbGwgdmlld3MgZnJvbSB0aGUgdWkvdmlld3MgZGlyZWN0b3J5XHJcbiAgc2VydmVyLnNldHVwVmlld3MocmVzb2x2ZShfX2Rpcm5hbWUsICd2aWV3cycpKTtcclxuICBzZXJ2ZXIuZXhwb3NlU3RhdGljRmlsZSgnL2xvYWRpbmcuZ2lmJywgcmVzb2x2ZShfX2Rpcm5hbWUsICdwdWJsaWMvbG9hZGluZy5naWYnKSk7XHJcblxyXG4gIHNlcnZlci5yb3V0ZSh7XHJcbiAgICBwYXRoOiAnL2FwcC97aWR9JyxcclxuICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICBoYW5kbGVyOiBmdW5jdGlvbiAocmVxLCByZXBseSkge1xyXG4gICAgICBjb25zdCBpZCA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgICAgIGNvbnN0IGFwcCA9IHVpRXhwb3J0cy5hcHBzLmJ5SWRbaWRdO1xyXG4gICAgICBpZiAoIWFwcCkgcmV0dXJuIHJlcGx5KEJvb20ubm90Rm91bmQoJ1Vua25vd24gYXBwICcgKyBpZCkpO1xyXG5cclxuICAgICAgaWYgKGtiblNlcnZlci5zdGF0dXMuaXNHcmVlbigpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcGx5LnJlbmRlckFwcChhcHApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZXBseS5yZW5kZXJTdGF0dXNQYWdlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgY29uc3QgZGVmYXVsdEluamVjdGVkVmFycyA9IHt9O1xyXG4gIGlmIChjb25maWcuaGFzKCdraWJhbmEnKSkge1xyXG4gICAgZGVmYXVsdEluamVjdGVkVmFycy5rYm5JbmRleCA9IGNvbmZpZy5nZXQoJ2tpYmFuYS5pbmRleCcpO1xyXG4gIH1cclxuICBpZiAoY29uZmlnLmhhcygnZWxhc3RpY3NlYXJjaCcpKSB7XHJcbiAgICBkZWZhdWx0SW5qZWN0ZWRWYXJzLmVzUmVxdWVzdFRpbWVvdXQgPSBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnJlcXVlc3RUaW1lb3V0Jyk7XHJcbiAgICBkZWZhdWx0SW5qZWN0ZWRWYXJzLmVzU2hhcmRUaW1lb3V0ID0gY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5zaGFyZFRpbWVvdXQnKTtcclxuICAgIGRlZmF1bHRJbmplY3RlZFZhcnMuZXNBcGlWZXJzaW9uID0gY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5hcGlWZXJzaW9uJyk7XHJcbiAgfVxyXG5cclxuICBzZXJ2ZXIuZGVjb3JhdGUoJ3JlcGx5JywgJ3JlbmRlckFwcCcsIGZ1bmN0aW9uIChhcHApIHtcclxuICAgIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICAgIGFwcDogYXBwLFxyXG4gICAgICBuYXY6IHVpRXhwb3J0cy5hcHBzLFxyXG4gICAgICB2ZXJzaW9uOiBrYm5TZXJ2ZXIudmVyc2lvbixcclxuICAgICAgYnVpbGROdW06IGNvbmZpZy5nZXQoJ3BrZy5idWlsZE51bScpLFxyXG4gICAgICBidWlsZFNoYTogY29uZmlnLmdldCgncGtnLmJ1aWxkU2hhJyksXHJcbiAgICAgIGJhc2VQYXRoOiBjb25maWcuZ2V0KCdzZXJ2ZXIuYmFzZVBhdGgnKSxcclxuICAgICAgdmFyczogZGVmYXVsdHMoYXBwLmdldEluamVjdGVkVmFycygpLCBkZWZhdWx0SW5qZWN0ZWRWYXJzKSxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHRoaXMudmlldyhhcHAudGVtcGxhdGVOYW1lLCB7XHJcbiAgICAgIGFwcDogYXBwLFxyXG4gICAgICBsb2FkaW5nR2lmOiBsb2FkaW5nR2lmLFxyXG4gICAgICBraWJhbmFQYXlsb2FkOiBwYXlsb2FkLFxyXG4gICAgICBidW5kbGVQYXRoOiBgJHtjb25maWcuZ2V0KCdzZXJ2ZXIuYmFzZVBhdGgnKX0vYnVuZGxlc2AsXHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/ui/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/ui/index.js",
      "sourcesContent": [
        "module.exports = async (kbnServer, server, config) => {\r\n  let { defaults } = require('lodash');\r\n  const Boom = require('boom');\r\n  const formatUrl = require('url').format;\r\n  let { resolve } = require('path');\r\n  const readFile = require('fs').readFileSync;\r\n\r\n  const fromRoot = require('../utils/fromRoot');\r\n  const UiExports = require('./UiExports');\r\n  const UiBundle = require('./UiBundle');\r\n  const UiBundleCollection = require('./UiBundleCollection');\r\n  const UiBundlerEnv = require('./UiBundlerEnv');\r\n  const loadingGif = readFile(fromRoot('src/ui/public/loading.gif'), { encoding: 'base64'});\r\n\r\n  const uiExports = kbnServer.uiExports = new UiExports({\r\n    urlBasePath: config.get('server.basePath')\r\n  });\r\n\r\n  const bundlerEnv = new UiBundlerEnv(config.get('optimize.bundleDir'));\r\n  bundlerEnv.addContext('env', config.get('env.name'));\r\n  bundlerEnv.addContext('urlBasePath', config.get('server.basePath'));\r\n  bundlerEnv.addContext('sourceMaps', config.get('optimize.sourceMaps'));\r\n  bundlerEnv.addContext('kbnVersion', config.get('pkg.version'));\r\n  bundlerEnv.addContext('buildNum', config.get('pkg.buildNum'));\r\n  uiExports.addConsumer(bundlerEnv);\r\n\r\n  for (let plugin of kbnServer.plugins) {\r\n    uiExports.consumePlugin(plugin);\r\n  }\r\n\r\n  const bundles = kbnServer.bundles = new UiBundleCollection(bundlerEnv, config.get('optimize.bundleFilter'));\r\n\r\n  for (let app of uiExports.getAllApps()) {\r\n    bundles.addApp(app);\r\n  }\r\n\r\n  for (let gen of uiExports.getBundleProviders()) {\r\n    const bundle = await gen(UiBundle, bundlerEnv, uiExports.getAllApps());\r\n    if (bundle) bundles.add(bundle);\r\n  }\r\n\r\n  // render all views from the ui/views directory\r\n  server.setupViews(resolve(__dirname, 'views'));\r\n  server.exposeStaticFile('/loading.gif', resolve(__dirname, 'public/loading.gif'));\r\n\r\n  server.route({\r\n    path: '/app/{id}',\r\n    method: 'GET',\r\n    handler: function (req, reply) {\r\n      const id = req.params.id;\r\n      const app = uiExports.apps.byId[id];\r\n      if (!app) return reply(Boom.notFound('Unknown app ' + id));\r\n\r\n      if (kbnServer.status.isGreen()) {\r\n        return reply.renderApp(app);\r\n      } else {\r\n        return reply.renderStatusPage();\r\n      }\r\n    }\r\n  });\r\n\r\n  const defaultInjectedVars = {};\r\n  if (config.has('kibana')) {\r\n    defaultInjectedVars.kbnIndex = config.get('kibana.index');\r\n  }\r\n  if (config.has('elasticsearch')) {\r\n    defaultInjectedVars.esRequestTimeout = config.get('elasticsearch.requestTimeout');\r\n    defaultInjectedVars.esShardTimeout = config.get('elasticsearch.shardTimeout');\r\n    defaultInjectedVars.esApiVersion = config.get('elasticsearch.apiVersion');\r\n  }\r\n\r\n  server.decorate('reply', 'renderApp', function (app) {\r\n    const payload = {\r\n      app: app,\r\n      nav: uiExports.apps,\r\n      version: kbnServer.version,\r\n      buildNum: config.get('pkg.buildNum'),\r\n      buildSha: config.get('pkg.buildSha'),\r\n      basePath: config.get('server.basePath'),\r\n      vars: defaults(app.getInjectedVars(), defaultInjectedVars),\r\n    };\r\n\r\n    return this.view(app.templateName, {\r\n      app: app,\r\n      loadingGif: loadingGif,\r\n      kibanaPayload: payload,\r\n      bundlePath: `${config.get('server.basePath')}/bundles`,\r\n    });\r\n  });\r\n};\r\n"
      ]
    },
    "mtime": 1465716670920
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/optimize/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _this = this;\n\nmodule.exports = function callee$0$0(kbnServer, server, config) {\n  var lazy, bundles, FsOptimizer, optimizer, start, seconds;\n  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        if (config.get('optimize.enabled')) {\n          context$1$0.next = 2;\n          break;\n        }\n\n        return context$1$0.abrupt('return');\n\n      case 2:\n        lazy = config.get('optimize.lazy');\n\n        if (!lazy) {\n          context$1$0.next = 7;\n          break;\n        }\n\n        context$1$0.next = 6;\n        return _regeneratorRuntime.awrap(kbnServer.mixin(require('./lazy/lazy')));\n\n      case 6:\n        return context$1$0.abrupt('return', context$1$0.sent);\n\n      case 7:\n        bundles = kbnServer.bundles;\n\n        server.exposeStaticDir('/bundles/{path*}', bundles.env.workingDir);\n        context$1$0.next = 11;\n        return _regeneratorRuntime.awrap(bundles.writeEntryFiles());\n\n      case 11:\n        if (!config.get('optimize.useBundleCache')) {\n          context$1$0.next = 15;\n          break;\n        }\n\n        context$1$0.next = 14;\n        return _regeneratorRuntime.awrap(bundles.getInvalidBundles());\n\n      case 14:\n        bundles = context$1$0.sent;\n\n      case 15:\n        if (bundles.getIds().length) {\n          context$1$0.next = 18;\n          break;\n        }\n\n        server.log(['debug', 'optimize'], 'All bundles are cached and ready to go!');\n        return context$1$0.abrupt('return');\n\n      case 18:\n        FsOptimizer = require('./FsOptimizer');\n        optimizer = new FsOptimizer({\n          env: bundles.env,\n          bundles: bundles,\n          profile: config.get('optimize.profile'),\n          urlBasePath: config.get('server.basePath'),\n          sourceMaps: config.get('optimize.sourceMaps'),\n          unsafeCache: config.get('optimize.unsafeCache')\n        });\n\n        server.log(['info', 'optimize'], 'Optimizing and caching ' + bundles.desc() + '. This may take a few minutes');\n\n        start = Date.now();\n        context$1$0.next = 24;\n        return _regeneratorRuntime.awrap(optimizer.run());\n\n      case 24:\n        seconds = ((Date.now() - start) / 1000).toFixed(2);\n\n        server.log(['info', 'optimize'], 'Optimization of ' + bundles.desc() + ' complete in ' + seconds + ' seconds');\n\n      case 26:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, _this);\n};\n\n// the lazy optimizer sets up two threads, one is the server listening\n// on 5601 and the other is a server listening on 5602 that builds the\n// bundles in a \"middleware\" style.\n//\n// the server listening on 5601 may be restarted a number of times, depending\n// on the watch setup managed by the cli. It proxies all bundles/* requests to\n// the other server. The server on 5602 is long running, in order to prevent\n// complete rebuilds of the optimize content.\n\n// in prod, only bundle what looks invalid or missing\n\n// we might not have any work to do\n\n// only require the FsOptimizer when we need to\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvb3B0aW1pemUvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTSxDQUFDLE9BQU8sR0FBRyxvQkFBTyxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU07TUFXM0MsSUFBSSxFQUtKLE9BQU8sRUFtQlAsV0FBVyxFQUNYLFNBQVMsRUFjVCxLQUFLLEVBRUwsT0FBTzs7OztZQW5ETixNQUFNLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDOzs7Ozs7OztBQVUvQixZQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUM7O2FBQ2xDLElBQUk7Ozs7Ozt5Q0FDTyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQzs7Ozs7O0FBR2xELGVBQU8sR0FBRyxTQUFTLENBQUMsT0FBTzs7QUFDL0IsY0FBTSxDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDOzt5Q0FDN0QsT0FBTyxDQUFDLGVBQWUsRUFBRTs7O2FBRzNCLE1BQU0sQ0FBQyxHQUFHLENBQUMseUJBQXlCLENBQUM7Ozs7Ozt5Q0FDdkIsT0FBTyxDQUFDLGlCQUFpQixFQUFFOzs7QUFBM0MsZUFBTzs7O1lBSUosT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLE1BQU07Ozs7O0FBQzFCLGNBQU0sQ0FBQyxHQUFHLENBQ1IsQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLDRDQUV0QixDQUFDOzs7O0FBS0EsbUJBQVcsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDO0FBQ3RDLGlCQUFTLEdBQUcsSUFBSSxXQUFXLENBQUM7QUFDOUIsYUFBRyxFQUFFLE9BQU8sQ0FBQyxHQUFHO0FBQ2hCLGlCQUFPLEVBQUUsT0FBTztBQUNoQixpQkFBTyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUM7QUFDdkMscUJBQVcsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDO0FBQzFDLG9CQUFVLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztBQUM3QyxxQkFBVyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUM7U0FDaEQsQ0FBQzs7QUFFRixjQUFNLENBQUMsR0FBRyxDQUNSLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyw4QkFDTSxPQUFPLENBQUMsSUFBSSxFQUFFLG1DQUN6QyxDQUFDOztBQUVFLGFBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFOzt5Q0FDaEIsU0FBUyxDQUFDLEdBQUcsRUFBRTs7O0FBQ2pCLGVBQU8sR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEtBQUssQ0FBQSxHQUFJLElBQUksQ0FBQSxDQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7O0FBRXRELGNBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLHVCQUFxQixPQUFPLENBQUMsSUFBSSxFQUFFLHFCQUFnQixPQUFPLGNBQVcsQ0FBQzs7Ozs7OztDQUN0RyxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvb3B0aW1pemUvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKCFjb25maWcuZ2V0KCdvcHRpbWl6ZS5lbmFibGVkJykpIHJldHVybjtcclxuXHJcbiAgLy8gdGhlIGxhenkgb3B0aW1pemVyIHNldHMgdXAgdHdvIHRocmVhZHMsIG9uZSBpcyB0aGUgc2VydmVyIGxpc3RlbmluZ1xyXG4gIC8vIG9uIDU2MDEgYW5kIHRoZSBvdGhlciBpcyBhIHNlcnZlciBsaXN0ZW5pbmcgb24gNTYwMiB0aGF0IGJ1aWxkcyB0aGVcclxuICAvLyBidW5kbGVzIGluIGEgXCJtaWRkbGV3YXJlXCIgc3R5bGUuXHJcbiAgLy9cclxuICAvLyB0aGUgc2VydmVyIGxpc3RlbmluZyBvbiA1NjAxIG1heSBiZSByZXN0YXJ0ZWQgYSBudW1iZXIgb2YgdGltZXMsIGRlcGVuZGluZ1xyXG4gIC8vIG9uIHRoZSB3YXRjaCBzZXR1cCBtYW5hZ2VkIGJ5IHRoZSBjbGkuIEl0IHByb3hpZXMgYWxsIGJ1bmRsZXMvKiByZXF1ZXN0cyB0b1xyXG4gIC8vIHRoZSBvdGhlciBzZXJ2ZXIuIFRoZSBzZXJ2ZXIgb24gNTYwMiBpcyBsb25nIHJ1bm5pbmcsIGluIG9yZGVyIHRvIHByZXZlbnRcclxuICAvLyBjb21wbGV0ZSByZWJ1aWxkcyBvZiB0aGUgb3B0aW1pemUgY29udGVudC5cclxuICBsZXQgbGF6eSA9IGNvbmZpZy5nZXQoJ29wdGltaXplLmxhenknKTtcclxuICBpZiAobGF6eSkge1xyXG4gICAgcmV0dXJuIGF3YWl0IGtiblNlcnZlci5taXhpbihyZXF1aXJlKCcuL2xhenkvbGF6eScpKTtcclxuICB9XHJcblxyXG4gIGxldCBidW5kbGVzID0ga2JuU2VydmVyLmJ1bmRsZXM7XHJcbiAgc2VydmVyLmV4cG9zZVN0YXRpY0RpcignL2J1bmRsZXMve3BhdGgqfScsIGJ1bmRsZXMuZW52LndvcmtpbmdEaXIpO1xyXG4gIGF3YWl0IGJ1bmRsZXMud3JpdGVFbnRyeUZpbGVzKCk7XHJcblxyXG4gIC8vIGluIHByb2QsIG9ubHkgYnVuZGxlIHdoYXQgbG9va3MgaW52YWxpZCBvciBtaXNzaW5nXHJcbiAgaWYgKGNvbmZpZy5nZXQoJ29wdGltaXplLnVzZUJ1bmRsZUNhY2hlJykpIHtcclxuICAgIGJ1bmRsZXMgPSBhd2FpdCBidW5kbGVzLmdldEludmFsaWRCdW5kbGVzKCk7XHJcbiAgfVxyXG5cclxuICAvLyB3ZSBtaWdodCBub3QgaGF2ZSBhbnkgd29yayB0byBkb1xyXG4gIGlmICghYnVuZGxlcy5nZXRJZHMoKS5sZW5ndGgpIHtcclxuICAgIHNlcnZlci5sb2coXHJcbiAgICAgIFsnZGVidWcnLCAnb3B0aW1pemUnXSxcclxuICAgICAgYEFsbCBidW5kbGVzIGFyZSBjYWNoZWQgYW5kIHJlYWR5IHRvIGdvIWBcclxuICAgICk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICAvLyBvbmx5IHJlcXVpcmUgdGhlIEZzT3B0aW1pemVyIHdoZW4gd2UgbmVlZCB0b1xyXG4gIGxldCBGc09wdGltaXplciA9IHJlcXVpcmUoJy4vRnNPcHRpbWl6ZXInKTtcclxuICBsZXQgb3B0aW1pemVyID0gbmV3IEZzT3B0aW1pemVyKHtcclxuICAgIGVudjogYnVuZGxlcy5lbnYsXHJcbiAgICBidW5kbGVzOiBidW5kbGVzLFxyXG4gICAgcHJvZmlsZTogY29uZmlnLmdldCgnb3B0aW1pemUucHJvZmlsZScpLFxyXG4gICAgdXJsQmFzZVBhdGg6IGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpLFxyXG4gICAgc291cmNlTWFwczogY29uZmlnLmdldCgnb3B0aW1pemUuc291cmNlTWFwcycpLFxyXG4gICAgdW5zYWZlQ2FjaGU6IGNvbmZpZy5nZXQoJ29wdGltaXplLnVuc2FmZUNhY2hlJyksXHJcbiAgfSk7XHJcblxyXG4gIHNlcnZlci5sb2coXHJcbiAgICBbJ2luZm8nLCAnb3B0aW1pemUnXSxcclxuICAgIGBPcHRpbWl6aW5nIGFuZCBjYWNoaW5nICR7YnVuZGxlcy5kZXNjKCl9LiBUaGlzIG1heSB0YWtlIGEgZmV3IG1pbnV0ZXNgXHJcbiAgKTtcclxuXHJcbiAgbGV0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuICBhd2FpdCBvcHRpbWl6ZXIucnVuKCk7XHJcbiAgbGV0IHNlY29uZHMgPSAoKERhdGUubm93KCkgLSBzdGFydCkgLyAxMDAwKS50b0ZpeGVkKDIpO1xyXG5cclxuICBzZXJ2ZXIubG9nKFsnaW5mbycsICdvcHRpbWl6ZSddLCBgT3B0aW1pemF0aW9uIG9mICR7YnVuZGxlcy5kZXNjKCl9IGNvbXBsZXRlIGluICR7c2Vjb25kc30gc2Vjb25kc2ApO1xyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/optimize/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;AAAA,MAAM,CAAC,OAAO,GAAG,oBAAO,SAAS,EAAE,MAAM,EAAE,MAAM;MAW3C,IAAI,EAKJ,OAAO,EAmBP,WAAW,EACX,SAAS,EAcT,KAAK,EAEL,OAAO;;;;YAnDN,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC;;;;;;;;AAU/B,YAAI,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC;;aAClC,IAAI;;;;;;yCACO,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;;;;;;AAGlD,eAAO,GAAG,SAAS,CAAC,OAAO;;AAC/B,cAAM,CAAC,eAAe,CAAC,kBAAkB,EAAE,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;;yCAC7D,OAAO,CAAC,eAAe,EAAE;;;aAG3B,MAAM,CAAC,GAAG,CAAC,yBAAyB,CAAC;;;;;;yCACvB,OAAO,CAAC,iBAAiB,EAAE;;;AAA3C,eAAO;;;YAIJ,OAAO,CAAC,MAAM,EAAE,CAAC,MAAM;;;;;AAC1B,cAAM,CAAC,GAAG,CACR,CAAC,OAAO,EAAE,UAAU,CAAC,4CAEtB,CAAC;;;;AAKA,mBAAW,GAAG,OAAO,CAAC,eAAe,CAAC;AACtC,iBAAS,GAAG,IAAI,WAAW,CAAC;AAC9B,aAAG,EAAE,OAAO,CAAC,GAAG;AAChB,iBAAO,EAAE,OAAO;AAChB,iBAAO,EAAE,MAAM,CAAC,GAAG,CAAC,kBAAkB,CAAC;AACvC,qBAAW,EAAE,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC;AAC1C,oBAAU,EAAE,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC;AAC7C,qBAAW,EAAE,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC;SAChD,CAAC;;AAEF,cAAM,CAAC,GAAG,CACR,CAAC,MAAM,EAAE,UAAU,CAAC,8BACM,OAAO,CAAC,IAAI,EAAE,mCACzC,CAAC;;AAEE,aAAK,GAAG,IAAI,CAAC,GAAG,EAAE;;yCAChB,SAAS,CAAC,GAAG,EAAE;;;AACjB,eAAO,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,KAAK,CAAA,GAAI,IAAI,CAAA,CAAE,OAAO,CAAC,CAAC,CAAC;;AAEtD,cAAM,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,UAAU,CAAC,uBAAqB,OAAO,CAAC,IAAI,EAAE,qBAAgB,OAAO,cAAW,CAAC;;;;;;;CACtG,CAAC",
      "file": "D:/backup/oplate/kibana1/src/optimize/index.js",
      "sourcesContent": [
        "module.exports = async (kbnServer, server, config) => {\r\n  if (!config.get('optimize.enabled')) return;\r\n\r\n  // the lazy optimizer sets up two threads, one is the server listening\r\n  // on 5601 and the other is a server listening on 5602 that builds the\r\n  // bundles in a \"middleware\" style.\r\n  //\r\n  // the server listening on 5601 may be restarted a number of times, depending\r\n  // on the watch setup managed by the cli. It proxies all bundles/* requests to\r\n  // the other server. The server on 5602 is long running, in order to prevent\r\n  // complete rebuilds of the optimize content.\r\n  let lazy = config.get('optimize.lazy');\r\n  if (lazy) {\r\n    return await kbnServer.mixin(require('./lazy/lazy'));\r\n  }\r\n\r\n  let bundles = kbnServer.bundles;\r\n  server.exposeStaticDir('/bundles/{path*}', bundles.env.workingDir);\r\n  await bundles.writeEntryFiles();\r\n\r\n  // in prod, only bundle what looks invalid or missing\r\n  if (config.get('optimize.useBundleCache')) {\r\n    bundles = await bundles.getInvalidBundles();\r\n  }\r\n\r\n  // we might not have any work to do\r\n  if (!bundles.getIds().length) {\r\n    server.log(\r\n      ['debug', 'optimize'],\r\n      `All bundles are cached and ready to go!`\r\n    );\r\n    return;\r\n  }\r\n\r\n  // only require the FsOptimizer when we need to\r\n  let FsOptimizer = require('./FsOptimizer');\r\n  let optimizer = new FsOptimizer({\r\n    env: bundles.env,\r\n    bundles: bundles,\r\n    profile: config.get('optimize.profile'),\r\n    urlBasePath: config.get('server.basePath'),\r\n    sourceMaps: config.get('optimize.sourceMaps'),\r\n    unsafeCache: config.get('optimize.unsafeCache'),\r\n  });\r\n\r\n  server.log(\r\n    ['info', 'optimize'],\r\n    `Optimizing and caching ${bundles.desc()}. This may take a few minutes`\r\n  );\r\n\r\n  let start = Date.now();\r\n  await optimizer.run();\r\n  let seconds = ((Date.now() - start) / 1000).toFixed(2);\r\n\r\n  server.log(['info', 'optimize'], `Optimization of ${bundles.desc()} complete in ${seconds} seconds`);\r\n};\r\n"
      ]
    },
    "mtime": 1465716670248
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/plugins/initialize.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _getIterator = require('babel-runtime/core-js/get-iterator')['default'];\n\nmodule.exports = function callee$0$0(kbnServer, server, config) {\n  var _require, includes, keys, plugins, path, initialize, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, id;\n\n  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {\n    while (1) switch (context$1$0.prev = context$1$0.next) {\n      case 0:\n        _require = require('lodash');\n        includes = _require.includes;\n        keys = _require.keys;\n\n        if (config.get('plugins.initialize')) {\n          context$1$0.next = 6;\n          break;\n        }\n\n        server.log(['info'], 'Plugin initialization disabled.');\n        return context$1$0.abrupt('return', []);\n\n      case 6:\n        plugins = kbnServer.plugins;\n\n        // extend plugin apis with additional context\n        plugins.getPluginApis().forEach(function (api) {\n\n          Object.defineProperty(api, 'uiExports', {\n            value: kbnServer.uiExports\n          });\n        });\n\n        path = [];\n\n        initialize = function initialize(id) {\n          var plugin, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, reqId;\n\n          return _regeneratorRuntime.async(function initialize$(context$2$0) {\n            while (1) switch (context$2$0.prev = context$2$0.next) {\n              case 0:\n                plugin = plugins.byId[id];\n\n                if (!includes(path, id)) {\n                  context$2$0.next = 3;\n                  break;\n                }\n\n                throw new Error('circular dependencies found: \"' + path.concat(id).join(' -> ') + '\"');\n\n              case 3:\n\n                path.push(id);\n\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                context$2$0.prev = 7;\n                _iterator = _getIterator(plugin.requiredIds);\n\n              case 9:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  context$2$0.next = 18;\n                  break;\n                }\n\n                reqId = _step.value;\n\n                if (plugins.byId[reqId]) {\n                  context$2$0.next = 13;\n                  break;\n                }\n\n                throw new Error('Unmet requirement \"' + reqId + '\" for plugin \"' + id + '\"');\n\n              case 13:\n                context$2$0.next = 15;\n                return _regeneratorRuntime.awrap(initialize(reqId));\n\n              case 15:\n                _iteratorNormalCompletion = true;\n                context$2$0.next = 9;\n                break;\n\n              case 18:\n                context$2$0.next = 24;\n                break;\n\n              case 20:\n                context$2$0.prev = 20;\n                context$2$0.t0 = context$2$0['catch'](7);\n                _didIteratorError = true;\n                _iteratorError = context$2$0.t0;\n\n              case 24:\n                context$2$0.prev = 24;\n                context$2$0.prev = 25;\n\n                if (!_iteratorNormalCompletion && _iterator['return']) {\n                  _iterator['return']();\n                }\n\n              case 27:\n                context$2$0.prev = 27;\n\n                if (!_didIteratorError) {\n                  context$2$0.next = 30;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 30:\n                return context$2$0.finish(27);\n\n              case 31:\n                return context$2$0.finish(24);\n\n              case 32:\n                context$2$0.next = 34;\n                return _regeneratorRuntime.awrap(plugin.init());\n\n              case 34:\n                path.pop();\n\n              case 35:\n              case 'end':\n                return context$2$0.stop();\n            }\n          }, null, this, [[7, 20, 24, 32], [25,, 27, 31]]);\n        };\n\n        _iteratorNormalCompletion2 = true;\n        _didIteratorError2 = false;\n        _iteratorError2 = undefined;\n        context$1$0.prev = 13;\n        _iterator2 = _getIterator(plugins);\n\n      case 15:\n        if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n          context$1$0.next = 22;\n          break;\n        }\n\n        id = _step2.value.id;\n        context$1$0.next = 19;\n        return _regeneratorRuntime.awrap(initialize(id));\n\n      case 19:\n        _iteratorNormalCompletion2 = true;\n        context$1$0.next = 15;\n        break;\n\n      case 22:\n        context$1$0.next = 28;\n        break;\n\n      case 24:\n        context$1$0.prev = 24;\n        context$1$0.t0 = context$1$0['catch'](13);\n        _didIteratorError2 = true;\n        _iteratorError2 = context$1$0.t0;\n\n      case 28:\n        context$1$0.prev = 28;\n        context$1$0.prev = 29;\n\n        if (!_iteratorNormalCompletion2 && _iterator2['return']) {\n          _iterator2['return']();\n        }\n\n      case 31:\n        context$1$0.prev = 31;\n\n        if (!_didIteratorError2) {\n          context$1$0.next = 34;\n          break;\n        }\n\n        throw _iteratorError2;\n\n      case 34:\n        return context$1$0.finish(31);\n\n      case 35:\n        return context$1$0.finish(28);\n\n      case 36:\n      case 'end':\n        return context$1$0.stop();\n    }\n  }, null, this, [[13, 24, 28, 36], [29,, 31, 35]]);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3BsdWdpbnMvaW5pdGlhbGl6ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxNQUFNLENBQUMsT0FBTyxHQUFHLG9CQUFnQixTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU07Z0JBQ2xELFFBQVEsRUFBRSxJQUFJLEVBT2QsT0FBTyxFQVlULElBQUksRUFDRixVQUFVLHVGQXFCTixFQUFFOzs7OzttQkF6Q2EsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUFwQyxnQkFBUSxZQUFSLFFBQVE7QUFBRSxZQUFJLFlBQUosSUFBSTs7WUFFZixNQUFNLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDOzs7OztBQUNuQyxjQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsaUNBQWlDLENBQUMsQ0FBQzs0Q0FDakQsRUFBRTs7O0FBR0wsZUFBTyxHQUFLLFNBQVMsQ0FBckIsT0FBTzs7O0FBR2IsZUFBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxVQUFBLEdBQUcsRUFBSTs7QUFFckMsZ0JBQU0sQ0FBQyxjQUFjLENBQUMsR0FBRyxFQUFFLFdBQVcsRUFBRTtBQUN0QyxpQkFBSyxFQUFFLFNBQVMsQ0FBQyxTQUFTO1dBQzNCLENBQUMsQ0FBQztTQUVKLENBQUMsQ0FBQzs7QUFHQyxZQUFJLEdBQUcsRUFBRTs7QUFDUCxrQkFBVSxHQUFHLFNBQWIsVUFBVSxDQUFtQixFQUFFO2NBQy9CLE1BQU0sa0ZBUUQsS0FBSzs7Ozs7QUFSVixzQkFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDOztxQkFFekIsUUFBUSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUM7Ozs7O3NCQUNkLElBQUksS0FBSyxvQ0FBa0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQUk7Ozs7QUFHbkYsb0JBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Ozs7Ozt5Q0FFSSxNQUFNLENBQUMsV0FBVzs7Ozs7Ozs7QUFBM0IscUJBQUs7O29CQUNQLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDOzs7OztzQkFDaEIsSUFBSSxLQUFLLHlCQUF1QixLQUFLLHNCQUFpQixFQUFFLE9BQUk7Ozs7aURBRzlELFVBQVUsQ0FBQyxLQUFLLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7aURBR25CLE1BQU0sQ0FBQyxJQUFJLEVBQUU7OztBQUNuQixvQkFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDOzs7Ozs7O1NBQ1o7Ozs7OztrQ0FFZ0IsT0FBTzs7Ozs7Ozs7QUFBZCxVQUFFLGdCQUFGLEVBQUU7O3lDQUNKLFVBQVUsQ0FBQyxFQUFFLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FFdkIsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9wbHVnaW5zL2luaXRpYWxpemUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGFzeW5jIGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XHJcbiAgbGV0IHsgaW5jbHVkZXMsIGtleXMgfSA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5cclxuICBpZiAoIWNvbmZpZy5nZXQoJ3BsdWdpbnMuaW5pdGlhbGl6ZScpKSB7XHJcbiAgICBzZXJ2ZXIubG9nKFsnaW5mbyddLCAnUGx1Z2luIGluaXRpYWxpemF0aW9uIGRpc2FibGVkLicpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxuXHJcbiAgbGV0IHsgcGx1Z2lucyB9ID0ga2JuU2VydmVyO1xyXG5cclxuICAvLyBleHRlbmQgcGx1Z2luIGFwaXMgd2l0aCBhZGRpdGlvbmFsIGNvbnRleHRcclxuICBwbHVnaW5zLmdldFBsdWdpbkFwaXMoKS5mb3JFYWNoKGFwaSA9PiB7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwaSwgJ3VpRXhwb3J0cycsIHtcclxuICAgICAgdmFsdWU6IGtiblNlcnZlci51aUV4cG9ydHNcclxuICAgIH0pO1xyXG5cclxuICB9KTtcclxuXHJcblxyXG4gIGxldCBwYXRoID0gW107XHJcbiAgY29uc3QgaW5pdGlhbGl6ZSA9IGFzeW5jIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgbGV0IHBsdWdpbiA9IHBsdWdpbnMuYnlJZFtpZF07XHJcblxyXG4gICAgaWYgKGluY2x1ZGVzKHBhdGgsIGlkKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGNpcmN1bGFyIGRlcGVuZGVuY2llcyBmb3VuZDogXCIke3BhdGguY29uY2F0KGlkKS5qb2luKCcgLT4gJyl9XCJgKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXRoLnB1c2goaWQpO1xyXG5cclxuICAgIGZvciAobGV0IHJlcUlkIG9mIHBsdWdpbi5yZXF1aXJlZElkcykge1xyXG4gICAgICBpZiAoIXBsdWdpbnMuYnlJZFtyZXFJZF0pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVubWV0IHJlcXVpcmVtZW50IFwiJHtyZXFJZH1cIiBmb3IgcGx1Z2luIFwiJHtpZH1cImApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCBpbml0aWFsaXplKHJlcUlkKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBwbHVnaW4uaW5pdCgpO1xyXG4gICAgcGF0aC5wb3AoKTtcclxuICB9O1xyXG5cclxuICBmb3IgKGxldCB7aWR9IG9mIHBsdWdpbnMpIHtcclxuICAgIGF3YWl0IGluaXRpYWxpemUoaWQpO1xyXG4gIH1cclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/plugins/initialize.js"
      ],
      "names": [],
      "mappings": ";;;;;;AAAA,MAAM,CAAC,OAAO,GAAG,oBAAgB,SAAS,EAAE,MAAM,EAAE,MAAM;gBAClD,QAAQ,EAAE,IAAI,EAOd,OAAO,EAYT,IAAI,EACF,UAAU,uFAqBN,EAAE;;;;;mBAzCa,OAAO,CAAC,QAAQ,CAAC;AAApC,gBAAQ,YAAR,QAAQ;AAAE,YAAI,YAAJ,IAAI;;YAEf,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC;;;;;AACnC,cAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,iCAAiC,CAAC,CAAC;4CACjD,EAAE;;;AAGL,eAAO,GAAK,SAAS,CAArB,OAAO;;;AAGb,eAAO,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,UAAA,GAAG,EAAI;;AAErC,gBAAM,CAAC,cAAc,CAAC,GAAG,EAAE,WAAW,EAAE;AACtC,iBAAK,EAAE,SAAS,CAAC,SAAS;WAC3B,CAAC,CAAC;SAEJ,CAAC,CAAC;;AAGC,YAAI,GAAG,EAAE;;AACP,kBAAU,GAAG,SAAb,UAAU,CAAmB,EAAE;cAC/B,MAAM,kFAQD,KAAK;;;;;AARV,sBAAM,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;;qBAEzB,QAAQ,CAAC,IAAI,EAAE,EAAE,CAAC;;;;;sBACd,IAAI,KAAK,oCAAkC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAI;;;;AAGnF,oBAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;;;;;yCAEI,MAAM,CAAC,WAAW;;;;;;;;AAA3B,qBAAK;;oBACP,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;;;;;sBAChB,IAAI,KAAK,yBAAuB,KAAK,sBAAiB,EAAE,OAAI;;;;iDAG9D,UAAU,CAAC,KAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iDAGnB,MAAM,CAAC,IAAI,EAAE;;;AACnB,oBAAI,CAAC,GAAG,EAAE,CAAC;;;;;;;SACZ;;;;;;kCAEgB,OAAO;;;;;;;;AAAd,UAAE,gBAAF,EAAE;;yCACJ,UAAU,CAAC,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAEvB,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/plugins/initialize.js",
      "sourcesContent": [
        "module.exports = async function (kbnServer, server, config) {\r\n  let { includes, keys } = require('lodash');\r\n\r\n  if (!config.get('plugins.initialize')) {\r\n    server.log(['info'], 'Plugin initialization disabled.');\r\n    return [];\r\n  }\r\n\r\n  let { plugins } = kbnServer;\r\n\r\n  // extend plugin apis with additional context\r\n  plugins.getPluginApis().forEach(api => {\r\n\r\n    Object.defineProperty(api, 'uiExports', {\r\n      value: kbnServer.uiExports\r\n    });\r\n\r\n  });\r\n\r\n\r\n  let path = [];\r\n  const initialize = async function (id) {\r\n    let plugin = plugins.byId[id];\r\n\r\n    if (includes(path, id)) {\r\n      throw new Error(`circular dependencies found: \"${path.concat(id).join(' -> ')}\"`);\r\n    }\r\n\r\n    path.push(id);\r\n\r\n    for (let reqId of plugin.requiredIds) {\r\n      if (!plugins.byId[reqId]) {\r\n        throw new Error(`Unmet requirement \"${reqId}\" for plugin \"${id}\"`);\r\n      }\r\n\r\n      await initialize(reqId);\r\n    }\r\n\r\n    await plugin.init();\r\n    path.pop();\r\n  };\r\n\r\n  for (let {id} of plugins) {\r\n    await initialize(id);\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1472703417608
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/config/config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "to-consumable-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _toConsumableArray = require('babel-runtime/helpers/to-consumable-array')['default'];\n\nvar _Symbol = require('babel-runtime/core-js/symbol')['default'];\n\nvar _Map = require('babel-runtime/core-js/map')['default'];\n\nvar _Object$create = require('babel-runtime/core-js/object/create')['default'];\n\nvar Promise = require('bluebird');\nvar Joi = require('joi');\nvar _ = require('lodash');\n\nvar _require = require('lodash');\n\nvar zipObject = _require.zipObject;\n\nvar override = require('./override');\nvar pkg = require('requirefrom')('src/utils')('packageJson');\nvar clone = require('./deepCloneWithBuffers');\n\nvar schema = _Symbol('Joi Schema');\nvar schemaKeys = _Symbol('Schema Extensions');\nvar vals = _Symbol('config values');\nvar pendingSets = _Symbol('Pending Settings');\n\nmodule.exports = (function () {\n  function Config(initialSchema, initialSettings) {\n    _classCallCheck(this, Config);\n\n    this[schemaKeys] = new _Map();\n\n    this[vals] = _Object$create(null);\n    this[pendingSets] = new _Map(_.pairs(clone(initialSettings || {})));\n\n    if (initialSchema) this.extendSchema(initialSchema);\n  }\n\n  _createClass(Config, [{\n    key: 'getPendingSets',\n    value: function getPendingSets() {\n      return this[pendingSets];\n    }\n  }, {\n    key: 'extendSchema',\n    value: function extendSchema(key, extension) {\n      var _this = this;\n\n      if (key && key.isJoi) {\n        return _.each(key._inner.children, function (child) {\n          _this.extendSchema(child.key, child.schema);\n        });\n      }\n\n      if (this.has(key)) {\n        throw new Error('Config schema already has key: ' + key);\n      }\n\n      this[schemaKeys].set(key, extension);\n      this[schema] = null;\n\n      var initialVals = this[pendingSets].get(key);\n      if (initialVals) {\n        this.set(key, initialVals);\n        this[pendingSets]['delete'](key);\n      } else {\n        this._commit(this[vals]);\n      }\n    }\n  }, {\n    key: 'removeSchema',\n    value: function removeSchema(key) {\n      if (!this[schemaKeys].has(key)) {\n        throw new TypeError('Unknown schema key: ' + key);\n      }\n\n      this[schema] = null;\n      this[schemaKeys]['delete'](key);\n      this[pendingSets]['delete'](key);\n      delete this[vals][key];\n    }\n  }, {\n    key: 'resetTo',\n    value: function resetTo(obj) {\n      this._commit(obj);\n    }\n  }, {\n    key: 'set',\n    value: function set(key, value) {\n      // clone and modify the config\n      var config = clone(this[vals]);\n      if (_.isPlainObject(key)) {\n        config = override(config, key);\n      } else {\n        _.set(config, key, value);\n      }\n\n      // attempt to validate the config value\n      this._commit(config);\n    }\n  }, {\n    key: '_commit',\n    value: function _commit(newVals) {\n      // resolve the current environment\n      var env = newVals.env;\n      delete newVals.env;\n      if (_.isObject(env)) env = env.name;\n      if (!env) env = process.env.NODE_ENV || 'production';\n\n      var dev = env === 'development';\n      var prod = env === 'production';\n\n      // pass the environment as context so that it can be refed in config\n      var context = {\n        env: env,\n        prod: prod,\n        dev: dev,\n        notProd: !prod,\n        notDev: !dev,\n        version: _.get(pkg, 'version'),\n        buildNum: dev ? Math.pow(2, 53) - 1 : _.get(pkg, 'build.number', NaN),\n        buildSha: dev ? 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' : _.get(pkg, 'build.sha', '')\n      };\n\n      if (!context.dev && !context.prod) {\n        throw new TypeError('Unexpected environment \"' + env + '\", expected one of \"development\" or \"production\"');\n      }\n\n      var results = Joi.validate(newVals, this.getSchema(), { context: context });\n\n      if (results.error) {\n        throw results.error;\n      }\n\n      this[vals] = results.value;\n    }\n  }, {\n    key: 'get',\n    value: function get(key) {\n      if (!key) {\n        return clone(this[vals]);\n      }\n\n      var value = _.get(this[vals], key);\n      if (value === undefined) {\n        if (!this.has(key)) {\n          throw new Error('Unknown config key: ' + key);\n        }\n      }\n      return clone(value);\n    }\n  }, {\n    key: 'has',\n    value: function has(key) {\n      function has(key, schema, path) {\n        path = path || [];\n        // Catch the partial paths\n        if (path.join('.') === key) return true;\n        // Only go deep on inner objects with children\n        if (schema._inner.children.length) {\n          for (var i = 0; i < schema._inner.children.length; i++) {\n            var child = schema._inner.children[i];\n            // If the child is an object recurse through it's children and return\n            // true if there's a match\n            if (child.schema._type === 'object') {\n              if (has(key, child.schema, path.concat([child.key]))) return true;\n              // if the child matches, return true\n            } else if (path.concat([child.key]).join('.') === key) {\n                return true;\n              }\n          }\n        }\n      }\n\n      if (_.isArray(key)) {\n        // TODO: add .has() support for array keys\n        key = key.join('.');\n      }\n\n      return !!has(key, this.getSchema());\n    }\n  }, {\n    key: 'getSchema',\n    value: function getSchema() {\n      if (!this[schema]) {\n        var objKeys = zipObject([].concat(_toConsumableArray(this[schemaKeys])));\n        this[schema] = Joi.object().keys(objKeys)['default']();\n      }\n\n      return this[schema];\n    }\n  }]);\n\n  return Config;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9jb25maWcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDbEMsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3pCLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7ZUFDTixPQUFPLENBQUMsUUFBUSxDQUFDOztJQUEvQixTQUFTLFlBQVQsU0FBUzs7QUFDZixJQUFJLFFBQVEsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDckMsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzdELElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDOztBQUVoRCxJQUFNLE1BQU0sR0FBRyxRQUFPLFlBQVksQ0FBQyxDQUFDO0FBQ3BDLElBQU0sVUFBVSxHQUFHLFFBQU8sbUJBQW1CLENBQUMsQ0FBQztBQUMvQyxJQUFNLElBQUksR0FBRyxRQUFPLGVBQWUsQ0FBQyxDQUFDO0FBQ3JDLElBQU0sV0FBVyxHQUFHLFFBQU8sa0JBQWtCLENBQUMsQ0FBQzs7QUFFL0MsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLE1BQU0sQ0FDZixhQUFhLEVBQUUsZUFBZSxFQUFFOzBCQUR2QixNQUFNOztBQUV6QixRQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsVUFBUyxDQUFDOztBQUU3QixRQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsZUFBYyxJQUFJLENBQUMsQ0FBQztBQUNqQyxRQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsU0FBUSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxlQUFlLElBQUksRUFBRSxDQUFDLENBQUMs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QUMsRUFBRSxPQUFPLElBQUksQ0FBQzs7YUFFbkUsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxFQUFFO0FBQ3JELHVCQUFPLElBQUksQ0FBQztlQUNiO1dBQ0Y7U0FDRjtPQUNGOztBQUVELFVBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTs7QUFFbEIsV0FBRyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7T0FDckI7O0FBRUQsYUFBTyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztLQUNyQzs7O1dBRVEscUJBQUc7QUFDVixVQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQ2pCLFlBQUksT0FBTyxHQUFHLFNBQVMsOEJBQUssSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFFLENBQUM7QUFDL0MsWUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVEsRUFBRSxDQUFDO09BQ3JEOztBQUVELGFBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ3JCOzs7U0F4Sm9CLE1BQU07SUF5SjVCLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvY29uZmlnL2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcclxubGV0IEpvaSA9IHJlcXVpcmUoJ2pvaScpO1xyXG5sZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5sZXQgeyB6aXBPYmplY3QgfSA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5sZXQgb3ZlcnJpZGUgPSByZXF1aXJlKCcuL292ZXJyaWRlJyk7XHJcbmxldCBwa2cgPSByZXF1aXJlKCdyZXF1aXJlZnJvbScpKCdzcmMvdXRpbHMnKSgncGFja2FnZUpzb24nKTtcclxuY29uc3QgY2xvbmUgPSByZXF1aXJlKCcuL2RlZXBDbG9uZVdpdGhCdWZmZXJzJyk7XHJcblxyXG5jb25zdCBzY2hlbWEgPSBTeW1ib2woJ0pvaSBTY2hlbWEnKTtcclxuY29uc3Qgc2NoZW1hS2V5cyA9IFN5bWJvbCgnU2NoZW1hIEV4dGVuc2lvbnMnKTtcclxuY29uc3QgdmFscyA9IFN5bWJvbCgnY29uZmlnIHZhbHVlcycpO1xyXG5jb25zdCBwZW5kaW5nU2V0cyA9IFN5bWJvbCgnUGVuZGluZyBTZXR0aW5ncycpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBDb25maWcge1xyXG4gIGNvbnN0cnVjdG9yKGluaXRpYWxTY2hlbWEsIGluaXRpYWxTZXR0aW5ncykge1xyXG4gICAgdGhpc1tzY2hlbWFLZXlzXSA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICB0aGlzW3ZhbHNdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgIHRoaXNbcGVuZGluZ1NldHNdID0gbmV3IE1hcChfLnBhaXJzKGNsb25lKGluaXRpYWxTZXR0aW5ncyB8fCB7fSkpKTtcclxuXHJcbiAgICBpZiAoaW5pdGlhbFNjaGVtYSkgdGhpcy5leHRlbmRTY2hlbWEoaW5pdGlhbFNjaGVtYSk7XHJcbiAgfVxyXG5cclxuICBnZXRQZW5kaW5nU2V0cygpIHtcclxuICAgIHJldHVybiB0aGlzW3BlbmRpbmdTZXRzXTtcclxuICB9XHJcblxyXG4gIGV4dGVuZFNjaGVtYShrZXksIGV4dGVuc2lvbikge1xyXG4gICAgaWYgKGtleSAmJiBrZXkuaXNKb2kpIHtcclxuICAgICAgcmV0dXJuIF8uZWFjaChrZXkuX2lubmVyLmNoaWxkcmVuLCAoY2hpbGQpID0+IHtcclxuICAgICAgICB0aGlzLmV4dGVuZFNjaGVtYShjaGlsZC5rZXksIGNoaWxkLnNjaGVtYSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmhhcyhrZXkpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZmlnIHNjaGVtYSBhbHJlYWR5IGhhcyBrZXk6ICR7a2V5fWApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXNbc2NoZW1hS2V5c10uc2V0KGtleSwgZXh0ZW5zaW9uKTtcclxuICAgIHRoaXNbc2NoZW1hXSA9IG51bGw7XHJcblxyXG4gICAgbGV0IGluaXRpYWxWYWxzID0gdGhpc1twZW5kaW5nU2V0c10uZ2V0KGtleSk7XHJcbiAgICBpZiAoaW5pdGlhbFZhbHMpIHtcclxuICAgICAgdGhpcy5zZXQoa2V5LCBpbml0aWFsVmFscyk7XHJcbiAgICAgIHRoaXNbcGVuZGluZ1NldHNdLmRlbGV0ZShrZXkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY29tbWl0KHRoaXNbdmFsc10pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlU2NoZW1hKGtleSkge1xyXG4gICAgaWYgKCF0aGlzW3NjaGVtYUtleXNdLmhhcyhrZXkpKSB7XHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFVua25vd24gc2NoZW1hIGtleTogJHtrZXl9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpc1tzY2hlbWFdID0gbnVsbDtcclxuICAgIHRoaXNbc2NoZW1hS2V5c10uZGVsZXRlKGtleSk7XHJcbiAgICB0aGlzW3BlbmRpbmdTZXRzXS5kZWxldGUoa2V5KTtcclxuICAgIGRlbGV0ZSB0aGlzW3ZhbHNdW2tleV07XHJcbiAgfVxyXG5cclxuICByZXNldFRvKG9iaikge1xyXG4gICAgdGhpcy5fY29tbWl0KG9iaik7XHJcbiAgfVxyXG5cclxuICBzZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgLy8gY2xvbmUgYW5kIG1vZGlmeSB0aGUgY29uZmlnXHJcbiAgICBsZXQgY29uZmlnID0gY2xvbmUodGhpc1t2YWxzXSk7XHJcbiAgICBpZiAoXy5pc1BsYWluT2JqZWN0KGtleSkpIHtcclxuICAgICAgY29uZmlnID0gb3ZlcnJpZGUoY29uZmlnLCBrZXkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgXy5zZXQoY29uZmlnLCBrZXksIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBhdHRlbXB0IHRvIHZhbGlkYXRlIHRoZSBjb25maWcgdmFsdWVcclxuICAgIHRoaXMuX2NvbW1pdChjb25maWcpO1xyXG4gIH1cclxuXHJcbiAgX2NvbW1pdChuZXdWYWxzKSB7XHJcbiAgICAvLyByZXNvbHZlIHRoZSBjdXJyZW50IGVudmlyb25tZW50XHJcbiAgICBsZXQgZW52ID0gbmV3VmFscy5lbnY7XHJcbiAgICBkZWxldGUgbmV3VmFscy5lbnY7XHJcbiAgICBpZiAoXy5pc09iamVjdChlbnYpKSBlbnYgPSBlbnYubmFtZTtcclxuICAgIGlmICghZW52KSBlbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAncHJvZHVjdGlvbic7XHJcblxyXG4gICAgbGV0IGRldiA9IGVudiA9PT0gJ2RldmVsb3BtZW50JztcclxuICAgIGxldCBwcm9kID0gZW52ID09PSAncHJvZHVjdGlvbic7XHJcblxyXG4gICAgLy8gcGFzcyB0aGUgZW52aXJvbm1lbnQgYXMgY29udGV4dCBzbyB0aGF0IGl0IGNhbiBiZSByZWZlZCBpbiBjb25maWdcclxuICAgIGxldCBjb250ZXh0ID0ge1xyXG4gICAgICBlbnY6IGVudixcclxuICAgICAgcHJvZDogcHJvZCxcclxuICAgICAgZGV2OiBkZXYsXHJcbiAgICAgIG5vdFByb2Q6ICFwcm9kLFxyXG4gICAgICBub3REZXY6ICFkZXYsXHJcbiAgICAgIHZlcnNpb246IF8uZ2V0KHBrZywgJ3ZlcnNpb24nKSxcclxuICAgICAgYnVpbGROdW06IGRldiA/IE1hdGgucG93KDIsIDUzKSAtIDEgOiBfLmdldChwa2csICdidWlsZC5udW1iZXInLCBOYU4pLFxyXG4gICAgICBidWlsZFNoYTogZGV2ID8gJ1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFgnIDogXy5nZXQocGtnLCAnYnVpbGQuc2hhJywgJycpXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICghY29udGV4dC5kZXYgJiYgIWNvbnRleHQucHJvZCkge1xyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxyXG4gICAgICAgIGBVbmV4cGVjdGVkIGVudmlyb25tZW50IFwiJHtlbnZ9XCIsIGV4cGVjdGVkIG9uZSBvZiBcImRldmVsb3BtZW50XCIgb3IgXCJwcm9kdWN0aW9uXCJgXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlc3VsdHMgPSBKb2kudmFsaWRhdGUobmV3VmFscywgdGhpcy5nZXRTY2hlbWEoKSwgeyBjb250ZXh0IH0pO1xyXG5cclxuICAgIGlmIChyZXN1bHRzLmVycm9yKSB7XHJcbiAgICAgIHRocm93IHJlc3VsdHMuZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpc1t2YWxzXSA9IHJlc3VsdHMudmFsdWU7XHJcbiAgfVxyXG5cclxuICBnZXQoa2V5KSB7XHJcbiAgICBpZiAoIWtleSkge1xyXG4gICAgICByZXR1cm4gY2xvbmUodGhpc1t2YWxzXSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHZhbHVlID0gXy5nZXQodGhpc1t2YWxzXSwga2V5KTtcclxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGlmICghdGhpcy5oYXMoa2V5KSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBjb25maWcga2V5OiAnICsga2V5KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNsb25lKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIGhhcyhrZXkpIHtcclxuICAgIGZ1bmN0aW9uIGhhcyhrZXksIHNjaGVtYSwgcGF0aCkge1xyXG4gICAgICBwYXRoID0gcGF0aCB8fCBbXTtcclxuICAgICAgLy8gQ2F0Y2ggdGhlIHBhcnRpYWwgcGF0aHNcclxuICAgICAgaWYgKHBhdGguam9pbignLicpID09PSBrZXkpIHJldHVybiB0cnVlO1xyXG4gICAgICAvLyBPbmx5IGdvIGRlZXAgb24gaW5uZXIgb2JqZWN0cyB3aXRoIGNoaWxkcmVuXHJcbiAgICAgIGlmIChzY2hlbWEuX2lubmVyLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NoZW1hLl9pbm5lci5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbGV0IGNoaWxkID0gc2NoZW1hLl9pbm5lci5jaGlsZHJlbltpXTtcclxuICAgICAgICAgIC8vIElmIHRoZSBjaGlsZCBpcyBhbiBvYmplY3QgcmVjdXJzZSB0aHJvdWdoIGl0J3MgY2hpbGRyZW4gYW5kIHJldHVyblxyXG4gICAgICAgICAgLy8gdHJ1ZSBpZiB0aGVyZSdzIGEgbWF0Y2hcclxuICAgICAgICAgIGlmIChjaGlsZC5zY2hlbWEuX3R5cGUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIGlmIChoYXMoa2V5LCBjaGlsZC5zY2hlbWEsIHBhdGguY29uY2F0KFtjaGlsZC5rZXldKSkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgLy8gaWYgdGhlIGNoaWxkIG1hdGNoZXMsIHJldHVybiB0cnVlXHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhdGguY29uY2F0KFtjaGlsZC5rZXldKS5qb2luKCcuJykgPT09IGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoXy5pc0FycmF5KGtleSkpIHtcclxuICAgICAgLy8gVE9ETzogYWRkIC5oYXMoKSBzdXBwb3J0IGZvciBhcnJheSBrZXlzXHJcbiAgICAgIGtleSA9IGtleS5qb2luKCcuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICEhaGFzKGtleSwgdGhpcy5nZXRTY2hlbWEoKSk7XHJcbiAgfVxyXG5cclxuICBnZXRTY2hlbWEoKSB7XHJcbiAgICBpZiAoIXRoaXNbc2NoZW1hXSkge1xyXG4gICAgICBsZXQgb2JqS2V5cyA9IHppcE9iamVjdChbLi4udGhpc1tzY2hlbWFLZXlzXV0pO1xyXG4gICAgICB0aGlzW3NjaGVtYV0gPSBKb2kub2JqZWN0KCkua2V5cyhvYmpLZXlzKS5kZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXNbc2NoZW1hXTtcclxuICB9XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/config/config.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/server/config/config.js",
      "sourcesContent": [
        "let Promise = require('bluebird');\r\nlet Joi = require('joi');\r\nlet _ = require('lodash');\r\nlet { zipObject } = require('lodash');\r\nlet override = require('./override');\r\nlet pkg = require('requirefrom')('src/utils')('packageJson');\r\nconst clone = require('./deepCloneWithBuffers');\r\n\r\nconst schema = Symbol('Joi Schema');\r\nconst schemaKeys = Symbol('Schema Extensions');\r\nconst vals = Symbol('config values');\r\nconst pendingSets = Symbol('Pending Settings');\r\n\r\nmodule.exports = class Config {\r\n  constructor(initialSchema, initialSettings) {\r\n    this[schemaKeys] = new Map();\r\n\r\n    this[vals] = Object.create(null);\r\n    this[pendingSets] = new Map(_.pairs(clone(initialSettings || {})));\r\n\r\n    if (initialSchema) this.extendSchema(initialSchema);\r\n  }\r\n\r\n  getPendingSets() {\r\n    return this[pendingSets];\r\n  }\r\n\r\n  extendSchema(key, extension) {\r\n    if (key && key.isJoi) {\r\n      return _.each(key._inner.children, (child) => {\r\n        this.extendSchema(child.key, child.schema);\r\n      });\r\n    }\r\n\r\n    if (this.has(key)) {\r\n      throw new Error(`Config schema already has key: ${key}`);\r\n    }\r\n\r\n    this[schemaKeys].set(key, extension);\r\n    this[schema] = null;\r\n\r\n    let initialVals = this[pendingSets].get(key);\r\n    if (initialVals) {\r\n      this.set(key, initialVals);\r\n      this[pendingSets].delete(key);\r\n    } else {\r\n      this._commit(this[vals]);\r\n    }\r\n  }\r\n\r\n  removeSchema(key) {\r\n    if (!this[schemaKeys].has(key)) {\r\n      throw new TypeError(`Unknown schema key: ${key}`);\r\n    }\r\n\r\n    this[schema] = null;\r\n    this[schemaKeys].delete(key);\r\n    this[pendingSets].delete(key);\r\n    delete this[vals][key];\r\n  }\r\n\r\n  resetTo(obj) {\r\n    this._commit(obj);\r\n  }\r\n\r\n  set(key, value) {\r\n    // clone and modify the config\r\n    let config = clone(this[vals]);\r\n    if (_.isPlainObject(key)) {\r\n      config = override(config, key);\r\n    } else {\r\n      _.set(config, key, value);\r\n    }\r\n\r\n    // attempt to validate the config value\r\n    this._commit(config);\r\n  }\r\n\r\n  _commit(newVals) {\r\n    // resolve the current environment\r\n    let env = newVals.env;\r\n    delete newVals.env;\r\n    if (_.isObject(env)) env = env.name;\r\n    if (!env) env = process.env.NODE_ENV || 'production';\r\n\r\n    let dev = env === 'development';\r\n    let prod = env === 'production';\r\n\r\n    // pass the environment as context so that it can be refed in config\r\n    let context = {\r\n      env: env,\r\n      prod: prod,\r\n      dev: dev,\r\n      notProd: !prod,\r\n      notDev: !dev,\r\n      version: _.get(pkg, 'version'),\r\n      buildNum: dev ? Math.pow(2, 53) - 1 : _.get(pkg, 'build.number', NaN),\r\n      buildSha: dev ? 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' : _.get(pkg, 'build.sha', '')\r\n    };\r\n\r\n    if (!context.dev && !context.prod) {\r\n      throw new TypeError(\r\n        `Unexpected environment \"${env}\", expected one of \"development\" or \"production\"`\r\n      );\r\n    }\r\n\r\n    let results = Joi.validate(newVals, this.getSchema(), { context });\r\n\r\n    if (results.error) {\r\n      throw results.error;\r\n    }\r\n\r\n    this[vals] = results.value;\r\n  }\r\n\r\n  get(key) {\r\n    if (!key) {\r\n      return clone(this[vals]);\r\n    }\r\n\r\n    let value = _.get(this[vals], key);\r\n    if (value === undefined) {\r\n      if (!this.has(key)) {\r\n        throw new Error('Unknown config key: ' + key);\r\n      }\r\n    }\r\n    return clone(value);\r\n  }\r\n\r\n  has(key) {\r\n    function has(key, schema, path) {\r\n      path = path || [];\r\n      // Catch the partial paths\r\n      if (path.join('.') === key) return true;\r\n      // Only go deep on inner objects with children\r\n      if (schema._inner.children.length) {\r\n        for (let i = 0; i < schema._inner.children.length; i++) {\r\n          let child = schema._inner.children[i];\r\n          // If the child is an object recurse through it's children and return\r\n          // true if there's a match\r\n          if (child.schema._type === 'object') {\r\n            if (has(key, child.schema, path.concat([child.key]))) return true;\r\n          // if the child matches, return true\r\n          } else if (path.concat([child.key]).join('.') === key) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (_.isArray(key)) {\r\n      // TODO: add .has() support for array keys\r\n      key = key.join('.');\r\n    }\r\n\r\n    return !!has(key, this.getSchema());\r\n  }\r\n\r\n  getSchema() {\r\n    if (!this[schema]) {\r\n      let objKeys = zipObject([...this[schemaKeys]]);\r\n      this[schema] = Joi.object().keys(objKeys).default();\r\n    }\r\n\r\n    return this[schema];\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670811
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/config/override.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar flattenWith = require('./flattenWith');\nvar explodeBy = require('./explodeBy');\n\nmodule.exports = function (target, source) {\n  var _target = flattenWith('.', target);\n  var _source = flattenWith('.', source);\n  return explodeBy('.', _.defaults(_source, _target));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9vdmVycmlkZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLFdBQVcsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDM0MsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDOztBQUV2QyxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUN6QyxNQUFJLE9BQU8sR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZDLE1BQUksT0FBTyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDdkMsU0FBTyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7Q0FDckQsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9jb25maWcvb3ZlcnJpZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5sZXQgZmxhdHRlbldpdGggPSByZXF1aXJlKCcuL2ZsYXR0ZW5XaXRoJyk7XHJcbmxldCBleHBsb2RlQnkgPSByZXF1aXJlKCcuL2V4cGxvZGVCeScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcclxuICBsZXQgX3RhcmdldCA9IGZsYXR0ZW5XaXRoKCcuJywgdGFyZ2V0KTtcclxuICBsZXQgX3NvdXJjZSA9IGZsYXR0ZW5XaXRoKCcuJywgc291cmNlKTtcclxuICByZXR1cm4gZXhwbG9kZUJ5KCcuJywgXy5kZWZhdWx0cyhfc291cmNlLCBfdGFyZ2V0KSk7XHJcbn07XHJcblxyXG5cclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/config/override.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,WAAW,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC3C,IAAI,SAAS,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;;AAEvC,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,MAAM,EAAE;AACzC,MAAI,OAAO,GAAG,WAAW,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;AACvC,MAAI,OAAO,GAAG,WAAW,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;AACvC,SAAO,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;CACrD,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/config/override.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet flattenWith = require('./flattenWith');\r\nlet explodeBy = require('./explodeBy');\r\n\r\nmodule.exports = function (target, source) {\r\n  let _target = flattenWith('.', target);\r\n  let _source = flattenWith('.', source);\r\n  return explodeBy('.', _.defaults(_source, _target));\r\n};\r\n\r\n\r\n"
      ]
    },
    "mtime": 1465716670826
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/config/flattenWith.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nmodule.exports = function (dot, nestedObj, flattenArrays) {\n  var key = undefined; // original key\n  var stack = []; // track key stack\n  var flatObj = {};\n  (function flattenObj(obj) {\n    _.keys(obj).forEach(function (key) {\n      stack.push(key);\n      if (!flattenArrays && _.isArray(obj[key])) flatObj[stack.join(dot)] = obj[key];else if (_.isObject(obj[key])) flattenObj(obj[key]);else flatObj[stack.join(dot)] = obj[key];\n      stack.pop();\n    });\n  })(nestedObj);\n  return flatObj;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9mbGF0dGVuV2l0aC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsR0FBRyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUU7QUFDeEQsTUFBSSxHQUFHLFlBQUEsQ0FBQztBQUNSLE1BQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLE1BQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNqQixBQUFDLEdBQUEsU0FBUyxVQUFVLENBQUMsR0FBRyxFQUFFO0FBQ3hCLEtBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxFQUFFO0FBQ2pDLFdBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEIsVUFBSSxDQUFDLGFBQWEsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQzFFLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FDL0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekMsV0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO0tBQ2IsQ0FBQyxDQUFDO0dBQ0osQ0FBQSxDQUFDLFNBQVMsQ0FBQyxDQUFFO0FBQ2QsU0FBTyxPQUFPLENBQUM7Q0FDaEIsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9jb25maWcvZmxhdHRlbldpdGguanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb3QsIG5lc3RlZE9iaiwgZmxhdHRlbkFycmF5cykge1xyXG4gIGxldCBrZXk7IC8vIG9yaWdpbmFsIGtleVxyXG4gIGxldCBzdGFjayA9IFtdOyAvLyB0cmFjayBrZXkgc3RhY2tcclxuICBsZXQgZmxhdE9iaiA9IHt9O1xyXG4gIChmdW5jdGlvbiBmbGF0dGVuT2JqKG9iaikge1xyXG4gICAgXy5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgIHN0YWNrLnB1c2goa2V5KTtcclxuICAgICAgaWYgKCFmbGF0dGVuQXJyYXlzICYmIF8uaXNBcnJheShvYmpba2V5XSkpIGZsYXRPYmpbc3RhY2suam9pbihkb3QpXSA9IG9ialtrZXldO1xyXG4gICAgICBlbHNlIGlmIChfLmlzT2JqZWN0KG9ialtrZXldKSkgZmxhdHRlbk9iaihvYmpba2V5XSk7XHJcbiAgICAgIGVsc2UgZmxhdE9ialtzdGFjay5qb2luKGRvdCldID0gb2JqW2tleV07XHJcbiAgICAgIHN0YWNrLnBvcCgpO1xyXG4gICAgfSk7XHJcbiAgfShuZXN0ZWRPYmopKTtcclxuICByZXR1cm4gZmxhdE9iajtcclxufTtcclxuXHJcblxyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/config/flattenWith.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,SAAS,EAAE,aAAa,EAAE;AACxD,MAAI,GAAG,YAAA,CAAC;AACR,MAAI,KAAK,GAAG,EAAE,CAAC;AACf,MAAI,OAAO,GAAG,EAAE,CAAC;AACjB,AAAC,GAAA,SAAS,UAAU,CAAC,GAAG,EAAE;AACxB,KAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE;AACjC,WAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAChB,UAAI,CAAC,aAAa,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,KAC1E,IAAI,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAC/C,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;AACzC,WAAK,CAAC,GAAG,EAAE,CAAC;KACb,CAAC,CAAC;GACJ,CAAA,CAAC,SAAS,CAAC,CAAE;AACd,SAAO,OAAO,CAAC;CAChB,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/config/flattenWith.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nmodule.exports = function (dot, nestedObj, flattenArrays) {\r\n  let key; // original key\r\n  let stack = []; // track key stack\r\n  let flatObj = {};\r\n  (function flattenObj(obj) {\r\n    _.keys(obj).forEach(function (key) {\r\n      stack.push(key);\r\n      if (!flattenArrays && _.isArray(obj[key])) flatObj[stack.join(dot)] = obj[key];\r\n      else if (_.isObject(obj[key])) flattenObj(obj[key]);\r\n      else flatObj[stack.join(dot)] = obj[key];\r\n      stack.pop();\r\n    });\r\n  }(nestedObj));\r\n  return flatObj;\r\n};\r\n\r\n\r\n"
      ]
    },
    "mtime": 1465716670826
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/config/explodeBy.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nmodule.exports = function (dot, flatObject) {\n  var fullObject = {};\n  _.each(flatObject, function (value, key) {\n    var keys = key.split(dot);\n    (function walk(memo, keys, value) {\n      var _key = keys.shift();\n      if (keys.length === 0) {\n        memo[_key] = value;\n      } else {\n        if (!memo[_key]) memo[_key] = {};\n        walk(memo[_key], keys, value);\n      }\n    })(fullObject, keys, value);\n  });\n  return fullObject;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9leHBsb2RlQnkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUFDMUMsTUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLEdBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFVBQVUsS0FBSyxFQUFFLEdBQUcsRUFBRTtBQUN2QyxRQUFJLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFCLEFBQUMsS0FBQSxTQUFTLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRTtBQUNoQyxVQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDeEIsVUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtBQUNyQixZQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDO09BQ3BCLE1BQU07QUFDTCxZQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDakMsWUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7T0FDL0I7S0FDRixDQUFBLENBQUMsVUFBVSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBRTtHQUM3QixDQUFDLENBQUM7QUFDSCxTQUFPLFVBQVUsQ0FBQztDQUNuQixDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9leHBsb2RlQnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkb3QsIGZsYXRPYmplY3QpIHtcclxuICBsZXQgZnVsbE9iamVjdCA9IHt9O1xyXG4gIF8uZWFjaChmbGF0T2JqZWN0LCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgbGV0IGtleXMgPSBrZXkuc3BsaXQoZG90KTtcclxuICAgIChmdW5jdGlvbiB3YWxrKG1lbW8sIGtleXMsIHZhbHVlKSB7XHJcbiAgICAgIGxldCBfa2V5ID0ga2V5cy5zaGlmdCgpO1xyXG4gICAgICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBtZW1vW19rZXldID0gdmFsdWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKCFtZW1vW19rZXldKSBtZW1vW19rZXldID0ge307XHJcbiAgICAgICAgd2FsayhtZW1vW19rZXldLCBrZXlzLCB2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0oZnVsbE9iamVjdCwga2V5cywgdmFsdWUpKTtcclxuICB9KTtcclxuICByZXR1cm4gZnVsbE9iamVjdDtcclxufTtcclxuXHJcblxyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/config/explodeBy.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,UAAU,EAAE;AAC1C,MAAI,UAAU,GAAG,EAAE,CAAC;AACpB,GAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,KAAK,EAAE,GAAG,EAAE;AACvC,QAAI,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC1B,AAAC,KAAA,SAAS,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE;AAChC,UAAI,IAAI,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;AACxB,UAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACrB,YAAI,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;OACpB,MAAM;AACL,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;AACjC,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;OAC/B;KACF,CAAA,CAAC,UAAU,EAAE,IAAI,EAAE,KAAK,CAAC,CAAE;GAC7B,CAAC,CAAC;AACH,SAAO,UAAU,CAAC;CACnB,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/config/explodeBy.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nmodule.exports = function (dot, flatObject) {\r\n  let fullObject = {};\r\n  _.each(flatObject, function (value, key) {\r\n    let keys = key.split(dot);\r\n    (function walk(memo, keys, value) {\r\n      let _key = keys.shift();\r\n      if (keys.length === 0) {\r\n        memo[_key] = value;\r\n      } else {\r\n        if (!memo[_key]) memo[_key] = {};\r\n        walk(memo[_key], keys, value);\r\n      }\r\n    }(fullObject, keys, value));\r\n  });\r\n  return fullObject;\r\n};\r\n\r\n\r\n"
      ]
    },
    "mtime": 1465716670826
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/config/deepCloneWithBuffers.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "cloneDeep"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "cloneDeep",
                "local": "cloneDeep"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nfunction cloneBuffersCustomizer(val) {\n  if (Buffer.isBuffer(val)) {\n    return new Buffer(val);\n  }\n}\n\nexports['default'] = function (vals) {\n  return (0, _lodash.cloneDeep)(vals, cloneBuffersCustomizer);\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9kZWVwQ2xvbmVXaXRoQnVmZmVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7c0JBQTBCLFFBQVE7O0FBRWxDLFNBQVMsc0JBQXNCLENBQUMsR0FBRyxFQUFFO0FBQ25DLE1BQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUN4QixXQUFPLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0dBQ3hCO0NBQ0Y7O3FCQUVjLFVBQVUsSUFBSSxFQUFFO0FBQzdCLFNBQU8sdUJBQVUsSUFBSSxFQUFFLHNCQUFzQixDQUFDLENBQUM7Q0FDaEQ7O0FBQUEsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9jb25maWcvZGVlcENsb25lV2l0aEJ1ZmZlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gnO1xyXG5cclxuZnVuY3Rpb24gY2xvbmVCdWZmZXJzQ3VzdG9taXplcih2YWwpIHtcclxuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHtcclxuICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAodmFscykge1xyXG4gIHJldHVybiBjbG9uZURlZXAodmFscywgY2xvbmVCdWZmZXJzQ3VzdG9taXplcik7XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/config/deepCloneWithBuffers.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAA0B,QAAQ;;AAElC,SAAS,sBAAsB,CAAC,GAAG,EAAE;AACnC,MAAI,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AACxB,WAAO,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC;GACxB;CACF;;qBAEc,UAAU,IAAI,EAAE;AAC7B,SAAO,uBAAU,IAAI,EAAE,sBAAsB,CAAC,CAAC;CAChD;;AAAA,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/config/deepCloneWithBuffers.js",
      "sourcesContent": [
        "import { cloneDeep } from 'lodash';\r\n\r\nfunction cloneBuffersCustomizer(val) {\r\n  if (Buffer.isBuffer(val)) {\r\n    return new Buffer(val);\r\n  }\r\n}\r\n\r\nexport default function (vals) {\r\n  return cloneDeep(vals, cloneBuffersCustomizer);\r\n};\r\n"
      ]
    },
    "mtime": 1465716670811
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/config/schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar get = require('lodash').get;\nvar Joi = require('joi');\nvar fs = require('fs');\nvar path = require('path');\n\nvar utils = require('requirefrom')('src/utils');\nvar fromRoot = utils('fromRoot');\nvar randomBytes = require('crypto').randomBytes;\n\nmodule.exports = function () {\n  return Joi.object({\n    pkg: Joi.object({\n      version: Joi.string()['default'](Joi.ref('$version')),\n      buildNum: Joi.number()['default'](Joi.ref('$buildNum')),\n      buildSha: Joi.string()['default'](Joi.ref('$buildSha'))\n    })['default'](),\n\n    env: Joi.object({\n      name: Joi.string()['default'](Joi.ref('$env')),\n      dev: Joi.boolean()['default'](Joi.ref('$dev')),\n      prod: Joi.boolean()['default'](Joi.ref('$prod'))\n    })['default'](),\n\n    pid: Joi.object({\n      file: Joi.string(),\n      exclusive: Joi.boolean()['default'](false)\n    })['default'](),\n\n    server: Joi.object({\n      host: Joi.string().hostname()['default']('0.0.0.0'),\n      port: Joi.number()['default'](5601),\n      maxPayloadBytes: Joi.number()['default'](1048576),\n      autoListen: Joi.boolean()['default'](true),\n      defaultRoute: Joi.string(),\n      basePath: Joi.string()['default']('').allow('').regex(/(^$|^\\/.*[^\\/]$)/, 'start with a slash, don\\'t end with one'),\n      ssl: Joi.object({\n        cert: Joi.string(),\n        key: Joi.string()\n      })['default'](),\n      cors: Joi.when('$dev', {\n        is: true,\n        then: Joi.object()['default']({\n          origin: ['*://localhost:9876'] // karma test server\n        }),\n        otherwise: Joi.boolean()['default'](false)\n      }),\n      xsrf: Joi.object({\n        disableProtection: Joi.boolean()['default'](false),\n        token: Joi.string().optional().notes('Deprecated')\n      })['default']()\n    })['default'](),\n\n    logging: Joi.object().keys({\n      silent: Joi.boolean()['default'](false),\n\n      quiet: Joi.boolean().when('silent', {\n        is: true,\n        then: Joi['default'](true).valid(true),\n        otherwise: Joi['default'](false)\n      }),\n\n      verbose: Joi.boolean().when('quiet', {\n        is: true,\n        then: Joi.valid(false)['default'](false),\n        otherwise: Joi['default'](false)\n      }),\n\n      events: Joi.any()['default']({}),\n      dest: Joi.string()['default']('stdout'),\n      filter: Joi.any()['default']({}),\n      json: Joi.boolean().when('dest', {\n        is: 'stdout',\n        then: Joi['default'](!process.stdout.isTTY),\n        otherwise: Joi['default'](true)\n      })\n    })['default'](),\n\n    plugins: Joi.object({\n      paths: Joi.array().items(Joi.string())['default']([]),\n      scanDirs: Joi.array().items(Joi.string())['default']([]),\n      initialize: Joi.boolean()['default'](true)\n    })['default'](),\n\n    optimize: Joi.object({\n      enabled: Joi.boolean()['default'](true),\n      bundleFilter: Joi.string()['default']('!tests'),\n      bundleDir: Joi.string()['default'](fromRoot('optimize/bundles')),\n      viewCaching: Joi.boolean()['default'](Joi.ref('$prod')),\n      lazy: Joi.boolean()['default'](false),\n      lazyPort: Joi.number()['default'](5602),\n      lazyHost: Joi.string().hostname()['default']('localhost'),\n      lazyPrebuild: Joi.boolean()['default'](false),\n      lazyProxyTimeout: Joi.number()['default'](5 * 60000),\n      useBundleCache: Joi.boolean()['default'](Joi.ref('$prod')),\n      unsafeCache: Joi.alternatives()['try'](Joi.boolean(), Joi.string().regex(/^\\/.+\\/$/))['default']('/[\\\\/\\\\\\\\](node_modules|bower_components)[\\\\/\\\\\\\\]/'),\n      sourceMaps: Joi.alternatives()['try'](Joi.string().required(), Joi.boolean())['default'](Joi.ref('$dev')),\n      profile: Joi.boolean()['default'](false)\n    })['default'](),\n\n    status: Joi.object({\n      allowAnonymous: Joi.boolean()['default'](false)\n    })['default']()\n\n  })['default']();\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2NvbmZpZy9zY2hlbWEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDO0FBQ2hDLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QixJQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDdkIsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUUzQixJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDaEQsSUFBSSxRQUFRLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ2pDLElBQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxXQUFXLENBQUM7O0FBRWxELE1BQU0sQ0FBQyxPQUFPLEdBQUc7U0FBTSxHQUFHLENBQUMsTUFBTSxDQUFDO0FBQ2hDLE9BQUcsRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDO0FBQ2QsYUFBTyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDbEQsY0FBUSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDcEQsY0FBUSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7S0FDckQsQ0FBQyxXQUFRLEVBQUU7O0FBRVosT0FBRyxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUM7QUFDZCxVQUFJLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxXQUFRLENBQUMsR0FBRyxD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QUN0QyxDQUFDLFdBQVEsRUFBRTs7QUFFWixVQUFNLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNqQixvQkFBYyxFQUFFLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBUSxDQUFDLEtBQUssQ0FBQztLQUM3QyxDQUFDLFdBQVEsRUFBRTs7R0FFYixDQUFDLFdBQVEsRUFBRTtDQUFBLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvY29uZmlnL3NjaGVtYS5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBnZXQgPSByZXF1aXJlKCdsb2Rhc2gnKS5nZXQ7XHJcbmxldCBKb2kgPSByZXF1aXJlKCdqb2knKTtcclxubGV0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxubGV0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcblxyXG5sZXQgdXRpbHMgPSByZXF1aXJlKCdyZXF1aXJlZnJvbScpKCdzcmMvdXRpbHMnKTtcclxubGV0IGZyb21Sb290ID0gdXRpbHMoJ2Zyb21Sb290Jyk7XHJcbmNvbnN0IHJhbmRvbUJ5dGVzID0gcmVxdWlyZSgnY3J5cHRvJykucmFuZG9tQnl0ZXM7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IEpvaS5vYmplY3Qoe1xyXG4gIHBrZzogSm9pLm9iamVjdCh7XHJcbiAgICB2ZXJzaW9uOiBKb2kuc3RyaW5nKCkuZGVmYXVsdChKb2kucmVmKCckdmVyc2lvbicpKSxcclxuICAgIGJ1aWxkTnVtOiBKb2kubnVtYmVyKCkuZGVmYXVsdChKb2kucmVmKCckYnVpbGROdW0nKSksXHJcbiAgICBidWlsZFNoYTogSm9pLnN0cmluZygpLmRlZmF1bHQoSm9pLnJlZignJGJ1aWxkU2hhJykpLFxyXG4gIH0pLmRlZmF1bHQoKSxcclxuXHJcbiAgZW52OiBKb2kub2JqZWN0KHtcclxuICAgIG5hbWU6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KEpvaS5yZWYoJyRlbnYnKSksXHJcbiAgICBkZXY6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChKb2kucmVmKCckZGV2JykpLFxyXG4gICAgcHJvZDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KEpvaS5yZWYoJyRwcm9kJykpXHJcbiAgfSkuZGVmYXVsdCgpLFxyXG5cclxuICBwaWQ6IEpvaS5vYmplY3Qoe1xyXG4gICAgZmlsZTogSm9pLnN0cmluZygpLFxyXG4gICAgZXhjbHVzaXZlOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpXHJcbiAgfSkuZGVmYXVsdCgpLFxyXG5cclxuICBzZXJ2ZXI6IEpvaS5vYmplY3Qoe1xyXG4gICAgaG9zdDogSm9pLnN0cmluZygpLmhvc3RuYW1lKCkuZGVmYXVsdCgnMC4wLjAuMCcpLFxyXG4gICAgcG9ydDogSm9pLm51bWJlcigpLmRlZmF1bHQoNTYwMSksXHJcbiAgICBtYXhQYXlsb2FkQnl0ZXM6IEpvaS5udW1iZXIoKS5kZWZhdWx0KDEwNDg1NzYpLFxyXG4gICAgYXV0b0xpc3RlbjogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxyXG4gICAgZGVmYXVsdFJvdXRlOiBKb2kuc3RyaW5nKCksXHJcbiAgICBiYXNlUGF0aDogSm9pLnN0cmluZygpLmRlZmF1bHQoJycpLmFsbG93KCcnKS5yZWdleCgvKF4kfF5cXC8uKlteXFwvXSQpLywgYHN0YXJ0IHdpdGggYSBzbGFzaCwgZG9uJ3QgZW5kIHdpdGggb25lYCksXHJcbiAgICBzc2w6IEpvaS5vYmplY3Qoe1xyXG4gICAgICBjZXJ0OiBKb2kuc3RyaW5nKCksXHJcbiAgICAgIGtleTogSm9pLnN0cmluZygpXHJcbiAgICB9KS5kZWZhdWx0KCksXHJcbiAgICBjb3JzOiBKb2kud2hlbignJGRldicsIHtcclxuICAgICAgaXM6IHRydWUsXHJcbiAgICAgIHRoZW46IEpvaS5vYmplY3QoKS5kZWZhdWx0KHtcclxuICAgICAgICBvcmlnaW46IFsnKjovL2xvY2FsaG9zdDo5ODc2J10gLy8ga2FybWEgdGVzdCBzZXJ2ZXJcclxuICAgICAgfSksXHJcbiAgICAgIG90aGVyd2lzZTogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKVxyXG4gICAgfSksXHJcbiAgICB4c3JmOiBKb2kub2JqZWN0KHtcclxuICAgICAgZGlzYWJsZVByb3RlY3Rpb246IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXHJcbiAgICAgIHRva2VuOiBKb2kuc3RyaW5nKCkub3B0aW9uYWwoKS5ub3RlcygnRGVwcmVjYXRlZCcpXHJcbiAgICB9KS5kZWZhdWx0KCksXHJcbiAgfSkuZGVmYXVsdCgpLFxyXG5cclxuICBsb2dnaW5nOiBKb2kub2JqZWN0KCkua2V5cyh7XHJcbiAgICBzaWxlbnQ6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXHJcblxyXG4gICAgcXVpZXQ6IEpvaS5ib29sZWFuKClcclxuICAgIC53aGVuKCdzaWxlbnQnLCB7XHJcbiAgICAgIGlzOiB0cnVlLFxyXG4gICAgICB0aGVuOiBKb2kuZGVmYXVsdCh0cnVlKS52YWxpZCh0cnVlKSxcclxuICAgICAgb3RoZXJ3aXNlOiBKb2kuZGVmYXVsdChmYWxzZSlcclxuICAgIH0pLFxyXG5cclxuICAgIHZlcmJvc2U6IEpvaS5ib29sZWFuKClcclxuICAgIC53aGVuKCdxdWlldCcsIHtcclxuICAgICAgaXM6IHRydWUsXHJcbiAgICAgIHRoZW46IEpvaS52YWxpZChmYWxzZSkuZGVmYXVsdChmYWxzZSksXHJcbiAgICAgIG90aGVyd2lzZTogSm9pLmRlZmF1bHQoZmFsc2UpXHJcbiAgICB9KSxcclxuXHJcbiAgICBldmVudHM6IEpvaS5hbnkoKS5kZWZhdWx0KHt9KSxcclxuICAgIGRlc3Q6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KCdzdGRvdXQnKSxcclxuICAgIGZpbHRlcjogSm9pLmFueSgpLmRlZmF1bHQoe30pLFxyXG4gICAganNvbjogSm9pLmJvb2xlYW4oKVxyXG4gICAgLndoZW4oJ2Rlc3QnLCB7XHJcbiAgICAgIGlzOiAnc3Rkb3V0JyxcclxuICAgICAgdGhlbjogSm9pLmRlZmF1bHQoIXByb2Nlc3Muc3Rkb3V0LmlzVFRZKSxcclxuICAgICAgb3RoZXJ3aXNlOiBKb2kuZGVmYXVsdCh0cnVlKVxyXG4gICAgfSlcclxuICB9KVxyXG4gIC5kZWZhdWx0KCksXHJcblxyXG4gIHBsdWdpbnM6IEpvaS5vYmplY3Qoe1xyXG4gICAgcGF0aHM6IEpvaS5hcnJheSgpLml0ZW1zKEpvaS5zdHJpbmcoKSkuZGVmYXVsdChbXSksXHJcbiAgICBzY2FuRGlyczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKS5kZWZhdWx0KFtdKSxcclxuICAgIGluaXRpYWxpemU6IEpvaS5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKVxyXG4gIH0pLmRlZmF1bHQoKSxcclxuXHJcbiAgb3B0aW1pemU6IEpvaS5vYmplY3Qoe1xyXG4gICAgZW5hYmxlZDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxyXG4gICAgYnVuZGxlRmlsdGVyOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnIXRlc3RzJyksXHJcbiAgICBidW5kbGVEaXI6IEpvaS5zdHJpbmcoKS5kZWZhdWx0KGZyb21Sb290KCdvcHRpbWl6ZS9idW5kbGVzJykpLFxyXG4gICAgdmlld0NhY2hpbmc6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChKb2kucmVmKCckcHJvZCcpKSxcclxuICAgIGxhenk6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXHJcbiAgICBsYXp5UG9ydDogSm9pLm51bWJlcigpLmRlZmF1bHQoNTYwMiksXHJcbiAgICBsYXp5SG9zdDogSm9pLnN0cmluZygpLmhvc3RuYW1lKCkuZGVmYXVsdCgnbG9jYWxob3N0JyksXHJcbiAgICBsYXp5UHJlYnVpbGQ6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXHJcbiAgICBsYXp5UHJveHlUaW1lb3V0OiBKb2kubnVtYmVyKCkuZGVmYXVsdCg1ICogNjAwMDApLFxyXG4gICAgdXNlQnVuZGxlQ2FjaGU6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChKb2kucmVmKCckcHJvZCcpKSxcclxuICAgIHVuc2FmZUNhY2hlOiBKb2lcclxuICAgICAgLmFsdGVybmF0aXZlcygpXHJcbiAgICAgIC50cnkoXHJcbiAgICAgICAgSm9pLmJvb2xlYW4oKSxcclxuICAgICAgICBKb2kuc3RyaW5nKCkucmVnZXgoL15cXC8uK1xcLyQvKVxyXG4gICAgICApXHJcbiAgICAgIC5kZWZhdWx0KCcvW1xcXFwvXFxcXFxcXFxdKG5vZGVfbW9kdWxlc3xib3dlcl9jb21wb25lbnRzKVtcXFxcL1xcXFxcXFxcXS8nKSxcclxuICAgIHNvdXJjZU1hcHM6IEpvaVxyXG4gICAgICAuYWx0ZXJuYXRpdmVzKClcclxuICAgICAgLnRyeShcclxuICAgICAgICBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcclxuICAgICAgICBKb2kuYm9vbGVhbigpXHJcbiAgICAgIClcclxuICAgICAgLmRlZmF1bHQoSm9pLnJlZignJGRldicpKSxcclxuICAgIHByb2ZpbGU6IEpvaS5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSlcclxuICB9KS5kZWZhdWx0KCksXHJcblxyXG4gIHN0YXR1czogSm9pLm9iamVjdCh7XHJcbiAgICBhbGxvd0Fub255bW91czogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKVxyXG4gIH0pLmRlZmF1bHQoKVxyXG5cclxufSkuZGVmYXVsdCgpO1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/config/schema.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/server/config/schema.js",
      "sourcesContent": [
        "let get = require('lodash').get;\r\nlet Joi = require('joi');\r\nlet fs = require('fs');\r\nlet path = require('path');\r\n\r\nlet utils = require('requirefrom')('src/utils');\r\nlet fromRoot = utils('fromRoot');\r\nconst randomBytes = require('crypto').randomBytes;\r\n\r\nmodule.exports = () => Joi.object({\r\n  pkg: Joi.object({\r\n    version: Joi.string().default(Joi.ref('$version')),\r\n    buildNum: Joi.number().default(Joi.ref('$buildNum')),\r\n    buildSha: Joi.string().default(Joi.ref('$buildSha')),\r\n  }).default(),\r\n\r\n  env: Joi.object({\r\n    name: Joi.string().default(Joi.ref('$env')),\r\n    dev: Joi.boolean().default(Joi.ref('$dev')),\r\n    prod: Joi.boolean().default(Joi.ref('$prod'))\r\n  }).default(),\r\n\r\n  pid: Joi.object({\r\n    file: Joi.string(),\r\n    exclusive: Joi.boolean().default(false)\r\n  }).default(),\r\n\r\n  server: Joi.object({\r\n    host: Joi.string().hostname().default('0.0.0.0'),\r\n    port: Joi.number().default(5601),\r\n    maxPayloadBytes: Joi.number().default(1048576),\r\n    autoListen: Joi.boolean().default(true),\r\n    defaultRoute: Joi.string(),\r\n    basePath: Joi.string().default('').allow('').regex(/(^$|^\\/.*[^\\/]$)/, `start with a slash, don't end with one`),\r\n    ssl: Joi.object({\r\n      cert: Joi.string(),\r\n      key: Joi.string()\r\n    }).default(),\r\n    cors: Joi.when('$dev', {\r\n      is: true,\r\n      then: Joi.object().default({\r\n        origin: ['*://localhost:9876'] // karma test server\r\n      }),\r\n      otherwise: Joi.boolean().default(false)\r\n    }),\r\n    xsrf: Joi.object({\r\n      disableProtection: Joi.boolean().default(false),\r\n      token: Joi.string().optional().notes('Deprecated')\r\n    }).default(),\r\n  }).default(),\r\n\r\n  logging: Joi.object().keys({\r\n    silent: Joi.boolean().default(false),\r\n\r\n    quiet: Joi.boolean()\r\n    .when('silent', {\r\n      is: true,\r\n      then: Joi.default(true).valid(true),\r\n      otherwise: Joi.default(false)\r\n    }),\r\n\r\n    verbose: Joi.boolean()\r\n    .when('quiet', {\r\n      is: true,\r\n      then: Joi.valid(false).default(false),\r\n      otherwise: Joi.default(false)\r\n    }),\r\n\r\n    events: Joi.any().default({}),\r\n    dest: Joi.string().default('stdout'),\r\n    filter: Joi.any().default({}),\r\n    json: Joi.boolean()\r\n    .when('dest', {\r\n      is: 'stdout',\r\n      then: Joi.default(!process.stdout.isTTY),\r\n      otherwise: Joi.default(true)\r\n    })\r\n  })\r\n  .default(),\r\n\r\n  plugins: Joi.object({\r\n    paths: Joi.array().items(Joi.string()).default([]),\r\n    scanDirs: Joi.array().items(Joi.string()).default([]),\r\n    initialize: Joi.boolean().default(true)\r\n  }).default(),\r\n\r\n  optimize: Joi.object({\r\n    enabled: Joi.boolean().default(true),\r\n    bundleFilter: Joi.string().default('!tests'),\r\n    bundleDir: Joi.string().default(fromRoot('optimize/bundles')),\r\n    viewCaching: Joi.boolean().default(Joi.ref('$prod')),\r\n    lazy: Joi.boolean().default(false),\r\n    lazyPort: Joi.number().default(5602),\r\n    lazyHost: Joi.string().hostname().default('localhost'),\r\n    lazyPrebuild: Joi.boolean().default(false),\r\n    lazyProxyTimeout: Joi.number().default(5 * 60000),\r\n    useBundleCache: Joi.boolean().default(Joi.ref('$prod')),\r\n    unsafeCache: Joi\r\n      .alternatives()\r\n      .try(\r\n        Joi.boolean(),\r\n        Joi.string().regex(/^\\/.+\\/$/)\r\n      )\r\n      .default('/[\\\\/\\\\\\\\](node_modules|bower_components)[\\\\/\\\\\\\\]/'),\r\n    sourceMaps: Joi\r\n      .alternatives()\r\n      .try(\r\n        Joi.string().required(),\r\n        Joi.boolean()\r\n      )\r\n      .default(Joi.ref('$dev')),\r\n    profile: Joi.boolean().default(false)\r\n  }).default(),\r\n\r\n  status: Joi.object({\r\n    allowAnonymous: Joi.boolean().default(false)\r\n  }).default()\r\n\r\n}).default();\r\n"
      ]
    },
    "mtime": 1465716670842
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/http/getDefaultRoute.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\nmodule.exports = _.once(function (kbnServer) {\n  var uiExports = kbnServer.uiExports;\n  var config = kbnServer.config;\n\n  // user configured default route\n  var defaultConfig = config.get('server.defaultRoute');\n  if (defaultConfig) return defaultConfig;\n\n  return config.get('server.basePath') + '/app/elasticsearch_status';\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2h0dHAvZ2V0RGVmYXVsdFJvdXRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUUxQixNQUFNLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxTQUFTLEVBQUU7TUFDbkMsU0FBUyxHQUFhLFNBQVMsQ0FBL0IsU0FBUztNQUFFLE1BQU0sR0FBSyxTQUFTLENBQXBCLE1BQU07OztBQUV6QixNQUFJLGFBQWEsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDdEQsTUFBSSxhQUFhLEVBQUUsT0FBTyxhQUFhLENBQUM7O0FBRXhDLFNBQVUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQywrQkFBNEI7Q0FDcEUsQ0FBQyxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2h0dHAvZ2V0RGVmYXVsdFJvdXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBfLm9uY2UoZnVuY3Rpb24gKGtiblNlcnZlcikge1xuICBjb25zdCB7IHVpRXhwb3J0cywgY29uZmlnIH0gPSBrYm5TZXJ2ZXI7XG4gIC8vIHVzZXIgY29uZmlndXJlZCBkZWZhdWx0IHJvdXRlXG4gIGxldCBkZWZhdWx0Q29uZmlnID0gY29uZmlnLmdldCgnc2VydmVyLmRlZmF1bHRSb3V0ZScpO1xuICBpZiAoZGVmYXVsdENvbmZpZykgcmV0dXJuIGRlZmF1bHRDb25maWc7XG5cbiAgcmV0dXJuIGAke2NvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpfS9hcHAvZWxhc3RpY3NlYXJjaF9zdGF0dXNgO1xufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/http/getDefaultRoute.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE1B,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,SAAS,EAAE;MACnC,SAAS,GAAa,SAAS,CAA/B,SAAS;MAAE,MAAM,GAAK,SAAS,CAApB,MAAM;;;AAEzB,MAAI,aAAa,GAAG,MAAM,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;AACtD,MAAI,aAAa,EAAE,OAAO,aAAa,CAAC;;AAExC,SAAU,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,+BAA4B;CACpE,CAAC,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/http/getDefaultRoute.js",
      "sourcesContent": [
        "let _ = require('lodash');\n\nmodule.exports = _.once(function (kbnServer) {\n  const { uiExports, config } = kbnServer;\n  // user configured default route\n  let defaultConfig = config.get('server.defaultRoute');\n  if (defaultConfig) return defaultConfig;\n\n  return `${config.get('server.basePath')}/app/elasticsearch_status`;\n});\n"
      ]
    },
    "mtime": 1474543765206
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/http/short_url_lookup.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _Promise = require('babel-runtime/core-js/promise')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar crypto = require('crypto');\n\nexports['default'] = function (server) {\n  function updateMetadata(urlId, urlDoc) {\n    var client, kibanaIndex;\n    return _regeneratorRuntime.async(function updateMetadata$(context$2$0) {\n      while (1) switch (context$2$0.prev = context$2$0.next) {\n        case 0:\n          client = server.plugins.elasticsearch.client;\n          kibanaIndex = server.config().get('kibana.index');\n          context$2$0.prev = 2;\n          context$2$0.next = 5;\n          return _regeneratorRuntime.awrap(client.update({\n            index: kibanaIndex,\n            type: 'url',\n            id: urlId,\n            body: {\n              doc: {\n                'accessDate': new Date(),\n                'accessCount': urlDoc._source.accessCount + 1\n              }\n            }\n          }));\n\n        case 5:\n          context$2$0.next = 10;\n          break;\n\n        case 7:\n          context$2$0.prev = 7;\n          context$2$0.t0 = context$2$0['catch'](2);\n\n          server.log('Warning: Error updating url metadata', context$2$0.t0);\n          //swallow errors. It isn't critical if there is no update.\n\n        case 10:\n        case 'end':\n          return context$2$0.stop();\n      }\n    }, null, this, [[2, 7]]);\n  }\n\n  function getUrlDoc(urlId) {\n    var urlDoc;\n    return _regeneratorRuntime.async(function getUrlDoc$(context$2$0) {\n      while (1) switch (context$2$0.prev = context$2$0.next) {\n        case 0:\n          context$2$0.next = 2;\n          return _regeneratorRuntime.awrap(new _Promise(function (resolve, reject) {\n            var client = server.plugins.elasticsearch.client;\n            var kibanaIndex = server.config().get('kibana.index');\n\n            client.get({\n              index: kibanaIndex,\n              type: 'url',\n              id: urlId\n            }).then(function (response) {\n              resolve(response);\n            })['catch'](function (err) {\n              resolve();\n            });\n          }));\n\n        case 2:\n          urlDoc = context$2$0.sent;\n          return context$2$0.abrupt('return', urlDoc);\n\n        case 4:\n        case 'end':\n          return context$2$0.stop();\n      }\n    }, null, this);\n  }\n\n  function createUrlDoc(url, urlId) {\n    var newUrlId;\n    return _regeneratorRuntime.async(function createUrlDoc$(context$2$0) {\n      while (1) switch (context$2$0.prev = context$2$0.next) {\n        case 0:\n          context$2$0.next = 2;\n          return _regeneratorRuntime.awrap(new _Promise(function (resolve, reject) {\n            var client = server.plugins.elasticsearch.client;\n            var kibanaIndex = server.config().get('kibana.index');\n\n            client.index({\n              index: kibanaIndex,\n              type: 'url',\n              id: urlId,\n              body: {\n                url: url,\n                'accessCount': 0,\n                'createDate': new Date(),\n                'accessDate': new Date()\n              }\n            }).then(function (response) {\n              resolve(response._id);\n            })['catch'](function (err) {\n              reject(err);\n            });\n          }));\n\n        case 2:\n          newUrlId = context$2$0.sent;\n          return context$2$0.abrupt('return', newUrlId);\n\n        case 4:\n        case 'end':\n          return context$2$0.stop();\n      }\n    }, null, this);\n  }\n\n  function createUrlId(url) {\n    var urlId = crypto.createHash('md5').update(url).digest('hex');\n\n    return urlId;\n  }\n\n  return {\n    generateUrlId: function generateUrlId(url) {\n      var urlId, urlDoc;\n      return _regeneratorRuntime.async(function generateUrlId$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            urlId = createUrlId(url);\n            context$2$0.next = 3;\n            return _regeneratorRuntime.awrap(getUrlDoc(urlId));\n\n          case 3:\n            urlDoc = context$2$0.sent;\n\n            if (!urlDoc) {\n              context$2$0.next = 6;\n              break;\n            }\n\n            return context$2$0.abrupt('return', urlId);\n\n          case 6:\n            return context$2$0.abrupt('return', createUrlDoc(url, urlId));\n\n          case 7:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    },\n    getUrl: function getUrl(urlId) {\n      var urlDoc;\n      return _regeneratorRuntime.async(function getUrl$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.prev = 0;\n            context$2$0.next = 3;\n            return _regeneratorRuntime.awrap(getUrlDoc(urlId));\n\n          case 3:\n            urlDoc = context$2$0.sent;\n\n            if (urlDoc) {\n              context$2$0.next = 6;\n              break;\n            }\n\n            throw new Error('Requested shortened url does note exist in kibana index');\n\n          case 6:\n\n            updateMetadata(urlId, urlDoc);\n\n            return context$2$0.abrupt('return', urlDoc._source.url);\n\n          case 10:\n            context$2$0.prev = 10;\n            context$2$0.t0 = context$2$0['catch'](0);\n            return context$2$0.abrupt('return', '/');\n\n          case 13:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this, [[0, 10]]);\n    }\n  };\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2h0dHAvc2hvcnRfdXJsX2xvb2t1cC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O3FCQUVsQixVQUFVLE1BQU0sRUFBRTtBQUMvQixXQUFlLGNBQWMsQ0FBQyxLQUFLLEVBQUUsTUFBTTtRQUNuQyxNQUFNLEVBQ04sV0FBVzs7OztBQURYLGdCQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsTUFBTTtBQUM1QyxxQkFBVyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDOzs7MkNBRy9DLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDbEIsaUJBQUssRUFBRSxXQUFXO0FBQ2xCLGdCQUFJLEVBQUUsS0FBSztBQUNYLGNBQUUsRUFBRSxLQUFLO0FBQ1QsZ0JBQUksRUFBRTtBQUNKLGlCQUFHLEVBQUU7QUFDSCw0QkFBWSxFQUFFLElBQUksSUFBSSxFQUFFO0FBQ3hCLDZCQUFhLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsQ0FBQztlQUM5QzthQUNGO1dBQ0YsQ0FBQzs7Ozs7Ozs7OztBQUVGLGdCQUFNLENBQUMsR0FBRyxDQUFDLHNDQUFzQyxpQkFBTSxDQUFDOzs7Ozs7OztHQUczRDs7QUFFRCxXQUFlLFNBQVMsQ0FBQyxLQUFLO1FBQ3RCLE1BQU07Ozs7OzJDQUFTLGFBQVksVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FBQ3BELGdCQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUM7QUFDbkQsZ0JBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRXhELGtCQUFNLENBQUMsR0FBRyxDQUFDO0FBQ1QsbUJBQUssRUFBRSxXQUFXO0FBQ2xCLGtCQUFJLEVBQUUsS0FBSztBQUNYLGdCQUFFLEVBQUUsS0FBSzthQUNWLENBQUMsQ0FDRCxJQUFJLENBQUMsVUFBQSxRQUFRLEVBQUk7QUFDaEIscUJBQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUNuQixDQUFDLFNBQ0ksQ0FBQyxVQUFBLEdBQUcsRUFBSTtBQUNaLHFCQUFPLEVBQUUsQ0FBQzthQUNYLENBQUMsQ0FBQztXQUNKLENBQUM7OztBQWZJLGdCQUFNOzhDQWlCTCxNQUFNOzs7Ozs7O0dBQ2Q7O0FBRUQsV0FBZSxZQUFZLENBQUMsR0FBRyxFQUFFLEtBQUs7UUFDOUIsUUFBUTs7Ozs7MkNBQVMsYUFBWSxVQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUs7QUFDdEQsZ0JBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxnQkFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFeEQsa0JBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxtQkFBSyxFQUFFLFdBQVc7QUFDbEIsa0JBQUksRUFBRSxLQUFLO0FBQ1gsZ0JBQUUsRUFBRSxLQUFLO0FBQ1Qsa0JBQUksRUFBRTtBQUNKLG1CQUFHLEVBQUgsR0FBRztBQUNILDZCQUFhLEVBQUUsQ0FBQztBQUNoQiw0QkFBWSxFQUFFLElBQUksSUFBSSxFQUFFO0FBQ3hCLDRCQUFZLEVBQUUsSUFBSSxJQUFJLEVBQUU7ZUFDekI7YUFDRixDQUFDLENBQ0QsSUFBSSxDQUFDLFVBQUEsUUFBUSxFQUFJO0FBQ2hCLHFCQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ3ZCLENBQUMsU0FDSSxDQUFDLFVBQUEsR0FBRyxFQUFJO0FBQ1osb0JBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUNiLENBQUMsQ0FBQztXQUNKLENBQUM7OztBQXJCSSxrQkFBUTs4Q0F1QlAsUUFBUTs7Ozs7OztHQUNoQjs7QUFFRCxXQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUU7QUFDeEIsUUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FDckMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUNYLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQzs7QUFFZixXQUFPLEtBQUssQ0FBQztHQUNkOztBQUVELFNBQU87QUFDTCxBQUFNLGlCQUFhLEVBQUEsdUJBQUMsR0FBRztVQUNmLEtBQUssRUFDTCxNQUFNOzs7O0FBRE4saUJBQUssR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDOzs2Q0FDVCxTQUFTLENBQUMsS0FBSyxDQUFDOzs7QUFBL0Isa0JBQU07O2lCQUNSLE1BQU07Ozs7O2dEQUFTLEtBQUs7OztnREFFakIsWUFBWSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUM7Ozs7Ozs7S0FDaEM7QUFDRCxBQUFNLFVBQU0sRUFBQSxnQkFBQyxLQUFLO1VBRVIsTUFBTTs7Ozs7OzZDQUFTLFNBQVMsQ0FBQyxLQUFLLENBQUM7OztBQUEvQixrQkFBTTs7Z0JBQ1AsTUFBTTs7Ozs7a0JBQVEsSUFBSSxLQUFLLENBQUMseURBQXlELENBQUM7Ozs7QUFFdkYsMEJBQWMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7O2dEQUV2QixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUc7Ozs7O2dEQUVsQixHQUFHOzs7Ozs7O0tBRWI7R0FDRixDQUFDO0NBQ0g7O0FBQUEsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9odHRwL3Nob3J0X3VybF9sb29rdXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzZXJ2ZXIpIHtcclxuICBhc3luYyBmdW5jdGlvbiB1cGRhdGVNZXRhZGF0YSh1cmxJZCwgdXJsRG9jKSB7XHJcbiAgICBjb25zdCBjbGllbnQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNsaWVudDtcclxuICAgIGNvbnN0IGtpYmFuYUluZGV4ID0gc2VydmVyLmNvbmZpZygpLmdldCgna2liYW5hLmluZGV4Jyk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgY2xpZW50LnVwZGF0ZSh7XHJcbiAgICAgICAgaW5kZXg6IGtpYmFuYUluZGV4LFxyXG4gICAgICAgIHR5cGU6ICd1cmwnLFxyXG4gICAgICAgIGlkOiB1cmxJZCxcclxuICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICBkb2M6IHtcclxuICAgICAgICAgICAgJ2FjY2Vzc0RhdGUnOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAnYWNjZXNzQ291bnQnOiB1cmxEb2MuX3NvdXJjZS5hY2Nlc3NDb3VudCArIDFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHNlcnZlci5sb2coJ1dhcm5pbmc6IEVycm9yIHVwZGF0aW5nIHVybCBtZXRhZGF0YScsIGVycik7XHJcbiAgICAgIC8vc3dhbGxvdyBlcnJvcnMuIEl0IGlzbid0IGNyaXRpY2FsIGlmIHRoZXJlIGlzIG5vIHVwZGF0ZS5cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldFVybERvYyh1cmxJZCkge1xyXG4gICAgY29uc3QgdXJsRG9jID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBjbGllbnQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNsaWVudDtcclxuICAgICAgY29uc3Qga2liYW5hSW5kZXggPSBzZXJ2ZXIuY29uZmlnKCkuZ2V0KCdraWJhbmEuaW5kZXgnKTtcclxuXHJcbiAgICAgIGNsaWVudC5nZXQoe1xyXG4gICAgICAgIGluZGV4OiBraWJhbmFJbmRleCxcclxuICAgICAgICB0eXBlOiAndXJsJyxcclxuICAgICAgICBpZDogdXJsSWRcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHVybERvYztcclxuICB9XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVybERvYyh1cmwsIHVybElkKSB7XHJcbiAgICBjb25zdCBuZXdVcmxJZCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgY2xpZW50ID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jbGllbnQ7XHJcbiAgICAgIGNvbnN0IGtpYmFuYUluZGV4ID0gc2VydmVyLmNvbmZpZygpLmdldCgna2liYW5hLmluZGV4Jyk7XHJcblxyXG4gICAgICBjbGllbnQuaW5kZXgoe1xyXG4gICAgICAgIGluZGV4OiBraWJhbmFJbmRleCxcclxuICAgICAgICB0eXBlOiAndXJsJyxcclxuICAgICAgICBpZDogdXJsSWQsXHJcbiAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgJ2FjY2Vzc0NvdW50JzogMCxcclxuICAgICAgICAgICdjcmVhdGVEYXRlJzogbmV3IERhdGUoKSxcclxuICAgICAgICAgICdhY2Nlc3NEYXRlJzogbmV3IERhdGUoKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UuX2lkKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIG5ld1VybElkO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlVXJsSWQodXJsKSB7XHJcbiAgICBjb25zdCB1cmxJZCA9IGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKVxyXG4gICAgLnVwZGF0ZSh1cmwpXHJcbiAgICAuZGlnZXN0KCdoZXgnKTtcclxuXHJcbiAgICByZXR1cm4gdXJsSWQ7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgYXN5bmMgZ2VuZXJhdGVVcmxJZCh1cmwpIHtcclxuICAgICAgY29uc3QgdXJsSWQgPSBjcmVhdGVVcmxJZCh1cmwpO1xyXG4gICAgICBjb25zdCB1cmxEb2MgPSBhd2FpdCBnZXRVcmxEb2ModXJsSWQpO1xyXG4gICAgICBpZiAodXJsRG9jKSByZXR1cm4gdXJsSWQ7XHJcblxyXG4gICAgICByZXR1cm4gY3JlYXRlVXJsRG9jKHVybCwgdXJsSWQpO1xyXG4gICAgfSxcclxuICAgIGFzeW5jIGdldFVybCh1cmxJZCkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHVybERvYyA9IGF3YWl0IGdldFVybERvYyh1cmxJZCk7XHJcbiAgICAgICAgaWYgKCF1cmxEb2MpIHRocm93IG5ldyBFcnJvcignUmVxdWVzdGVkIHNob3J0ZW5lZCB1cmwgZG9lcyBub3RlIGV4aXN0IGluIGtpYmFuYSBpbmRleCcpO1xyXG5cclxuICAgICAgICB1cGRhdGVNZXRhZGF0YSh1cmxJZCwgdXJsRG9jKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVybERvYy5fc291cmNlLnVybDtcclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgcmV0dXJuICcvJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/http/short_url_lookup.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/server/http/short_url_lookup.js",
      "sourcesContent": [
        "const crypto = require('crypto');\r\n\r\nexport default function (server) {\r\n  async function updateMetadata(urlId, urlDoc) {\r\n    const client = server.plugins.elasticsearch.client;\r\n    const kibanaIndex = server.config().get('kibana.index');\r\n\r\n    try {\r\n      await client.update({\r\n        index: kibanaIndex,\r\n        type: 'url',\r\n        id: urlId,\r\n        body: {\r\n          doc: {\r\n            'accessDate': new Date(),\r\n            'accessCount': urlDoc._source.accessCount + 1\r\n          }\r\n        }\r\n      });\r\n    } catch (err) {\r\n      server.log('Warning: Error updating url metadata', err);\r\n      //swallow errors. It isn't critical if there is no update.\r\n    }\r\n  }\r\n\r\n  async function getUrlDoc(urlId) {\r\n    const urlDoc = await new Promise((resolve, reject) => {\r\n      const client = server.plugins.elasticsearch.client;\r\n      const kibanaIndex = server.config().get('kibana.index');\r\n\r\n      client.get({\r\n        index: kibanaIndex,\r\n        type: 'url',\r\n        id: urlId\r\n      })\r\n      .then(response => {\r\n        resolve(response);\r\n      })\r\n      .catch(err => {\r\n        resolve();\r\n      });\r\n    });\r\n\r\n    return urlDoc;\r\n  }\r\n\r\n  async function createUrlDoc(url, urlId) {\r\n    const newUrlId = await new Promise((resolve, reject) => {\r\n      const client = server.plugins.elasticsearch.client;\r\n      const kibanaIndex = server.config().get('kibana.index');\r\n\r\n      client.index({\r\n        index: kibanaIndex,\r\n        type: 'url',\r\n        id: urlId,\r\n        body: {\r\n          url,\r\n          'accessCount': 0,\r\n          'createDate': new Date(),\r\n          'accessDate': new Date()\r\n        }\r\n      })\r\n      .then(response => {\r\n        resolve(response._id);\r\n      })\r\n      .catch(err => {\r\n        reject(err);\r\n      });\r\n    });\r\n\r\n    return newUrlId;\r\n  }\r\n\r\n  function createUrlId(url) {\r\n    const urlId = crypto.createHash('md5')\r\n    .update(url)\r\n    .digest('hex');\r\n\r\n    return urlId;\r\n  }\r\n\r\n  return {\r\n    async generateUrlId(url) {\r\n      const urlId = createUrlId(url);\r\n      const urlDoc = await getUrlDoc(urlId);\r\n      if (urlDoc) return urlId;\r\n\r\n      return createUrlDoc(url, urlId);\r\n    },\r\n    async getUrl(urlId) {\r\n      try {\r\n        const urlDoc = await getUrlDoc(urlId);\r\n        if (!urlDoc) throw new Error('Requested shortened url does note exist in kibana index');\r\n\r\n        updateMetadata(urlId, urlDoc);\r\n\r\n        return urlDoc._source.url;\r\n      } catch (err) {\r\n        return '/';\r\n      }\r\n    }\r\n  };\r\n};\r\n"
      ]
    },
    "mtime": 1465716670858
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/http/xsrf.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "badRequest"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "badRequest",
                "local": "badRequest"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _boom = require('boom');\n\nexports['default'] = function (kbnServer, server, config) {\n  var version = config.get('pkg.version');\n  var disabled = config.get('server.xsrf.disableProtection');\n  var header = 'kbn-version';\n\n  server.ext('onPostAuth', function (req, reply) {\n    var noHeaderGet = req.method === 'get' && !req.headers[header];\n    if (disabled || noHeaderGet) return reply['continue']();\n\n    var submission = req.headers[header];\n    if (!submission) return reply((0, _boom.badRequest)('Missing ' + header + ' header'));\n    if (submission !== version) {\n      return reply((0, _boom.badRequest)('Browser client is out of date, please refresh the page', {\n        expected: version,\n        got: submission\n      }));\n    }\n\n    return reply['continue']();\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2h0dHAveHNyZi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7b0JBQTJCLE1BQU07O3FCQUVsQixVQUFVLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ2xELE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDMUMsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0FBQzdELE1BQU0sTUFBTSxHQUFHLGFBQWEsQ0FBQzs7QUFFN0IsUUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsVUFBVSxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQzdDLFFBQU0sV0FBVyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEtBQUssS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNqRSxRQUFJLFFBQVEsSUFBSSxXQUFXLEVBQUUsT0FBTyxLQUFLLFlBQVMsRUFBRSxDQUFDOztBQUVyRCxRQUFNLFVBQVUsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZDLFFBQUksQ0FBQyxVQUFVLEVBQUUsT0FBTyxLQUFLLENBQUMsbUNBQXNCLE1BQU0sYUFBVSxDQUFDLENBQUM7QUFDdEUsUUFBSSxVQUFVLEtBQUssT0FBTyxFQUFFO0FBQzFCLGFBQU8sS0FBSyxDQUFDLHNCQUFXLHdEQUF3RCxFQUFFO0FBQ2hGLGdCQUFRLEVBQUUsT0FBTztBQUNqQixXQUFHLEVBQUUsVUFBVTtPQUNoQixDQUFDLENBQUMsQ0FBQztLQUNMOztBQUVELFdBQU8sS0FBSyxZQUFTLEVBQUUsQ0FBQztHQUN6QixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9odHRwL3hzcmYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiYWRSZXF1ZXN0IH0gZnJvbSAnYm9vbSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoa2JuU2VydmVyLCBzZXJ2ZXIsIGNvbmZpZykge1xyXG4gIGNvbnN0IHZlcnNpb24gPSBjb25maWcuZ2V0KCdwa2cudmVyc2lvbicpO1xyXG4gIGNvbnN0IGRpc2FibGVkID0gY29uZmlnLmdldCgnc2VydmVyLnhzcmYuZGlzYWJsZVByb3RlY3Rpb24nKTtcclxuICBjb25zdCBoZWFkZXIgPSAna2JuLXZlcnNpb24nO1xyXG5cclxuICBzZXJ2ZXIuZXh0KCdvblBvc3RBdXRoJywgZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcclxuICAgIGNvbnN0IG5vSGVhZGVyR2V0ID0gcmVxLm1ldGhvZCA9PT0gJ2dldCcgJiYgIXJlcS5oZWFkZXJzW2hlYWRlcl07XHJcbiAgICBpZiAoZGlzYWJsZWQgfHwgbm9IZWFkZXJHZXQpIHJldHVybiByZXBseS5jb250aW51ZSgpO1xyXG5cclxuICAgIGNvbnN0IHN1Ym1pc3Npb24gPSByZXEuaGVhZGVyc1toZWFkZXJdO1xyXG4gICAgaWYgKCFzdWJtaXNzaW9uKSByZXR1cm4gcmVwbHkoYmFkUmVxdWVzdChgTWlzc2luZyAke2hlYWRlcn0gaGVhZGVyYCkpO1xyXG4gICAgaWYgKHN1Ym1pc3Npb24gIT09IHZlcnNpb24pIHtcclxuICAgICAgcmV0dXJuIHJlcGx5KGJhZFJlcXVlc3QoJ0Jyb3dzZXIgY2xpZW50IGlzIG91dCBvZiBkYXRlLCBwbGVhc2UgcmVmcmVzaCB0aGUgcGFnZScsIHtcclxuICAgICAgICBleHBlY3RlZDogdmVyc2lvbixcclxuICAgICAgICBnb3Q6IHN1Ym1pc3Npb25cclxuICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXBseS5jb250aW51ZSgpO1xyXG4gIH0pO1xyXG59XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/http/xsrf.js"
      ],
      "names": [],
      "mappings": ";;;;;;oBAA2B,MAAM;;qBAElB,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AAClD,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAC1C,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;AAC7D,MAAM,MAAM,GAAG,aAAa,CAAC;;AAE7B,QAAM,CAAC,GAAG,CAAC,YAAY,EAAE,UAAU,GAAG,EAAE,KAAK,EAAE;AAC7C,QAAM,WAAW,GAAG,GAAG,CAAC,MAAM,KAAK,KAAK,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACjE,QAAI,QAAQ,IAAI,WAAW,EAAE,OAAO,KAAK,YAAS,EAAE,CAAC;;AAErD,QAAM,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AACvC,QAAI,CAAC,UAAU,EAAE,OAAO,KAAK,CAAC,mCAAsB,MAAM,aAAU,CAAC,CAAC;AACtE,QAAI,UAAU,KAAK,OAAO,EAAE;AAC1B,aAAO,KAAK,CAAC,sBAAW,wDAAwD,EAAE;AAChF,gBAAQ,EAAE,OAAO;AACjB,WAAG,EAAE,UAAU;OAChB,CAAC,CAAC,CAAC;KACL;;AAED,WAAO,KAAK,YAAS,EAAE,CAAC;GACzB,CAAC,CAAC;CACJ",
      "file": "D:/backup/oplate/kibana1/src/server/http/xsrf.js",
      "sourcesContent": [
        "import { badRequest } from 'boom';\r\n\r\nexport default function (kbnServer, server, config) {\r\n  const version = config.get('pkg.version');\r\n  const disabled = config.get('server.xsrf.disableProtection');\r\n  const header = 'kbn-version';\r\n\r\n  server.ext('onPostAuth', function (req, reply) {\r\n    const noHeaderGet = req.method === 'get' && !req.headers[header];\r\n    if (disabled || noHeaderGet) return reply.continue();\r\n\r\n    const submission = req.headers[header];\r\n    if (!submission) return reply(badRequest(`Missing ${header} header`));\r\n    if (submission !== version) {\r\n      return reply(badRequest('Browser client is out of date, please refresh the page', {\r\n        expected: version,\r\n        got: submission\r\n      }));\r\n    }\r\n\r\n    return reply.continue();\r\n  });\r\n}\r\n"
      ]
    },
    "mtime": 1465716558008
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/logging/LogReporter.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _ = require('lodash');\nvar Squeeze = require('good-squeeze').Squeeze;\nvar writeStr = require('fs').createWriteStream;\n\nvar LogFormatJson = require('./LogFormatJson');\nvar LogFormatString = require('./LogFormatString');\n\nmodule.exports = (function () {\n  function KbnLogger(events, config) {\n    _classCallCheck(this, KbnLogger);\n\n    this.squeeze = new Squeeze(events);\n    this.format = config.json ? new LogFormatJson(config) : new LogFormatString(config);\n\n    if (config.dest === 'stdout') {\n      this.dest = process.stdout;\n    } else {\n      this.dest = writeStr(config.dest, {\n        flags: 'a',\n        encoding: 'utf8'\n      });\n    }\n  }\n\n  _createClass(KbnLogger, [{\n    key: 'init',\n    value: function init(readstream, emitter, callback) {\n      var _this = this;\n\n      this.output = readstream.pipe(this.squeeze).pipe(this.format);\n      this.output.pipe(this.dest);\n\n      emitter.on('stop', function () {\n        _this.output.unpipe(_this.dest);\n      });\n\n      callback();\n    }\n  }]);\n\n  return KbnLogger;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2xvZ2dpbmcvTG9nUmVwb3J0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDOUMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLGlCQUFpQixDQUFDOztBQUUvQyxJQUFJLGFBQWEsR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUMvQyxJQUFJLGVBQWUsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQzs7QUFFbkQsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLFNBQVMsQ0FDbEIsTUFBTSxFQUFFLE1BQU0sRUFBRTswQkFEUCxTQUFTOztBQUU1QixRQUFJLENBQUMsT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ25DLFFBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLGFBQWEsQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFcEYsUUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRTtBQUM1QixVQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7S0FDNUIsTUFBTTtBQUNMLFVBQUksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUU7QUFDaEMsYUFBSyxFQUFFLEdBQUc7QUFDVixnQkFBUSxFQUFFLE1BQU07T0FDakIsQ0FBQyxDQUFDO0tBQ0o7R0FDRjs7ZUFib0IsU0FBUzs7V0FlMUIsY0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRTs7O0FBRWxDLFVBQUksQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM5RCxVQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRTVCLGFBQU8sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFlBQU07QUFDdkIsY0FBSyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQUssSUFBSSxDQUFDLENBQUM7T0FDL0IsQ0FBQyxDQUFDOztBQUVILGNBQVEsRUFBRSxDQUFDO0tBQ1o7OztTQXpCb0IsU0FBUztJQTBCL0IsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9sb2dnaW5nL0xvZ1JlcG9ydGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxubGV0IFNxdWVlemUgPSByZXF1aXJlKCdnb29kLXNxdWVlemUnKS5TcXVlZXplO1xyXG5sZXQgd3JpdGVTdHIgPSByZXF1aXJlKCdmcycpLmNyZWF0ZVdyaXRlU3RyZWFtO1xyXG5cclxubGV0IExvZ0Zvcm1hdEpzb24gPSByZXF1aXJlKCcuL0xvZ0Zvcm1hdEpzb24nKTtcclxubGV0IExvZ0Zvcm1hdFN0cmluZyA9IHJlcXVpcmUoJy4vTG9nRm9ybWF0U3RyaW5nJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEtibkxvZ2dlciB7XHJcbiAgY29uc3RydWN0b3IoZXZlbnRzLCBjb25maWcpIHtcclxuICAgIHRoaXMuc3F1ZWV6ZSA9IG5ldyBTcXVlZXplKGV2ZW50cyk7XHJcbiAgICB0aGlzLmZvcm1hdCA9IGNvbmZpZy5qc29uID8gbmV3IExvZ0Zvcm1hdEpzb24oY29uZmlnKSA6IG5ldyBMb2dGb3JtYXRTdHJpbmcoY29uZmlnKTtcclxuXHJcbiAgICBpZiAoY29uZmlnLmRlc3QgPT09ICdzdGRvdXQnKSB7XHJcbiAgICAgIHRoaXMuZGVzdCA9IHByb2Nlc3Muc3Rkb3V0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kZXN0ID0gd3JpdGVTdHIoY29uZmlnLmRlc3QsIHtcclxuICAgICAgICBmbGFnczogJ2EnLFxyXG4gICAgICAgIGVuY29kaW5nOiAndXRmOCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbml0KHJlYWRzdHJlYW0sIGVtaXR0ZXIsIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgdGhpcy5vdXRwdXQgPSByZWFkc3RyZWFtLnBpcGUodGhpcy5zcXVlZXplKS5waXBlKHRoaXMuZm9ybWF0KTtcclxuICAgIHRoaXMub3V0cHV0LnBpcGUodGhpcy5kZXN0KTtcclxuXHJcbiAgICBlbWl0dGVyLm9uKCdzdG9wJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLm91dHB1dC51bnBpcGUodGhpcy5kZXN0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNhbGxiYWNrKCk7XHJcbiAgfVxyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/logging/LogReporter.js"
      ],
      "names": [],
      "mappings": ";;;;;;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,OAAO,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC;AAC9C,IAAI,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,iBAAiB,CAAC;;AAE/C,IAAI,aAAa,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AAC/C,IAAI,eAAe,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAEnD,MAAM,CAAC,OAAO;AACD,WADU,SAAS,CAClB,MAAM,EAAE,MAAM,EAAE;0BADP,SAAS;;AAE5B,QAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC;AACnC,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,GAAG,IAAI,aAAa,CAAC,MAAM,CAAC,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,CAAC;;AAEpF,QAAI,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC5B,UAAI,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;KAC5B,MAAM;AACL,UAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,EAAE;AAChC,aAAK,EAAE,GAAG;AACV,gBAAQ,EAAE,MAAM;OACjB,CAAC,CAAC;KACJ;GACF;;eAboB,SAAS;;WAe1B,cAAC,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE;;;AAElC,UAAI,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC9D,UAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;AAE5B,aAAO,CAAC,EAAE,CAAC,MAAM,EAAE,YAAM;AACvB,cAAK,MAAM,CAAC,MAAM,CAAC,MAAK,IAAI,CAAC,CAAC;OAC/B,CAAC,CAAC;;AAEH,cAAQ,EAAE,CAAC;KACZ;;;SAzBoB,SAAS;IA0B/B,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/logging/LogReporter.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet Squeeze = require('good-squeeze').Squeeze;\r\nlet writeStr = require('fs').createWriteStream;\r\n\r\nlet LogFormatJson = require('./LogFormatJson');\r\nlet LogFormatString = require('./LogFormatString');\r\n\r\nmodule.exports = class KbnLogger {\r\n  constructor(events, config) {\r\n    this.squeeze = new Squeeze(events);\r\n    this.format = config.json ? new LogFormatJson(config) : new LogFormatString(config);\r\n\r\n    if (config.dest === 'stdout') {\r\n      this.dest = process.stdout;\r\n    } else {\r\n      this.dest = writeStr(config.dest, {\r\n        flags: 'a',\r\n        encoding: 'utf8'\r\n      });\r\n    }\r\n  }\r\n\r\n  init(readstream, emitter, callback) {\r\n\r\n    this.output = readstream.pipe(this.squeeze).pipe(this.format);\r\n    this.output.pipe(this.dest);\r\n\r\n    emitter.on('stop', () => {\r\n      this.output.unpipe(this.dest);\r\n    });\r\n\r\n    callback();\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670858
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/logging/LogFormatJson.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = require('babel-runtime/helpers/get')['default'];\n\nvar _inherits = require('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar LogFormat = require('./LogFormat');\nvar stringify = require('json-stringify-safe');\n\nvar stripColors = function stripColors(string) {\n  return string.replace(/\\u001b[^m]+m/g, '');\n};\n\nmodule.exports = (function (_LogFormat) {\n  _inherits(KbnLoggerJsonFormat, _LogFormat);\n\n  function KbnLoggerJsonFormat() {\n    _classCallCheck(this, KbnLoggerJsonFormat);\n\n    _get(Object.getPrototypeOf(KbnLoggerJsonFormat.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(KbnLoggerJsonFormat, [{\n    key: 'format',\n    value: function format(data) {\n      data.message = stripColors(data.message);\n      return stringify(data);\n    }\n  }]);\n\n  return KbnLoggerJsonFormat;\n})(LogFormat);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2xvZ2dpbmcvTG9nRm9ybWF0SnNvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDOztBQUUvQyxJQUFJLFdBQVcsR0FBRyxTQUFkLFdBQVcsQ0FBYSxNQUFNLEVBQUU7QUFDbEMsU0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxFQUFFLENBQUMsQ0FBQztDQUM1QyxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPO1lBQVMsbUJBQW1COztXQUFuQixtQkFBbUI7MEJBQW5CLG1CQUFtQjs7K0JBQW5CLG1CQUFtQjs7O2VBQW5CLG1CQUFtQjs7V0FDbEMsZ0JBQUMsSUFBSSxFQUFFO0FBQ1gsVUFBSSxDQUFDLE9BQU8sR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3pDLGFBQU8sU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3hCOzs7U0FKb0IsbUJBQW1CO0dBQVMsU0FBUyxDQUszRCxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2xvZ2dpbmcvTG9nRm9ybWF0SnNvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBMb2dGb3JtYXQgPSByZXF1aXJlKCcuL0xvZ0Zvcm1hdCcpO1xyXG5sZXQgc3RyaW5naWZ5ID0gcmVxdWlyZSgnanNvbi1zdHJpbmdpZnktc2FmZScpO1xyXG5cclxubGV0IHN0cmlwQ29sb3JzID0gZnVuY3Rpb24gKHN0cmluZykge1xyXG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFx1MDAxYltebV0rbS9nLCAnJyk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIEtibkxvZ2dlckpzb25Gb3JtYXQgZXh0ZW5kcyBMb2dGb3JtYXQge1xyXG4gIGZvcm1hdChkYXRhKSB7XHJcbiAgICBkYXRhLm1lc3NhZ2UgPSBzdHJpcENvbG9ycyhkYXRhLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHN0cmluZ2lmeShkYXRhKTtcclxuICB9XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/logging/LogFormatJson.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;AAAA,IAAI,SAAS,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AACvC,IAAI,SAAS,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;;AAE/C,IAAI,WAAW,GAAG,SAAd,WAAW,CAAa,MAAM,EAAE;AAClC,SAAO,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;CAC5C,CAAC;;AAEF,MAAM,CAAC,OAAO;YAAS,mBAAmB;;WAAnB,mBAAmB;0BAAnB,mBAAmB;;+BAAnB,mBAAmB;;;eAAnB,mBAAmB;;WAClC,gBAAC,IAAI,EAAE;AACX,UAAI,CAAC,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACzC,aAAO,SAAS,CAAC,IAAI,CAAC,CAAC;KACxB;;;SAJoB,mBAAmB;GAAS,SAAS,CAK3D,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/logging/LogFormatJson.js",
      "sourcesContent": [
        "let LogFormat = require('./LogFormat');\r\nlet stringify = require('json-stringify-safe');\r\n\r\nlet stripColors = function (string) {\r\n  return string.replace(/\\u001b[^m]+m/g, '');\r\n};\r\n\r\nmodule.exports = class KbnLoggerJsonFormat extends LogFormat {\r\n  format(data) {\r\n    data.message = stripColors(data.message);\r\n    return stringify(data);\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670858
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/logging/LogFormat.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = require('babel-runtime/helpers/get')['default'];\n\nvar _inherits = require('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar Stream = require('stream');\nvar moment = require('moment');\nvar _ = require('lodash');\nvar numeral = require('@spalger/numeral');\nvar ansicolors = require('ansicolors');\nvar stringify = require('json-stringify-safe');\nvar querystring = require('querystring');\nvar inspect = require('util').inspect;\nvar applyFiltersToKeys = require('./applyFiltersToKeys');\n\nfunction serializeError(err) {\n  return {\n    message: err.message,\n    name: err.name,\n    stack: err.stack,\n    code: err.code,\n    signal: err.signal\n  };\n}\n\nvar levelColor = function levelColor(code) {\n  if (code < 299) return ansicolors.green(code);\n  if (code < 399) return ansicolors.yellow(code);\n  if (code < 499) return ansicolors.magenta(code);\n  return ansicolors.red(code);\n};\n\nmodule.exports = (function (_Stream$Transform) {\n  _inherits(TransformObjStream, _Stream$Transform);\n\n  function TransformObjStream(config) {\n    _classCallCheck(this, TransformObjStream);\n\n    _get(Object.getPrototypeOf(TransformObjStream.prototype), 'constructor', this).call(this, {\n      readableObjectMode: false,\n      writableObjectMode: true\n    });\n    this.config = config;\n  }\n\n  _createClass(TransformObjStream, [{\n    key: 'filter',\n    value: function filter(data) {\n      if (!this.config.filter) return data;\n      return applyFiltersToKeys(data, this.config.filter);\n    }\n  }, {\n    key: '_transform',\n    value: function _transform(event, enc, next) {\n      var data = this.filter(this.readEvent(event));\n      this.push(this.format(data) + '\\n');\n      next();\n    }\n  }, {\n    key: 'readEvent',\n    value: function readEvent(event) {\n      var data = {\n        type: event.event,\n        '@timestamp': moment.utc(event.timestamp).format(),\n        tags: [].concat(event.tags || []),\n        pid: event.pid\n      };\n\n      if (data.type === 'response') {\n        _.defaults(data, _.pick(event, ['method', 'statusCode']));\n\n        data.req = {\n          url: event.path,\n          method: event.method,\n          headers: event.headers,\n          remoteAddress: event.source.remoteAddress,\n          userAgent: event.source.remoteAddress,\n          referer: event.source.referer\n        };\n\n        var contentLength = 0;\n        if (typeof event.responsePayload === 'object') {\n          contentLength = stringify(event.responsePayload).length;\n        } else {\n          contentLength = String(event.responsePayload).length;\n        }\n\n        data.res = {\n          statusCode: event.statusCode,\n          responseTime: event.responseTime,\n          contentLength: contentLength\n        };\n\n        var query = querystring.stringify(event.query);\n        if (query) data.req.url += '?' + query;\n\n        data.message = data.req.method.toUpperCase() + ' ';\n        data.message += data.req.url;\n        data.message += ' ';\n        data.message += levelColor(data.res.statusCode);\n        data.message += ' ';\n        data.message += ansicolors.brightBlack(data.res.responseTime + 'ms');\n        data.message += ansicolors.brightBlack(' - ' + numeral(contentLength).format('0.0b'));\n      } else if (data.type === 'ops') {\n        _.defaults(data, _.pick(event, ['pid', 'os', 'proc', 'load']));\n        data.message = ansicolors.brightBlack('memory: ');\n        data.message += numeral(data.proc.mem.heapUsed).format('0.0b');\n        data.message += ' ';\n        data.message += ansicolors.brightBlack('uptime: ');\n        data.message += numeral(data.proc.uptime).format('00:00:00');\n        data.message += ' ';\n        data.message += ansicolors.brightBlack('load: [');\n        data.message += data.os.load.map(function (val) {\n          return numeral(val).format('0.00');\n        }).join(' ');\n        data.message += ansicolors.brightBlack(']');\n        data.message += ' ';\n        data.message += ansicolors.brightBlack('delay: ');\n        data.message += numeral(data.proc.delay).format('0.000');\n      } else if (data.type === 'error') {\n        data.level = 'error';\n        data.message = event.error.message;\n        data.error = serializeError(event.error);\n        data.url = event.url;\n      } else if (event.data instanceof Error) {\n        data.level = _.contains(event.tags, 'fatal') ? 'fatal' : 'error';\n        data.message = event.data.message;\n        data.error = serializeError(event.data);\n      } else if (_.isPlainObject(event.data) && event.data.tmpl) {\n        _.assign(data, event.data);\n        data.tmpl = undefined;\n        data.message = _.template(event.data.tmpl)(event.data);\n      } else {\n        data.message = _.isString(event.data) ? event.data : inspect(event.data);\n      }\n      return data;\n    }\n  }]);\n\n  return TransformObjStream;\n})(Stream.Transform);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2xvZ2dpbmcvTG9nRm9ybWF0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDL0IsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9CLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUMxQyxJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDdkMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDL0MsSUFBSSxXQUFXLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ3pDLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDdEMsSUFBSSxrQkFBa0IsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQzs7QUFFekQsU0FBUyxjQUFjLENBQUMsR0FBRyxFQUFFO0FBQzNCLFNBQU87QUFDTCxXQUFPLEVBQUUsR0FBRyxDQUFDLE9BQU87QUFDcEIsUUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJO0FBQ2QsU0FBSyxFQUFFLEdBQUcsQ0FBQyxLQUFLO0FBQ2hCLFFBQUksRUFBRSxHQUFHLENBQUMsSUFBSTtBQUNkLFVBQU0sRUFBRSxHQUFHLENBQUMsTUFBTTtHQUNuQixDQUFDO0NBQ0g7O0FBRUQsSUFBSSxVQUFVLEdBQUcsU0FBYixVQUFVLENBQWEsSUFBSSxFQUFFO0FBQy9CLE1BQUksSUFBSSxHQUFHLEdBQUcsRUFBRSxPQUFPLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDOUMsTUFBSSxJQUFJLEdBQUcsR0FB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dGUva2liYW5hMS9zcmMvc2VydmVyL2xvZ2dpbmcvTG9nRm9ybWF0LmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IFN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xyXG5sZXQgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcbmxldCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmxldCBudW1lcmFsID0gcmVxdWlyZSgnQHNwYWxnZXIvbnVtZXJhbCcpO1xyXG5sZXQgYW5zaWNvbG9ycyA9IHJlcXVpcmUoJ2Fuc2ljb2xvcnMnKTtcclxubGV0IHN0cmluZ2lmeSA9IHJlcXVpcmUoJ2pzb24tc3RyaW5naWZ5LXNhZmUnKTtcclxubGV0IHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTtcclxubGV0IGluc3BlY3QgPSByZXF1aXJlKCd1dGlsJykuaW5zcGVjdDtcclxubGV0IGFwcGx5RmlsdGVyc1RvS2V5cyA9IHJlcXVpcmUoJy4vYXBwbHlGaWx0ZXJzVG9LZXlzJyk7XHJcblxyXG5mdW5jdGlvbiBzZXJpYWxpemVFcnJvcihlcnIpIHtcclxuICByZXR1cm4ge1xyXG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXHJcbiAgICBuYW1lOiBlcnIubmFtZSxcclxuICAgIHN0YWNrOiBlcnIuc3RhY2ssXHJcbiAgICBjb2RlOiBlcnIuY29kZSxcclxuICAgIHNpZ25hbDogZXJyLnNpZ25hbFxyXG4gIH07XHJcbn1cclxuXHJcbmxldCBsZXZlbENvbG9yID0gZnVuY3Rpb24gKGNvZGUpIHtcclxuICBpZiAoY29kZSA8IDI5OSkgcmV0dXJuIGFuc2ljb2xvcnMuZ3JlZW4oY29kZSk7XHJcbiAgaWYgKGNvZGUgPCAzOTkpIHJldHVybiBhbnNpY29sb3JzLnllbGxvdyhjb2RlKTtcclxuICBpZiAoY29kZSA8IDQ5OSkgcmV0dXJuIGFuc2ljb2xvcnMubWFnZW50YShjb2RlKTtcclxuICByZXR1cm4gYW5zaWNvbG9ycy5yZWQoY29kZSk7XHJcbn07XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBUcmFuc2Zvcm1PYmpTdHJlYW0gZXh0ZW5kcyBTdHJlYW0uVHJhbnNmb3JtIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIHN1cGVyKHtcclxuICAgICAgcmVhZGFibGVPYmplY3RNb2RlOiBmYWxzZSxcclxuICAgICAgd3JpdGFibGVPYmplY3RNb2RlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gIH1cclxuXHJcbiAgZmlsdGVyKGRhdGEpIHtcclxuICAgIGlmICghdGhpcy5jb25maWcuZmlsdGVyKSByZXR1cm4gZGF0YTtcclxuICAgIHJldHVybiBhcHBseUZpbHRlcnNUb0tleXMoZGF0YSwgdGhpcy5jb25maWcuZmlsdGVyKTtcclxuICB9XHJcblxyXG4gIF90cmFuc2Zvcm0oZXZlbnQsIGVuYywgbmV4dCkge1xyXG4gICAgbGV0IGRhdGEgPSB0aGlzLmZpbHRlcih0aGlzLnJlYWRFdmVudChldmVudCkpO1xyXG4gICAgdGhpcy5wdXNoKHRoaXMuZm9ybWF0KGRhdGEpICsgJ1xcbicpO1xyXG4gICAgbmV4dCgpO1xyXG4gIH1cclxuXHJcbiAgcmVhZEV2ZW50KGV2ZW50KSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgdHlwZTogZXZlbnQuZXZlbnQsXHJcbiAgICAgICdAdGltZXN0YW1wJzogbW9tZW50LnV0YyhldmVudC50aW1lc3RhbXApLmZvcm1hdCgpLFxyXG4gICAgICB0YWdzOiBbXS5jb25jYXQoZXZlbnQudGFncyB8fCBbXSksXHJcbiAgICAgIHBpZDogZXZlbnQucGlkXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdyZXNwb25zZScpIHtcclxuICAgICAgXy5kZWZhdWx0cyhkYXRhLCBfLnBpY2soZXZlbnQsIFtcclxuICAgICAgICAnbWV0aG9kJyxcclxuICAgICAgICAnc3RhdHVzQ29kZSdcclxuICAgICAgXSkpO1xyXG5cclxuICAgICAgZGF0YS5yZXEgPSB7XHJcbiAgICAgICAgdXJsOiBldmVudC5wYXRoLFxyXG4gICAgICAgIG1ldGhvZDogZXZlbnQubWV0aG9kLFxyXG4gICAgICAgIGhlYWRlcnM6IGV2ZW50LmhlYWRlcnMsXHJcbiAgICAgICAgcmVtb3RlQWRkcmVzczogZXZlbnQuc291cmNlLnJlbW90ZUFkZHJlc3MsXHJcbiAgICAgICAgdXNlckFnZW50OiBldmVudC5zb3VyY2UucmVtb3RlQWRkcmVzcyxcclxuICAgICAgICByZWZlcmVyOiBldmVudC5zb3VyY2UucmVmZXJlclxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGV0IGNvbnRlbnRMZW5ndGggPSAwO1xyXG4gICAgICBpZiAodHlwZW9mIGV2ZW50LnJlc3BvbnNlUGF5bG9hZCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb250ZW50TGVuZ3RoID0gc3RyaW5naWZ5KGV2ZW50LnJlc3BvbnNlUGF5bG9hZCkubGVuZ3RoO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnRlbnRMZW5ndGggPSBTdHJpbmcoZXZlbnQucmVzcG9uc2VQYXlsb2FkKS5sZW5ndGg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRhdGEucmVzID0ge1xyXG4gICAgICAgIHN0YXR1c0NvZGU6IGV2ZW50LnN0YXR1c0NvZGUsXHJcbiAgICAgICAgcmVzcG9uc2VUaW1lOiBldmVudC5yZXNwb25zZVRpbWUsXHJcbiAgICAgICAgY29udGVudExlbmd0aDogY29udGVudExlbmd0aFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGV0IHF1ZXJ5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KGV2ZW50LnF1ZXJ5KTtcclxuICAgICAgaWYgKHF1ZXJ5KSBkYXRhLnJlcS51cmwgKz0gJz8nICsgcXVlcnk7XHJcblxyXG5cclxuICAgICAgZGF0YS5tZXNzYWdlICA9IGRhdGEucmVxLm1ldGhvZC50b1VwcGVyQ2FzZSgpICsgJyAnO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gZGF0YS5yZXEudXJsO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gJyAnO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gbGV2ZWxDb2xvcihkYXRhLnJlcy5zdGF0dXNDb2RlKTtcclxuICAgICAgZGF0YS5tZXNzYWdlICs9ICcgJztcclxuICAgICAgZGF0YS5tZXNzYWdlICs9IGFuc2ljb2xvcnMuYnJpZ2h0QmxhY2soZGF0YS5yZXMucmVzcG9uc2VUaW1lICsgJ21zJyk7XHJcbiAgICAgIGRhdGEubWVzc2FnZSArPSBhbnNpY29sb3JzLmJyaWdodEJsYWNrKCcgLSAnICsgbnVtZXJhbChjb250ZW50TGVuZ3RoKS5mb3JtYXQoJzAuMGInKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdvcHMnKSB7XHJcbiAgICAgIF8uZGVmYXVsdHMoZGF0YSwgXy5waWNrKGV2ZW50LCBbXHJcbiAgICAgICAgJ3BpZCcsXHJcbiAgICAgICAgJ29zJyxcclxuICAgICAgICAncHJvYycsXHJcbiAgICAgICAgJ2xvYWQnXHJcbiAgICAgIF0pKTtcclxuICAgICAgZGF0YS5tZXNzYWdlICA9IGFuc2ljb2xvcnMuYnJpZ2h0QmxhY2soJ21lbW9yeTogJyk7XHJcbiAgICAgIGRhdGEubWVzc2FnZSArPSBudW1lcmFsKGRhdGEucHJvYy5tZW0uaGVhcFVzZWQpLmZvcm1hdCgnMC4wYicpO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gJyAnO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygndXB0aW1lOiAnKTtcclxuICAgICAgZGF0YS5tZXNzYWdlICs9IG51bWVyYWwoZGF0YS5wcm9jLnVwdGltZSkuZm9ybWF0KCcwMDowMDowMCcpO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gJyAnO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygnbG9hZDogWycpO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gZGF0YS5vcy5sb2FkLm1hcChmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bWVyYWwodmFsKS5mb3JtYXQoJzAuMDAnKTtcclxuICAgICAgfSkuam9pbignICcpO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygnXScpO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gJyAnO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gYW5zaWNvbG9ycy5icmlnaHRCbGFjaygnZGVsYXk6ICcpO1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgKz0gbnVtZXJhbChkYXRhLnByb2MuZGVsYXkpLmZvcm1hdCgnMC4wMDAnKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2Vycm9yJykge1xyXG4gICAgICBkYXRhLmxldmVsID0gJ2Vycm9yJztcclxuICAgICAgZGF0YS5tZXNzYWdlID0gZXZlbnQuZXJyb3IubWVzc2FnZTtcclxuICAgICAgZGF0YS5lcnJvciA9IHNlcmlhbGl6ZUVycm9yKGV2ZW50LmVycm9yKTtcclxuICAgICAgZGF0YS51cmwgPSBldmVudC51cmw7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChldmVudC5kYXRhIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgZGF0YS5sZXZlbCA9IF8uY29udGFpbnMoZXZlbnQudGFncywgJ2ZhdGFsJykgPyAnZmF0YWwnIDogJ2Vycm9yJztcclxuICAgICAgZGF0YS5tZXNzYWdlID0gZXZlbnQuZGF0YS5tZXNzYWdlO1xyXG4gICAgICBkYXRhLmVycm9yID0gc2VyaWFsaXplRXJyb3IoZXZlbnQuZGF0YSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfLmlzUGxhaW5PYmplY3QoZXZlbnQuZGF0YSkgJiYgZXZlbnQuZGF0YS50bXBsKSB7XHJcbiAgICAgIF8uYXNzaWduKGRhdGEsIGV2ZW50LmRhdGEpO1xyXG4gICAgICBkYXRhLnRtcGwgPSB1bmRlZmluZWQ7XHJcbiAgICAgIGRhdGEubWVzc2FnZSA9IF8udGVtcGxhdGUoZXZlbnQuZGF0YS50bXBsKShldmVudC5kYXRhKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBkYXRhLm1lc3NhZ2UgPSBfLmlzU3RyaW5nKGV2ZW50LmRhdGEpID8gZXZlbnQuZGF0YSA6IGluc3BlY3QoZXZlbnQuZGF0YSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/logging/LogFormat.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/server/logging/LogFormat.js",
      "sourcesContent": [
        "let Stream = require('stream');\r\nlet moment = require('moment');\r\nlet _ = require('lodash');\r\nlet numeral = require('@spalger/numeral');\r\nlet ansicolors = require('ansicolors');\r\nlet stringify = require('json-stringify-safe');\r\nlet querystring = require('querystring');\r\nlet inspect = require('util').inspect;\r\nlet applyFiltersToKeys = require('./applyFiltersToKeys');\r\n\r\nfunction serializeError(err) {\r\n  return {\r\n    message: err.message,\r\n    name: err.name,\r\n    stack: err.stack,\r\n    code: err.code,\r\n    signal: err.signal\r\n  };\r\n}\r\n\r\nlet levelColor = function (code) {\r\n  if (code < 299) return ansicolors.green(code);\r\n  if (code < 399) return ansicolors.yellow(code);\r\n  if (code < 499) return ansicolors.magenta(code);\r\n  return ansicolors.red(code);\r\n};\r\n\r\n\r\nmodule.exports = class TransformObjStream extends Stream.Transform {\r\n  constructor(config) {\r\n    super({\r\n      readableObjectMode: false,\r\n      writableObjectMode: true\r\n    });\r\n    this.config = config;\r\n  }\r\n\r\n  filter(data) {\r\n    if (!this.config.filter) return data;\r\n    return applyFiltersToKeys(data, this.config.filter);\r\n  }\r\n\r\n  _transform(event, enc, next) {\r\n    let data = this.filter(this.readEvent(event));\r\n    this.push(this.format(data) + '\\n');\r\n    next();\r\n  }\r\n\r\n  readEvent(event) {\r\n    let data = {\r\n      type: event.event,\r\n      '@timestamp': moment.utc(event.timestamp).format(),\r\n      tags: [].concat(event.tags || []),\r\n      pid: event.pid\r\n    };\r\n\r\n    if (data.type === 'response') {\r\n      _.defaults(data, _.pick(event, [\r\n        'method',\r\n        'statusCode'\r\n      ]));\r\n\r\n      data.req = {\r\n        url: event.path,\r\n        method: event.method,\r\n        headers: event.headers,\r\n        remoteAddress: event.source.remoteAddress,\r\n        userAgent: event.source.remoteAddress,\r\n        referer: event.source.referer\r\n      };\r\n\r\n      let contentLength = 0;\r\n      if (typeof event.responsePayload === 'object') {\r\n        contentLength = stringify(event.responsePayload).length;\r\n      } else {\r\n        contentLength = String(event.responsePayload).length;\r\n      }\r\n\r\n      data.res = {\r\n        statusCode: event.statusCode,\r\n        responseTime: event.responseTime,\r\n        contentLength: contentLength\r\n      };\r\n\r\n      let query = querystring.stringify(event.query);\r\n      if (query) data.req.url += '?' + query;\r\n\r\n\r\n      data.message  = data.req.method.toUpperCase() + ' ';\r\n      data.message += data.req.url;\r\n      data.message += ' ';\r\n      data.message += levelColor(data.res.statusCode);\r\n      data.message += ' ';\r\n      data.message += ansicolors.brightBlack(data.res.responseTime + 'ms');\r\n      data.message += ansicolors.brightBlack(' - ' + numeral(contentLength).format('0.0b'));\r\n    }\r\n    else if (data.type === 'ops') {\r\n      _.defaults(data, _.pick(event, [\r\n        'pid',\r\n        'os',\r\n        'proc',\r\n        'load'\r\n      ]));\r\n      data.message  = ansicolors.brightBlack('memory: ');\r\n      data.message += numeral(data.proc.mem.heapUsed).format('0.0b');\r\n      data.message += ' ';\r\n      data.message += ansicolors.brightBlack('uptime: ');\r\n      data.message += numeral(data.proc.uptime).format('00:00:00');\r\n      data.message += ' ';\r\n      data.message += ansicolors.brightBlack('load: [');\r\n      data.message += data.os.load.map(function (val) {\r\n        return numeral(val).format('0.00');\r\n      }).join(' ');\r\n      data.message += ansicolors.brightBlack(']');\r\n      data.message += ' ';\r\n      data.message += ansicolors.brightBlack('delay: ');\r\n      data.message += numeral(data.proc.delay).format('0.000');\r\n    }\r\n    else if (data.type === 'error') {\r\n      data.level = 'error';\r\n      data.message = event.error.message;\r\n      data.error = serializeError(event.error);\r\n      data.url = event.url;\r\n    }\r\n    else if (event.data instanceof Error) {\r\n      data.level = _.contains(event.tags, 'fatal') ? 'fatal' : 'error';\r\n      data.message = event.data.message;\r\n      data.error = serializeError(event.data);\r\n    }\r\n    else if (_.isPlainObject(event.data) && event.data.tmpl) {\r\n      _.assign(data, event.data);\r\n      data.tmpl = undefined;\r\n      data.message = _.template(event.data.tmpl)(event.data);\r\n    }\r\n    else {\r\n      data.message = _.isString(event.data) ? event.data : inspect(event.data);\r\n    }\r\n    return data;\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670858
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/logging/applyFiltersToKeys.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _Object$keys = require('babel-runtime/core-js/object/keys')['default'];\n\nfunction toPojo(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nfunction replacer(match, group) {\n  return new Array(group.length + 1).join('X');\n}\n\nfunction apply(obj, key, action) {\n  for (var k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      var val = obj[k];\n      if (k === key) {\n        if (action === 'remove') {\n          delete obj[k];\n        } else if (action === 'censor' && typeof val === 'object') {\n          delete obj[key];\n        } else if (action === 'censor') {\n          obj[k] = ('' + val).replace(/./g, 'X');\n        } else if (/\\/.+\\//.test(action)) {\n          var matches = action.match(/\\/(.+)\\//);\n          if (matches) {\n            var regex = new RegExp(matches[1]);\n            obj[k] = ('' + val).replace(regex, replacer);\n          }\n        }\n      } else if (typeof val === 'object') {\n        val = apply(val, key, action);\n      }\n    }\n  }\n  return obj;\n}\n\nmodule.exports = function (obj, actionsByKey) {\n  return _Object$keys(actionsByKey).reduce(function (output, key) {\n    return apply(output, key, actionsByKey[key]);\n  }, toPojo(obj));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2xvZ2dpbmcvYXBwbHlGaWx0ZXJzVG9LZXlzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxTQUFTLE1BQU0sQ0FBQyxHQUFHLEVBQUU7QUFDbkIsU0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztDQUN4Qzs7QUFFRCxTQUFTLFFBQVEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQzlCLFNBQVEsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUU7Q0FDaEQ7O0FBRUQsU0FBUyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUU7QUFDL0IsT0FBSyxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUc7QUFDbEIsUUFBSSxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQ3pCLFVBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNqQixVQUFJLENBQUMsS0FBSyxHQUFHLEVBQUU7QUFDYixZQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUU7QUFDdkIsaUJBQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2YsTUFDSSxJQUFJLE1BQU0sS0FBSyxRQUFRLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO0FBQ3ZELGlCQUFPLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNqQixNQUNJLElBQUksTUFBTSxLQUFLLFFBQVEsRUFBRTtBQUM1QixhQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFBLENBQUUsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztTQUN4QyxNQUNJLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtBQUM5QixjQUFJLE9BQU8sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3ZDLGNBQUksT0FBTyxFQUFFO0FBQ1gsZ0JBQUksS0FBSyxHQUFHLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLGVBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUEsQ0FBRSxPQUFPLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1dBQzlDO1NBQ0Y7T0FDRixNQUFNLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO0FBQ2xDLFdBQUcsR0FBRyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztPQUMvQjtLQUNGO0dBQ0Y7QUFDRCxTQUFPLEdBQUcsQ0FBQztDQUNaOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxHQUFHLEVBQUUsWUFBWSxFQUFFO0FBQzVDLFNBQU8sYUFBWSxZQUFZLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBQyxNQUFNLEVBQUUsR0FBRyxFQUFLO0FBQ3ZELFdBQU8sS0FBSyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7R0FDOUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztDQUNqQixDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2xvZ2dpbmcvYXBwbHlGaWx0ZXJzVG9LZXlzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gdG9Qb2pvKG9iaikge1xyXG4gIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXBsYWNlcihtYXRjaCwgZ3JvdXApIHtcclxuICByZXR1cm4gKG5ldyBBcnJheShncm91cC5sZW5ndGggKyAxKS5qb2luKCdYJykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBseShvYmosIGtleSwgYWN0aW9uKSB7XHJcbiAgZm9yIChsZXQgayBpbiBvYmopICB7XHJcbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGspKSB7XHJcbiAgICAgIGxldCB2YWwgPSBvYmpba107XHJcbiAgICAgIGlmIChrID09PSBrZXkpIHtcclxuICAgICAgICBpZiAoYWN0aW9uID09PSAncmVtb3ZlJykge1xyXG4gICAgICAgICAgZGVsZXRlIG9ialtrXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnY2Vuc29yJyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgZGVsZXRlIG9ialtrZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdjZW5zb3InKSB7XHJcbiAgICAgICAgICBvYmpba10gPSAoJycgKyB2YWwpLnJlcGxhY2UoLy4vZywgJ1gnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL1xcLy4rXFwvLy50ZXN0KGFjdGlvbikpIHtcclxuICAgICAgICAgIGxldCBtYXRjaGVzID0gYWN0aW9uLm1hdGNoKC9cXC8oLispXFwvLyk7XHJcbiAgICAgICAgICBpZiAobWF0Y2hlcykge1xyXG4gICAgICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKG1hdGNoZXNbMV0pO1xyXG4gICAgICAgICAgICBvYmpba10gPSAoJycgKyB2YWwpLnJlcGxhY2UocmVnZXgsIHJlcGxhY2VyKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICB2YWwgPSBhcHBseSh2YWwsIGtleSwgYWN0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmosIGFjdGlvbnNCeUtleSkge1xyXG4gIHJldHVybiBPYmplY3Qua2V5cyhhY3Rpb25zQnlLZXkpLnJlZHVjZSgob3V0cHV0LCBrZXkpID0+IHtcclxuICAgIHJldHVybiBhcHBseShvdXRwdXQsIGtleSwgYWN0aW9uc0J5S2V5W2tleV0pO1xyXG4gIH0sIHRvUG9qbyhvYmopKTtcclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/logging/applyFiltersToKeys.js"
      ],
      "names": [],
      "mappings": ";;;;AAAA,SAAS,MAAM,CAAC,GAAG,EAAE;AACnB,SAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;CACxC;;AAED,SAAS,QAAQ,CAAC,KAAK,EAAE,KAAK,EAAE;AAC9B,SAAQ,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE;CAChD;;AAED,SAAS,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,EAAE;AAC/B,OAAK,IAAI,CAAC,IAAI,GAAG,EAAG;AAClB,QAAI,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;AACzB,UAAI,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACjB,UAAI,CAAC,KAAK,GAAG,EAAE;AACb,YAAI,MAAM,KAAK,QAAQ,EAAE;AACvB,iBAAO,GAAG,CAAC,CAAC,CAAC,CAAC;SACf,MACI,IAAI,MAAM,KAAK,QAAQ,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACvD,iBAAO,GAAG,CAAC,GAAG,CAAC,CAAC;SACjB,MACI,IAAI,MAAM,KAAK,QAAQ,EAAE;AAC5B,aAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAA,CAAE,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;SACxC,MACI,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AAC9B,cAAI,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AACvC,cAAI,OAAO,EAAE;AACX,gBAAI,KAAK,GAAG,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AACnC,eAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,CAAA,CAAE,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;WAC9C;SACF;OACF,MAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AAClC,WAAG,GAAG,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;OAC/B;KACF;GACF;AACD,SAAO,GAAG,CAAC;CACZ;;AAED,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,YAAY,EAAE;AAC5C,SAAO,aAAY,YAAY,CAAC,CAAC,MAAM,CAAC,UAAC,MAAM,EAAE,GAAG,EAAK;AACvD,WAAO,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;GAC9C,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;CACjB,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/logging/applyFiltersToKeys.js",
      "sourcesContent": [
        "function toPojo(obj) {\r\n  return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nfunction replacer(match, group) {\r\n  return (new Array(group.length + 1).join('X'));\r\n}\r\n\r\nfunction apply(obj, key, action) {\r\n  for (let k in obj)  {\r\n    if (obj.hasOwnProperty(k)) {\r\n      let val = obj[k];\r\n      if (k === key) {\r\n        if (action === 'remove') {\r\n          delete obj[k];\r\n        }\r\n        else if (action === 'censor' && typeof val === 'object') {\r\n          delete obj[key];\r\n        }\r\n        else if (action === 'censor') {\r\n          obj[k] = ('' + val).replace(/./g, 'X');\r\n        }\r\n        else if (/\\/.+\\//.test(action)) {\r\n          let matches = action.match(/\\/(.+)\\//);\r\n          if (matches) {\r\n            let regex = new RegExp(matches[1]);\r\n            obj[k] = ('' + val).replace(regex, replacer);\r\n          }\r\n        }\r\n      } else if (typeof val === 'object') {\r\n        val = apply(val, key, action);\r\n      }\r\n    }\r\n  }\r\n  return obj;\r\n}\r\n\r\nmodule.exports = function (obj, actionsByKey) {\r\n  return Object.keys(actionsByKey).reduce((output, key) => {\r\n    return apply(output, key, actionsByKey[key]);\r\n  }, toPojo(obj));\r\n};\r\n"
      ]
    },
    "mtime": 1465716670858
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/logging/LogFormatString.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = require('babel-runtime/helpers/get')['default'];\n\nvar _inherits = require('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _ = require('lodash');\nvar ansicolors = require('ansicolors');\nvar moment = require('moment');\n\nvar LogFormat = require('./LogFormat');\n\nvar statuses = ['err', 'info', 'error', 'warning', 'fatal', 'status', 'debug'];\n\nvar typeColors = {\n  log: 'blue',\n  req: 'green',\n  res: 'green',\n  ops: 'cyan',\n  err: 'red',\n  info: 'green',\n  error: 'red',\n  warning: 'red',\n  fatal: 'magenta',\n  status: 'yellow',\n  debug: 'brightBlack',\n  server: 'brightBlack',\n  optmzr: 'white',\n  optimize: 'magenta',\n  listening: 'magenta'\n};\n\nvar color = _.memoize(function (name) {\n  return ansicolors[typeColors[name]] || _.identity;\n});\n\nvar type = _.memoize(function (t) {\n  return color(t)(_.pad(t, 7).slice(0, 7));\n});\n\nvar workerType = process.env.kbnWorkerType ? type(process.env.kbnWorkerType) + ' ' : '';\n\nmodule.exports = (function (_LogFormat) {\n  _inherits(KbnLoggerJsonFormat, _LogFormat);\n\n  function KbnLoggerJsonFormat() {\n    _classCallCheck(this, KbnLoggerJsonFormat);\n\n    _get(Object.getPrototypeOf(KbnLoggerJsonFormat.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(KbnLoggerJsonFormat, [{\n    key: 'format',\n    value: function format(data) {\n      var time = color('time')(moment(data.timestamp).format('HH:mm:ss.SSS'));\n      var msg = data.error ? color('error')(data.error.stack) : color('message')(data.message);\n\n      var tags = _(data.tags).sortBy(function (tag) {\n        if (color(tag) === _.identity) return '2' + tag;\n        if (_.includes(statuses, tag)) return '0' + tag;\n        return '1' + tag;\n      }).reduce(function (s, t) {\n        return s + ('[' + color(t)(t) + ']');\n      }, '');\n\n      return '' + workerType + type(data.type) + ' [' + time + '] ' + tags + ' ' + msg;\n    }\n  }]);\n\n  return KbnLoggerJsonFormat;\n})(LogFormat);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL2xvZ2dpbmcvTG9nRm9ybWF0U3RyaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUIsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ3ZDLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFL0IsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDOztBQUV2QyxJQUFJLFFBQVEsR0FBRyxDQUNiLEtBQUssRUFDTCxNQUFNLEVBQ04sT0FBTyxFQUNQLFNBQVMsRUFDVCxPQUFPLEVBQ1AsUUFBUSxFQUNSLE9BQU8sQ0FDUixDQUFDOztBQUVGLElBQUksVUFBVSxHQUFHO0FBQ2YsS0FBRyxFQUFFLE1BQU07QUFDWCxLQUFHLEVBQUUsT0FBTztBQUNaLEtBQUcsRUFBRSxPQUFPO0FBQ1osS0FBRyxFQUFFLE1BQU07QUFDWCxLQUFHLEVBQUUsS0FBSztBQUNWLE1BQUksRUFBRSxPQUFPO0FBQ2IsT0FBSyxFQUFFLEtBQUs7QUFDWixTQUFPLEVBQUUsS0FBSztBQUNkLE9BQUssRUFBRSxTQUFTO0FBQ2hCLFFBQU0sRUFBRSxRQUFRO0FBQ2hCLE9BQUssRUFBRSxhQUFhO0FBQ3BCLFFBQU0sRUFBRSxhQUFhO0FBQ3JCLFFBQU0sRUFBRSxPQUFPO0FBQ2YsVUFBUSxFQUFFLFNBQVM7QUFDbkIsV0FBUyxFQUFFLFNBQVM7Q0FDckIsQ0FBQzs7QUFFRixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ3BDLFNBQU8sVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUM7Q0FDbkQsQ0FBQyxDQUFDOztBQUVILElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUU7QUFDaEMsU0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQzFDLENBQUMsQ0FBQzs7QUFFSCxJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBTSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsU0FBTSxFQUFFLENBQUM7O0FBRXhGLE1BQU0sQ0FBQyxPQUFPO1lBQVMsbUJBQW1COztXQUFuQixtQkFBbUI7MEJBQW5CLG1CQUFtQjs7K0JBQW5CLG1CQUFtQjs7O2VBQW5CLG1CQUFtQjs7V0FDbEMsZ0JBQUMsSUFBSSxFQUFFO0FBQ1gsVUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDeEUsVUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDOztBQUV6RixVQUFJLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUN0QixNQUFNLENBQUMsVUFBVSxHQUFHLEVBQUU7QUFDckIsWUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsRUFBRSxhQUFXLEdBQUcsQ0FBRztBQUNoRCxZQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxFQUFFLGFBQVcsR0FBRyxDQUFHO0FBQ2hELHFCQUFXLEdBQUcsQ0FBRztPQUNsQixDQUFDLENBQ0QsTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUN0QixlQUFPLENBQUMsVUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQUksQ0FBQztPQUNqQyxFQUFFLEVBQUUsQ0FBQyxDQUFDOztBQUVQLGtCQUFVLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFLLElBQUksVUFBSyxJQUFJLFNBQUksR0FBRyxDQUFHO0tBQ25FOzs7U0FoQm9CLG1CQUFtQjtHQUFTLFNBQVMsQ0FpQjNELENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvbG9nZ2luZy9Mb2dGb3JtYXRTdHJpbmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5sZXQgYW5zaWNvbG9ycyA9IHJlcXVpcmUoJ2Fuc2ljb2xvcnMnKTtcclxubGV0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xyXG5cclxubGV0IExvZ0Zvcm1hdCA9IHJlcXVpcmUoJy4vTG9nRm9ybWF0Jyk7XHJcblxyXG5sZXQgc3RhdHVzZXMgPSBbXHJcbiAgJ2VycicsXHJcbiAgJ2luZm8nLFxyXG4gICdlcnJvcicsXHJcbiAgJ3dhcm5pbmcnLFxyXG4gICdmYXRhbCcsXHJcbiAgJ3N0YXR1cycsXHJcbiAgJ2RlYnVnJ1xyXG5dO1xyXG5cclxubGV0IHR5cGVDb2xvcnMgPSB7XHJcbiAgbG9nOiAnYmx1ZScsXHJcbiAgcmVxOiAnZ3JlZW4nLFxyXG4gIHJlczogJ2dyZWVuJyxcclxuICBvcHM6ICdjeWFuJyxcclxuICBlcnI6ICdyZWQnLFxyXG4gIGluZm86ICdncmVlbicsXHJcbiAgZXJyb3I6ICdyZWQnLFxyXG4gIHdhcm5pbmc6ICdyZWQnLFxyXG4gIGZhdGFsOiAnbWFnZW50YScsXHJcbiAgc3RhdHVzOiAneWVsbG93JyxcclxuICBkZWJ1ZzogJ2JyaWdodEJsYWNrJyxcclxuICBzZXJ2ZXI6ICdicmlnaHRCbGFjaycsXHJcbiAgb3B0bXpyOiAnd2hpdGUnLFxyXG4gIG9wdGltaXplOiAnbWFnZW50YScsXHJcbiAgbGlzdGVuaW5nOiAnbWFnZW50YSdcclxufTtcclxuXHJcbmxldCBjb2xvciA9IF8ubWVtb2l6ZShmdW5jdGlvbiAobmFtZSkge1xyXG4gIHJldHVybiBhbnNpY29sb3JzW3R5cGVDb2xvcnNbbmFtZV1dIHx8IF8uaWRlbnRpdHk7XHJcbn0pO1xyXG5cclxubGV0IHR5cGUgPSBfLm1lbW9pemUoZnVuY3Rpb24gKHQpIHtcclxuICByZXR1cm4gY29sb3IodCkoXy5wYWQodCwgNykuc2xpY2UoMCwgNykpO1xyXG59KTtcclxuXHJcbmxldCB3b3JrZXJUeXBlID0gcHJvY2Vzcy5lbnYua2JuV29ya2VyVHlwZSA/IGAke3R5cGUocHJvY2Vzcy5lbnYua2JuV29ya2VyVHlwZSl9IGAgOiAnJztcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgS2JuTG9nZ2VySnNvbkZvcm1hdCBleHRlbmRzIExvZ0Zvcm1hdCB7XHJcbiAgZm9ybWF0KGRhdGEpIHtcclxuICAgIGxldCB0aW1lID0gY29sb3IoJ3RpbWUnKShtb21lbnQoZGF0YS50aW1lc3RhbXApLmZvcm1hdCgnSEg6bW06c3MuU1NTJykpO1xyXG4gICAgbGV0IG1zZyA9IGRhdGEuZXJyb3IgPyBjb2xvcignZXJyb3InKShkYXRhLmVycm9yLnN0YWNrKSA6IGNvbG9yKCdtZXNzYWdlJykoZGF0YS5tZXNzYWdlKTtcclxuXHJcbiAgICBsZXQgdGFncyA9IF8oZGF0YS50YWdzKVxyXG4gICAgLnNvcnRCeShmdW5jdGlvbiAodGFnKSB7XHJcbiAgICAgIGlmIChjb2xvcih0YWcpID09PSBfLmlkZW50aXR5KSByZXR1cm4gYDIke3RhZ31gO1xyXG4gICAgICBpZiAoXy5pbmNsdWRlcyhzdGF0dXNlcywgdGFnKSkgcmV0dXJuIGAwJHt0YWd9YDtcclxuICAgICAgcmV0dXJuIGAxJHt0YWd9YDtcclxuICAgIH0pXHJcbiAgICAucmVkdWNlKGZ1bmN0aW9uIChzLCB0KSB7XHJcbiAgICAgIHJldHVybiBzICsgYFskeyBjb2xvcih0KSh0KSB9XWA7XHJcbiAgICB9LCAnJyk7XHJcblxyXG4gICAgcmV0dXJuIGAke3dvcmtlclR5cGV9JHt0eXBlKGRhdGEudHlwZSl9IFske3RpbWV9XSAke3RhZ3N9ICR7bXNnfWA7XHJcbiAgfVxyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/logging/LogFormatString.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,UAAU,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACvC,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE/B,IAAI,SAAS,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;;AAEvC,IAAI,QAAQ,GAAG,CACb,KAAK,EACL,MAAM,EACN,OAAO,EACP,SAAS,EACT,OAAO,EACP,QAAQ,EACR,OAAO,CACR,CAAC;;AAEF,IAAI,UAAU,GAAG;AACf,KAAG,EAAE,MAAM;AACX,KAAG,EAAE,OAAO;AACZ,KAAG,EAAE,OAAO;AACZ,KAAG,EAAE,MAAM;AACX,KAAG,EAAE,KAAK;AACV,MAAI,EAAE,OAAO;AACb,OAAK,EAAE,KAAK;AACZ,SAAO,EAAE,KAAK;AACd,OAAK,EAAE,SAAS;AAChB,QAAM,EAAE,QAAQ;AAChB,OAAK,EAAE,aAAa;AACpB,QAAM,EAAE,aAAa;AACrB,QAAM,EAAE,OAAO;AACf,UAAQ,EAAE,SAAS;AACnB,WAAS,EAAE,SAAS;CACrB,CAAC;;AAEF,IAAI,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AACpC,SAAO,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC;CACnD,CAAC,CAAC;;AAEH,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AAChC,SAAO,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;CAC1C,CAAC,CAAC;;AAEH,IAAI,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,aAAa,GAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,SAAM,EAAE,CAAC;;AAExF,MAAM,CAAC,OAAO;YAAS,mBAAmB;;WAAnB,mBAAmB;0BAAnB,mBAAmB;;+BAAnB,mBAAmB;;;eAAnB,mBAAmB;;WAClC,gBAAC,IAAI,EAAE;AACX,UAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC;AACxE,UAAI,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;AAEzF,UAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CACtB,MAAM,CAAC,UAAU,GAAG,EAAE;AACrB,YAAI,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,aAAW,GAAG,CAAG;AAChD,YAAI,CAAC,CAAC,QAAQ,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE,aAAW,GAAG,CAAG;AAChD,qBAAW,GAAG,CAAG;OAClB,CAAC,CACD,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;AACtB,eAAO,CAAC,UAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAI,CAAC;OACjC,EAAE,EAAE,CAAC,CAAC;;AAEP,kBAAU,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAK,IAAI,UAAK,IAAI,SAAI,GAAG,CAAG;KACnE;;;SAhBoB,mBAAmB;GAAS,SAAS,CAiB3D,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/logging/LogFormatString.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet ansicolors = require('ansicolors');\r\nlet moment = require('moment');\r\n\r\nlet LogFormat = require('./LogFormat');\r\n\r\nlet statuses = [\r\n  'err',\r\n  'info',\r\n  'error',\r\n  'warning',\r\n  'fatal',\r\n  'status',\r\n  'debug'\r\n];\r\n\r\nlet typeColors = {\r\n  log: 'blue',\r\n  req: 'green',\r\n  res: 'green',\r\n  ops: 'cyan',\r\n  err: 'red',\r\n  info: 'green',\r\n  error: 'red',\r\n  warning: 'red',\r\n  fatal: 'magenta',\r\n  status: 'yellow',\r\n  debug: 'brightBlack',\r\n  server: 'brightBlack',\r\n  optmzr: 'white',\r\n  optimize: 'magenta',\r\n  listening: 'magenta'\r\n};\r\n\r\nlet color = _.memoize(function (name) {\r\n  return ansicolors[typeColors[name]] || _.identity;\r\n});\r\n\r\nlet type = _.memoize(function (t) {\r\n  return color(t)(_.pad(t, 7).slice(0, 7));\r\n});\r\n\r\nlet workerType = process.env.kbnWorkerType ? `${type(process.env.kbnWorkerType)} ` : '';\r\n\r\nmodule.exports = class KbnLoggerJsonFormat extends LogFormat {\r\n  format(data) {\r\n    let time = color('time')(moment(data.timestamp).format('HH:mm:ss.SSS'));\r\n    let msg = data.error ? color('error')(data.error.stack) : color('message')(data.message);\r\n\r\n    let tags = _(data.tags)\r\n    .sortBy(function (tag) {\r\n      if (color(tag) === _.identity) return `2${tag}`;\r\n      if (_.includes(statuses, tag)) return `0${tag}`;\r\n      return `1${tag}`;\r\n    })\r\n    .reduce(function (s, t) {\r\n      return s + `[${ color(t)(t) }]`;\r\n    }, '');\r\n\r\n    return `${workerType}${type(data.type)} [${time}] ${tags} ${msg}`;\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670858
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/status/ServerStatus.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _ = require('lodash');\n\nvar states = require('./states');\nvar Status = require('./Status');\n\nmodule.exports = (function () {\n  function ServerStatus(server) {\n    _classCallCheck(this, ServerStatus);\n\n    this.server = server;\n    this._created = {};\n  }\n\n  _createClass(ServerStatus, [{\n    key: 'create',\n    value: function create(plugin) {\n      return this._created[plugin.id] = new Status(plugin, this.server);\n    }\n  }, {\n    key: 'each',\n    value: function each(fn) {\n      var self = this;\n      _.forOwn(self._created, function (status, i, list) {\n        if (status.state !== 'disabled') {\n          fn.call(self, status, i, list);\n        }\n      });\n    }\n  }, {\n    key: 'get',\n    value: function get(name) {\n      return this._created[name];\n    }\n  }, {\n    key: 'getState',\n    value: function getState(name) {\n      return _.get(this._created, [name, 'state'], 'uninitialized');\n    }\n  }, {\n    key: 'overall',\n    value: function overall() {\n      var state = _(this._created).map(function (status) {\n        return states.get(status.state);\n      }).sortBy('severity').pop();\n\n      var statuses = _.where(this._created, { state: state.id });\n      var since = _.get(_.sortBy(statuses, 'since'), [0, 'since']);\n\n      return {\n        state: state.id,\n        title: state.title,\n        nickname: _.sample(state.nicknames),\n        icon: state.icon,\n        since: since\n      };\n    }\n  }, {\n    key: 'isGreen',\n    value: function isGreen() {\n      return this.overall().state === 'green';\n    }\n  }, {\n    key: 'notGreen',\n    value: function notGreen() {\n      return !this.isGreen();\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      var overall = this.overall();\n      return overall.title + ' – ' + overall.nickname;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        overall: this.overall(),\n        statuses: _.values(this._created)\n      };\n    }\n  }]);\n\n  return ServerStatus;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3N0YXR1cy9TZXJ2ZXJTdGF0dXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUUxQixJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDakMsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDOztBQUVqQyxNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsWUFBWSxDQUNyQixNQUFNLEVBQUU7MEJBREMsWUFBWTs7QUFFL0IsUUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDckIsUUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7R0FDcEI7O2VBSm9CLFlBQVk7O1dBTTNCLGdCQUFDLE1BQU0sRUFBRTtBQUNiLGFBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBRTtLQUNyRTs7O1dBRUcsY0FBQyxFQUFFLEVBQUU7QUFDUCxVQUFJLElBQUksR0FBRyxJQUFJLENBQUM7QUFDaEIsT0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFVBQVUsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUU7QUFDakQsWUFBSSxNQUFNLENBQUMsS0FBSyxLQUFLLFVBQVUsRUFBRTtBQUMvQixZQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ2hDO09BQ0YsQ0FBQyxDQUFDO0tBQ0o7OztXQUVFLGFBQUMsSUFBSSxFQUFFO0FBQ1IsYUFBTyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzVCOzs7V0FFTyxrQkFBQyxJQUFJLEVBQUU7QUFDYixhQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsRUFBRSxlQUFlLENBQUMsQ0FBQztLQUMvRDs7O1dBRU0sbUJBQUc7QUFDUixVQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUMzQixHQUFHLENBQUMsVUFBVSxNQUFNLEVBQUU7QUFDckIsZUFBTyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztPQUNqQyxDQUFDLENBQ0QsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUNsQixHQUFHLEVBQUUsQ0FBQzs7QUFFUCxVQUFJLFFBQVEsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDM0QsVUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDOztBQUU3RCxhQUFPO0FBQ0wsYUFBSyxFQUFFLEtBQUssQ0FBQyxFQUFFO0FBQ2YsYUFBSyxFQUFFLEtBQUssQ0FBQyxLQUFLO0FBQ2xCLGdCQUFRLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO0FBQ25DLFlBQUksRUFBRSxLQUFLLENBQUMsSUFBSTtBQUNoQixhQUFLLEVBQUUsS0FBSztPQUNiLENBQUM7S0FDSDs7O1dBRU0sbUJBQUc7QUFDUixhQUFRLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFFO0tBQzNDOzs7V0FFTyxvQkFBRztBQUNULGFBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDeEI7OztXQUVPLG9CQUFHO0FBQ1QsVUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzdCLGFBQVUsT0FBTyxDQUFDLEtBQUssV0FBTSxPQUFPLENBQUMsUUFBUSxDQUFHO0tBQ2pEOzs7V0FFSyxrQkFBRztBQUNQLGFBQU87QUFDTCxlQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUN2QixnQkFBUSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztPQUNsQyxDQUFDO0tBQ0g7OztTQWpFb0IsWUFBWTtJQWtFbEMsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9zdGF0dXMvU2VydmVyU3RhdHVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuXHJcbmxldCBzdGF0ZXMgPSByZXF1aXJlKCcuL3N0YXRlcycpO1xyXG5sZXQgU3RhdHVzID0gcmVxdWlyZSgnLi9TdGF0dXMnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VydmVyU3RhdHVzIHtcclxuICBjb25zdHJ1Y3RvcihzZXJ2ZXIpIHtcclxuICAgIHRoaXMuc2VydmVyID0gc2VydmVyO1xyXG4gICAgdGhpcy5fY3JlYXRlZCA9IHt9O1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlKHBsdWdpbikge1xyXG4gICAgcmV0dXJuICh0aGlzLl9jcmVhdGVkW3BsdWdpbi5pZF0gPSBuZXcgU3RhdHVzKHBsdWdpbiwgdGhpcy5zZXJ2ZXIpKTtcclxuICB9XHJcblxyXG4gIGVhY2goZm4pIHtcclxuICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgIF8uZm9yT3duKHNlbGYuX2NyZWF0ZWQsIGZ1bmN0aW9uIChzdGF0dXMsIGksIGxpc3QpIHtcclxuICAgICAgaWYgKHN0YXR1cy5zdGF0ZSAhPT0gJ2Rpc2FibGVkJykge1xyXG4gICAgICAgIGZuLmNhbGwoc2VsZiwgc3RhdHVzLCBpLCBsaXN0KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXQobmFtZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZWRbbmFtZV07XHJcbiAgfVxyXG5cclxuICBnZXRTdGF0ZShuYW1lKSB7XHJcbiAgICByZXR1cm4gXy5nZXQodGhpcy5fY3JlYXRlZCwgW25hbWUsICdzdGF0ZSddLCAndW5pbml0aWFsaXplZCcpO1xyXG4gIH1cclxuXHJcbiAgb3ZlcmFsbCgpIHtcclxuICAgIGxldCBzdGF0ZSA9IF8odGhpcy5fY3JlYXRlZClcclxuICAgIC5tYXAoZnVuY3Rpb24gKHN0YXR1cykge1xyXG4gICAgICByZXR1cm4gc3RhdGVzLmdldChzdGF0dXMuc3RhdGUpO1xyXG4gICAgfSlcclxuICAgIC5zb3J0QnkoJ3NldmVyaXR5JylcclxuICAgIC5wb3AoKTtcclxuXHJcbiAgICBsZXQgc3RhdHVzZXMgPSBfLndoZXJlKHRoaXMuX2NyZWF0ZWQsIHsgc3RhdGU6IHN0YXRlLmlkIH0pO1xyXG4gICAgbGV0IHNpbmNlID0gXy5nZXQoXy5zb3J0Qnkoc3RhdHVzZXMsICdzaW5jZScpLCBbMCwgJ3NpbmNlJ10pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN0YXRlOiBzdGF0ZS5pZCxcclxuICAgICAgdGl0bGU6IHN0YXRlLnRpdGxlLFxyXG4gICAgICBuaWNrbmFtZTogXy5zYW1wbGUoc3RhdGUubmlja25hbWVzKSxcclxuICAgICAgaWNvbjogc3RhdGUuaWNvbixcclxuICAgICAgc2luY2U6IHNpbmNlLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGlzR3JlZW4oKSB7XHJcbiAgICByZXR1cm4gKHRoaXMub3ZlcmFsbCgpLnN0YXRlID09PSAnZ3JlZW4nKTtcclxuICB9XHJcblxyXG4gIG5vdEdyZWVuKCkge1xyXG4gICAgcmV0dXJuICF0aGlzLmlzR3JlZW4oKTtcclxuICB9XHJcblxyXG4gIHRvU3RyaW5nKCkge1xyXG4gICAgbGV0IG92ZXJhbGwgPSB0aGlzLm92ZXJhbGwoKTtcclxuICAgIHJldHVybiBgJHtvdmVyYWxsLnRpdGxlfSDigJMgJHtvdmVyYWxsLm5pY2tuYW1lfWA7XHJcbiAgfVxyXG5cclxuICB0b0pTT04oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBvdmVyYWxsOiB0aGlzLm92ZXJhbGwoKSxcclxuICAgICAgc3RhdHVzZXM6IF8udmFsdWVzKHRoaXMuX2NyZWF0ZWQpXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/status/ServerStatus.js"
      ],
      "names": [],
      "mappings": ";;;;;;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE1B,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACjC,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO;AACD,WADU,YAAY,CACrB,MAAM,EAAE;0BADC,YAAY;;AAE/B,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;GACpB;;eAJoB,YAAY;;WAM3B,gBAAC,MAAM,EAAE;AACb,aAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,IAAI,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAE;KACrE;;;WAEG,cAAC,EAAE,EAAE;AACP,UAAI,IAAI,GAAG,IAAI,CAAC;AAChB,OAAC,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE;AACjD,YAAI,MAAM,CAAC,KAAK,KAAK,UAAU,EAAE;AAC/B,YAAE,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;SAChC;OACF,CAAC,CAAC;KACJ;;;WAEE,aAAC,IAAI,EAAE;AACR,aAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;KAC5B;;;WAEO,kBAAC,IAAI,EAAE;AACb,aAAO,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,eAAe,CAAC,CAAC;KAC/D;;;WAEM,mBAAG;AACR,UAAI,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAC3B,GAAG,CAAC,UAAU,MAAM,EAAE;AACrB,eAAO,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;OACjC,CAAC,CACD,MAAM,CAAC,UAAU,CAAC,CAClB,GAAG,EAAE,CAAC;;AAEP,UAAI,QAAQ,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC;AAC3D,UAAI,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;;AAE7D,aAAO;AACL,aAAK,EAAE,KAAK,CAAC,EAAE;AACf,aAAK,EAAE,KAAK,CAAC,KAAK;AAClB,gBAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC;AACnC,YAAI,EAAE,KAAK,CAAC,IAAI;AAChB,aAAK,EAAE,KAAK;OACb,CAAC;KACH;;;WAEM,mBAAG;AACR,aAAQ,IAAI,CAAC,OAAO,EAAE,CAAC,KAAK,KAAK,OAAO,CAAE;KAC3C;;;WAEO,oBAAG;AACT,aAAO,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;KACxB;;;WAEO,oBAAG;AACT,UAAI,OAAO,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;AAC7B,aAAU,OAAO,CAAC,KAAK,WAAM,OAAO,CAAC,QAAQ,CAAG;KACjD;;;WAEK,kBAAG;AACP,aAAO;AACL,eAAO,EAAE,IAAI,CAAC,OAAO,EAAE;AACvB,gBAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;OAClC,CAAC;KACH;;;SAjEoB,YAAY;IAkElC,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/status/ServerStatus.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\n\r\nlet states = require('./states');\r\nlet Status = require('./Status');\r\n\r\nmodule.exports = class ServerStatus {\r\n  constructor(server) {\r\n    this.server = server;\r\n    this._created = {};\r\n  }\r\n\r\n  create(plugin) {\r\n    return (this._created[plugin.id] = new Status(plugin, this.server));\r\n  }\r\n\r\n  each(fn) {\r\n    let self = this;\r\n    _.forOwn(self._created, function (status, i, list) {\r\n      if (status.state !== 'disabled') {\r\n        fn.call(self, status, i, list);\r\n      }\r\n    });\r\n  }\r\n\r\n  get(name) {\r\n    return this._created[name];\r\n  }\r\n\r\n  getState(name) {\r\n    return _.get(this._created, [name, 'state'], 'uninitialized');\r\n  }\r\n\r\n  overall() {\r\n    let state = _(this._created)\r\n    .map(function (status) {\r\n      return states.get(status.state);\r\n    })\r\n    .sortBy('severity')\r\n    .pop();\r\n\r\n    let statuses = _.where(this._created, { state: state.id });\r\n    let since = _.get(_.sortBy(statuses, 'since'), [0, 'since']);\r\n\r\n    return {\r\n      state: state.id,\r\n      title: state.title,\r\n      nickname: _.sample(state.nicknames),\r\n      icon: state.icon,\r\n      since: since,\r\n    };\r\n  }\r\n\r\n  isGreen() {\r\n    return (this.overall().state === 'green');\r\n  }\r\n\r\n  notGreen() {\r\n    return !this.isGreen();\r\n  }\r\n\r\n  toString() {\r\n    let overall = this.overall();\r\n    return `${overall.title} – ${overall.nickname}`;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      overall: this.overall(),\r\n      statuses: _.values(this._created)\r\n    };\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670889
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/status/states.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\nexports.all = [{\n  id: 'red',\n  title: 'Red',\n  icon: 'danger',\n  severity: 1000,\n  nicknames: ['Danger Will Robinson! Danger!']\n}, {\n  id: 'uninitialized',\n  title: 'Uninitialized',\n  icon: 'spinner',\n  severity: 900,\n  nicknames: ['Initializing']\n}, {\n  id: 'yellow',\n  title: 'Yellow',\n  icon: 'warning',\n  severity: 800,\n  nicknames: ['S.N.A.F.U', 'I\\'ll be back', 'brb']\n}, {\n  id: 'green',\n  title: 'Green',\n  icon: 'success',\n  severity: 0,\n  nicknames: ['Looking good']\n}, {\n  id: 'disabled',\n  title: 'Disabled',\n  severity: -1,\n  icon: 'toggle-off',\n  nicknames: ['I\\'m I even a thing?']\n}];\n\nexports.allById = _.indexBy(exports.all, 'id');\n\nexports.defaults = {\n  icon: 'question',\n  severity: Infinity\n};\n\nexports.get = function (id) {\n  return exports.allById[id] || _.defaults({ id: id }, exports.defaults);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3N0YXR1cy9zdGF0ZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTFCLE9BQU8sQ0FBQyxHQUFHLEdBQUcsQ0FDWjtBQUNFLElBQUUsRUFBRSxLQUFLO0FBQ1QsT0FBSyxFQUFFLEtBQUs7QUFDWixNQUFJLEVBQUUsUUFBUTtBQUNkLFVBQVEsRUFBRSxJQUFJO0FBQ2QsV0FBUyxFQUFFLENBQ1QsK0JBQStCLENBQ2hDO0NBQ0YsRUFDRDtBQUNFLElBQUUsRUFBRSxlQUFlO0FBQ25CLE9BQUssRUFBRSxlQUFlO0FBQ3RCLE1BQUksRUFBRSxTQUFTO0FBQ2YsVUFBUSxFQUFFLEdBQUc7QUFDYixXQUFTLEVBQUUsQ0FDVCxjQUFjLENBQ2Y7Q0FDRixFQUNEO0FBQ0UsSUFBRSxFQUFFLFFBQVE7QUFDWixPQUFLLEVBQUUsUUFBUTtBQUNmLE1BQUksRUFBRSxTQUFTO0FBQ2YsVUFBUSxFQUFFLEdBQUc7QUFDYixXQUFTLEVBQUUsQ0FDVCxXQUFXLEVBQ1gsZUFBZSxFQUNmLEtBQUssQ0FDTjtDQUNGLEVBQ0Q7QUFDRSxJQUFFLEVBQUUsT0FBTztBQUNYLE9BQUssRUFBRSxPQUFPO0FBQ2QsTUFBSSxFQUFFLFNBQVM7QUFDZixVQUFRLEVBQUUsQ0FBQztBQUNYLFdBQVMsRUFBRSxDQUNULGNBQWMsQ0FDZjtDQUNGLEVBQ0Q7QUFDRSxJQUFFLEVBQUUsVUFBVTtBQUNkLE9BQUssRUFBRSxVQUFVO0FBQ2pCLFVBQVEsRUFBRSxDQUFDLENBQUM7QUFDWixNQUFJLEVBQUUsWUFBWTtBQUNsQixXQUFTLEVBQUUsQ0FDVCxzQkFBc0IsQ0FDdkI7Q0FDRixDQUNGLENBQUM7O0FBRUYsT0FBTyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7O0FBRS9DLE9BQU8sQ0FBQyxRQUFRLEdBQUc7QUFDakIsTUFBSSxFQUFFLFVBQVU7QUFDaEIsVUFBUSxFQUFFLFFBQVE7Q0FDbkIsQ0FBQzs7QUFFRixPQUFPLENBQUMsR0FBRyxHQUFHLFVBQVUsRUFBRSxFQUFFO0FBQzFCLFNBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztDQUN4RSxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3N0YXR1cy9zdGF0ZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5cclxuZXhwb3J0cy5hbGwgPSBbXHJcbiAge1xyXG4gICAgaWQ6ICdyZWQnLFxyXG4gICAgdGl0bGU6ICdSZWQnLFxyXG4gICAgaWNvbjogJ2RhbmdlcicsXHJcbiAgICBzZXZlcml0eTogMTAwMCxcclxuICAgIG5pY2tuYW1lczogW1xyXG4gICAgICAnRGFuZ2VyIFdpbGwgUm9iaW5zb24hIERhbmdlciEnXHJcbiAgICBdXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogJ3VuaW5pdGlhbGl6ZWQnLFxyXG4gICAgdGl0bGU6ICdVbmluaXRpYWxpemVkJyxcclxuICAgIGljb246ICdzcGlubmVyJyxcclxuICAgIHNldmVyaXR5OiA5MDAsXHJcbiAgICBuaWNrbmFtZXM6IFtcclxuICAgICAgJ0luaXRpYWxpemluZydcclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAneWVsbG93JyxcclxuICAgIHRpdGxlOiAnWWVsbG93JyxcclxuICAgIGljb246ICd3YXJuaW5nJyxcclxuICAgIHNldmVyaXR5OiA4MDAsXHJcbiAgICBuaWNrbmFtZXM6IFtcclxuICAgICAgJ1MuTi5BLkYuVScsXHJcbiAgICAgICdJXFwnbGwgYmUgYmFjaycsXHJcbiAgICAgICdicmInXHJcbiAgICBdXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogJ2dyZWVuJyxcclxuICAgIHRpdGxlOiAnR3JlZW4nLFxyXG4gICAgaWNvbjogJ3N1Y2Nlc3MnLFxyXG4gICAgc2V2ZXJpdHk6IDAsXHJcbiAgICBuaWNrbmFtZXM6IFtcclxuICAgICAgJ0xvb2tpbmcgZ29vZCdcclxuICAgIF1cclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnZGlzYWJsZWQnLFxyXG4gICAgdGl0bGU6ICdEaXNhYmxlZCcsXHJcbiAgICBzZXZlcml0eTogLTEsXHJcbiAgICBpY29uOiAndG9nZ2xlLW9mZicsXHJcbiAgICBuaWNrbmFtZXM6IFtcclxuICAgICAgJ0lcXCdtIEkgZXZlbiBhIHRoaW5nPydcclxuICAgIF1cclxuICB9XHJcbl07XHJcblxyXG5leHBvcnRzLmFsbEJ5SWQgPSBfLmluZGV4QnkoZXhwb3J0cy5hbGwsICdpZCcpO1xyXG5cclxuZXhwb3J0cy5kZWZhdWx0cyA9IHtcclxuICBpY29uOiAncXVlc3Rpb24nLFxyXG4gIHNldmVyaXR5OiBJbmZpbml0eVxyXG59O1xyXG5cclxuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICByZXR1cm4gZXhwb3J0cy5hbGxCeUlkW2lkXSB8fCBfLmRlZmF1bHRzKHsgaWQ6IGlkIH0sIGV4cG9ydHMuZGVmYXVsdHMpO1xyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/status/states.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE1B,OAAO,CAAC,GAAG,GAAG,CACZ;AACE,IAAE,EAAE,KAAK;AACT,OAAK,EAAE,KAAK;AACZ,MAAI,EAAE,QAAQ;AACd,UAAQ,EAAE,IAAI;AACd,WAAS,EAAE,CACT,+BAA+B,CAChC;CACF,EACD;AACE,IAAE,EAAE,eAAe;AACnB,OAAK,EAAE,eAAe;AACtB,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,GAAG;AACb,WAAS,EAAE,CACT,cAAc,CACf;CACF,EACD;AACE,IAAE,EAAE,QAAQ;AACZ,OAAK,EAAE,QAAQ;AACf,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,GAAG;AACb,WAAS,EAAE,CACT,WAAW,EACX,eAAe,EACf,KAAK,CACN;CACF,EACD;AACE,IAAE,EAAE,OAAO;AACX,OAAK,EAAE,OAAO;AACd,MAAI,EAAE,SAAS;AACf,UAAQ,EAAE,CAAC;AACX,WAAS,EAAE,CACT,cAAc,CACf;CACF,EACD;AACE,IAAE,EAAE,UAAU;AACd,OAAK,EAAE,UAAU;AACjB,UAAQ,EAAE,CAAC,CAAC;AACZ,MAAI,EAAE,YAAY;AAClB,WAAS,EAAE,CACT,sBAAsB,CACvB;CACF,CACF,CAAC;;AAEF,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;;AAE/C,OAAO,CAAC,QAAQ,GAAG;AACjB,MAAI,EAAE,UAAU;AAChB,UAAQ,EAAE,QAAQ;CACnB,CAAC;;AAEF,OAAO,CAAC,GAAG,GAAG,UAAU,EAAE,EAAE;AAC1B,SAAO,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;CACxE,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/status/states.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\n\r\nexports.all = [\r\n  {\r\n    id: 'red',\r\n    title: 'Red',\r\n    icon: 'danger',\r\n    severity: 1000,\r\n    nicknames: [\r\n      'Danger Will Robinson! Danger!'\r\n    ]\r\n  },\r\n  {\r\n    id: 'uninitialized',\r\n    title: 'Uninitialized',\r\n    icon: 'spinner',\r\n    severity: 900,\r\n    nicknames: [\r\n      'Initializing'\r\n    ]\r\n  },\r\n  {\r\n    id: 'yellow',\r\n    title: 'Yellow',\r\n    icon: 'warning',\r\n    severity: 800,\r\n    nicknames: [\r\n      'S.N.A.F.U',\r\n      'I\\'ll be back',\r\n      'brb'\r\n    ]\r\n  },\r\n  {\r\n    id: 'green',\r\n    title: 'Green',\r\n    icon: 'success',\r\n    severity: 0,\r\n    nicknames: [\r\n      'Looking good'\r\n    ]\r\n  },\r\n  {\r\n    id: 'disabled',\r\n    title: 'Disabled',\r\n    severity: -1,\r\n    icon: 'toggle-off',\r\n    nicknames: [\r\n      'I\\'m I even a thing?'\r\n    ]\r\n  }\r\n];\r\n\r\nexports.allById = _.indexBy(exports.all, 'id');\r\n\r\nexports.defaults = {\r\n  icon: 'question',\r\n  severity: Infinity\r\n};\r\n\r\nexports.get = function (id) {\r\n  return exports.allById[id] || _.defaults({ id: id }, exports.defaults);\r\n};\r\n"
      ]
    },
    "mtime": 1465716670905
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/status/Status.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = require('babel-runtime/helpers/get')['default'];\n\nvar _inherits = require('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _ = require('lodash');\nvar EventEmitter = require('events').EventEmitter;\nvar states = require('./states');\n\nvar Status = (function (_EventEmitter) {\n  _inherits(Status, _EventEmitter);\n\n  function Status(plugin, server) {\n    _classCallCheck(this, Status);\n\n    _get(Object.getPrototypeOf(Status.prototype), 'constructor', this).call(this);\n\n    this.plugin = plugin;\n    this.since = new Date();\n    this.state = 'uninitialized';\n    this.message = 'uninitialized';\n\n    this.on('change', function (previous, previousMsg) {\n      this.since = new Date();\n      var tags = ['status', 'plugin:' + this.plugin.toString()];\n      tags.push(this.state === 'red' ? 'error' : 'info');\n\n      server.log(tags, {\n        tmpl: 'Status changed from <%= prevState %> to <%= state %><%= message ? \" - \" + message : \"\" %>',\n        state: this.state,\n        message: this.message,\n        prevState: previous,\n        prevMsg: previousMsg\n      });\n    });\n  }\n\n  _createClass(Status, [{\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        name: this.plugin.id,\n        version: this.plugin.version,\n        state: this.state,\n        icon: states.get(this.state).icon,\n        message: this.message,\n        since: this.since\n      };\n    }\n  }]);\n\n  return Status;\n})(EventEmitter);\n\nstates.all.forEach(function (state) {\n  Status.prototype[state.id] = function (message) {\n    if (this.state === 'disabled') return;\n\n    var previous = this.state;\n    var previousMsg = this.message;\n\n    this.error = null;\n    this.message = message || state.title;\n    this.state = state.id;\n\n    if (message instanceof Error) {\n      this.error = message;\n      this.message = message.message;\n    }\n\n    if (previous === this.state && previousMsg === this.message) {\n      // noop\n      return;\n    }\n\n    this.emit(state.id, previous, previousMsg);\n    this.emit('change', previous, previousMsg);\n  };\n});\n\nmodule.exports = Status;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3N0YXR1cy9TdGF0dXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLFlBQVksR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDO0FBQ2xELElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQzs7SUFFM0IsTUFBTTtZQUFOLE1BQU07O0FBQ0MsV0FEUCxNQUFNLENBQ0UsTUFBTSxFQUFFLE1BQU0sRUFBRTswQkFEeEIsTUFBTTs7QUFFUiwrQkFGRSxNQUFNLDZDQUVBOztBQUVSLFFBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3JCLFFBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUN4QixRQUFJLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQztBQUM3QixRQUFJLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQzs7QUFFL0IsUUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxRQUFRLEVBQUUsV0FBVyxFQUFFO0FBQ2pELFVBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztBQUN4QixVQUFJLElBQUksR0FBRyxDQUFDLFFBQVEsY0FBWSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFHLENBQUM7QUFDMUQsVUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssR0FBRyxPQUFPLEdBQUcsTUFBTSxDQUFDLENBQUM7O0FBRW5ELFlBQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFO0FBQ2YsWUFBSSxFQUFFLDJGQUEyRjtBQUNqRyxhQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7QUFDakIsZUFBTyxFQUFFLElBQUksQ0FBQyxPQUFPO0FBQ3JCLGlCQUFTLEVBQUUsUUFBUTtBQUNuQixlQUFPLEVBQUUsV0FBVztPQUNyQixDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7R0FDSjs7ZUF0QkcsTUFBTTs7V0F3Qkosa0JBQUc7QUFDUCxhQUFPO0FBQ0wsWUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtBQUNwQixlQUFPLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPO0FBQzVCLGFBQUssRUFBRSxJQUFJLENBQUMsS0FBSztBQUNqQixZQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSTtBQUNqQyxlQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87QUFDckIsYUFBSyxFQUFFLElBQUksQ0FBQyxLQUFLO09BQ2xCLENBQUM7S0FDSDs7O1NBakNHLE1BQU07R0FBUyxZQUFZOztBQW9DakMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBVSxLQUFLLEVBQUU7QUFDbEMsUUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxPQUFPLEVBQUU7QUFDOUMsUUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLFVBQVUsRUFBRSxPQUFPOztBQUV0QyxRQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0FBQzFCLFFBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7O0FBRS9CLFFBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0FBQ2xCLFFBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDdEMsUUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDOztBQUV0QixRQUFJLE9BQU8sWUFBWSxLQUFLLEVBQUU7QUFDNUIsVUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7QUFDckIsVUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO0tBQ2hDOztBQUVELFFBQUksUUFBUSxLQUFLLElBQUksQ0FBQyxLQUFLLElBQUksV0FBVyxLQUFLLElBQUksQ0FBQyxPQUFPLEVBQUU7O0FBRTNELGFBQU87S0FDUjs7QUFFRCxRQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsUUFBUSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQzNDLFFBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztHQUM1QyxDQUFDO0NBQ0gsQ0FBQyxDQUFDOztBQUVILE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3N0YXR1cy9TdGF0dXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5sZXQgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xyXG5sZXQgc3RhdGVzID0gcmVxdWlyZSgnLi9zdGF0ZXMnKTtcclxuXHJcbmNsYXNzIFN0YXR1cyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XHJcbiAgY29uc3RydWN0b3IocGx1Z2luLCBzZXJ2ZXIpIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB0aGlzLnNpbmNlID0gbmV3IERhdGUoKTtcclxuICAgIHRoaXMuc3RhdGUgPSAndW5pbml0aWFsaXplZCc7XHJcbiAgICB0aGlzLm1lc3NhZ2UgPSAndW5pbml0aWFsaXplZCc7XHJcblxyXG4gICAgdGhpcy5vbignY2hhbmdlJywgZnVuY3Rpb24gKHByZXZpb3VzLCBwcmV2aW91c01zZykge1xyXG4gICAgICB0aGlzLnNpbmNlID0gbmV3IERhdGUoKTtcclxuICAgICAgbGV0IHRhZ3MgPSBbJ3N0YXR1cycsIGBwbHVnaW46JHt0aGlzLnBsdWdpbi50b1N0cmluZygpfWBdO1xyXG4gICAgICB0YWdzLnB1c2godGhpcy5zdGF0ZSA9PT0gJ3JlZCcgPyAnZXJyb3InIDogJ2luZm8nKTtcclxuXHJcbiAgICAgIHNlcnZlci5sb2codGFncywge1xyXG4gICAgICAgIHRtcGw6ICdTdGF0dXMgY2hhbmdlZCBmcm9tIDwlPSBwcmV2U3RhdGUgJT4gdG8gPCU9IHN0YXRlICU+PCU9IG1lc3NhZ2UgPyBcIiAtIFwiICsgbWVzc2FnZSA6IFwiXCIgJT4nLFxyXG4gICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxyXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcclxuICAgICAgICBwcmV2U3RhdGU6IHByZXZpb3VzLFxyXG4gICAgICAgIHByZXZNc2c6IHByZXZpb3VzTXNnXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0b0pTT04oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLnBsdWdpbi5pZCxcclxuICAgICAgdmVyc2lvbjogdGhpcy5wbHVnaW4udmVyc2lvbixcclxuICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXHJcbiAgICAgIGljb246IHN0YXRlcy5nZXQodGhpcy5zdGF0ZSkuaWNvbixcclxuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxyXG4gICAgICBzaW5jZTogdGhpcy5zaW5jZVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbnN0YXRlcy5hbGwuZm9yRWFjaChmdW5jdGlvbiAoc3RhdGUpIHtcclxuICBTdGF0dXMucHJvdG90eXBlW3N0YXRlLmlkXSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2Rpc2FibGVkJykgcmV0dXJuO1xyXG5cclxuICAgIGxldCBwcmV2aW91cyA9IHRoaXMuc3RhdGU7XHJcbiAgICBsZXQgcHJldmlvdXNNc2cgPSB0aGlzLm1lc3NhZ2U7XHJcblxyXG4gICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8IHN0YXRlLnRpdGxlO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlLmlkO1xyXG5cclxuICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgdGhpcy5lcnJvciA9IG1lc3NhZ2U7XHJcbiAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UubWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocHJldmlvdXMgPT09IHRoaXMuc3RhdGUgJiYgcHJldmlvdXNNc2cgPT09IHRoaXMubWVzc2FnZSkge1xyXG4gICAgICAvLyBub29wXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmVtaXQoc3RhdGUuaWQsIHByZXZpb3VzLCBwcmV2aW91c01zZyk7XHJcbiAgICB0aGlzLmVtaXQoJ2NoYW5nZScsIHByZXZpb3VzLCBwcmV2aW91c01zZyk7XHJcbiAgfTtcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFN0YXR1cztcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/status/Status.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,YAAY,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC;AAClD,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;IAE3B,MAAM;YAAN,MAAM;;AACC,WADP,MAAM,CACE,MAAM,EAAE,MAAM,EAAE;0BADxB,MAAM;;AAER,+BAFE,MAAM,6CAEA;;AAER,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;AACxB,QAAI,CAAC,KAAK,GAAG,eAAe,CAAC;AAC7B,QAAI,CAAC,OAAO,GAAG,eAAe,CAAC;;AAE/B,QAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAU,QAAQ,EAAE,WAAW,EAAE;AACjD,UAAI,CAAC,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;AACxB,UAAI,IAAI,GAAG,CAAC,QAAQ,cAAY,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAG,CAAC;AAC1D,UAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,KAAK,GAAG,OAAO,GAAG,MAAM,CAAC,CAAC;;AAEnD,YAAM,CAAC,GAAG,CAAC,IAAI,EAAE;AACf,YAAI,EAAE,2FAA2F;AACjG,aAAK,EAAE,IAAI,CAAC,KAAK;AACjB,eAAO,EAAE,IAAI,CAAC,OAAO;AACrB,iBAAS,EAAE,QAAQ;AACnB,eAAO,EAAE,WAAW;OACrB,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ;;eAtBG,MAAM;;WAwBJ,kBAAG;AACP,aAAO;AACL,YAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE;AACpB,eAAO,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO;AAC5B,aAAK,EAAE,IAAI,CAAC,KAAK;AACjB,YAAI,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI;AACjC,eAAO,EAAE,IAAI,CAAC,OAAO;AACrB,aAAK,EAAE,IAAI,CAAC,KAAK;OAClB,CAAC;KACH;;;SAjCG,MAAM;GAAS,YAAY;;AAoCjC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,KAAK,EAAE;AAClC,QAAM,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,UAAU,OAAO,EAAE;AAC9C,QAAI,IAAI,CAAC,KAAK,KAAK,UAAU,EAAE,OAAO;;AAEtC,QAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;AAC1B,QAAI,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC;;AAE/B,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAClB,QAAI,CAAC,OAAO,GAAG,OAAO,IAAI,KAAK,CAAC,KAAK,CAAC;AACtC,QAAI,CAAC,KAAK,GAAG,KAAK,CAAC,EAAE,CAAC;;AAEtB,QAAI,OAAO,YAAY,KAAK,EAAE;AAC5B,UAAI,CAAC,KAAK,GAAG,OAAO,CAAC;AACrB,UAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;KAChC;;AAED,QAAI,QAAQ,KAAK,IAAI,CAAC,KAAK,IAAI,WAAW,KAAK,IAAI,CAAC,OAAO,EAAE;;AAE3D,aAAO;KACR;;AAED,QAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;AAC3C,QAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;GAC5C,CAAC;CACH,CAAC,CAAC;;AAEH,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/status/Status.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet EventEmitter = require('events').EventEmitter;\r\nlet states = require('./states');\r\n\r\nclass Status extends EventEmitter {\r\n  constructor(plugin, server) {\r\n    super();\r\n\r\n    this.plugin = plugin;\r\n    this.since = new Date();\r\n    this.state = 'uninitialized';\r\n    this.message = 'uninitialized';\r\n\r\n    this.on('change', function (previous, previousMsg) {\r\n      this.since = new Date();\r\n      let tags = ['status', `plugin:${this.plugin.toString()}`];\r\n      tags.push(this.state === 'red' ? 'error' : 'info');\r\n\r\n      server.log(tags, {\r\n        tmpl: 'Status changed from <%= prevState %> to <%= state %><%= message ? \" - \" + message : \"\" %>',\r\n        state: this.state,\r\n        message: this.message,\r\n        prevState: previous,\r\n        prevMsg: previousMsg\r\n      });\r\n    });\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      name: this.plugin.id,\r\n      version: this.plugin.version,\r\n      state: this.state,\r\n      icon: states.get(this.state).icon,\r\n      message: this.message,\r\n      since: this.since\r\n    };\r\n  }\r\n}\r\n\r\nstates.all.forEach(function (state) {\r\n  Status.prototype[state.id] = function (message) {\r\n    if (this.state === 'disabled') return;\r\n\r\n    let previous = this.state;\r\n    let previousMsg = this.message;\r\n\r\n    this.error = null;\r\n    this.message = message || state.title;\r\n    this.state = state.id;\r\n\r\n    if (message instanceof Error) {\r\n      this.error = message;\r\n      this.message = message.message;\r\n    }\r\n\r\n    if (previous === this.state && previousMsg === this.message) {\r\n      // noop\r\n      return;\r\n    }\r\n\r\n    this.emit(state.id, previous, previousMsg);\r\n    this.emit('change', previous, previousMsg);\r\n  };\r\n});\r\n\r\nmodule.exports = Status;\r\n"
      ]
    },
    "mtime": 1465716670889
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/status/metrics.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (kbnServer, server, config) {\n  var _ = require('lodash');\n  var Samples = require('./Samples');\n  var lastReport = Date.now();\n\n  kbnServer.metrics = new Samples(12);\n\n  server.plugins.good.monitor.on('ops', function (event) {\n    var now = Date.now();\n    var secSinceLast = (now - lastReport) / 1000;\n    lastReport = now;\n\n    var port = config.get('server.port');\n    var requests = _.get(event, ['requests', port, 'total'], 0);\n    var requestsPerSecond = requests / secSinceLast;\n\n    kbnServer.metrics.add({\n      heapTotal: _.get(event, 'psmem.heapTotal'),\n      heapUsed: _.get(event, 'psmem.heapUsed'),\n      load: event.osload,\n      responseTimeAvg: _.get(event, ['responseTimes', port, 'avg']),\n      responseTimeMax: _.get(event, ['responseTimes', port, 'max']),\n      requestsPerSecond: requestsPerSecond\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3N0YXR1cy9tZXRyaWNzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ3BELE1BQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixNQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDbkMsTUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDOztBQUU1QixXQUFTLENBQUMsT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDOztBQUVwQyxRQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxVQUFVLEtBQUssRUFBRTtBQUNyRCxRQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDckIsUUFBSSxZQUFZLEdBQUcsQ0FBQyxHQUFHLEdBQUcsVUFBVSxDQUFBLEdBQUksSUFBSSxDQUFDO0FBQzdDLGNBQVUsR0FBRyxHQUFHLENBQUM7O0FBRWpCLFFBQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDckMsUUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzVELFFBQUksaUJBQWlCLEdBQUcsUUFBUSxHQUFHLFlBQVksQ0FBQzs7QUFFaEQsYUFBUyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7QUFDcEIsZUFBUyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLGlCQUFpQixDQUFDO0FBQzFDLGNBQVEsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxnQkFBZ0IsQ0FBQztBQUN4QyxVQUFJLEVBQUUsS0FBSyxDQUFDLE1BQU07QUFDbEIscUJBQWUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDN0QscUJBQWUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLGVBQWUsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDN0QsdUJBQWlCLEVBQUUsaUJBQWlCO0tBQ3JDLENBQUMsQ0FBQztHQUVKLENBQUMsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvc3RhdHVzL21ldHJpY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChrYm5TZXJ2ZXIsIHNlcnZlciwgY29uZmlnKSB7XHJcbiAgbGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuICBsZXQgU2FtcGxlcyA9IHJlcXVpcmUoJy4vU2FtcGxlcycpO1xyXG4gIGxldCBsYXN0UmVwb3J0ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAga2JuU2VydmVyLm1ldHJpY3MgPSBuZXcgU2FtcGxlcygxMik7XHJcblxyXG4gIHNlcnZlci5wbHVnaW5zLmdvb2QubW9uaXRvci5vbignb3BzJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGxldCBzZWNTaW5jZUxhc3QgPSAobm93IC0gbGFzdFJlcG9ydCkgLyAxMDAwO1xyXG4gICAgbGFzdFJlcG9ydCA9IG5vdztcclxuXHJcbiAgICBsZXQgcG9ydCA9IGNvbmZpZy5nZXQoJ3NlcnZlci5wb3J0Jyk7XHJcbiAgICBsZXQgcmVxdWVzdHMgPSBfLmdldChldmVudCwgWydyZXF1ZXN0cycsIHBvcnQsICd0b3RhbCddLCAwKTtcclxuICAgIGxldCByZXF1ZXN0c1BlclNlY29uZCA9IHJlcXVlc3RzIC8gc2VjU2luY2VMYXN0O1xyXG5cclxuICAgIGtiblNlcnZlci5tZXRyaWNzLmFkZCh7XHJcbiAgICAgIGhlYXBUb3RhbDogXy5nZXQoZXZlbnQsICdwc21lbS5oZWFwVG90YWwnKSxcclxuICAgICAgaGVhcFVzZWQ6IF8uZ2V0KGV2ZW50LCAncHNtZW0uaGVhcFVzZWQnKSxcclxuICAgICAgbG9hZDogZXZlbnQub3Nsb2FkLFxyXG4gICAgICByZXNwb25zZVRpbWVBdmc6IF8uZ2V0KGV2ZW50LCBbJ3Jlc3BvbnNlVGltZXMnLCBwb3J0LCAnYXZnJ10pLFxyXG4gICAgICByZXNwb25zZVRpbWVNYXg6IF8uZ2V0KGV2ZW50LCBbJ3Jlc3BvbnNlVGltZXMnLCBwb3J0LCAnbWF4J10pLFxyXG4gICAgICByZXF1ZXN0c1BlclNlY29uZDogcmVxdWVzdHNQZXJTZWNvbmRcclxuICAgIH0pO1xyXG5cclxuICB9KTtcclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/status/metrics.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE;AACpD,MAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,MAAI,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACnC,MAAI,UAAU,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;;AAE5B,WAAS,CAAC,OAAO,GAAG,IAAI,OAAO,CAAC,EAAE,CAAC,CAAC;;AAEpC,QAAM,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,EAAE,UAAU,KAAK,EAAE;AACrD,QAAI,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AACrB,QAAI,YAAY,GAAG,CAAC,GAAG,GAAG,UAAU,CAAA,GAAI,IAAI,CAAC;AAC7C,cAAU,GAAG,GAAG,CAAC;;AAEjB,QAAI,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AACrC,QAAI,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,UAAU,EAAE,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;AAC5D,QAAI,iBAAiB,GAAG,QAAQ,GAAG,YAAY,CAAC;;AAEhD,aAAS,CAAC,OAAO,CAAC,GAAG,CAAC;AACpB,eAAS,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,iBAAiB,CAAC;AAC1C,cAAQ,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,gBAAgB,CAAC;AACxC,UAAI,EAAE,KAAK,CAAC,MAAM;AAClB,qBAAe,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,eAAe,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AAC7D,qBAAe,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,eAAe,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AAC7D,uBAAiB,EAAE,iBAAiB;KACrC,CAAC,CAAC;GAEJ,CAAC,CAAC;CACJ,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/status/metrics.js",
      "sourcesContent": [
        "module.exports = function (kbnServer, server, config) {\r\n  let _ = require('lodash');\r\n  let Samples = require('./Samples');\r\n  let lastReport = Date.now();\r\n\r\n  kbnServer.metrics = new Samples(12);\r\n\r\n  server.plugins.good.monitor.on('ops', function (event) {\r\n    let now = Date.now();\r\n    let secSinceLast = (now - lastReport) / 1000;\r\n    lastReport = now;\r\n\r\n    let port = config.get('server.port');\r\n    let requests = _.get(event, ['requests', port, 'total'], 0);\r\n    let requestsPerSecond = requests / secSinceLast;\r\n\r\n    kbnServer.metrics.add({\r\n      heapTotal: _.get(event, 'psmem.heapTotal'),\r\n      heapUsed: _.get(event, 'psmem.heapUsed'),\r\n      load: event.osload,\r\n      responseTimeAvg: _.get(event, ['responseTimes', port, 'avg']),\r\n      responseTimeMax: _.get(event, ['responseTimes', port, 'max']),\r\n      requestsPerSecond: requestsPerSecond\r\n    });\r\n\r\n  });\r\n};\r\n"
      ]
    },
    "mtime": 1465716670889
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/status/Samples.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\n\nfunction Samples(max) {\n  this.vals = {};\n  this.max = max || Infinity;\n  this.length = 0;\n}\n\nSamples.prototype.add = function (sample) {\n  var vals = this.vals;\n  var length = this.length = Math.min(this.length + 1, this.max);\n\n  _.forOwn(sample, function (val, name) {\n    if (val == null) val = null;\n\n    if (!vals[name]) vals[name] = new Array(length);\n    vals[name].unshift([Date.now(), val]);\n    vals[name].length = length;\n  });\n};\n\nSamples.prototype.toJSON = function () {\n  return this.vals;\n};\n\nmodule.exports = Samples;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3N0YXR1cy9TYW1wbGVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUUxQixTQUFTLE9BQU8sQ0FBQyxHQUFHLEVBQUU7QUFDcEIsTUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7QUFDZixNQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxRQUFRLENBQUM7QUFDM0IsTUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7Q0FDakI7O0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEdBQUcsVUFBVSxNQUFNLEVBQUU7QUFDeEMsTUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztBQUNyQixNQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUUvRCxHQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxVQUFVLEdBQUcsRUFBRSxJQUFJLEVBQUU7QUFDcEMsUUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUM7O0FBRTVCLFFBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2hELFFBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN0QyxRQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztHQUM1QixDQUFDLENBQUM7Q0FDSixDQUFDOztBQUVGLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLFlBQVk7QUFDckMsU0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0NBQ2xCLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvc3RhdHVzL1NhbXBsZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5cclxuZnVuY3Rpb24gU2FtcGxlcyhtYXgpIHtcclxuICB0aGlzLnZhbHMgPSB7fTtcclxuICB0aGlzLm1heCA9IG1heCB8fCBJbmZpbml0eTtcclxuICB0aGlzLmxlbmd0aCA9IDA7XHJcbn1cclxuXHJcblNhbXBsZXMucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChzYW1wbGUpIHtcclxuICBsZXQgdmFscyA9IHRoaXMudmFscztcclxuICBsZXQgbGVuZ3RoID0gdGhpcy5sZW5ndGggPSBNYXRoLm1pbih0aGlzLmxlbmd0aCArIDEsIHRoaXMubWF4KTtcclxuXHJcbiAgXy5mb3JPd24oc2FtcGxlLCBmdW5jdGlvbiAodmFsLCBuYW1lKSB7XHJcbiAgICBpZiAodmFsID09IG51bGwpIHZhbCA9IG51bGw7XHJcblxyXG4gICAgaWYgKCF2YWxzW25hbWVdKSB2YWxzW25hbWVdID0gbmV3IEFycmF5KGxlbmd0aCk7XHJcbiAgICB2YWxzW25hbWVdLnVuc2hpZnQoW0RhdGUubm93KCksIHZhbF0pO1xyXG4gICAgdmFsc1tuYW1lXS5sZW5ndGggPSBsZW5ndGg7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5TYW1wbGVzLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMudmFscztcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU2FtcGxlcztcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/status/Samples.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE1B,SAAS,OAAO,CAAC,GAAG,EAAE;AACpB,MAAI,CAAC,IAAI,GAAG,EAAE,CAAC;AACf,MAAI,CAAC,GAAG,GAAG,GAAG,IAAI,QAAQ,CAAC;AAC3B,MAAI,CAAC,MAAM,GAAG,CAAC,CAAC;CACjB;;AAED,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,UAAU,MAAM,EAAE;AACxC,MAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACrB,MAAI,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;;AAE/D,GAAC,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE;AACpC,QAAI,GAAG,IAAI,IAAI,EAAE,GAAG,GAAG,IAAI,CAAC;;AAE5B,QAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;AAChD,QAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;AACtC,QAAI,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC;GAC5B,CAAC,CAAC;CACJ,CAAC;;AAEF,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,YAAY;AACrC,SAAO,IAAI,CAAC,IAAI,CAAC;CAClB,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/status/Samples.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\n\r\nfunction Samples(max) {\r\n  this.vals = {};\r\n  this.max = max || Infinity;\r\n  this.length = 0;\r\n}\r\n\r\nSamples.prototype.add = function (sample) {\r\n  let vals = this.vals;\r\n  let length = this.length = Math.min(this.length + 1, this.max);\r\n\r\n  _.forOwn(sample, function (val, name) {\r\n    if (val == null) val = null;\r\n\r\n    if (!vals[name]) vals[name] = new Array(length);\r\n    vals[name].unshift([Date.now(), val]);\r\n    vals[name].length = length;\r\n  });\r\n};\r\n\r\nSamples.prototype.toJSON = function () {\r\n  return this.vals;\r\n};\r\n\r\nmodule.exports = Samples;\r\n"
      ]
    },
    "mtime": 1465716670873
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/plugins/PluginCollection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "get",
        "inherits",
        "create-class",
        "class-call-check",
        "to-consumable-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _get = require('babel-runtime/helpers/get')['default'];\n\nvar _inherits = require('babel-runtime/helpers/inherits')['default'];\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _toConsumableArray = require('babel-runtime/helpers/to-consumable-array')['default'];\n\nvar _Symbol = require('babel-runtime/core-js/symbol')['default'];\n\nvar _Set = require('babel-runtime/core-js/set')['default'];\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _getIterator = require('babel-runtime/core-js/get-iterator')['default'];\n\nvar _require = require('lodash');\n\nvar get = _require.get;\nvar indexBy = _require.indexBy;\n\nvar inspect = require('util').inspect;\n\nvar PluginApi = require('./PluginApi');\nvar Collection = require('requirefrom')('src')('utils/Collection');\n\nvar byIdCache = _Symbol('byIdCache');\nvar pluginApis = _Symbol('pluginApis');\n\nmodule.exports = (function (_Collection) {\n  _inherits(Plugins, _Collection);\n\n  function Plugins(kbnServer) {\n    _classCallCheck(this, Plugins);\n\n    _get(Object.getPrototypeOf(Plugins.prototype), 'constructor', this).call(this);\n    this.kbnServer = kbnServer;\n    this[pluginApis] = new _Set();\n  }\n\n  _createClass(Plugins, [{\n    key: 'new',\n    value: function _new(path) {\n      var api, output, config, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, product, plugin, enabled;\n\n      return _regeneratorRuntime.async(function _new$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            api = new PluginApi(this.kbnServer, path);\n\n            this[pluginApis].add(api);\n\n            output = [].concat(require(path)(api) || []);\n            config = this.kbnServer.config;\n\n            if (output.length) {\n              context$2$0.next = 6;\n              break;\n            }\n\n            return context$2$0.abrupt('return');\n\n          case 6:\n\n            // clear the byIdCache\n            this[byIdCache] = null;\n\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _iteratorError = undefined;\n            context$2$0.prev = 10;\n            _iterator = _getIterator(output);\n\n          case 12:\n            if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n              context$2$0.next = 26;\n              break;\n            }\n\n            product = _step.value;\n\n            if (!(product instanceof api.Plugin)) {\n              context$2$0.next = 22;\n              break;\n            }\n\n            plugin = product;\n\n            this.add(plugin);\n\n            context$2$0.next = 19;\n            return _regeneratorRuntime.awrap(plugin.readConfig());\n\n          case 19:\n            enabled = context$2$0.sent;\n\n            if (!enabled) this['delete'](plugin);\n            return context$2$0.abrupt('continue', 23);\n\n          case 22:\n            throw new TypeError('unexpected plugin export ' + inspect(product));\n\n          case 23:\n            _iteratorNormalCompletion = true;\n            context$2$0.next = 12;\n            break;\n\n          case 26:\n            context$2$0.next = 32;\n            break;\n\n          case 28:\n            context$2$0.prev = 28;\n            context$2$0.t0 = context$2$0['catch'](10);\n            _didIteratorError = true;\n            _iteratorError = context$2$0.t0;\n\n          case 32:\n            context$2$0.prev = 32;\n            context$2$0.prev = 33;\n\n            if (!_iteratorNormalCompletion && _iterator['return']) {\n              _iterator['return']();\n            }\n\n          case 35:\n            context$2$0.prev = 35;\n\n            if (!_didIteratorError) {\n              context$2$0.next = 38;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 38:\n            return context$2$0.finish(35);\n\n          case 39:\n            return context$2$0.finish(32);\n\n          case 40:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this, [[10, 28, 32, 40], [33,, 35, 39]]);\n    }\n  }, {\n    key: 'getPluginApis',\n    value: function getPluginApis() {\n      return this[pluginApis];\n    }\n  }, {\n    key: 'byId',\n    get: function get() {\n      return this[byIdCache] || (this[byIdCache] = indexBy([].concat(_toConsumableArray(this)), 'id'));\n    }\n  }]);\n\n  return Plugins;\n})(Collection);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3BsdWdpbnMvUGx1Z2luQ29sbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztlQUF1QixPQUFPLENBQUMsUUFBUSxDQUFDOztJQUFsQyxHQUFHLFlBQUgsR0FBRztJQUFFLE9BQU8sWUFBUCxPQUFPOztBQUNsQixJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDOztBQUV0QyxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDdkMsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUM7O0FBRW5FLElBQUksU0FBUyxHQUFHLFFBQU8sV0FBVyxDQUFDLENBQUM7QUFDcEMsSUFBSSxVQUFVLEdBQUcsUUFBTyxZQUFZLENBQUMsQ0FBQzs7QUFFdEMsTUFBTSxDQUFDLE9BQU87WUFBUyxPQUFPOztBQUVqQixXQUZVLE9BQU8sQ0FFaEIsU0FBUyxFQUFFOzBCQUZGLE9BQU87O0FBRzFCLCtCQUhtQixPQUFPLDZDQUdsQjtBQUNSLFFBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0FBQzNCLFFBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxVQUFTLENBQUM7R0FDOUI7O2VBTm9CLE9BQU87O1dBUW5CLGNBQUMsSUFBSTtVQUNSLEdBQUcsRUFHSCxNQUFNLEVBQ04sTUFBTSxrRkFPRCxPQUFPLEVBR1IsTUFBTSxFQUdOLE9BQU87Ozs7O0FBakJYLGVBQUcsR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQzs7QUFDN0MsZ0JBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRXRCLGtCQUFNLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQzVDLGtCQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNOztnQkFFN0IsTUFBTSxDQUFDLE1BQU07Ozs7Ozs7Ozs7QUFHbEIsZ0JBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUM7Ozs7OztxQ0FFSCxNQUFNOzs7Ozs7OztBQUFqQixtQkFBTzs7a0JBRVYsT0FBTyxZQUFZLEdBQUcsQ0FBQyxNQUFNLENBQUE7Ozs7O0FBQzNCLGtCQUFNLEdBQUcsT0FBTzs7QUFDcEIsZ0JBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7Ozs2Q0FFRyxNQUFNLENBQUMsVUFBVSxFQUFFOzs7QUFBbkMsbUJBQU87O0FBQ1gsZ0JBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxVQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7Ozs7a0JBSTlCLElBQUksU0FBUyxDQUFDLDJCQUEyQixHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQUV0RTs7O1dBTVkseUJBQUc7QUFDZCxhQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUN6Qjs7O1NBTk8sZUFBRztBQUNULGFBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxPQUFPLDhCQUFLLElBQUksSUFBRyxJQUFJLENBQUMsQ0FBQSxBQUFDLENBQUM7S0FDeEU7OztTQXJDb0IsT0FBTztHQUFTLFVBQVUsQ0EyQ2hELENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9zZXJ2ZXIvcGx1Z2lucy9QbHVnaW5Db2xsZWN0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHsgZ2V0LCBpbmRleEJ5IH0gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxubGV0IGluc3BlY3QgPSByZXF1aXJlKCd1dGlsJykuaW5zcGVjdDtcclxuXHJcbmxldCBQbHVnaW5BcGkgPSByZXF1aXJlKCcuL1BsdWdpbkFwaScpO1xyXG5sZXQgQ29sbGVjdGlvbiA9IHJlcXVpcmUoJ3JlcXVpcmVmcm9tJykoJ3NyYycpKCd1dGlscy9Db2xsZWN0aW9uJyk7XHJcblxyXG5sZXQgYnlJZENhY2hlID0gU3ltYm9sKCdieUlkQ2FjaGUnKTtcclxubGV0IHBsdWdpbkFwaXMgPSBTeW1ib2woJ3BsdWdpbkFwaXMnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUGx1Z2lucyBleHRlbmRzIENvbGxlY3Rpb24ge1xyXG5cclxuICBjb25zdHJ1Y3RvcihrYm5TZXJ2ZXIpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmtiblNlcnZlciA9IGtiblNlcnZlcjtcclxuICAgIHRoaXNbcGx1Z2luQXBpc10gPSBuZXcgU2V0KCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBuZXcocGF0aCkge1xyXG4gICAgbGV0IGFwaSA9IG5ldyBQbHVnaW5BcGkodGhpcy5rYm5TZXJ2ZXIsIHBhdGgpO1xyXG4gICAgdGhpc1twbHVnaW5BcGlzXS5hZGQoYXBpKTtcclxuXHJcbiAgICBsZXQgb3V0cHV0ID0gW10uY29uY2F0KHJlcXVpcmUocGF0aCkoYXBpKSB8fCBbXSk7XHJcbiAgICBsZXQgY29uZmlnID0gdGhpcy5rYm5TZXJ2ZXIuY29uZmlnO1xyXG5cclxuICAgIGlmICghb3V0cHV0Lmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuICAgIC8vIGNsZWFyIHRoZSBieUlkQ2FjaGVcclxuICAgIHRoaXNbYnlJZENhY2hlXSA9IG51bGw7XHJcblxyXG4gICAgZm9yIChsZXQgcHJvZHVjdCBvZiBvdXRwdXQpIHtcclxuXHJcbiAgICAgIGlmIChwcm9kdWN0IGluc3RhbmNlb2YgYXBpLlBsdWdpbikge1xyXG4gICAgICAgIGxldCBwbHVnaW4gPSBwcm9kdWN0O1xyXG4gICAgICAgIHRoaXMuYWRkKHBsdWdpbik7XHJcblxyXG4gICAgICAgIGxldCBlbmFibGVkID0gYXdhaXQgcGx1Z2luLnJlYWRDb25maWcoKTtcclxuICAgICAgICBpZiAoIWVuYWJsZWQpIHRoaXMuZGVsZXRlKHBsdWdpbik7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3VuZXhwZWN0ZWQgcGx1Z2luIGV4cG9ydCAnICsgaW5zcGVjdChwcm9kdWN0KSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgYnlJZCgpIHtcclxuICAgIHJldHVybiB0aGlzW2J5SWRDYWNoZV0gfHwgKHRoaXNbYnlJZENhY2hlXSA9IGluZGV4QnkoWy4uLnRoaXNdLCAnaWQnKSk7XHJcbiAgfVxyXG5cclxuICBnZXRQbHVnaW5BcGlzKCkge1xyXG4gICAgcmV0dXJuIHRoaXNbcGx1Z2luQXBpc107XHJcbiAgfVxyXG5cclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/plugins/PluginCollection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;;;;;eAAuB,OAAO,CAAC,QAAQ,CAAC;;IAAlC,GAAG,YAAH,GAAG;IAAE,OAAO,YAAP,OAAO;;AAClB,IAAI,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;;AAEtC,IAAI,SAAS,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AACvC,IAAI,UAAU,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,CAAC,kBAAkB,CAAC,CAAC;;AAEnE,IAAI,SAAS,GAAG,QAAO,WAAW,CAAC,CAAC;AACpC,IAAI,UAAU,GAAG,QAAO,YAAY,CAAC,CAAC;;AAEtC,MAAM,CAAC,OAAO;YAAS,OAAO;;AAEjB,WAFU,OAAO,CAEhB,SAAS,EAAE;0BAFF,OAAO;;AAG1B,+BAHmB,OAAO,6CAGlB;AACR,QAAI,CAAC,SAAS,GAAG,SAAS,CAAC;AAC3B,QAAI,CAAC,UAAU,CAAC,GAAG,UAAS,CAAC;GAC9B;;eANoB,OAAO;;WAQnB,cAAC,IAAI;UACR,GAAG,EAGH,MAAM,EACN,MAAM,kFAOD,OAAO,EAGR,MAAM,EAGN,OAAO;;;;;AAjBX,eAAG,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC;;AAC7C,gBAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;;AAEtB,kBAAM,GAAG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;AAC5C,kBAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM;;gBAE7B,MAAM,CAAC,MAAM;;;;;;;;;;AAGlB,gBAAI,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;;;;;;qCAEH,MAAM;;;;;;;;AAAjB,mBAAO;;kBAEV,OAAO,YAAY,GAAG,CAAC,MAAM,CAAA;;;;;AAC3B,kBAAM,GAAG,OAAO;;AACpB,gBAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;;;6CAEG,MAAM,CAAC,UAAU,EAAE;;;AAAnC,mBAAO;;AACX,gBAAI,CAAC,OAAO,EAAE,IAAI,UAAO,CAAC,MAAM,CAAC,CAAC;;;;kBAI9B,IAAI,SAAS,CAAC,2BAA2B,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAEtE;;;WAMY,yBAAG;AACd,aAAO,IAAI,CAAC,UAAU,CAAC,CAAC;KACzB;;;SANO,eAAG;AACT,aAAO,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,GAAG,OAAO,8BAAK,IAAI,IAAG,IAAI,CAAC,CAAA,AAAC,CAAC;KACxE;;;SArCoB,OAAO;GAAS,UAAU,CA2ChD,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/plugins/PluginCollection.js",
      "sourcesContent": [
        "let { get, indexBy } = require('lodash');\r\nlet inspect = require('util').inspect;\r\n\r\nlet PluginApi = require('./PluginApi');\r\nlet Collection = require('requirefrom')('src')('utils/Collection');\r\n\r\nlet byIdCache = Symbol('byIdCache');\r\nlet pluginApis = Symbol('pluginApis');\r\n\r\nmodule.exports = class Plugins extends Collection {\r\n\r\n  constructor(kbnServer) {\r\n    super();\r\n    this.kbnServer = kbnServer;\r\n    this[pluginApis] = new Set();\r\n  }\r\n\r\n  async new(path) {\r\n    let api = new PluginApi(this.kbnServer, path);\r\n    this[pluginApis].add(api);\r\n\r\n    let output = [].concat(require(path)(api) || []);\r\n    let config = this.kbnServer.config;\r\n\r\n    if (!output.length) return;\r\n\r\n    // clear the byIdCache\r\n    this[byIdCache] = null;\r\n\r\n    for (let product of output) {\r\n\r\n      if (product instanceof api.Plugin) {\r\n        let plugin = product;\r\n        this.add(plugin);\r\n\r\n        let enabled = await plugin.readConfig();\r\n        if (!enabled) this.delete(plugin);\r\n        continue;\r\n      }\r\n\r\n      throw new TypeError('unexpected plugin export ' + inspect(product));\r\n    }\r\n  }\r\n\r\n  get byId() {\r\n    return this[byIdCache] || (this[byIdCache] = indexBy([...this], 'id'));\r\n  }\r\n\r\n  getPluginApis() {\r\n    return this[pluginApis];\r\n  }\r\n\r\n};\r\n"
      ]
    },
    "mtime": 1465716670873
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/plugins/PluginApi.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _ = require('lodash');\nvar Plugin = require('./Plugin');\n\nvar _require = require('path');\n\nvar basename = _require.basename;\nvar join = _require.join;\n\nmodule.exports = (function () {\n  function PluginApi(kibana, pluginPath) {\n    _classCallCheck(this, PluginApi);\n\n    this.config = kibana.config;\n    this.rootDir = kibana.rootDir;\n    this['package'] = require(join(pluginPath, 'package.json'));\n    this.autoload = require('../../ui/autoload');\n    this.Plugin = Plugin.scoped(kibana, pluginPath, this['package']);\n  }\n\n  _createClass(PluginApi, [{\n    key: 'uiExports',\n    get: function get() {\n      throw new Error('plugin.uiExports is not defined until initialize phase');\n    }\n  }]);\n\n  return PluginApi;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3BsdWdpbnMvUGx1Z2luQXBpLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLE1BQU0sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7O2VBQ1IsT0FBTyxDQUFDLE1BQU0sQ0FBQzs7SUFBbEMsUUFBUSxZQUFSLFFBQVE7SUFBRSxJQUFJLFlBQUosSUFBSTs7QUFFcEIsTUFBTSxDQUFDLE9BQU87QUFDRCxXQURVLFNBQVMsQ0FDbEIsTUFBTSxFQUFFLFVBQVUsRUFBRTswQkFEWCxTQUFTOztBQUU1QixRQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDNUIsUUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO0FBQzlCLFFBQUksV0FBUSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDekQsUUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUM3QyxRQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxJQUFJLFdBQVEsQ0FBQyxDQUFDO0dBQy9EOztlQVBvQixTQUFTOztTQVNqQixlQUFHO0FBQ2QsWUFBTSxJQUFJLEtBQUssQ0FBQyx3REFBd0QsQ0FBQyxDQUFDO0tBQzNFOzs7U0FYb0IsU0FBUztJQVkvQixDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3BsdWdpbnMvUGx1Z2luQXBpLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxubGV0IFBsdWdpbiA9IHJlcXVpcmUoJy4vUGx1Z2luJyk7XHJcbmxldCB7IGJhc2VuYW1lLCBqb2luIH0gPSByZXF1aXJlKCdwYXRoJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFBsdWdpbkFwaSB7XHJcbiAgY29uc3RydWN0b3Ioa2liYW5hLCBwbHVnaW5QYXRoKSB7XHJcbiAgICB0aGlzLmNvbmZpZyA9IGtpYmFuYS5jb25maWc7XHJcbiAgICB0aGlzLnJvb3REaXIgPSBraWJhbmEucm9vdERpcjtcclxuICAgIHRoaXMucGFja2FnZSA9IHJlcXVpcmUoam9pbihwbHVnaW5QYXRoLCAncGFja2FnZS5qc29uJykpO1xyXG4gICAgdGhpcy5hdXRvbG9hZCA9IHJlcXVpcmUoJy4uLy4uL3VpL2F1dG9sb2FkJyk7XHJcbiAgICB0aGlzLlBsdWdpbiA9IFBsdWdpbi5zY29wZWQoa2liYW5hLCBwbHVnaW5QYXRoLCB0aGlzLnBhY2thZ2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHVpRXhwb3J0cygpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcigncGx1Z2luLnVpRXhwb3J0cyBpcyBub3QgZGVmaW5lZCB1bnRpbCBpbml0aWFsaXplIHBoYXNlJyk7XHJcbiAgfVxyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/plugins/PluginApi.js"
      ],
      "names": [],
      "mappings": ";;;;;;AAAA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;eACR,OAAO,CAAC,MAAM,CAAC;;IAAlC,QAAQ,YAAR,QAAQ;IAAE,IAAI,YAAJ,IAAI;;AAEpB,MAAM,CAAC,OAAO;AACD,WADU,SAAS,CAClB,MAAM,EAAE,UAAU,EAAE;0BADX,SAAS;;AAE5B,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;AAC5B,QAAI,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;AAC9B,QAAI,WAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC,CAAC;AACzD,QAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AAC7C,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,UAAU,EAAE,IAAI,WAAQ,CAAC,CAAC;GAC/D;;eAPoB,SAAS;;SASjB,eAAG;AACd,YAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;KAC3E;;;SAXoB,SAAS;IAY/B,CAAC",
      "file": "D:/backup/oplate/kibana1/src/server/plugins/PluginApi.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet Plugin = require('./Plugin');\r\nlet { basename, join } = require('path');\r\n\r\nmodule.exports = class PluginApi {\r\n  constructor(kibana, pluginPath) {\r\n    this.config = kibana.config;\r\n    this.rootDir = kibana.rootDir;\r\n    this.package = require(join(pluginPath, 'package.json'));\r\n    this.autoload = require('../../ui/autoload');\r\n    this.Plugin = Plugin.scoped(kibana, pluginPath, this.package);\r\n  }\r\n\r\n  get uiExports() {\r\n    throw new Error('plugin.uiExports is not defined until initialize phase');\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670873
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/server/plugins/Plugin.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "get",
        "inherits"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _get = require('babel-runtime/helpers/get')['default'];\n\nvar _inherits = require('babel-runtime/helpers/inherits')['default'];\n\nvar _regeneratorRuntime = require('babel-runtime/regenerator')['default'];\n\nvar _getIterator = require('babel-runtime/core-js/get-iterator')['default'];\n\nvar _ = require('lodash');\nvar Joi = require('joi');\n\nvar _require = require('bluebird');\n\nvar attempt = _require.attempt;\nvar fromNode = _require.fromNode;\n\nvar _require2 = require('path');\n\nvar resolve = _require2.resolve;\n\nvar _require3 = require('util');\n\nvar inherits = _require3.inherits;\n\nvar defaultConfigSchema = Joi.object({\n  enabled: Joi.boolean()['default'](true)\n})['default']();\n\nmodule.exports = (function () {\n  function Plugin(kbnServer, path, pkg, opts) {\n    _classCallCheck(this, Plugin);\n\n    this.kbnServer = kbnServer;\n    this.pkg = pkg;\n    this.path = path;\n\n    this.id = opts.id || pkg.name;\n    this.uiExportsSpecs = opts.uiExports || {};\n    this.requiredIds = opts.require || [];\n    this.version = opts.version || pkg.version;\n    this.publicDir = opts.publicDir !== false ? resolve(path, 'public') : null;\n    this.externalCondition = opts.initCondition || _.constant(true);\n    this.externalInit = opts.init || _.noop;\n    this.getConfigSchema = opts.config || _.noop;\n    this.init = _.once(this.init);\n  }\n\n  _createClass(Plugin, [{\n    key: 'readConfig',\n    value: function readConfig() {\n      var schema, config;\n      return _regeneratorRuntime.async(function readConfig$(context$2$0) {\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            context$2$0.next = 2;\n            return _regeneratorRuntime.awrap(this.getConfigSchema(Joi));\n\n          case 2:\n            schema = context$2$0.sent;\n            config = this.kbnServer.config;\n\n            config.extendSchema(this.id, schema || defaultConfigSchema);\n\n            if (!config.get([this.id, 'enabled'])) {\n              context$2$0.next = 9;\n              break;\n            }\n\n            return context$2$0.abrupt('return', true);\n\n          case 9:\n            config.removeSchema(this.id);\n            return context$2$0.abrupt('return', false);\n\n          case 11:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: 'init',\n    value: function init() {\n      var id, version, kbnServer, config, register;\n      return _regeneratorRuntime.async(function init$(context$2$0) {\n        var _this = this;\n\n        while (1) switch (context$2$0.prev = context$2$0.next) {\n          case 0:\n            id = this.id;\n            version = this.version;\n            kbnServer = this.kbnServer;\n            config = kbnServer.config;\n\n            register = function register(server, options, next) {\n              _this.server = server;\n\n              // bind the server and options to all\n              // apps created by this plugin\n              var _iteratorNormalCompletion = true;\n              var _didIteratorError = false;\n              var _iteratorError = undefined;\n\n              try {\n                for (var _iterator = _getIterator(_this.apps), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  var app = _step.value;\n\n                  app.getInjectedVars = _.partial(app.getInjectedVars, server, options);\n                }\n              } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion && _iterator['return']) {\n                    _iterator['return']();\n                  }\n                } finally {\n                  if (_didIteratorError) {\n                    throw _iteratorError;\n                  }\n                }\n              }\n\n              server.log(['plugins', 'debug'], {\n                tmpl: 'Initializing plugin <%= plugin.toString() %>',\n                plugin: _this\n              });\n\n              if (_this.publicDir) {\n                server.exposeStaticDir('/plugins/' + id + '/{path*}', _this.publicDir);\n              }\n\n              _this.status = kbnServer.status.create(_this);\n              server.expose('status', _this.status);\n\n              attempt(_this.externalInit, [server, options], _this).nodeify(next);\n            };\n\n            register.attributes = { name: id, version: version };\n\n            context$2$0.next = 8;\n            return _regeneratorRuntime.awrap(fromNode(function (cb) {\n              kbnServer.server.register({\n                register: register,\n                options: config.has(id) ? config.get(id) : null\n              }, cb);\n            }));\n\n          case 8:\n\n            // Only change the plugin status to green if the\n            // intial status has not been changed\n            if (this.status.state === 'uninitialized') {\n              this.status.green('Ready');\n            }\n\n          case 9:\n          case 'end':\n            return context$2$0.stop();\n        }\n      }, null, this);\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.pkg;\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this.id + '@' + this.version;\n    }\n  }], [{\n    key: 'scoped',\n    value: function scoped(kbnServer, path, pkg) {\n      return (function (_Plugin) {\n        _inherits(ScopedPlugin, _Plugin);\n\n        function ScopedPlugin(opts) {\n          _classCallCheck(this, ScopedPlugin);\n\n          _get(Object.getPrototypeOf(ScopedPlugin.prototype), 'constructor', this).call(this, kbnServer, path, pkg, opts || {});\n        }\n\n        return ScopedPlugin;\n      })(Plugin);\n    }\n  }]);\n\n  return Plugin;\n})();\n\n// setup the hapi register function and get on with it\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvc2VydmVyL3BsdWdpbnMvUGx1Z2luLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQzs7ZUFDRyxPQUFPLENBQUMsVUFBVSxDQUFDOztJQUF6QyxPQUFPLFlBQVAsT0FBTztJQUFFLFFBQVEsWUFBUixRQUFROztnQkFDTCxPQUFPLENBQUMsTUFBTSxDQUFDOztJQUEzQixPQUFPLGFBQVAsT0FBTzs7Z0JBQ00sT0FBTyxDQUFDLE1BQU0sQ0FBQzs7SUFBNUIsUUFBUSxhQUFSLFFBQVE7O0FBRWQsSUFBTSxtQkFBbUIsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDO0FBQ3JDLFNBQU8sRUFBRSxHQUFHLENBQUMsT0FBTyxFQUFFLFdBQVEsQ0FBQyxJQUFJLENBQUM7Q0FDckMsQ0FBQyxXQUFRLEVBQUUsQ0FBQzs7QUFFYixNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsTUFBTSxDQUNmLFNBQVMsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRTswQkFEbkIsTUFBTTs7QUFFekIsUUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7QUFDM0IsUUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDZixRQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQzs7QUFFakIsUUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDOUIsUUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQztBQUMzQyxRQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDO0FBQ3RDLFFBQUksQ0FBQyxPQUFP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LE1BQU0sQ0FBQyxRQUFRLENBQUM7QUFDeEIsd0JBQVEsRUFBRSxRQUFRO0FBQ2xCLHVCQUFPLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUk7ZUFDaEQsRUFBRSxFQUFFLENBQUMsQ0FBQzthQUNSLENBQUM7Ozs7OztBQUlGLGdCQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLGVBQWUsRUFBRTtBQUN6QyxrQkFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDNUI7Ozs7Ozs7S0FDRjs7O1dBRUssa0JBQUc7QUFDUCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7S0FDakI7OztXQUVPLG9CQUFHO0FBQ1QsYUFBVSxJQUFJLENBQUMsRUFBRSxTQUFJLElBQUksQ0FBQyxPQUFPLENBQUc7S0FDckM7OztXQXhFWSxnQkFBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRTtBQUNsQztrQkFBYSxZQUFZOztBQUNaLGlCQURBLFlBQVksQ0FDWCxJQUFJLEVBQUU7Z0NBRFAsWUFBWTs7QUFFckIscUNBRlMsWUFBWSw2Q0FFZixTQUFTLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFO1NBQ3pDOztlQUhVLFlBQVk7U0FBUyxNQUFNLEVBSXRDO0tBQ0g7OztTQXZCb0IsTUFBTTtJQTBGNUIsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3NlcnZlci9wbHVnaW5zL1BsdWdpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmxldCBKb2kgPSByZXF1aXJlKCdqb2knKTtcclxubGV0IHsgYXR0ZW1wdCwgZnJvbU5vZGUgfSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XHJcbmxldCB7IHJlc29sdmUgfSA9IHJlcXVpcmUoJ3BhdGgnKTtcclxubGV0IHsgaW5oZXJpdHMgfSA9IHJlcXVpcmUoJ3V0aWwnKTtcclxuXHJcbmNvbnN0IGRlZmF1bHRDb25maWdTY2hlbWEgPSBKb2kub2JqZWN0KHtcclxuICBlbmFibGVkOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSlcclxufSkuZGVmYXVsdCgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBQbHVnaW4ge1xyXG4gIGNvbnN0cnVjdG9yKGtiblNlcnZlciwgcGF0aCwgcGtnLCBvcHRzKSB7XHJcbiAgICB0aGlzLmtiblNlcnZlciA9IGtiblNlcnZlcjtcclxuICAgIHRoaXMucGtnID0gcGtnO1xyXG4gICAgdGhpcy5wYXRoID0gcGF0aDtcclxuXHJcbiAgICB0aGlzLmlkID0gb3B0cy5pZCB8fCBwa2cubmFtZTtcclxuICAgIHRoaXMudWlFeHBvcnRzU3BlY3MgPSBvcHRzLnVpRXhwb3J0cyB8fCB7fTtcclxuICAgIHRoaXMucmVxdWlyZWRJZHMgPSBvcHRzLnJlcXVpcmUgfHwgW107XHJcbiAgICB0aGlzLnZlcnNpb24gPSBvcHRzLnZlcnNpb24gfHwgcGtnLnZlcnNpb247XHJcbiAgICB0aGlzLnB1YmxpY0RpciA9IG9wdHMucHVibGljRGlyICE9PSBmYWxzZSA/IHJlc29sdmUocGF0aCwgJ3B1YmxpYycpIDogbnVsbDtcclxuICAgIHRoaXMuZXh0ZXJuYWxDb25kaXRpb24gPSBvcHRzLmluaXRDb25kaXRpb24gfHwgXy5jb25zdGFudCh0cnVlKTtcclxuICAgIHRoaXMuZXh0ZXJuYWxJbml0ID0gb3B0cy5pbml0IHx8IF8ubm9vcDtcclxuICAgIHRoaXMuZ2V0Q29uZmlnU2NoZW1hID0gb3B0cy5jb25maWcgfHwgXy5ub29wO1xyXG4gICAgdGhpcy5pbml0ID0gXy5vbmNlKHRoaXMuaW5pdCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2NvcGVkKGtiblNlcnZlciwgcGF0aCwgcGtnKSB7XHJcbiAgICByZXR1cm4gY2xhc3MgU2NvcGVkUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgICAgY29uc3RydWN0b3Iob3B0cykge1xyXG4gICAgICAgIHN1cGVyKGtiblNlcnZlciwgcGF0aCwgcGtnLCBvcHRzIHx8IHt9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlYWRDb25maWcoKSB7XHJcbiAgICBsZXQgc2NoZW1hID0gYXdhaXQgdGhpcy5nZXRDb25maWdTY2hlbWEoSm9pKTtcclxuICAgIGxldCB7IGNvbmZpZyB9ID0gdGhpcy5rYm5TZXJ2ZXI7XHJcbiAgICBjb25maWcuZXh0ZW5kU2NoZW1hKHRoaXMuaWQsIHNjaGVtYSB8fCBkZWZhdWx0Q29uZmlnU2NoZW1hKTtcclxuXHJcbiAgICBpZiAoY29uZmlnLmdldChbdGhpcy5pZCwgJ2VuYWJsZWQnXSkpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25maWcucmVtb3ZlU2NoZW1hKHRoaXMuaWQpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBpbml0KCkge1xyXG4gICAgbGV0IHsgaWQsIHZlcnNpb24sIGtiblNlcnZlciB9ID0gdGhpcztcclxuICAgIGxldCB7IGNvbmZpZyB9ID0ga2JuU2VydmVyO1xyXG5cclxuICAgIC8vIHNldHVwIHRoZSBoYXBpIHJlZ2lzdGVyIGZ1bmN0aW9uIGFuZCBnZXQgb24gd2l0aCBpdFxyXG4gICAgbGV0IHJlZ2lzdGVyID0gKHNlcnZlciwgb3B0aW9ucywgbmV4dCkgPT4ge1xyXG4gICAgICB0aGlzLnNlcnZlciA9IHNlcnZlcjtcclxuXHJcbiAgICAgIC8vIGJpbmQgdGhlIHNlcnZlciBhbmQgb3B0aW9ucyB0byBhbGxcclxuICAgICAgLy8gYXBwcyBjcmVhdGVkIGJ5IHRoaXMgcGx1Z2luXHJcbiAgICAgIGZvciAobGV0IGFwcCBvZiB0aGlzLmFwcHMpIHtcclxuICAgICAgICBhcHAuZ2V0SW5qZWN0ZWRWYXJzID0gXy5wYXJ0aWFsKGFwcC5nZXRJbmplY3RlZFZhcnMsIHNlcnZlciwgb3B0aW9ucyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNlcnZlci5sb2coWydwbHVnaW5zJywgJ2RlYnVnJ10sIHtcclxuICAgICAgICB0bXBsOiAnSW5pdGlhbGl6aW5nIHBsdWdpbiA8JT0gcGx1Z2luLnRvU3RyaW5nKCkgJT4nLFxyXG4gICAgICAgIHBsdWdpbjogdGhpc1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnB1YmxpY0Rpcikge1xyXG4gICAgICAgIHNlcnZlci5leHBvc2VTdGF0aWNEaXIoYC9wbHVnaW5zLyR7aWR9L3twYXRoKn1gLCB0aGlzLnB1YmxpY0Rpcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc3RhdHVzID0ga2JuU2VydmVyLnN0YXR1cy5jcmVhdGUodGhpcyk7XHJcbiAgICAgIHNlcnZlci5leHBvc2UoJ3N0YXR1cycsIHRoaXMuc3RhdHVzKTtcclxuXHJcbiAgICAgIGF0dGVtcHQodGhpcy5leHRlcm5hbEluaXQsIFtzZXJ2ZXIsIG9wdGlvbnNdLCB0aGlzKS5ub2RlaWZ5KG5leHQpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZWdpc3Rlci5hdHRyaWJ1dGVzID0geyBuYW1lOiBpZCwgdmVyc2lvbjogdmVyc2lvbiB9O1xyXG5cclxuICAgIGF3YWl0IGZyb21Ob2RlKGNiID0+IHtcclxuICAgICAga2JuU2VydmVyLnNlcnZlci5yZWdpc3Rlcih7XHJcbiAgICAgICAgcmVnaXN0ZXI6IHJlZ2lzdGVyLFxyXG4gICAgICAgIG9wdGlvbnM6IGNvbmZpZy5oYXMoaWQpID8gY29uZmlnLmdldChpZCkgOiBudWxsXHJcbiAgICAgIH0sIGNiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9ubHkgY2hhbmdlIHRoZSBwbHVnaW4gc3RhdHVzIHRvIGdyZWVuIGlmIHRoZVxyXG4gICAgLy8gaW50aWFsIHN0YXR1cyBoYXMgbm90IGJlZW4gY2hhbmdlZFxyXG4gICAgaWYgKHRoaXMuc3RhdHVzLnN0YXRlID09PSAndW5pbml0aWFsaXplZCcpIHtcclxuICAgICAgdGhpcy5zdGF0dXMuZ3JlZW4oJ1JlYWR5Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b0pTT04oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wa2c7XHJcbiAgfVxyXG5cclxuICB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmlkfUAke3RoaXMudmVyc2lvbn1gO1xyXG4gIH1cclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/server/plugins/Plugin.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/server/plugins/Plugin.js",
      "sourcesContent": [
        "let _ = require('lodash');\r\nlet Joi = require('joi');\r\nlet { attempt, fromNode } = require('bluebird');\r\nlet { resolve } = require('path');\r\nlet { inherits } = require('util');\r\n\r\nconst defaultConfigSchema = Joi.object({\r\n  enabled: Joi.boolean().default(true)\r\n}).default();\r\n\r\nmodule.exports = class Plugin {\r\n  constructor(kbnServer, path, pkg, opts) {\r\n    this.kbnServer = kbnServer;\r\n    this.pkg = pkg;\r\n    this.path = path;\r\n\r\n    this.id = opts.id || pkg.name;\r\n    this.uiExportsSpecs = opts.uiExports || {};\r\n    this.requiredIds = opts.require || [];\r\n    this.version = opts.version || pkg.version;\r\n    this.publicDir = opts.publicDir !== false ? resolve(path, 'public') : null;\r\n    this.externalCondition = opts.initCondition || _.constant(true);\r\n    this.externalInit = opts.init || _.noop;\r\n    this.getConfigSchema = opts.config || _.noop;\r\n    this.init = _.once(this.init);\r\n  }\r\n\r\n  static scoped(kbnServer, path, pkg) {\r\n    return class ScopedPlugin extends Plugin {\r\n      constructor(opts) {\r\n        super(kbnServer, path, pkg, opts || {});\r\n      }\r\n    };\r\n  }\r\n\r\n  async readConfig() {\r\n    let schema = await this.getConfigSchema(Joi);\r\n    let { config } = this.kbnServer;\r\n    config.extendSchema(this.id, schema || defaultConfigSchema);\r\n\r\n    if (config.get([this.id, 'enabled'])) {\r\n      return true;\r\n    } else {\r\n      config.removeSchema(this.id);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async init() {\r\n    let { id, version, kbnServer } = this;\r\n    let { config } = kbnServer;\r\n\r\n    // setup the hapi register function and get on with it\r\n    let register = (server, options, next) => {\r\n      this.server = server;\r\n\r\n      // bind the server and options to all\r\n      // apps created by this plugin\r\n      for (let app of this.apps) {\r\n        app.getInjectedVars = _.partial(app.getInjectedVars, server, options);\r\n      }\r\n\r\n      server.log(['plugins', 'debug'], {\r\n        tmpl: 'Initializing plugin <%= plugin.toString() %>',\r\n        plugin: this\r\n      });\r\n\r\n      if (this.publicDir) {\r\n        server.exposeStaticDir(`/plugins/${id}/{path*}`, this.publicDir);\r\n      }\r\n\r\n      this.status = kbnServer.status.create(this);\r\n      server.expose('status', this.status);\r\n\r\n      attempt(this.externalInit, [server, options], this).nodeify(next);\r\n    };\r\n\r\n    register.attributes = { name: id, version: version };\r\n\r\n    await fromNode(cb => {\r\n      kbnServer.server.register({\r\n        register: register,\r\n        options: config.has(id) ? config.get(id) : null\r\n      }, cb);\r\n    });\r\n\r\n    // Only change the plugin status to green if the\r\n    // intial status has not been changed\r\n    if (this.status.state === 'uninitialized') {\r\n      this.status.green('Ready');\r\n    }\r\n  }\r\n\r\n  toJSON() {\r\n    return this.pkg;\r\n  }\r\n\r\n  toString() {\r\n    return `${this.id}@${this.version}`;\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1472703418322
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/utils/Collection.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "to-consumable-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = require('babel-runtime/helpers/create-class')['default'];\n\nvar _classCallCheck = require('babel-runtime/helpers/class-call-check')['default'];\n\nvar _toConsumableArray = require('babel-runtime/helpers/to-consumable-array')['default'];\n\nvar _Symbol = require('babel-runtime/core-js/symbol')['default'];\n\nvar _Set = require('babel-runtime/core-js/set')['default'];\n\nvar _Symbol$iterator = require('babel-runtime/core-js/symbol/iterator')['default'];\n\nvar _getIterator = require('babel-runtime/core-js/get-iterator')['default'];\n\nvar _Symbol$species = require('babel-runtime/core-js/symbol/species')['default'];\n\nvar set = _Symbol('internal set');\n\nmodule.exports = (function () {\n  function Collection() {\n    _classCallCheck(this, Collection);\n\n    // Set's have a length of 0, mimic that\n    this[set] = new _Set(arguments[0] || []);\n  }\n\n  /******\r\n   ** Collection API\r\n   ******/\n\n  _createClass(Collection, [{\n    key: 'toArray',\n    value: function toArray() {\n      return [].concat(_toConsumableArray(this.values()));\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return this.toArray();\n    }\n\n    /******\r\n     ** ES Set Api\r\n     ******/\n\n  }, {\n    key: 'add',\n    value: function add(value) {\n      return this[set].add(value);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      return this[set].clear();\n    }\n  }, {\n    key: 'delete',\n    value: function _delete(value) {\n      return this[set]['delete'](value);\n    }\n  }, {\n    key: 'entries',\n    value: function entries() {\n      return this[set].entries();\n    }\n  }, {\n    key: 'forEach',\n    value: function forEach(callbackFn, thisArg) {\n      return this[set].forEach(callbackFn, thisArg);\n    }\n  }, {\n    key: 'has',\n    value: function has(value) {\n      return this[set].has(value);\n    }\n  }, {\n    key: 'keys',\n    value: function keys() {\n      return this[set].keys();\n    }\n  }, {\n    key: 'values',\n    value: function values() {\n      return this[set].values();\n    }\n  }, {\n    key: _Symbol$iterator,\n    value: function value() {\n      return _getIterator(this[set]);\n    }\n  }, {\n    key: 'size',\n    get: function get() {\n      return this[set].size;\n    }\n  }], [{\n    key: _Symbol$species,\n    get: function get() {\n      return Collection;\n    }\n  }]);\n\n  return Collection;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvdXRpbHMvQ29sbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQUFJLEdBQUcsR0FBRyxRQUFPLGNBQWMsQ0FBQyxDQUFDOztBQUVqQyxNQUFNLENBQUMsT0FBTztBQUNELFdBRFUsVUFBVSxHQUNqQjswQkFETyxVQUFVOzs7QUFFN0IsUUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLFNBQVEsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0dBQ3pDOzs7Ozs7ZUFIb0IsVUFBVTs7V0FTeEIsbUJBQUc7QUFDUiwwQ0FBVyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUU7S0FDM0I7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDdkI7Ozs7Ozs7O1dBY0UsYUFBQyxLQUFLLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0I7OztXQUVJLGlCQUFHO0FBQ04sYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7S0FDMUI7OztXQUVLLGlCQUFDLEtBQUssRUFBRTtBQUNaLGFBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDaEM7OztXQUVNLG1CQUFHO0FBQ1IsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDNUI7OztXQUVNLGlCQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUU7QUFDM0IsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUMvQzs7O1dBRUUsYUFBQyxLQUFLLEVBQUU7QUFDVCxhQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDN0I7OztXQUVHLGdCQUFHO0FBQ0wsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7S0FDekI7OztXQUVLLGtCQUFHO0FBQ1AsYUFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7S0FDM0I7OztXQUVnQixpQkFBRztBQUNsQiwwQkFBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQW9CO0tBQ3JDOzs7U0F0Q08sZUFBRztBQUNULGFBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztLQUN2Qjs7O1NBTjBCLGVBQUc7QUFDNUIsYUFBTyxVQUFVLENBQUM7S0FDbkI7OztTQXZCb0IsVUFBVTtJQWdFaEMsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3V0aWxzL0NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxubGV0IHNldCA9IFN5bWJvbCgnaW50ZXJuYWwgc2V0Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIENvbGxlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKCkgeyAvLyBTZXQncyBoYXZlIGEgbGVuZ3RoIG9mIDAsIG1pbWljIHRoYXRcclxuICAgIHRoaXNbc2V0XSA9IG5ldyBTZXQoYXJndW1lbnRzWzBdIHx8IFtdKTtcclxuICB9XHJcblxyXG4gIC8qKioqKipcclxuICAgKiogQ29sbGVjdGlvbiBBUElcclxuICAgKioqKioqL1xyXG5cclxuICB0b0FycmF5KCkge1xyXG4gICAgcmV0dXJuIFsuLi50aGlzLnZhbHVlcygpXTtcclxuICB9XHJcblxyXG4gIHRvSlNPTigpIHtcclxuICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKTtcclxuICB9XHJcblxyXG4gIC8qKioqKipcclxuICAgKiogRVMgU2V0IEFwaVxyXG4gICAqKioqKiovXHJcblxyXG4gIHN0YXRpYyBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHtcclxuICAgIHJldHVybiBDb2xsZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHNpemUoKSB7XHJcbiAgICByZXR1cm4gdGhpc1tzZXRdLnNpemU7XHJcbiAgfVxyXG5cclxuICBhZGQodmFsdWUpIHtcclxuICAgIHJldHVybiB0aGlzW3NldF0uYWRkKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCkge1xyXG4gICAgcmV0dXJuIHRoaXNbc2V0XS5jbGVhcigpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdGhpc1tzZXRdLmRlbGV0ZSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBlbnRyaWVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXNbc2V0XS5lbnRyaWVzKCk7XHJcbiAgfVxyXG5cclxuICBmb3JFYWNoKGNhbGxiYWNrRm4sIHRoaXNBcmcpIHtcclxuICAgIHJldHVybiB0aGlzW3NldF0uZm9yRWFjaChjYWxsYmFja0ZuLCB0aGlzQXJnKTtcclxuICB9XHJcblxyXG4gIGhhcyh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHRoaXNbc2V0XS5oYXModmFsdWUpO1xyXG4gIH1cclxuXHJcbiAga2V5cygpIHtcclxuICAgIHJldHVybiB0aGlzW3NldF0ua2V5cygpO1xyXG4gIH1cclxuXHJcbiAgdmFsdWVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXNbc2V0XS52YWx1ZXMoKTtcclxuICB9XHJcblxyXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xyXG4gICAgcmV0dXJuIHRoaXNbc2V0XVtTeW1ib2wuaXRlcmF0b3JdKCk7XHJcbiAgfVxyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/utils/Collection.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;;;AACA,IAAI,GAAG,GAAG,QAAO,cAAc,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO;AACD,WADU,UAAU,GACjB;0BADO,UAAU;;;AAE7B,QAAI,CAAC,GAAG,CAAC,GAAG,SAAQ,SAAS,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;GACzC;;;;;;eAHoB,UAAU;;WASxB,mBAAG;AACR,0CAAW,IAAI,CAAC,MAAM,EAAE,GAAE;KAC3B;;;WAEK,kBAAG;AACP,aAAO,IAAI,CAAC,OAAO,EAAE,CAAC;KACvB;;;;;;;;WAcE,aAAC,KAAK,EAAE;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAC7B;;;WAEI,iBAAG;AACN,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;KAC1B;;;WAEK,iBAAC,KAAK,EAAE;AACZ,aAAO,IAAI,CAAC,GAAG,CAAC,UAAO,CAAC,KAAK,CAAC,CAAC;KAChC;;;WAEM,mBAAG;AACR,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;KAC5B;;;WAEM,iBAAC,UAAU,EAAE,OAAO,EAAE;AAC3B,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;KAC/C;;;WAEE,aAAC,KAAK,EAAE;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAC7B;;;WAEG,gBAAG;AACL,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;KACzB;;;WAEK,kBAAG;AACP,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;KAC3B;;;WAEgB,iBAAG;AAClB,0BAAO,IAAI,CAAC,GAAG,CAAC,EAAoB;KACrC;;;SAtCO,eAAG;AACT,aAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;KACvB;;;SAN0B,eAAG;AAC5B,aAAO,UAAU,CAAC;KACnB;;;SAvBoB,UAAU;IAgEhC,CAAC",
      "file": "D:/backup/oplate/kibana1/src/utils/Collection.js",
      "sourcesContent": [
        "\r\nlet set = Symbol('internal set');\r\n\r\nmodule.exports = class Collection {\r\n  constructor() { // Set's have a length of 0, mimic that\r\n    this[set] = new Set(arguments[0] || []);\r\n  }\r\n\r\n  /******\r\n   ** Collection API\r\n   ******/\r\n\r\n  toArray() {\r\n    return [...this.values()];\r\n  }\r\n\r\n  toJSON() {\r\n    return this.toArray();\r\n  }\r\n\r\n  /******\r\n   ** ES Set Api\r\n   ******/\r\n\r\n  static get [Symbol.species]() {\r\n    return Collection;\r\n  }\r\n\r\n  get size() {\r\n    return this[set].size;\r\n  }\r\n\r\n  add(value) {\r\n    return this[set].add(value);\r\n  }\r\n\r\n  clear() {\r\n    return this[set].clear();\r\n  }\r\n\r\n  delete(value) {\r\n    return this[set].delete(value);\r\n  }\r\n\r\n  entries() {\r\n    return this[set].entries();\r\n  }\r\n\r\n  forEach(callbackFn, thisArg) {\r\n    return this[set].forEach(callbackFn, thisArg);\r\n  }\r\n\r\n  has(value) {\r\n    return this[set].has(value);\r\n  }\r\n\r\n  keys() {\r\n    return this[set].keys();\r\n  }\r\n\r\n  values() {\r\n    return this[set].values();\r\n  }\r\n\r\n  [Symbol.iterator]() {\r\n    return this[set][Symbol.iterator]();\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716672576
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/ui/autoload.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar resolve = require('path').resolve;\nvar basename = require('path').basename;\nvar readdir = require('fs').readdirSync;\n\nvar utils = require('requirefrom')('src/utils');\nvar fromRoot = utils('fromRoot');\n\nfunction scan(type) {\n  var dir = fromRoot('src/ui/public', type);\n\n  return _.chain(readdir(dir)).reject(function (name) {\n    return name[0] === '.' || name[0] === '_';\n  }).map(function (filename) {\n    var path = resolve(dir, filename);\n    var name = basename(filename, '.js');\n    return 'ui/' + type + '/' + name;\n  }).value();\n}\n\nfunction findStyles() {\n  var base = ['ui/styles/theme.less', 'ui/styles/base.less'];\n  var exclude = ['ui/styles/mixins.less', 'ui/styles/variables.less'];\n  var found = scan('styles', true);\n\n  return _.difference(_.union(base, found), exclude);\n}\n\nexports.reload = function () {\n  exports.directives = scan('directives');\n  exports.filters = scan('filters');\n  exports.styles = findStyles();\n  exports.modules = ['angular', 'ui/chrome', 'ui/chrome/context', 'ui/bind', 'ui/bound_to_config_obj', 'ui/config', 'ui/courier', 'ui/debounce', 'ui/doc_title', 'ui/elastic_textarea', 'ui/es', 'ui/events', 'ui/fancy_forms', 'ui/filter_bar', 'ui/filter_manager', 'ui/index_patterns', 'ui/listen', 'ui/notify', 'ui/parse_query', 'ui/persisted_log', 'ui/private', 'ui/promises', 'ui/safe_confirm', 'ui/state_management/app_state', 'ui/state_management/global_state', 'ui/storage', 'ui/stringify/register', 'ui/styleCompile', 'ui/timefilter', 'ui/timepicker', // TODO: remove this for 5.0\n  'ui/tooltip', 'ui/typeahead', 'ui/url', 'ui/validateDateInterval', 'ui/watch_multi'];\n\n  exports.require = _.flatten([exports.directives, exports.filters, exports.styles, exports.modules]);\n};\n\nexports.reload();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvdWkvYXV0b2xvYWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDNUIsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUN4QyxJQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDO0FBQzFDLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFXLENBQUM7O0FBRTFDLElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNsRCxJQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBRW5DLFNBQVMsSUFBSSxDQUFDLElBQUksRUFBRTtBQUNsQixNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxDQUFDOztBQUU1QyxTQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQzNCLE1BQU0sQ0FBQyxVQUFVLElBQUksRUFBRTtBQUN0QixXQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQztHQUMzQyxDQUFDLENBQ0QsR0FBRyxDQUFDLFVBQVUsUUFBUSxFQUFFO0FBQ3ZCLFFBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDcEMsUUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUN2QyxtQkFBYSxJQUFJLFNBQUksSUFBSSxDQUFHO0dBQzdCLENBQUMsQ0FDRCxLQUFLLEVBQUUsQ0FBQztDQUNWOztBQUVELFNBQVMsVUFBVSxHQUFHO0FBQ3BCLE1BQU0sSUFBSSxHQUFHLENBQUMsc0JBQXNCLEVBQUUscUJBQXFCLENBQUMsQ0FBQztBQUM3RCxNQUFNLE9BQU8sR0FBRyxDQUFDLHVCQUF1QixFQUFFLDBCQUEwQixDQUFDLENBQUM7QUFDdEUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFbkMsU0FBTyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0NBQ3BEOztBQUVELE9BQU8sQ0FBQyxNQUFNLEdBQUcsWUFBWTtBQUMzQixTQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN4QyxTQUFPLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNsQyxTQUFPLENBQUMsTUFBTSxHQUFHLFVBQVUsRUFBRSxDQUFDO0FBQzlCLFNBQU8sQ0FBQyxPQUFPLEdBQUcsQ0FDaEIsU0FBUyxFQUNULFdBQVcsRUFDWCxtQkFBbUIsRUFDbkIsU0FBUyxFQUNULHdCQUF3QixFQUN4QixXQUFXLEVBQ1gsWUFBWSxFQUNaLGFBQWEsRUFDYixjQUFjLEVBQ2QscUJBQXFCLEVBQ3JCLE9BQU8sRUFDUCxXQUFXLEVBQ1gsZ0JBQWdCLEVBQ2hCLGVBQWUsRUFDZixtQkFBbUIsRUFDbkIsbUJBQW1CLEVBQ25CLFdBQVcsRUFDWCxXQUFXLEVBQ1gsZ0JBQWdCLEVBQ2hCLGtCQUFrQixFQUNsQixZQUFZLEVBQ1osYUFBYSxFQUNiLGlCQUFpQixFQUNqQiwrQkFBK0IsRUFDL0Isa0NBQWtDLEVBQ2xDLFlBQVksRUFDWix1QkFBdUIsRUFDdkIsaUJBQWlCLEVBQ2pCLGVBQWUsRUFDZixlQUFlO0FBQ2YsY0FBWSxFQUNaLGNBQWMsRUFDZCxRQUFRLEVBQ1IseUJBQXlCLEVBQ3pCLGdCQUFnQixDQUNqQixDQUFDOztBQUVGLFNBQU8sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUMxQixPQUFPLENBQUMsVUFBVSxFQUNsQixPQUFPLENBQUMsT0FBTyxFQUNmLE9BQU8sQ0FBQyxNQUFNLEVBQ2QsT0FBTyxDQUFDLE9BQU8sQ0FDaEIsQ0FBQyxDQUFDO0NBQ0osQ0FBQzs7QUFFRixPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy91aS9hdXRvbG9hZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuY29uc3QgcmVzb2x2ZSA9IHJlcXVpcmUoJ3BhdGgnKS5yZXNvbHZlO1xyXG5jb25zdCBiYXNlbmFtZSA9IHJlcXVpcmUoJ3BhdGgnKS5iYXNlbmFtZTtcclxuY29uc3QgcmVhZGRpciA9IHJlcXVpcmUoJ2ZzJykucmVhZGRpclN5bmM7XHJcblxyXG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJ3JlcXVpcmVmcm9tJykoJ3NyYy91dGlscycpO1xyXG5jb25zdCBmcm9tUm9vdCA9IHV0aWxzKCdmcm9tUm9vdCcpO1xyXG5cclxuZnVuY3Rpb24gc2Nhbih0eXBlKSB7XHJcbiAgY29uc3QgZGlyID0gZnJvbVJvb3QoJ3NyYy91aS9wdWJsaWMnLCB0eXBlKTtcclxuXHJcbiAgcmV0dXJuIF8uY2hhaW4ocmVhZGRpcihkaXIpKVxyXG4gIC5yZWplY3QoZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgIHJldHVybiBuYW1lWzBdID09PSAnLicgfHwgbmFtZVswXSA9PT0gJ18nO1xyXG4gIH0pXHJcbiAgLm1hcChmdW5jdGlvbiAoZmlsZW5hbWUpIHtcclxuICAgIGNvbnN0IHBhdGggPSByZXNvbHZlKGRpciwgZmlsZW5hbWUpO1xyXG4gICAgY29uc3QgbmFtZSA9IGJhc2VuYW1lKGZpbGVuYW1lLCAnLmpzJyk7XHJcbiAgICByZXR1cm4gYHVpLyR7dHlwZX0vJHtuYW1lfWA7XHJcbiAgfSlcclxuICAudmFsdWUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmluZFN0eWxlcygpIHtcclxuICBjb25zdCBiYXNlID0gWyd1aS9zdHlsZXMvdGhlbWUubGVzcycsICd1aS9zdHlsZXMvYmFzZS5sZXNzJ107XHJcbiAgY29uc3QgZXhjbHVkZSA9IFsndWkvc3R5bGVzL21peGlucy5sZXNzJywgJ3VpL3N0eWxlcy92YXJpYWJsZXMubGVzcyddO1xyXG4gIGNvbnN0IGZvdW5kID0gc2Nhbignc3R5bGVzJywgdHJ1ZSk7XHJcblxyXG4gIHJldHVybiBfLmRpZmZlcmVuY2UoXy51bmlvbihiYXNlLCBmb3VuZCksIGV4Y2x1ZGUpO1xyXG59XHJcblxyXG5leHBvcnRzLnJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICBleHBvcnRzLmRpcmVjdGl2ZXMgPSBzY2FuKCdkaXJlY3RpdmVzJyk7XHJcbiAgZXhwb3J0cy5maWx0ZXJzID0gc2NhbignZmlsdGVycycpO1xyXG4gIGV4cG9ydHMuc3R5bGVzID0gZmluZFN0eWxlcygpO1xyXG4gIGV4cG9ydHMubW9kdWxlcyA9IFtcclxuICAgICdhbmd1bGFyJyxcclxuICAgICd1aS9jaHJvbWUnLFxyXG4gICAgJ3VpL2Nocm9tZS9jb250ZXh0JyxcclxuICAgICd1aS9iaW5kJyxcclxuICAgICd1aS9ib3VuZF90b19jb25maWdfb2JqJyxcclxuICAgICd1aS9jb25maWcnLFxyXG4gICAgJ3VpL2NvdXJpZXInLFxyXG4gICAgJ3VpL2RlYm91bmNlJyxcclxuICAgICd1aS9kb2NfdGl0bGUnLFxyXG4gICAgJ3VpL2VsYXN0aWNfdGV4dGFyZWEnLFxyXG4gICAgJ3VpL2VzJyxcclxuICAgICd1aS9ldmVudHMnLFxyXG4gICAgJ3VpL2ZhbmN5X2Zvcm1zJyxcclxuICAgICd1aS9maWx0ZXJfYmFyJyxcclxuICAgICd1aS9maWx0ZXJfbWFuYWdlcicsXHJcbiAgICAndWkvaW5kZXhfcGF0dGVybnMnLFxyXG4gICAgJ3VpL2xpc3RlbicsXHJcbiAgICAndWkvbm90aWZ5JyxcclxuICAgICd1aS9wYXJzZV9xdWVyeScsXHJcbiAgICAndWkvcGVyc2lzdGVkX2xvZycsXHJcbiAgICAndWkvcHJpdmF0ZScsXHJcbiAgICAndWkvcHJvbWlzZXMnLFxyXG4gICAgJ3VpL3NhZmVfY29uZmlybScsXHJcbiAgICAndWkvc3RhdGVfbWFuYWdlbWVudC9hcHBfc3RhdGUnLFxyXG4gICAgJ3VpL3N0YXRlX21hbmFnZW1lbnQvZ2xvYmFsX3N0YXRlJyxcclxuICAgICd1aS9zdG9yYWdlJyxcclxuICAgICd1aS9zdHJpbmdpZnkvcmVnaXN0ZXInLFxyXG4gICAgJ3VpL3N0eWxlQ29tcGlsZScsXHJcbiAgICAndWkvdGltZWZpbHRlcicsXHJcbiAgICAndWkvdGltZXBpY2tlcicsIC8vIFRPRE86IHJlbW92ZSB0aGlzIGZvciA1LjBcclxuICAgICd1aS90b29sdGlwJyxcclxuICAgICd1aS90eXBlYWhlYWQnLFxyXG4gICAgJ3VpL3VybCcsXHJcbiAgICAndWkvdmFsaWRhdGVEYXRlSW50ZXJ2YWwnLFxyXG4gICAgJ3VpL3dhdGNoX211bHRpJ1xyXG4gIF07XHJcblxyXG4gIGV4cG9ydHMucmVxdWlyZSA9IF8uZmxhdHRlbihbXHJcbiAgICBleHBvcnRzLmRpcmVjdGl2ZXMsXHJcbiAgICBleHBvcnRzLmZpbHRlcnMsXHJcbiAgICBleHBvcnRzLnN0eWxlcyxcclxuICAgIGV4cG9ydHMubW9kdWxlc1xyXG4gIF0pO1xyXG59O1xyXG5cclxuZXhwb3J0cy5yZWxvYWQoKTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/ui/autoload.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC;AACxC,IAAM,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC;AAC1C,IAAM,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC;;AAE1C,IAAM,KAAK,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,CAAC;AAClD,IAAM,QAAQ,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;;AAEnC,SAAS,IAAI,CAAC,IAAI,EAAE;AAClB,MAAM,GAAG,GAAG,QAAQ,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;;AAE5C,SAAO,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAC3B,MAAM,CAAC,UAAU,IAAI,EAAE;AACtB,WAAO,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC;GAC3C,CAAC,CACD,GAAG,CAAC,UAAU,QAAQ,EAAE;AACvB,QAAM,IAAI,GAAG,OAAO,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;AACpC,QAAM,IAAI,GAAG,QAAQ,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;AACvC,mBAAa,IAAI,SAAI,IAAI,CAAG;GAC7B,CAAC,CACD,KAAK,EAAE,CAAC;CACV;;AAED,SAAS,UAAU,GAAG;AACpB,MAAM,IAAI,GAAG,CAAC,sBAAsB,EAAE,qBAAqB,CAAC,CAAC;AAC7D,MAAM,OAAO,GAAG,CAAC,uBAAuB,EAAE,0BAA0B,CAAC,CAAC;AACtE,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;;AAEnC,SAAO,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;CACpD;;AAED,OAAO,CAAC,MAAM,GAAG,YAAY;AAC3B,SAAO,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC;AACxC,SAAO,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC;AAClC,SAAO,CAAC,MAAM,GAAG,UAAU,EAAE,CAAC;AAC9B,SAAO,CAAC,OAAO,GAAG,CAChB,SAAS,EACT,WAAW,EACX,mBAAmB,EACnB,SAAS,EACT,wBAAwB,EACxB,WAAW,EACX,YAAY,EACZ,aAAa,EACb,cAAc,EACd,qBAAqB,EACrB,OAAO,EACP,WAAW,EACX,gBAAgB,EAChB,eAAe,EACf,mBAAmB,EACnB,mBAAmB,EACnB,WAAW,EACX,WAAW,EACX,gBAAgB,EAChB,kBAAkB,EAClB,YAAY,EACZ,aAAa,EACb,iBAAiB,EACjB,+BAA+B,EAC/B,kCAAkC,EAClC,YAAY,EACZ,uBAAuB,EACvB,iBAAiB,EACjB,eAAe,EACf,eAAe;AACf,cAAY,EACZ,cAAc,EACd,QAAQ,EACR,yBAAyB,EACzB,gBAAgB,CACjB,CAAC;;AAEF,SAAO,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,CAC1B,OAAO,CAAC,UAAU,EAClB,OAAO,CAAC,OAAO,EACf,OAAO,CAAC,MAAM,EACd,OAAO,CAAC,OAAO,CAChB,CAAC,CAAC;CACJ,CAAC;;AAEF,OAAO,CAAC,MAAM,EAAE,CAAC",
      "file": "D:/backup/oplate/kibana1/src/ui/autoload.js",
      "sourcesContent": [
        "const _ = require('lodash');\r\nconst resolve = require('path').resolve;\r\nconst basename = require('path').basename;\r\nconst readdir = require('fs').readdirSync;\r\n\r\nconst utils = require('requirefrom')('src/utils');\r\nconst fromRoot = utils('fromRoot');\r\n\r\nfunction scan(type) {\r\n  const dir = fromRoot('src/ui/public', type);\r\n\r\n  return _.chain(readdir(dir))\r\n  .reject(function (name) {\r\n    return name[0] === '.' || name[0] === '_';\r\n  })\r\n  .map(function (filename) {\r\n    const path = resolve(dir, filename);\r\n    const name = basename(filename, '.js');\r\n    return `ui/${type}/${name}`;\r\n  })\r\n  .value();\r\n}\r\n\r\nfunction findStyles() {\r\n  const base = ['ui/styles/theme.less', 'ui/styles/base.less'];\r\n  const exclude = ['ui/styles/mixins.less', 'ui/styles/variables.less'];\r\n  const found = scan('styles', true);\r\n\r\n  return _.difference(_.union(base, found), exclude);\r\n}\r\n\r\nexports.reload = function () {\r\n  exports.directives = scan('directives');\r\n  exports.filters = scan('filters');\r\n  exports.styles = findStyles();\r\n  exports.modules = [\r\n    'angular',\r\n    'ui/chrome',\r\n    'ui/chrome/context',\r\n    'ui/bind',\r\n    'ui/bound_to_config_obj',\r\n    'ui/config',\r\n    'ui/courier',\r\n    'ui/debounce',\r\n    'ui/doc_title',\r\n    'ui/elastic_textarea',\r\n    'ui/es',\r\n    'ui/events',\r\n    'ui/fancy_forms',\r\n    'ui/filter_bar',\r\n    'ui/filter_manager',\r\n    'ui/index_patterns',\r\n    'ui/listen',\r\n    'ui/notify',\r\n    'ui/parse_query',\r\n    'ui/persisted_log',\r\n    'ui/private',\r\n    'ui/promises',\r\n    'ui/safe_confirm',\r\n    'ui/state_management/app_state',\r\n    'ui/state_management/global_state',\r\n    'ui/storage',\r\n    'ui/stringify/register',\r\n    'ui/styleCompile',\r\n    'ui/timefilter',\r\n    'ui/timepicker', // TODO: remove this for 5.0\r\n    'ui/tooltip',\r\n    'ui/typeahead',\r\n    'ui/url',\r\n    'ui/validateDateInterval',\r\n    'ui/watch_multi'\r\n  ];\r\n\r\n  exports.require = _.flatten([\r\n    exports.directives,\r\n    exports.filters,\r\n    exports.styles,\r\n    exports.modules\r\n  ]);\r\n};\r\n\r\nexports.reload();\r\n"
      ]
    },
    "mtime": 1465716670920
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/devMode/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (kibana) {\n  if (!kibana.config.get('env.dev')) return;\n  return new kibana.Plugin({\n    uiExports: {\n      spyModes: ['plugins/devMode/visDebugSpyPanel']\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9kZXZNb2RlL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFDLE1BQU0sRUFBSztBQUMzQixNQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsT0FBTztBQUMxQyxTQUFPLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUN2QixhQUFTLEVBQUU7QUFDVCxjQUFRLEVBQUUsQ0FDUixrQ0FBa0MsQ0FDbkM7S0FDRjtHQUNGLENBQUMsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9wbHVnaW5zL2Rldk1vZGUvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IChraWJhbmEpID0+IHtcclxuICBpZiAoIWtpYmFuYS5jb25maWcuZ2V0KCdlbnYuZGV2JykpIHJldHVybjtcclxuICByZXR1cm4gbmV3IGtpYmFuYS5QbHVnaW4oe1xyXG4gICAgdWlFeHBvcnRzOiB7XHJcbiAgICAgIHNweU1vZGVzOiBbXHJcbiAgICAgICAgJ3BsdWdpbnMvZGV2TW9kZS92aXNEZWJ1Z1NweVBhbmVsJ1xyXG4gICAgICBdXHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/devMode/index.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAC,MAAM,EAAK;AAC3B,MAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,OAAO;AAC1C,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,aAAS,EAAE;AACT,cAAQ,EAAE,CACR,kCAAkC,CACnC;KACF;GACF,CAAC,CAAC;CACJ,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/devMode/index.js",
      "sourcesContent": [
        "module.exports = (kibana) => {\r\n  if (!kibana.config.get('env.dev')) return;\r\n  return new kibana.Plugin({\r\n    uiExports: {\r\n      spyModes: [\r\n        'plugins/devMode/visDebugSpyPanel'\r\n      ]\r\n    }\r\n  });\r\n};\r\n"
      ]
    },
    "mtime": 1465716670264
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "trim",
              "trimRight"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "trim",
                "local": "trim"
              },
              {
                "kind": "named",
                "imported": "trimRight",
                "local": "trimRight"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "methodNotAllowed"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "methodNotAllowed",
                "local": "methodNotAllowed"
              }
            ]
          },
          {
            "source": "./lib/health_check",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "healthCheck"
              }
            ]
          },
          {
            "source": "./lib/expose_client",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "exposeClient"
              }
            ]
          },
          {
            "source": "./lib/create_proxy",
            "imported": [
              "default",
              "createPath"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createProxy"
              },
              {
                "kind": "named",
                "imported": "createPath",
                "local": "createPath"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];\n\nvar _lodash = require('lodash');\n\nvar _boom = require('boom');\n\nvar _libHealth_check = require('./lib/health_check');\n\nvar _libHealth_check2 = _interopRequireDefault(_libHealth_check);\n\nvar _libExpose_client = require('./lib/expose_client');\n\nvar _libExpose_client2 = _interopRequireDefault(_libExpose_client);\n\nvar _libCreate_proxy = require('./lib/create_proxy');\n\nvar _libCreate_proxy2 = _interopRequireDefault(_libCreate_proxy);\n\nmodule.exports = function (_ref) {\n  var Plugin = _ref.Plugin;\n\n  return new Plugin({\n    require: ['kibana'],\n\n    config: function config(Joi) {\n      var array = Joi.array;\n      var boolean = Joi.boolean;\n      var number = Joi.number;\n      var object = Joi.object;\n      var string = Joi.string;\n\n      return object({\n        enabled: boolean()['default'](true),\n        url: string().uri({ scheme: ['http', 'https'] })['default']('http://localhost:9200'),\n        preserveHost: boolean()['default'](true),\n        username: string(),\n        password: string(),\n        shardTimeout: number()['default'](0),\n        requestTimeout: number()['default'](30000),\n        pingTimeout: number()['default'](30000),\n        startupTimeout: number()['default'](5000),\n        ssl: object({\n          verify: boolean()['default'](true),\n          ca: array().single().items(string()),\n          cert: string(),\n          key: string()\n        })['default'](),\n        apiVersion: string()['default']('2.0'),\n        engineVersion: string().valid('^2.3.0')['default']('^2.3.0')\n      })['default']();\n    },\n\n    init: function init(server, options) {\n      var kibanaIndex = server.config().get('kibana.index');\n\n      // Expose the client to the server\n      (0, _libExpose_client2['default'])(server);\n      (0, _libCreate_proxy2['default'])(server, 'GET', '/{paths*}');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/_mget');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/{index}/_search');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/{index}/_field_stats');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/_msearch');\n      (0, _libCreate_proxy2['default'])(server, 'POST', '/_search/scroll');\n\n      function noBulkCheck(_ref2, reply) {\n        var path = _ref2.path;\n\n        if (/\\/_bulk/.test(path)) {\n          return reply({\n            error: 'You can not send _bulk requests to this interface.'\n          }).code(400).takeover();\n        }\n        return reply['continue']();\n      }\n\n      function noDirectIndex(_ref3, reply) {\n        var path = _ref3.path;\n\n        var requestPath = (0, _lodash.trimRight)((0, _lodash.trim)(path), '/');\n        var matchPath = (0, _libCreate_proxy.createPath)(kibanaIndex);\n\n        if (requestPath === matchPath) {\n          return reply((0, _boom.methodNotAllowed)('You cannot modify the primary kibana index through this interface.'));\n        }\n\n        reply['continue']();\n      }\n\n      // These routes are actually used to deal with things such as managing\n      // index patterns and advanced settings, but since hapi treats route\n      // wildcards as zero-or-more, the routes also match the kibana index\n      // itself. The client-side kibana code does not deal with creating nor\n      // destroying the kibana index, so we limit that ability here.\n      (0, _libCreate_proxy2['default'])(server, ['PUT', 'POST', 'DELETE'], '/' + kibanaIndex + '/{paths*}', {\n        pre: [noDirectIndex, noBulkCheck]\n      });\n\n      // Set up the health check service and start it.\n\n      var _healthCheck = (0, _libHealth_check2['default'])(this, server);\n\n      var start = _healthCheck.start;\n      var waitUntilReady = _healthCheck.waitUntilReady;\n\n      server.expose('waitUntilReady', waitUntilReady);\n      start();\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBQWdDLFFBQVE7O29CQUNQLE1BQU07OytCQUVmLG9CQUFvQjs7OztnQ0FDbkIscUJBQXFCOzs7OytCQUNOLG9CQUFvQjs7OztBQUU1RCxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsSUFBVSxFQUFFO01BQVYsTUFBTSxHQUFSLElBQVUsQ0FBUixNQUFNOztBQUNqQyxTQUFPLElBQUksTUFBTSxDQUFDO0FBQ2hCLFdBQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQzs7QUFFbkIsVUFBTSxFQUFBLGdCQUFDLEdBQUcsRUFBRTtVQUNGLEtBQUssR0FBc0MsR0FBRyxDQUE5QyxLQUFLO1VBQUUsT0FBTyxHQUE2QixHQUFHLENBQXZDLE9BQU87VUFBRSxNQUFNLEdBQXFCLEdBQUcsQ0FBOUIsTUFBTTtVQUFFLE1BQU0sR0FBYSxHQUFHLENBQXRCLE1BQU07VUFBRSxNQUFNLEdBQUssR0FBRyxDQUFkLE1BQU07O0FBRTlDLGFBQU8sTUFBTSxDQUFDO0FBQ1osZUFBTyxFQUFFLE9BQU8sRUFBRSxXQUFRLENBQUMsSUFBSSxDQUFDO0FBQ2hDLFdBQUcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxXQUFRLENBQUMsdUJBQXVCLENBQUM7QUFDakYsb0JBQVksRUFBRSxPQUFPLEVBQUUsV0FBUSxDQUFDLElBQUksQ0FBQztBQUNyQyxnQkFBUSxFQUFFLE1BQU0sRUFBRTtBQUNsQixnQkFBUSxFQUFFLE1BQU0sRUFBRTtBQUNsQixvQkFBWSxFQUFFLE1BQU0sRUFBRSxXQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ2pDLHNCQUFjLEVBQUUsTUFBTSxFQUFFLFdBQVEsQ0FBQyxLQUFLLENBQUM7QUFDdkMsbUJBQVcsRUFBRSxN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Y3NlYXJjaC9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRyaW0sIHRyaW1SaWdodCB9IGZyb20gJ2xvZGFzaCc7XHJcbmltcG9ydCB7IG1ldGhvZE5vdEFsbG93ZWQgfSBmcm9tICdib29tJztcclxuXHJcbmltcG9ydCBoZWFsdGhDaGVjayBmcm9tICcuL2xpYi9oZWFsdGhfY2hlY2snO1xyXG5pbXBvcnQgZXhwb3NlQ2xpZW50IGZyb20gJy4vbGliL2V4cG9zZV9jbGllbnQnO1xyXG5pbXBvcnQgY3JlYXRlUHJveHksIHsgY3JlYXRlUGF0aCB9IGZyb20gJy4vbGliL2NyZWF0ZV9wcm94eSc7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh7IFBsdWdpbiB9KSB7XHJcbiAgcmV0dXJuIG5ldyBQbHVnaW4oe1xyXG4gICAgcmVxdWlyZTogWydraWJhbmEnXSxcclxuXHJcbiAgICBjb25maWcoSm9pKSB7XHJcbiAgICAgIGNvbnN0IHsgYXJyYXksIGJvb2xlYW4sIG51bWJlciwgb2JqZWN0LCBzdHJpbmcgfSA9IEpvaTtcclxuXHJcbiAgICAgIHJldHVybiBvYmplY3Qoe1xyXG4gICAgICAgIGVuYWJsZWQ6IGJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxyXG4gICAgICAgIHVybDogc3RyaW5nKCkudXJpKHsgc2NoZW1lOiBbJ2h0dHAnLCAnaHR0cHMnXSB9KS5kZWZhdWx0KCdodHRwOi8vbG9jYWxob3N0OjkyMDAnKSxcclxuICAgICAgICBwcmVzZXJ2ZUhvc3Q6IGJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmcoKSxcclxuICAgICAgICBwYXNzd29yZDogc3RyaW5nKCksXHJcbiAgICAgICAgc2hhcmRUaW1lb3V0OiBudW1iZXIoKS5kZWZhdWx0KDApLFxyXG4gICAgICAgIHJlcXVlc3RUaW1lb3V0OiBudW1iZXIoKS5kZWZhdWx0KDMwMDAwKSxcclxuICAgICAgICBwaW5nVGltZW91dDogbnVtYmVyKCkuZGVmYXVsdCgzMDAwMCksXHJcbiAgICAgICAgc3RhcnR1cFRpbWVvdXQ6IG51bWJlcigpLmRlZmF1bHQoNTAwMCksXHJcbiAgICAgICAgc3NsOiBvYmplY3Qoe1xyXG4gICAgICAgICAgdmVyaWZ5OiBib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcclxuICAgICAgICAgIGNhOiBhcnJheSgpLnNpbmdsZSgpLml0ZW1zKHN0cmluZygpKSxcclxuICAgICAgICAgIGNlcnQ6IHN0cmluZygpLFxyXG4gICAgICAgICAga2V5OiBzdHJpbmcoKVxyXG4gICAgICAgIH0pLmRlZmF1bHQoKSxcclxuICAgICAgICBhcGlWZXJzaW9uOiBzdHJpbmcoKS5kZWZhdWx0KCcyLjAnKSxcclxuICAgICAgICBlbmdpbmVWZXJzaW9uOiBzdHJpbmcoKS52YWxpZCgnXjIuMy4wJykuZGVmYXVsdCgnXjIuMy4wJylcclxuICAgICAgfSkuZGVmYXVsdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0KHNlcnZlciwgb3B0aW9ucykge1xyXG4gICAgICBjb25zdCBraWJhbmFJbmRleCA9IHNlcnZlci5jb25maWcoKS5nZXQoJ2tpYmFuYS5pbmRleCcpO1xyXG5cclxuICAgICAgLy8gRXhwb3NlIHRoZSBjbGllbnQgdG8gdGhlIHNlcnZlclxyXG4gICAgICBleHBvc2VDbGllbnQoc2VydmVyKTtcclxuICAgICAgY3JlYXRlUHJveHkoc2VydmVyLCAnR0VUJywgJy97cGF0aHMqfScpO1xyXG4gICAgICBjcmVhdGVQcm94eShzZXJ2ZXIsICdQT1NUJywgJy9fbWdldCcpO1xyXG4gICAgICBjcmVhdGVQcm94eShzZXJ2ZXIsICdQT1NUJywgJy97aW5kZXh9L19zZWFyY2gnKTtcclxuICAgICAgY3JlYXRlUHJveHkoc2VydmVyLCAnUE9TVCcsICcve2luZGV4fS9fZmllbGRfc3RhdHMnKTtcclxuICAgICAgY3JlYXRlUHJveHkoc2VydmVyLCAnUE9TVCcsICcvX21zZWFyY2gnKTtcclxuICAgICAgY3JlYXRlUHJveHkoc2VydmVyLCAnUE9TVCcsICcvX3NlYXJjaC9zY3JvbGwnKTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIG5vQnVsa0NoZWNrKHsgcGF0aCB9LCByZXBseSkge1xyXG4gICAgICAgIGlmICgvXFwvX2J1bGsvLnRlc3QocGF0aCkpIHtcclxuICAgICAgICAgIHJldHVybiByZXBseSh7XHJcbiAgICAgICAgICAgIGVycm9yOiAnWW91IGNhbiBub3Qgc2VuZCBfYnVsayByZXF1ZXN0cyB0byB0aGlzIGludGVyZmFjZS4nXHJcbiAgICAgICAgICB9KS5jb2RlKDQwMCkudGFrZW92ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcGx5LmNvbnRpbnVlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIG5vRGlyZWN0SW5kZXgoeyBwYXRoIH0sIHJlcGx5KSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdFBhdGggPSB0cmltUmlnaHQodHJpbShwYXRoKSwgJy8nKTtcclxuICAgICAgICBjb25zdCBtYXRjaFBhdGggPSBjcmVhdGVQYXRoKGtpYmFuYUluZGV4KTtcclxuXHJcbiAgICAgICAgaWYgKHJlcXVlc3RQYXRoID09PSBtYXRjaFBhdGgpIHtcclxuICAgICAgICAgIHJldHVybiByZXBseShtZXRob2ROb3RBbGxvd2VkKCdZb3UgY2Fubm90IG1vZGlmeSB0aGUgcHJpbWFyeSBraWJhbmEgaW5kZXggdGhyb3VnaCB0aGlzIGludGVyZmFjZS4nKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXBseS5jb250aW51ZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUaGVzZSByb3V0ZXMgYXJlIGFjdHVhbGx5IHVzZWQgdG8gZGVhbCB3aXRoIHRoaW5ncyBzdWNoIGFzIG1hbmFnaW5nXHJcbiAgICAgIC8vIGluZGV4IHBhdHRlcm5zIGFuZCBhZHZhbmNlZCBzZXR0aW5ncywgYnV0IHNpbmNlIGhhcGkgdHJlYXRzIHJvdXRlXHJcbiAgICAgIC8vIHdpbGRjYXJkcyBhcyB6ZXJvLW9yLW1vcmUsIHRoZSByb3V0ZXMgYWxzbyBtYXRjaCB0aGUga2liYW5hIGluZGV4XHJcbiAgICAgIC8vIGl0c2VsZi4gVGhlIGNsaWVudC1zaWRlIGtpYmFuYSBjb2RlIGRvZXMgbm90IGRlYWwgd2l0aCBjcmVhdGluZyBub3JcclxuICAgICAgLy8gZGVzdHJveWluZyB0aGUga2liYW5hIGluZGV4LCBzbyB3ZSBsaW1pdCB0aGF0IGFiaWxpdHkgaGVyZS5cclxuICAgICAgY3JlYXRlUHJveHkoXHJcbiAgICAgICAgc2VydmVyLFxyXG4gICAgICAgIFsnUFVUJywgJ1BPU1QnLCAnREVMRVRFJ10sXHJcbiAgICAgICAgYC8ke2tpYmFuYUluZGV4fS97cGF0aHMqfWAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJlOiBbIG5vRGlyZWN0SW5kZXgsIG5vQnVsa0NoZWNrIF1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBTZXQgdXAgdGhlIGhlYWx0aCBjaGVjayBzZXJ2aWNlIGFuZCBzdGFydCBpdC5cclxuICAgICAgY29uc3QgeyBzdGFydCwgd2FpdFVudGlsUmVhZHkgfSA9IGhlYWx0aENoZWNrKHRoaXMsIHNlcnZlcik7XHJcbiAgICAgIHNlcnZlci5leHBvc2UoJ3dhaXRVbnRpbFJlYWR5Jywgd2FpdFVudGlsUmVhZHkpO1xyXG4gICAgICBzdGFydCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/index.js",
      "sourcesContent": [
        "import { trim, trimRight } from 'lodash';\r\nimport { methodNotAllowed } from 'boom';\r\n\r\nimport healthCheck from './lib/health_check';\r\nimport exposeClient from './lib/expose_client';\r\nimport createProxy, { createPath } from './lib/create_proxy';\r\n\r\nmodule.exports = function ({ Plugin }) {\r\n  return new Plugin({\r\n    require: ['kibana'],\r\n\r\n    config(Joi) {\r\n      const { array, boolean, number, object, string } = Joi;\r\n\r\n      return object({\r\n        enabled: boolean().default(true),\r\n        url: string().uri({ scheme: ['http', 'https'] }).default('http://localhost:9200'),\r\n        preserveHost: boolean().default(true),\r\n        username: string(),\r\n        password: string(),\r\n        shardTimeout: number().default(0),\r\n        requestTimeout: number().default(30000),\r\n        pingTimeout: number().default(30000),\r\n        startupTimeout: number().default(5000),\r\n        ssl: object({\r\n          verify: boolean().default(true),\r\n          ca: array().single().items(string()),\r\n          cert: string(),\r\n          key: string()\r\n        }).default(),\r\n        apiVersion: string().default('2.0'),\r\n        engineVersion: string().valid('^2.3.0').default('^2.3.0')\r\n      }).default();\r\n    },\r\n\r\n    init(server, options) {\r\n      const kibanaIndex = server.config().get('kibana.index');\r\n\r\n      // Expose the client to the server\r\n      exposeClient(server);\r\n      createProxy(server, 'GET', '/{paths*}');\r\n      createProxy(server, 'POST', '/_mget');\r\n      createProxy(server, 'POST', '/{index}/_search');\r\n      createProxy(server, 'POST', '/{index}/_field_stats');\r\n      createProxy(server, 'POST', '/_msearch');\r\n      createProxy(server, 'POST', '/_search/scroll');\r\n\r\n      function noBulkCheck({ path }, reply) {\r\n        if (/\\/_bulk/.test(path)) {\r\n          return reply({\r\n            error: 'You can not send _bulk requests to this interface.'\r\n          }).code(400).takeover();\r\n        }\r\n        return reply.continue();\r\n      }\r\n\r\n      function noDirectIndex({ path }, reply) {\r\n        const requestPath = trimRight(trim(path), '/');\r\n        const matchPath = createPath(kibanaIndex);\r\n\r\n        if (requestPath === matchPath) {\r\n          return reply(methodNotAllowed('You cannot modify the primary kibana index through this interface.'));\r\n        }\r\n\r\n        reply.continue();\r\n      }\r\n\r\n      // These routes are actually used to deal with things such as managing\r\n      // index patterns and advanced settings, but since hapi treats route\r\n      // wildcards as zero-or-more, the routes also match the kibana index\r\n      // itself. The client-side kibana code does not deal with creating nor\r\n      // destroying the kibana index, so we limit that ability here.\r\n      createProxy(\r\n        server,\r\n        ['PUT', 'POST', 'DELETE'],\r\n        `/${kibanaIndex}/{paths*}`,\r\n        {\r\n          pre: [ noDirectIndex, noBulkCheck ]\r\n        }\r\n      );\r\n\r\n      // Set up the health check service and start it.\r\n      const { start, waitUntilReady } = healthCheck(this, server);\r\n      server.expose('waitUntilReady', waitUntilReady);\r\n      start();\r\n    }\r\n  });\r\n\r\n};\r\n"
      ]
    },
    "mtime": 1465716670279
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/health_check.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar Promise = require('bluebird');\nvar elasticsearch = require('elasticsearch');\nvar exposeClient = require('./expose_client');\nvar migrateConfig = require('./migrate_config');\nvar createKibanaIndex = require('./create_kibana_index');\nvar checkEsVersion = require('./check_es_version');\nvar NoConnections = elasticsearch.errors.NoConnections;\nvar util = require('util');\nvar format = util.format;\n\nvar NO_INDEX = 'no_index';\nvar INITIALIZING = 'initializing';\nvar READY = 'ready';\n\nvar REQUEST_DELAY = 2500;\n\nmodule.exports = function (plugin, server) {\n  var config = server.config();\n  var client = server.plugins.elasticsearch.client;\n\n  plugin.status.yellow('Waiting for Elasticsearch');\n\n  function waitForPong() {\n    return client.ping()['catch'](function (err) {\n      if (!(err instanceof NoConnections)) throw err;\n\n      plugin.status.red(format('Unable to connect to Elasticsearch at %s.', config.get('elasticsearch.url')));\n\n      return Promise.delay(REQUEST_DELAY).then(waitForPong);\n    });\n  }\n\n  // just figure out the current \"health\" of the es setup\n  function getHealth() {\n    return client.cluster.health({\n      timeout: '5s', // tells es to not sit around and wait forever\n      index: config.get('kibana.index'),\n      ignore: [408]\n    }).then(function (resp) {\n      // if \"timed_out\" === true then elasticsearch could not\n      // find any idices matching our filter within 5 seconds\n      if (!resp || resp.timed_out) {\n        return NO_INDEX;\n      }\n\n      // If status === \"red\" that means that index(es) were found\n      // but the shards are not ready for queries\n      if (resp.status === 'red') {\n        return INITIALIZING;\n      }\n\n      return READY;\n    });\n  }\n\n  function waitUntilReady() {\n    return getHealth().then(function (health) {\n      if (health !== READY) {\n        return Promise.delay(REQUEST_DELAY).then(waitUntilReady);\n      }\n    });\n  }\n\n  function waitForShards() {\n    return getHealth().then(function (health) {\n      if (health === NO_INDEX) {\n        plugin.status.yellow('No existing Kibana index found');\n        return createKibanaIndex(server);\n      }\n\n      if (health === INITIALIZING) {\n        plugin.status.red('Elasticsearch is still initializing the kibana index.');\n        return Promise.delay(REQUEST_DELAY).then(waitForShards);\n      }\n\n      // otherwise we are g2g\n      plugin.status.green('Kibana index ready');\n    });\n  }\n\n  function check() {\n    return waitForPong().then(_.partial(checkEsVersion, server)).then(waitForShards).then(_.partial(migrateConfig, server))['catch'](function (err) {\n      return plugin.status.red(err);\n    });\n  }\n\n  var timeoutId = null;\n\n  function scheduleCheck(ms) {\n    if (timeoutId) return;\n\n    var myId = setTimeout(function () {\n      check()['finally'](function () {\n        if (timeoutId === myId) startorRestartChecking();\n      });\n    }, ms);\n\n    timeoutId = myId;\n  }\n\n  function startorRestartChecking() {\n    scheduleCheck(stopChecking() ? REQUEST_DELAY : 1);\n  }\n\n  function stopChecking() {\n    if (!timeoutId) return false;\n    clearTimeout(timeoutId);\n    timeoutId = null;\n    return true;\n  }\n\n  return {\n    waitUntilReady: waitUntilReady,\n    run: check,\n    start: startorRestartChecking,\n    stop: stopChecking,\n    isRunning: function isRunning() {\n      return !!timeoutId;\n    }\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9oZWFsdGhfY2hlY2suanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDNUIsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3BDLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUMvQyxJQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUNoRCxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUNsRCxJQUFNLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQzNELElBQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3JELElBQU0sYUFBYSxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQ3pELElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QixJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDOztBQUUzQixJQUFNLFFBQVEsR0FBRyxVQUFVLENBQUM7QUFDNUIsSUFBTSxZQUFZLEdBQUcsY0FBYyxDQUFDO0FBQ3BDLElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQzs7QUFFdEIsSUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDOztBQUUzQixNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUN6QyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDL0IsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDOztBQUVuRCxRQUFNLENBQUMsTUFBTSxD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LFdBQUssRUFBRSxXQUFRLENBQUMsWUFBWTtBQUMxQixZQUFJLFNBQVMsS0FBSyxJQUFJLEVBQUUsc0JBQXNCLEVBQUUsQ0FBQztPQUNsRCxDQUFDLENBQUM7S0FDSixFQUFFLEVBQUUsQ0FBQyxDQUFDOztBQUVQLGFBQVMsR0FBRyxJQUFJLENBQUM7R0FDbEI7O0FBRUQsV0FBUyxzQkFBc0IsR0FBRztBQUNoQyxpQkFBYSxDQUFDLFlBQVksRUFBRSxHQUFHLGFBQWEsR0FBRyxDQUFDLENBQUMsQ0FBQztHQUNuRDs7QUFFRCxXQUFTLFlBQVksR0FBRztBQUN0QixRQUFJLENBQUMsU0FBUyxFQUFFLE9BQU8sS0FBSyxDQUFDO0FBQzdCLGdCQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDeEIsYUFBUyxHQUFHLElBQUksQ0FBQztBQUNqQixXQUFPLElBQUksQ0FBQztHQUNiOztBQUVELFNBQU87QUFDTCxrQkFBYyxFQUFFLGNBQWM7QUFDOUIsT0FBRyxFQUFFLEtBQUs7QUFDVixTQUFLLEVBQUUsc0JBQXNCO0FBQzdCLFFBQUksRUFBRSxZQUFZO0FBQ2xCLGFBQVMsRUFBRSxxQkFBWTtBQUFFLGFBQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQztLQUFFO0dBQy9DLENBQUM7Q0FFSCxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9oZWFsdGhfY2hlY2suanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmNvbnN0IFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xyXG5jb25zdCBlbGFzdGljc2VhcmNoID0gcmVxdWlyZSgnZWxhc3RpY3NlYXJjaCcpO1xyXG5jb25zdCBleHBvc2VDbGllbnQgPSByZXF1aXJlKCcuL2V4cG9zZV9jbGllbnQnKTtcclxuY29uc3QgbWlncmF0ZUNvbmZpZyA9IHJlcXVpcmUoJy4vbWlncmF0ZV9jb25maWcnKTtcclxuY29uc3QgY3JlYXRlS2liYW5hSW5kZXggPSByZXF1aXJlKCcuL2NyZWF0ZV9raWJhbmFfaW5kZXgnKTtcclxuY29uc3QgY2hlY2tFc1ZlcnNpb24gPSByZXF1aXJlKCcuL2NoZWNrX2VzX3ZlcnNpb24nKTtcclxuY29uc3QgTm9Db25uZWN0aW9ucyA9IGVsYXN0aWNzZWFyY2guZXJyb3JzLk5vQ29ubmVjdGlvbnM7XHJcbmNvbnN0IHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XHJcbmNvbnN0IGZvcm1hdCA9IHV0aWwuZm9ybWF0O1xyXG5cclxuY29uc3QgTk9fSU5ERVggPSAnbm9faW5kZXgnO1xyXG5jb25zdCBJTklUSUFMSVpJTkcgPSAnaW5pdGlhbGl6aW5nJztcclxuY29uc3QgUkVBRFkgPSAncmVhZHknO1xyXG5cclxuY29uc3QgUkVRVUVTVF9ERUxBWSA9IDI1MDA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwbHVnaW4sIHNlcnZlcikge1xyXG4gIGNvbnN0IGNvbmZpZyA9IHNlcnZlci5jb25maWcoKTtcclxuICBjb25zdCBjbGllbnQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNsaWVudDtcclxuXHJcbiAgcGx1Z2luLnN0YXR1cy55ZWxsb3coJ1dhaXRpbmcgZm9yIEVsYXN0aWNzZWFyY2gnKTtcclxuXHJcbiAgZnVuY3Rpb24gd2FpdEZvclBvbmcoKSB7XHJcbiAgICByZXR1cm4gY2xpZW50LnBpbmcoKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIE5vQ29ubmVjdGlvbnMpKSB0aHJvdyBlcnI7XHJcblxyXG4gICAgICBwbHVnaW4uc3RhdHVzLnJlZChmb3JtYXQoJ1VuYWJsZSB0byBjb25uZWN0IHRvIEVsYXN0aWNzZWFyY2ggYXQgJXMuJywgY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC51cmwnKSkpO1xyXG5cclxuICAgICAgcmV0dXJuIFByb21pc2UuZGVsYXkoUkVRVUVTVF9ERUxBWSkudGhlbih3YWl0Rm9yUG9uZyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIGp1c3QgZmlndXJlIG91dCB0aGUgY3VycmVudCBcImhlYWx0aFwiIG9mIHRoZSBlcyBzZXR1cFxyXG4gIGZ1bmN0aW9uIGdldEhlYWx0aCgpIHtcclxuICAgIHJldHVybiBjbGllbnQuY2x1c3Rlci5oZWFsdGgoe1xyXG4gICAgICB0aW1lb3V0OiAnNXMnLCAvLyB0ZWxscyBlcyB0byBub3Qgc2l0IGFyb3VuZCBhbmQgd2FpdCBmb3JldmVyXHJcbiAgICAgIGluZGV4OiBjb25maWcuZ2V0KCdraWJhbmEuaW5kZXgnKSxcclxuICAgICAgaWdub3JlOiBbNDA4XVxyXG4gICAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XHJcbiAgICAgIC8vIGlmIFwidGltZWRfb3V0XCIgPT09IHRydWUgdGhlbiBlbGFzdGljc2VhcmNoIGNvdWxkIG5vdFxyXG4gICAgICAvLyBmaW5kIGFueSBpZGljZXMgbWF0Y2hpbmcgb3VyIGZpbHRlciB3aXRoaW4gNSBzZWNvbmRzXHJcbiAgICAgIGlmICghcmVzcCB8fCByZXNwLnRpbWVkX291dCkge1xyXG4gICAgICAgIHJldHVybiBOT19JTkRFWDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgc3RhdHVzID09PSBcInJlZFwiIHRoYXQgbWVhbnMgdGhhdCBpbmRleChlcykgd2VyZSBmb3VuZFxyXG4gICAgICAvLyBidXQgdGhlIHNoYXJkcyBhcmUgbm90IHJlYWR5IGZvciBxdWVyaWVzXHJcbiAgICAgIGlmIChyZXNwLnN0YXR1cyA9PT0gJ3JlZCcpIHtcclxuICAgICAgICByZXR1cm4gSU5JVElBTElaSU5HO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gUkVBRFk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHdhaXRVbnRpbFJlYWR5KCkge1xyXG4gICAgcmV0dXJuIGdldEhlYWx0aCgpXHJcbiAgICAudGhlbihmdW5jdGlvbiAoaGVhbHRoKSB7XHJcbiAgICAgIGlmIChoZWFsdGggIT09IFJFQURZKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UuZGVsYXkoUkVRVUVTVF9ERUxBWSkudGhlbih3YWl0VW50aWxSZWFkeSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gd2FpdEZvclNoYXJkcygpIHtcclxuICAgIHJldHVybiBnZXRIZWFsdGgoKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gKGhlYWx0aCkge1xyXG4gICAgICBpZiAoaGVhbHRoID09PSBOT19JTkRFWCkge1xyXG4gICAgICAgIHBsdWdpbi5zdGF0dXMueWVsbG93KCdObyBleGlzdGluZyBLaWJhbmEgaW5kZXggZm91bmQnKTtcclxuICAgICAgICByZXR1cm4gY3JlYXRlS2liYW5hSW5kZXgoc2VydmVyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGhlYWx0aCA9PT0gSU5JVElBTElaSU5HKSB7XHJcbiAgICAgICAgcGx1Z2luLnN0YXR1cy5yZWQoJ0VsYXN0aWNzZWFyY2ggaXMgc3RpbGwgaW5pdGlhbGl6aW5nIHRoZSBraWJhbmEgaW5kZXguJyk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UuZGVsYXkoUkVRVUVTVF9ERUxBWSkudGhlbih3YWl0Rm9yU2hhcmRzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gb3RoZXJ3aXNlIHdlIGFyZSBnMmdcclxuICAgICAgcGx1Z2luLnN0YXR1cy5ncmVlbignS2liYW5hIGluZGV4IHJlYWR5Jyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrKCkge1xyXG4gICAgcmV0dXJuIHdhaXRGb3JQb25nKClcclxuICAgIC50aGVuKF8ucGFydGlhbChjaGVja0VzVmVyc2lvbiwgc2VydmVyKSlcclxuICAgIC50aGVuKHdhaXRGb3JTaGFyZHMpXHJcbiAgICAudGhlbihfLnBhcnRpYWwobWlncmF0ZUNvbmZpZywgc2VydmVyKSlcclxuICAgIC5jYXRjaChlcnIgPT4gcGx1Z2luLnN0YXR1cy5yZWQoZXJyKSk7XHJcbiAgfVxyXG5cclxuICBsZXQgdGltZW91dElkID0gbnVsbDtcclxuXHJcbiAgZnVuY3Rpb24gc2NoZWR1bGVDaGVjayhtcykge1xyXG4gICAgaWYgKHRpbWVvdXRJZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IG15SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgY2hlY2soKS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGltZW91dElkID09PSBteUlkKSBzdGFydG9yUmVzdGFydENoZWNraW5nKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgbXMpO1xyXG5cclxuICAgIHRpbWVvdXRJZCA9IG15SWQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdGFydG9yUmVzdGFydENoZWNraW5nKCkge1xyXG4gICAgc2NoZWR1bGVDaGVjayhzdG9wQ2hlY2tpbmcoKSA/IFJFUVVFU1RfREVMQVkgOiAxKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN0b3BDaGVja2luZygpIHtcclxuICAgIGlmICghdGltZW91dElkKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgIHRpbWVvdXRJZCA9IG51bGw7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB3YWl0VW50aWxSZWFkeTogd2FpdFVudGlsUmVhZHksXHJcbiAgICBydW46IGNoZWNrLFxyXG4gICAgc3RhcnQ6IHN0YXJ0b3JSZXN0YXJ0Q2hlY2tpbmcsXHJcbiAgICBzdG9wOiBzdG9wQ2hlY2tpbmcsXHJcbiAgICBpc1J1bm5pbmc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICEhdGltZW91dElkOyB9LFxyXG4gIH07XHJcblxyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/health_check.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/health_check.js",
      "sourcesContent": [
        "const _ = require('lodash');\r\nconst Promise = require('bluebird');\r\nconst elasticsearch = require('elasticsearch');\r\nconst exposeClient = require('./expose_client');\r\nconst migrateConfig = require('./migrate_config');\r\nconst createKibanaIndex = require('./create_kibana_index');\r\nconst checkEsVersion = require('./check_es_version');\r\nconst NoConnections = elasticsearch.errors.NoConnections;\r\nconst util = require('util');\r\nconst format = util.format;\r\n\r\nconst NO_INDEX = 'no_index';\r\nconst INITIALIZING = 'initializing';\r\nconst READY = 'ready';\r\n\r\nconst REQUEST_DELAY = 2500;\r\n\r\nmodule.exports = function (plugin, server) {\r\n  const config = server.config();\r\n  const client = server.plugins.elasticsearch.client;\r\n\r\n  plugin.status.yellow('Waiting for Elasticsearch');\r\n\r\n  function waitForPong() {\r\n    return client.ping().catch(function (err) {\r\n      if (!(err instanceof NoConnections)) throw err;\r\n\r\n      plugin.status.red(format('Unable to connect to Elasticsearch at %s.', config.get('elasticsearch.url')));\r\n\r\n      return Promise.delay(REQUEST_DELAY).then(waitForPong);\r\n    });\r\n  }\r\n\r\n  // just figure out the current \"health\" of the es setup\r\n  function getHealth() {\r\n    return client.cluster.health({\r\n      timeout: '5s', // tells es to not sit around and wait forever\r\n      index: config.get('kibana.index'),\r\n      ignore: [408]\r\n    })\r\n    .then(function (resp) {\r\n      // if \"timed_out\" === true then elasticsearch could not\r\n      // find any idices matching our filter within 5 seconds\r\n      if (!resp || resp.timed_out) {\r\n        return NO_INDEX;\r\n      }\r\n\r\n      // If status === \"red\" that means that index(es) were found\r\n      // but the shards are not ready for queries\r\n      if (resp.status === 'red') {\r\n        return INITIALIZING;\r\n      }\r\n\r\n      return READY;\r\n    });\r\n  }\r\n\r\n  function waitUntilReady() {\r\n    return getHealth()\r\n    .then(function (health) {\r\n      if (health !== READY) {\r\n        return Promise.delay(REQUEST_DELAY).then(waitUntilReady);\r\n      }\r\n    });\r\n  }\r\n\r\n  function waitForShards() {\r\n    return getHealth()\r\n    .then(function (health) {\r\n      if (health === NO_INDEX) {\r\n        plugin.status.yellow('No existing Kibana index found');\r\n        return createKibanaIndex(server);\r\n      }\r\n\r\n      if (health === INITIALIZING) {\r\n        plugin.status.red('Elasticsearch is still initializing the kibana index.');\r\n        return Promise.delay(REQUEST_DELAY).then(waitForShards);\r\n      }\r\n\r\n      // otherwise we are g2g\r\n      plugin.status.green('Kibana index ready');\r\n    });\r\n  }\r\n\r\n  function check() {\r\n    return waitForPong()\r\n    .then(_.partial(checkEsVersion, server))\r\n    .then(waitForShards)\r\n    .then(_.partial(migrateConfig, server))\r\n    .catch(err => plugin.status.red(err));\r\n  }\r\n\r\n  let timeoutId = null;\r\n\r\n  function scheduleCheck(ms) {\r\n    if (timeoutId) return;\r\n\r\n    const myId = setTimeout(function () {\r\n      check().finally(function () {\r\n        if (timeoutId === myId) startorRestartChecking();\r\n      });\r\n    }, ms);\r\n\r\n    timeoutId = myId;\r\n  }\r\n\r\n  function startorRestartChecking() {\r\n    scheduleCheck(stopChecking() ? REQUEST_DELAY : 1);\r\n  }\r\n\r\n  function stopChecking() {\r\n    if (!timeoutId) return false;\r\n    clearTimeout(timeoutId);\r\n    timeoutId = null;\r\n    return true;\r\n  }\r\n\r\n  return {\r\n    waitUntilReady: waitUntilReady,\r\n    run: check,\r\n    start: startorRestartChecking,\r\n    stop: stopChecking,\r\n    isRunning: function () { return !!timeoutId; },\r\n  };\r\n\r\n};\r\n"
      ]
    },
    "mtime": 1465716670326
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/expose_client.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar elasticsearch = require('elasticsearch');\nvar _ = require('lodash');\nvar readFile = function readFile(file) {\n  return require('fs').readFileSync(file, 'utf8');\n};\nvar util = require('util');\nvar url = require('url');\nvar callWithRequest = require('./call_with_request');\n\nmodule.exports = function (server) {\n  var config = server.config();\n\n  function createClient(options) {\n    options = _.defaults(options || {}, {\n      url: config.get('elasticsearch.url'),\n      username: config.get('elasticsearch.username'),\n      password: config.get('elasticsearch.password'),\n      verifySsl: config.get('elasticsearch.ssl.verify'),\n      clientCrt: config.get('elasticsearch.ssl.cert'),\n      clientKey: config.get('elasticsearch.ssl.key'),\n      ca: config.get('elasticsearch.ssl.ca'),\n      apiVersion: config.get('elasticsearch.apiVersion'),\n      pingTimeout: config.get('elasticsearch.pingTimeout'),\n      requestTimeout: config.get('elasticsearch.requestTimeout'),\n      keepAlive: true,\n      auth: true\n    });\n\n    var uri = url.parse(options.url);\n\n    var authorization = undefined;\n    if (options.auth && options.username && options.password) {\n      uri.auth = util.format('%s:%s', options.username, options.password);\n    }\n\n    var ssl = { rejectUnauthorized: options.verifySsl };\n    if (options.clientCrt && options.clientKey) {\n      ssl.cert = readFile(options.clientCrt);\n      ssl.key = readFile(options.clientKey);\n    }\n    if (options.ca) {\n      ssl.ca = options.ca.map(readFile);\n    }\n\n    return new elasticsearch.Client({\n      host: url.format(uri),\n      ssl: ssl,\n      plugins: options.plugins,\n      apiVersion: options.apiVersion,\n      keepAlive: options.keepAlive,\n      pingTimeout: options.pingTimeout,\n      requestTimeout: options.requestTimeout,\n      log: function log() {\n        this.error = function (err) {\n          server.log(['error', 'elasticsearch'], err);\n        };\n        this.warning = function (message) {\n          server.log(['warning', 'elasticsearch'], message);\n        };\n        this.info = _.noop;\n        this.debug = _.noop;\n        this.trace = _.noop;\n        this.close = _.noop;\n      }\n    });\n  }\n\n  var client = createClient();\n  server.on('close', _.bindKey(client, 'close'));\n\n  var noAuthClient = createClient({ auth: false });\n  server.on('close', _.bindKey(noAuthClient, 'close'));\n\n  server.expose('client', client);\n  server.expose('createClient', createClient);\n  server.expose('callWithRequestFactory', callWithRequest);\n  server.expose('callWithRequest', callWithRequest(noAuthClient));\n  server.expose('errors', elasticsearch.errors);\n\n  return client;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9leHBvc2VfY2xpZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQy9DLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM1QixJQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVEsQ0FBSSxJQUFJO1NBQUssT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDO0NBQUEsQ0FBQztBQUNwRSxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzNCLElBQU0sZUFBZSxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDOztBQUV2RCxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFO0FBQ2pDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7QUFFL0IsV0FBUyxZQUFZLENBQUMsT0FBTyxFQUFFO0FBQzdCLFdBQU8sR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sSUFBSSxFQUFFLEVBQUU7QUFDbEMsU0FBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUM7QUFDcEMsY0FBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUM7QUFDOUMsY0FBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUM7QUFDOUMsZUFBUyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUM7QUFDakQsZUFBUyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUM7QUFDL0MsZUFBUyxFQUFFLE1B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RUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0FBQ25ELFFBQU0sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7O0FBRXJELFFBQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ2hDLFFBQU0sQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzVDLFFBQU0sQ0FBQyxNQUFNLENBQUMsd0JBQXdCLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDekQsUUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUNoRSxRQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRTlDLFNBQU8sTUFBTSxDQUFDO0NBRWYsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvZXhwb3NlX2NsaWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGVsYXN0aWNzZWFyY2ggPSByZXF1aXJlKCdlbGFzdGljc2VhcmNoJyk7XHJcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuY29uc3QgcmVhZEZpbGUgPSAoZmlsZSkgPT4gcmVxdWlyZSgnZnMnKS5yZWFkRmlsZVN5bmMoZmlsZSwgJ3V0ZjgnKTtcclxuY29uc3QgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcclxuY29uc3QgdXJsID0gcmVxdWlyZSgndXJsJyk7XHJcbmNvbnN0IGNhbGxXaXRoUmVxdWVzdCA9IHJlcXVpcmUoJy4vY2FsbF93aXRoX3JlcXVlc3QnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHNlcnZlcikge1xyXG4gIGNvbnN0IGNvbmZpZyA9IHNlcnZlci5jb25maWcoKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlQ2xpZW50KG9wdGlvbnMpIHtcclxuICAgIG9wdGlvbnMgPSBfLmRlZmF1bHRzKG9wdGlvbnMgfHwge30sIHtcclxuICAgICAgdXJsOiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnVybCcpLFxyXG4gICAgICB1c2VybmFtZTogY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC51c2VybmFtZScpLFxyXG4gICAgICBwYXNzd29yZDogY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5wYXNzd29yZCcpLFxyXG4gICAgICB2ZXJpZnlTc2w6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc3NsLnZlcmlmeScpLFxyXG4gICAgICBjbGllbnRDcnQ6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc3NsLmNlcnQnKSxcclxuICAgICAgY2xpZW50S2V5OiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnNzbC5rZXknKSxcclxuICAgICAgY2E6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc3NsLmNhJyksXHJcbiAgICAgIGFwaVZlcnNpb246IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guYXBpVmVyc2lvbicpLFxyXG4gICAgICBwaW5nVGltZW91dDogY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5waW5nVGltZW91dCcpLFxyXG4gICAgICByZXF1ZXN0VGltZW91dDogY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5yZXF1ZXN0VGltZW91dCcpLFxyXG4gICAgICBrZWVwQWxpdmU6IHRydWUsXHJcbiAgICAgIGF1dGg6IHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHVyaSA9IHVybC5wYXJzZShvcHRpb25zLnVybCk7XHJcblxyXG4gICAgbGV0IGF1dGhvcml6YXRpb247XHJcbiAgICBpZiAob3B0aW9ucy5hdXRoICYmIG9wdGlvbnMudXNlcm5hbWUgJiYgb3B0aW9ucy5wYXNzd29yZCkge1xyXG4gICAgICB1cmkuYXV0aCA9IHV0aWwuZm9ybWF0KCclczolcycsIG9wdGlvbnMudXNlcm5hbWUsIG9wdGlvbnMucGFzc3dvcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNzbCA9IHsgcmVqZWN0VW5hdXRob3JpemVkOiBvcHRpb25zLnZlcmlmeVNzbCB9O1xyXG4gICAgaWYgKG9wdGlvbnMuY2xpZW50Q3J0ICYmIG9wdGlvbnMuY2xpZW50S2V5KSB7XHJcbiAgICAgIHNzbC5jZXJ0ID0gcmVhZEZpbGUob3B0aW9ucy5jbGllbnRDcnQpO1xyXG4gICAgICBzc2wua2V5ID0gcmVhZEZpbGUob3B0aW9ucy5jbGllbnRLZXkpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuY2EpIHtcclxuICAgICAgc3NsLmNhID0gb3B0aW9ucy5jYS5tYXAocmVhZEZpbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXcgZWxhc3RpY3NlYXJjaC5DbGllbnQoe1xyXG4gICAgICBob3N0OiB1cmwuZm9ybWF0KHVyaSksXHJcbiAgICAgIHNzbDogc3NsLFxyXG4gICAgICBwbHVnaW5zOiBvcHRpb25zLnBsdWdpbnMsXHJcbiAgICAgIGFwaVZlcnNpb246IG9wdGlvbnMuYXBpVmVyc2lvbixcclxuICAgICAga2VlcEFsaXZlOiBvcHRpb25zLmtlZXBBbGl2ZSxcclxuICAgICAgcGluZ1RpbWVvdXQ6IG9wdGlvbnMucGluZ1RpbWVvdXQsXHJcbiAgICAgIHJlcXVlc3RUaW1lb3V0OiBvcHRpb25zLnJlcXVlc3RUaW1lb3V0LFxyXG4gICAgICBsb2c6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgc2VydmVyLmxvZyhbJ2Vycm9yJywgJ2VsYXN0aWNzZWFyY2gnXSwgZXJyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMud2FybmluZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgICBzZXJ2ZXIubG9nKFsnd2FybmluZycsICdlbGFzdGljc2VhcmNoJ10sIG1lc3NhZ2UpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5pbmZvID0gXy5ub29wO1xyXG4gICAgICAgIHRoaXMuZGVidWcgPSBfLm5vb3A7XHJcbiAgICAgICAgdGhpcy50cmFjZSA9IF8ubm9vcDtcclxuICAgICAgICB0aGlzLmNsb3NlID0gXy5ub29wO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNsaWVudCA9IGNyZWF0ZUNsaWVudCgpO1xyXG4gIHNlcnZlci5vbignY2xvc2UnLCBfLmJpbmRLZXkoY2xpZW50LCAnY2xvc2UnKSk7XHJcblxyXG4gIGNvbnN0IG5vQXV0aENsaWVudCA9IGNyZWF0ZUNsaWVudCh7IGF1dGg6IGZhbHNlIH0pO1xyXG4gIHNlcnZlci5vbignY2xvc2UnLCBfLmJpbmRLZXkobm9BdXRoQ2xpZW50LCAnY2xvc2UnKSk7XHJcblxyXG4gIHNlcnZlci5leHBvc2UoJ2NsaWVudCcsIGNsaWVudCk7XHJcbiAgc2VydmVyLmV4cG9zZSgnY3JlYXRlQ2xpZW50JywgY3JlYXRlQ2xpZW50KTtcclxuICBzZXJ2ZXIuZXhwb3NlKCdjYWxsV2l0aFJlcXVlc3RGYWN0b3J5JywgY2FsbFdpdGhSZXF1ZXN0KTtcclxuICBzZXJ2ZXIuZXhwb3NlKCdjYWxsV2l0aFJlcXVlc3QnLCBjYWxsV2l0aFJlcXVlc3Qobm9BdXRoQ2xpZW50KSk7XHJcbiAgc2VydmVyLmV4cG9zZSgnZXJyb3JzJywgZWxhc3RpY3NlYXJjaC5lcnJvcnMpO1xyXG5cclxuICByZXR1cm4gY2xpZW50O1xyXG5cclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/expose_client.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,aAAa,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC/C,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAM,QAAQ,GAAG,SAAX,QAAQ,CAAI,IAAI;SAAK,OAAO,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,CAAC;CAAA,CAAC;AACpE,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,IAAM,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;AAC3B,IAAM,eAAe,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;;AAEvD,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;;AAE/B,WAAS,YAAY,CAAC,OAAO,EAAE;AAC7B,WAAO,GAAG,CAAC,CAAC,QAAQ,CAAC,OAAO,IAAI,EAAE,EAAE;AAClC,SAAG,EAAE,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC;AACpC,cAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,wBAAwB,CAAC;AAC9C,cAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,wBAAwB,CAAC;AAC9C,eAAS,EAAE,MAAM,CAAC,GAAG,CAAC,0BAA0B,CAAC;AACjD,eAAS,EAAE,MAAM,CAAC,GAAG,CAAC,wBAAwB,CAAC;AAC/C,eAAS,EAAE,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC;AAC9C,QAAE,EAAE,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC;AACtC,gBAAU,EAAE,MAAM,CAAC,GAAG,CAAC,0BAA0B,CAAC;AAClD,iBAAW,EAAE,MAAM,CAAC,GAAG,CAAC,2BAA2B,CAAC;AACpD,oBAAc,EAAE,MAAM,CAAC,GAAG,CAAC,8BAA8B,CAAC;AAC1D,eAAS,EAAE,IAAI;AACf,UAAI,EAAE,IAAI;KACX,CAAC,CAAC;;AAEH,QAAM,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;;AAEnC,QAAI,aAAa,YAAA,CAAC;AAClB,QAAI,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ,EAAE;AACxD,SAAG,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;KACrE;;AAED,QAAM,GAAG,GAAG,EAAE,kBAAkB,EAAE,OAAO,CAAC,SAAS,EAAE,CAAC;AACtD,QAAI,OAAO,CAAC,SAAS,IAAI,OAAO,CAAC,SAAS,EAAE;AAC1C,SAAG,CAAC,IAAI,GAAG,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;AACvC,SAAG,CAAC,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;KACvC;AACD,QAAI,OAAO,CAAC,EAAE,EAAE;AACd,SAAG,CAAC,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;KACnC;;AAED,WAAO,IAAI,aAAa,CAAC,MAAM,CAAC;AAC9B,UAAI,EAAE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC;AACrB,SAAG,EAAE,GAAG;AACR,aAAO,EAAE,OAAO,CAAC,OAAO;AACxB,gBAAU,EAAE,OAAO,CAAC,UAAU;AAC9B,eAAS,EAAE,OAAO,CAAC,SAAS;AAC5B,iBAAW,EAAE,OAAO,CAAC,WAAW;AAChC,oBAAc,EAAE,OAAO,CAAC,cAAc;AACtC,SAAG,EAAE,eAAY;AACf,YAAI,CAAC,KAAK,GAAG,UAAU,GAAG,EAAE;AAC1B,gBAAM,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,eAAe,CAAC,EAAE,GAAG,CAAC,CAAC;SAC7C,CAAC;AACF,YAAI,CAAC,OAAO,GAAG,UAAU,OAAO,EAAE;AAChC,gBAAM,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,eAAe,CAAC,EAAE,OAAO,CAAC,CAAC;SACnD,CAAC;AACF,YAAI,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;AACnB,YAAI,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC;AACpB,YAAI,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC;AACpB,YAAI,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC;OACrB;KACF,CAAC,CAAC;GACJ;;AAED,MAAM,MAAM,GAAG,YAAY,EAAE,CAAC;AAC9B,QAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;;AAE/C,MAAM,YAAY,GAAG,YAAY,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;AACnD,QAAM,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC,OAAO,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC,CAAC;;AAErD,QAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;AAChC,QAAM,CAAC,MAAM,CAAC,cAAc,EAAE,YAAY,CAAC,CAAC;AAC5C,QAAM,CAAC,MAAM,CAAC,wBAAwB,EAAE,eAAe,CAAC,CAAC;AACzD,QAAM,CAAC,MAAM,CAAC,iBAAiB,EAAE,eAAe,CAAC,YAAY,CAAC,CAAC,CAAC;AAChE,QAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,aAAa,CAAC,MAAM,CAAC,CAAC;;AAE9C,SAAO,MAAM,CAAC;CAEf,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/expose_client.js",
      "sourcesContent": [
        "const elasticsearch = require('elasticsearch');\r\nconst _ = require('lodash');\r\nconst readFile = (file) => require('fs').readFileSync(file, 'utf8');\r\nconst util = require('util');\r\nconst url = require('url');\r\nconst callWithRequest = require('./call_with_request');\r\n\r\nmodule.exports = function (server) {\r\n  const config = server.config();\r\n\r\n  function createClient(options) {\r\n    options = _.defaults(options || {}, {\r\n      url: config.get('elasticsearch.url'),\r\n      username: config.get('elasticsearch.username'),\r\n      password: config.get('elasticsearch.password'),\r\n      verifySsl: config.get('elasticsearch.ssl.verify'),\r\n      clientCrt: config.get('elasticsearch.ssl.cert'),\r\n      clientKey: config.get('elasticsearch.ssl.key'),\r\n      ca: config.get('elasticsearch.ssl.ca'),\r\n      apiVersion: config.get('elasticsearch.apiVersion'),\r\n      pingTimeout: config.get('elasticsearch.pingTimeout'),\r\n      requestTimeout: config.get('elasticsearch.requestTimeout'),\r\n      keepAlive: true,\r\n      auth: true\r\n    });\r\n\r\n    const uri = url.parse(options.url);\r\n\r\n    let authorization;\r\n    if (options.auth && options.username && options.password) {\r\n      uri.auth = util.format('%s:%s', options.username, options.password);\r\n    }\r\n\r\n    const ssl = { rejectUnauthorized: options.verifySsl };\r\n    if (options.clientCrt && options.clientKey) {\r\n      ssl.cert = readFile(options.clientCrt);\r\n      ssl.key = readFile(options.clientKey);\r\n    }\r\n    if (options.ca) {\r\n      ssl.ca = options.ca.map(readFile);\r\n    }\r\n\r\n    return new elasticsearch.Client({\r\n      host: url.format(uri),\r\n      ssl: ssl,\r\n      plugins: options.plugins,\r\n      apiVersion: options.apiVersion,\r\n      keepAlive: options.keepAlive,\r\n      pingTimeout: options.pingTimeout,\r\n      requestTimeout: options.requestTimeout,\r\n      log: function () {\r\n        this.error = function (err) {\r\n          server.log(['error', 'elasticsearch'], err);\r\n        };\r\n        this.warning = function (message) {\r\n          server.log(['warning', 'elasticsearch'], message);\r\n        };\r\n        this.info = _.noop;\r\n        this.debug = _.noop;\r\n        this.trace = _.noop;\r\n        this.close = _.noop;\r\n      }\r\n    });\r\n  }\r\n\r\n  const client = createClient();\r\n  server.on('close', _.bindKey(client, 'close'));\r\n\r\n  const noAuthClient = createClient({ auth: false });\r\n  server.on('close', _.bindKey(noAuthClient, 'close'));\r\n\r\n  server.expose('client', client);\r\n  server.expose('createClient', createClient);\r\n  server.expose('callWithRequestFactory', callWithRequest);\r\n  server.expose('callWithRequest', callWithRequest(noAuthClient));\r\n  server.expose('errors', elasticsearch.errors);\r\n\r\n  return client;\r\n\r\n};\r\n"
      ]
    },
    "mtime": 1465716670326
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/call_with_request.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar Promise = require('bluebird');\nvar Boom = require('boom');\nvar getBasicAuthRealm = require('./get_basic_auth_realm');\nvar toPath = require('lodash/internal/toPath');\n\nmodule.exports = function (client) {\n  return function (req, endpoint) {\n    var params = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n    if (req.headers.authorization) {\n      _.set(params, 'headers.authorization', req.headers.authorization);\n    }\n    var path = toPath(endpoint);\n    var api = _.get(client, path);\n    var apiContext = _.get(client, path.slice(0, -1));\n    if (_.isEmpty(apiContext)) {\n      apiContext = client;\n    }\n    if (!api) throw new Error('callWithRequest called with an invalid endpoint: ' + endpoint);\n    return api.call(apiContext, params)['catch'](function (err) {\n      if (err.status === 401) {\n        // TODO: The err.message is temporary until we have support for getting headers in the client.\n        // Once we have that, we should be able to pass the contents of the WWW-Authenticate head to getRealm\n        var realm = getBasicAuthRealm(err.message) || 'Authorization Required';\n        var options = { realm: realm };\n        return Promise.reject(Boom.unauthorized('Unauthorized', 'Basic', options));\n      }\n      return Promise.reject(err);\n    });\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9jYWxsX3dpdGhfcmVxdWVzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM1QixJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDcEMsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdCLElBQU0saUJBQWlCLEdBQUcsT0FBTyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDNUQsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLHdCQUF3QixDQUFDLENBQUM7O0FBRWpELE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBQyxNQUFNLEVBQUs7QUFDM0IsU0FBTyxVQUFDLEdBQUcsRUFBRSxRQUFRLEVBQWtCO1FBQWhCLE1BQU0seURBQUcsRUFBRTs7QUFDaEMsUUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRTtBQUM3QixPQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSx1QkFBdUIsRUFBRSxHQUFHLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0tBQ25FO0FBQ0QsUUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzlCLFFBQU0sR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ2hDLFFBQUksVUFBVSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRCxRQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUU7QUFDekIsZ0JBQVUsR0FBRyxNQUFNLENBQUM7S0FDckI7QUFDRCxRQUFJLENBQUMsR0FBRyxFQUFFLE1BQU0sSUFBSSxLQUFLLHVEQUFxRCxRQUFRLENBQUcsQ0FBQztBQUMxRixXQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxTQUMzQixDQUFDLFVBQUMsR0FBRyxFQUFLO0FBQ2QsVUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRTs7O0FBR3RCLFlBQU0sS0FBSyxHQUFHLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSx3QkFBd0IsQ0FBQztBQUN6RSxZQUFNLE9BQU8sR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQztBQUNqQyxlQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxjQUFjLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7T0FDNUU7QUFDRCxhQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDNUIsQ0FBQyxDQUFDO0dBQ04sQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9wbHVnaW5zL2VsYXN0aWNzZWFyY2gvbGliL2NhbGxfd2l0aF9yZXF1ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5jb25zdCBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcclxuY29uc3QgQm9vbSA9IHJlcXVpcmUoJ2Jvb20nKTtcclxuY29uc3QgZ2V0QmFzaWNBdXRoUmVhbG0gPSByZXF1aXJlKCcuL2dldF9iYXNpY19hdXRoX3JlYWxtJyk7XHJcbmNvbnN0IHRvUGF0aCA9IHJlcXVpcmUoJ2xvZGFzaC9pbnRlcm5hbC90b1BhdGgnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKGNsaWVudCkgPT4ge1xyXG4gIHJldHVybiAocmVxLCBlbmRwb2ludCwgcGFyYW1zID0ge30pID0+IHtcclxuICAgIGlmIChyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKSB7XHJcbiAgICAgIF8uc2V0KHBhcmFtcywgJ2hlYWRlcnMuYXV0aG9yaXphdGlvbicsIHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF0aCA9IHRvUGF0aChlbmRwb2ludCk7XHJcbiAgICBjb25zdCBhcGkgPSBfLmdldChjbGllbnQsIHBhdGgpO1xyXG4gICAgbGV0IGFwaUNvbnRleHQgPSBfLmdldChjbGllbnQsIHBhdGguc2xpY2UoMCwgLTEpKTtcclxuICAgIGlmIChfLmlzRW1wdHkoYXBpQ29udGV4dCkpIHtcclxuICAgICAgYXBpQ29udGV4dCA9IGNsaWVudDtcclxuICAgIH1cclxuICAgIGlmICghYXBpKSB0aHJvdyBuZXcgRXJyb3IoYGNhbGxXaXRoUmVxdWVzdCBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIGVuZHBvaW50OiAke2VuZHBvaW50fWApO1xyXG4gICAgcmV0dXJuIGFwaS5jYWxsKGFwaUNvbnRleHQsIHBhcmFtcylcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBpZiAoZXJyLnN0YXR1cyA9PT0gNDAxKSB7XHJcbiAgICAgICAgICAvLyBUT0RPOiBUaGUgZXJyLm1lc3NhZ2UgaXMgdGVtcG9yYXJ5IHVudGlsIHdlIGhhdmUgc3VwcG9ydCBmb3IgZ2V0dGluZyBoZWFkZXJzIGluIHRoZSBjbGllbnQuXHJcbiAgICAgICAgICAvLyBPbmNlIHdlIGhhdmUgdGhhdCwgd2Ugc2hvdWxkIGJlIGFibGUgdG8gcGFzcyB0aGUgY29udGVudHMgb2YgdGhlIFdXVy1BdXRoZW50aWNhdGUgaGVhZCB0byBnZXRSZWFsbVxyXG4gICAgICAgICAgY29uc3QgcmVhbG0gPSBnZXRCYXNpY0F1dGhSZWFsbShlcnIubWVzc2FnZSkgfHwgJ0F1dGhvcml6YXRpb24gUmVxdWlyZWQnO1xyXG4gICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgcmVhbG06IHJlYWxtIH07XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoQm9vbS51bmF1dGhvcml6ZWQoJ1VuYXV0aG9yaXplZCcsICdCYXNpYycsIG9wdGlvbnMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/call_with_request.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAM,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACpC,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,IAAM,iBAAiB,GAAG,OAAO,CAAC,wBAAwB,CAAC,CAAC;AAC5D,IAAM,MAAM,GAAG,OAAO,CAAC,wBAAwB,CAAC,CAAC;;AAEjD,MAAM,CAAC,OAAO,GAAG,UAAC,MAAM,EAAK;AAC3B,SAAO,UAAC,GAAG,EAAE,QAAQ,EAAkB;QAAhB,MAAM,yDAAG,EAAE;;AAChC,QAAI,GAAG,CAAC,OAAO,CAAC,aAAa,EAAE;AAC7B,OAAC,CAAC,GAAG,CAAC,MAAM,EAAE,uBAAuB,EAAE,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;KACnE;AACD,QAAM,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;AAC9B,QAAM,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAChC,QAAI,UAAU,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAClD,QAAI,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AACzB,gBAAU,GAAG,MAAM,CAAC;KACrB;AACD,QAAI,CAAC,GAAG,EAAE,MAAM,IAAI,KAAK,uDAAqD,QAAQ,CAAG,CAAC;AAC1F,WAAO,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,SAC3B,CAAC,UAAC,GAAG,EAAK;AACd,UAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;;;AAGtB,YAAM,KAAK,GAAG,iBAAiB,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,wBAAwB,CAAC;AACzE,YAAM,OAAO,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;AACjC,eAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;OAC5E;AACD,aAAO,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;KAC5B,CAAC,CAAC;GACN,CAAC;CACH,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/call_with_request.js",
      "sourcesContent": [
        "const _ = require('lodash');\r\nconst Promise = require('bluebird');\r\nconst Boom = require('boom');\r\nconst getBasicAuthRealm = require('./get_basic_auth_realm');\r\nconst toPath = require('lodash/internal/toPath');\r\n\r\nmodule.exports = (client) => {\r\n  return (req, endpoint, params = {}) => {\r\n    if (req.headers.authorization) {\r\n      _.set(params, 'headers.authorization', req.headers.authorization);\r\n    }\r\n    const path = toPath(endpoint);\r\n    const api = _.get(client, path);\r\n    let apiContext = _.get(client, path.slice(0, -1));\r\n    if (_.isEmpty(apiContext)) {\r\n      apiContext = client;\r\n    }\r\n    if (!api) throw new Error(`callWithRequest called with an invalid endpoint: ${endpoint}`);\r\n    return api.call(apiContext, params)\r\n      .catch((err) => {\r\n        if (err.status === 401) {\r\n          // TODO: The err.message is temporary until we have support for getting headers in the client.\r\n          // Once we have that, we should be able to pass the contents of the WWW-Authenticate head to getRealm\r\n          const realm = getBasicAuthRealm(err.message) || 'Authorization Required';\r\n          const options = { realm: realm };\r\n          return Promise.reject(Boom.unauthorized('Unauthorized', 'Basic', options));\r\n        }\r\n        return Promise.reject(err);\r\n      });\r\n  };\r\n};\r\n"
      ]
    },
    "mtime": 1465716670311
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/get_basic_auth_realm.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function getBasicAuthRealm(message) {\n  if (!message || typeof message !== 'string') return null;\n\n  var parts = message.match(/Basic\\ realm=\\\\\"(.*)\\\\\"/);\n  if (parts && parts.length === 2) return parts[1];else return null;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9nZXRfYmFzaWNfYXV0aF9yZWFsbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsU0FBUyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUU7QUFDbkQsTUFBSSxDQUFDLE9BQU8sSUFBSSxPQUFPLE9BQU8sS0FBSyxRQUFRLEVBQUUsT0FBTyxJQUFJLENBQUM7O0FBRXpELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUN2RCxNQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUM1QyxPQUFPLElBQUksQ0FBQztDQUNsQixDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9nZXRfYmFzaWNfYXV0aF9yZWFsbS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0QmFzaWNBdXRoUmVhbG0obWVzc2FnZSkge1xyXG4gIGlmICghbWVzc2FnZSB8fCB0eXBlb2YgbWVzc2FnZSAhPT0gJ3N0cmluZycpIHJldHVybiBudWxsO1xyXG5cclxuICBjb25zdCBwYXJ0cyA9IG1lc3NhZ2UubWF0Y2goL0Jhc2ljXFwgcmVhbG09XFxcXFwiKC4qKVxcXFxcIi8pO1xyXG4gIGlmIChwYXJ0cyAmJiBwYXJ0cy5sZW5ndGggPT09IDIpIHJldHVybiBwYXJ0c1sxXTtcclxuICBlbHNlIHJldHVybiBudWxsO1xyXG59OyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/get_basic_auth_realm.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,SAAS,iBAAiB,CAAC,OAAO,EAAE;AACnD,MAAI,CAAC,OAAO,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE,OAAO,IAAI,CAAC;;AAEzD,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;AACvD,MAAI,KAAK,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,KAC5C,OAAO,IAAI,CAAC;CAClB,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/get_basic_auth_realm.js",
      "sourcesContent": [
        "module.exports = function getBasicAuthRealm(message) {\r\n  if (!message || typeof message !== 'string') return null;\r\n\r\n  const parts = message.match(/Basic\\ realm=\\\\\"(.*)\\\\\"/);\r\n  if (parts && parts.length === 2) return parts[1];\r\n  else return null;\r\n};"
      ]
    },
    "mtime": 1465716670326
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/migrate_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar upgrade = require('./upgrade_config');\n\nmodule.exports = function (server) {\n  var config = server.config();\n  var client = server.plugins.elasticsearch.client;\n  var options = {\n    index: config.get('kibana.index'),\n    type: 'config',\n    body: {\n      size: 1000,\n      sort: [{ buildNum: { order: 'desc', ignore_unmapped: true } }]\n    }\n  };\n\n  return client.search(options).then(upgrade(server));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9taWdyYXRlX2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOztBQUU1QyxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFO0FBQ2pDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUM7QUFDbkQsTUFBTSxPQUFPLEdBQUk7QUFDZixTQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7QUFDakMsUUFBSSxFQUFFLFFBQVE7QUFDZCxRQUFJLEVBQUU7QUFDSixVQUFJLEVBQUUsSUFBSTtBQUNWLFVBQUksRUFBRSxDQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBRTtLQUNqRTtHQUNGLENBQUM7O0FBRUYsU0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztDQUNyRCxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9taWdyYXRlX2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHVwZ3JhZGUgPSByZXF1aXJlKCcuL3VwZ3JhZGVfY29uZmlnJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzZXJ2ZXIpIHtcclxuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XHJcbiAgY29uc3QgY2xpZW50ID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jbGllbnQ7XHJcbiAgY29uc3Qgb3B0aW9ucyA9ICB7XHJcbiAgICBpbmRleDogY29uZmlnLmdldCgna2liYW5hLmluZGV4JyksXHJcbiAgICB0eXBlOiAnY29uZmlnJyxcclxuICAgIGJvZHk6IHtcclxuICAgICAgc2l6ZTogMTAwMCxcclxuICAgICAgc29ydDogWyB7IGJ1aWxkTnVtOiB7IG9yZGVyOiAnZGVzYycsIGlnbm9yZV91bm1hcHBlZDogdHJ1ZSB9IH0gXVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiBjbGllbnQuc2VhcmNoKG9wdGlvbnMpLnRoZW4odXBncmFkZShzZXJ2ZXIpKTtcclxufTtcclxuXHJcblxyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/migrate_config.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,OAAO,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;;AAE5C,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,MAAM,OAAO,GAAI;AACf,SAAK,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACjC,QAAI,EAAE,QAAQ;AACd,QAAI,EAAE;AACJ,UAAI,EAAE,IAAI;AACV,UAAI,EAAE,CAAE,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,EAAE,CAAE;KACjE;GACF,CAAC;;AAEF,SAAO,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;CACrD,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/migrate_config.js",
      "sourcesContent": [
        "const upgrade = require('./upgrade_config');\r\n\r\nmodule.exports = function (server) {\r\n  const config = server.config();\r\n  const client = server.plugins.elasticsearch.client;\r\n  const options =  {\r\n    index: config.get('kibana.index'),\r\n    type: 'config',\r\n    body: {\r\n      size: 1000,\r\n      sort: [ { buildNum: { order: 'desc', ignore_unmapped: true } } ]\r\n    }\r\n  };\r\n\r\n  return client.search(options).then(upgrade(server));\r\n};\r\n\r\n\r\n"
      ]
    },
    "mtime": 1465716670342
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/upgrade_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar Promise = require('bluebird');\nvar isUpgradeable = require('./is_upgradeable');\nvar _ = require('lodash');\nvar format = require('util').format;\n\nvar utils = require('requirefrom')('src/utils');\n\nmodule.exports = function (server) {\n  var MAX_INTEGER = Math.pow(2, 53) - 1;\n\n  var client = server.plugins.elasticsearch.client;\n  var config = server.config();\n\n  return function (response) {\n    var newConfig = {};\n\n    // Check to see if there are any doc. If not then we set the build number and id\n    if (response.hits.hits.length === 0) {\n      return client.create({\n        index: config.get('kibana.index'),\n        type: 'config',\n        body: { buildNum: config.get('pkg.buildNum') },\n        id: config.get('pkg.version')\n      });\n    }\n\n    // if we already have a the current version in the index then we need to stop\n    var devConfig = _.find(response.hits.hits, function currentVersion(hit) {\n      return hit._id !== '@@version' && hit._id === config.get('pkg.version');\n    });\n\n    if (devConfig) return Promise.resolve();\n\n    // Look for upgradeable configs. If none of them are upgradeable\n    // then resolve with null.\n    var body = _.find(response.hits.hits, isUpgradeable.bind(null, server));\n    if (!body) return Promise.resolve();\n\n    // if the build number is still the template string (which it wil be in development)\n    // then we need to set it to the max interger. Otherwise we will set it to the build num\n    body._source.buildNum = config.get('pkg.buildNum');\n\n    server.log(['plugin', 'elasticsearch'], {\n      tmpl: 'Upgrade config from <%= prevVersion %> to <%= newVersion %>',\n      prevVersion: body._id,\n      newVersion: config.get('pkg.version')\n    });\n\n    return client.create({\n      index: config.get('kibana.index'),\n      type: 'config',\n      body: body._source,\n      id: config.get('pkg.version')\n    });\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi91cGdyYWRlX2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNwQyxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUNsRCxJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDNUIsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQzs7QUFFdEMsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDOztBQUVsRCxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFO0FBQ2pDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFeEMsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDO0FBQ25ELE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQzs7QUFFL0IsU0FBTyxVQUFVLFFBQVEsRUFBRTtBQUN6QixRQUFNLFNBQVMsR0FBRyxFQUFFLENBQUM7OztBQUdyQixRQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDbkMsYUFBTyxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ25CLGFBQUssRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQztBQUNqQyxZQUFJLEVBQUUsUUFBUTtBQUNkLFlBQUksRUFBRSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxFQUFFO0FBQzlDLFVBQUUsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztPQUM5QixDQUFDLENBQUM7S0FDSjs7O0FBR0QsUUFBTSxTQUFTLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxTQUFTLGNBQWMsQ0FBQyxHQUFHLEVBQUU7QUFDeEUsYUFBTyxHQUFHLENBQUMsR0FBRyxLQUFLLFdBQVcsSUFBSSxHQUFHLENBQUMsR0FBRyxLQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7S0FDekUsQ0FBQyxDQUFDOztBQUVILFFBQUksU0FBUyxFQUFFLE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDOzs7O0FBSXhDLFFBQU0sSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUMxRSxRQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDOzs7O0FBSXBDLFFBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRW5ELFVBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsZUFBZSxDQUFDLEVBQUU7QUFDdEMsVUFBSSxFQUFFLDZEQUE2RDtBQUNuRSxpQkFBVyxFQUFFLElBQUksQ0FBQyxHQUFHO0FBQ3JCLGdCQUFVLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUM7S0FDdEMsQ0FBQyxDQUFDOztBQUVILFdBQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUNuQixXQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7QUFDakMsVUFBSSxFQUFFLFFBQVE7QUFDZCxVQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU87QUFDbEIsUUFBRSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDO0tBQzlCLENBQUMsQ0FBQztHQUNKLENBQUM7Q0FDSCxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi91cGdyYWRlX2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xyXG5jb25zdCBpc1VwZ3JhZGVhYmxlID0gcmVxdWlyZSgnLi9pc191cGdyYWRlYWJsZScpO1xyXG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmNvbnN0IGZvcm1hdCA9IHJlcXVpcmUoJ3V0aWwnKS5mb3JtYXQ7XHJcblxyXG5jb25zdCB1dGlscyA9IHJlcXVpcmUoJ3JlcXVpcmVmcm9tJykoJ3NyYy91dGlscycpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VydmVyKSB7XHJcbiAgY29uc3QgTUFYX0lOVEVHRVIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xyXG5cclxuICBjb25zdCBjbGllbnQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNsaWVudDtcclxuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IG5ld0NvbmZpZyA9IHt9O1xyXG5cclxuICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGVyZSBhcmUgYW55IGRvYy4gSWYgbm90IHRoZW4gd2Ugc2V0IHRoZSBidWlsZCBudW1iZXIgYW5kIGlkXHJcbiAgICBpZiAocmVzcG9uc2UuaGl0cy5oaXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gY2xpZW50LmNyZWF0ZSh7XHJcbiAgICAgICAgaW5kZXg6IGNvbmZpZy5nZXQoJ2tpYmFuYS5pbmRleCcpLFxyXG4gICAgICAgIHR5cGU6ICdjb25maWcnLFxyXG4gICAgICAgIGJvZHk6IHsgYnVpbGROdW06IGNvbmZpZy5nZXQoJ3BrZy5idWlsZE51bScpIH0sXHJcbiAgICAgICAgaWQ6IGNvbmZpZy5nZXQoJ3BrZy52ZXJzaW9uJylcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgd2UgYWxyZWFkeSBoYXZlIGEgdGhlIGN1cnJlbnQgdmVyc2lvbiBpbiB0aGUgaW5kZXggdGhlbiB3ZSBuZWVkIHRvIHN0b3BcclxuICAgIGNvbnN0IGRldkNvbmZpZyA9IF8uZmluZChyZXNwb25zZS5oaXRzLmhpdHMsIGZ1bmN0aW9uIGN1cnJlbnRWZXJzaW9uKGhpdCkge1xyXG4gICAgICByZXR1cm4gaGl0Ll9pZCAhPT0gJ0BAdmVyc2lvbicgJiYgaGl0Ll9pZCA9PT0gY29uZmlnLmdldCgncGtnLnZlcnNpb24nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChkZXZDb25maWcpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuXHJcbiAgICAvLyBMb29rIGZvciB1cGdyYWRlYWJsZSBjb25maWdzLiBJZiBub25lIG9mIHRoZW0gYXJlIHVwZ3JhZGVhYmxlXHJcbiAgICAvLyB0aGVuIHJlc29sdmUgd2l0aCBudWxsLlxyXG4gICAgY29uc3QgYm9keSA9IF8uZmluZChyZXNwb25zZS5oaXRzLmhpdHMsIGlzVXBncmFkZWFibGUuYmluZChudWxsLCBzZXJ2ZXIpKTtcclxuICAgIGlmICghYm9keSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG5cclxuICAgIC8vIGlmIHRoZSBidWlsZCBudW1iZXIgaXMgc3RpbGwgdGhlIHRlbXBsYXRlIHN0cmluZyAod2hpY2ggaXQgd2lsIGJlIGluIGRldmVsb3BtZW50KVxyXG4gICAgLy8gdGhlbiB3ZSBuZWVkIHRvIHNldCBpdCB0byB0aGUgbWF4IGludGVyZ2VyLiBPdGhlcndpc2Ugd2Ugd2lsbCBzZXQgaXQgdG8gdGhlIGJ1aWxkIG51bVxyXG4gICAgYm9keS5fc291cmNlLmJ1aWxkTnVtID0gY29uZmlnLmdldCgncGtnLmJ1aWxkTnVtJyk7XHJcblxyXG4gICAgc2VydmVyLmxvZyhbJ3BsdWdpbicsICdlbGFzdGljc2VhcmNoJ10sIHtcclxuICAgICAgdG1wbDogJ1VwZ3JhZGUgY29uZmlnIGZyb20gPCU9IHByZXZWZXJzaW9uICU+IHRvIDwlPSBuZXdWZXJzaW9uICU+JyxcclxuICAgICAgcHJldlZlcnNpb246IGJvZHkuX2lkLFxyXG4gICAgICBuZXdWZXJzaW9uOiBjb25maWcuZ2V0KCdwa2cudmVyc2lvbicpXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gY2xpZW50LmNyZWF0ZSh7XHJcbiAgICAgIGluZGV4OiBjb25maWcuZ2V0KCdraWJhbmEuaW5kZXgnKSxcclxuICAgICAgdHlwZTogJ2NvbmZpZycsXHJcbiAgICAgIGJvZHk6IGJvZHkuX3NvdXJjZSxcclxuICAgICAgaWQ6IGNvbmZpZy5nZXQoJ3BrZy52ZXJzaW9uJylcclxuICAgIH0pO1xyXG4gIH07XHJcbn07XHJcblxyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/upgrade_config.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACpC,IAAM,aAAa,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AAClD,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;;AAEtC,IAAM,KAAK,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,CAAC;;AAElD,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC;;AAExC,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;;AAE/B,SAAO,UAAU,QAAQ,EAAE;AACzB,QAAM,SAAS,GAAG,EAAE,CAAC;;;AAGrB,QAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACnC,aAAO,MAAM,CAAC,MAAM,CAAC;AACnB,aAAK,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACjC,YAAI,EAAE,QAAQ;AACd,YAAI,EAAE,EAAE,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE;AAC9C,UAAE,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;OAC9B,CAAC,CAAC;KACJ;;;AAGD,QAAM,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,cAAc,CAAC,GAAG,EAAE;AACxE,aAAO,GAAG,CAAC,GAAG,KAAK,WAAW,IAAI,GAAG,CAAC,GAAG,KAAK,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;KACzE,CAAC,CAAC;;AAEH,QAAI,SAAS,EAAE,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;;;;AAIxC,QAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC;AAC1E,QAAI,CAAC,IAAI,EAAE,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;;;;AAIpC,QAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;;AAEnD,UAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,eAAe,CAAC,EAAE;AACtC,UAAI,EAAE,6DAA6D;AACnE,iBAAW,EAAE,IAAI,CAAC,GAAG;AACrB,gBAAU,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;KACtC,CAAC,CAAC;;AAEH,WAAO,MAAM,CAAC,MAAM,CAAC;AACnB,WAAK,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACjC,UAAI,EAAE,QAAQ;AACd,UAAI,EAAE,IAAI,CAAC,OAAO;AAClB,QAAE,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;KAC9B,CAAC,CAAC;GACJ,CAAC;CACH,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/upgrade_config.js",
      "sourcesContent": [
        "const Promise = require('bluebird');\r\nconst isUpgradeable = require('./is_upgradeable');\r\nconst _ = require('lodash');\r\nconst format = require('util').format;\r\n\r\nconst utils = require('requirefrom')('src/utils');\r\n\r\nmodule.exports = function (server) {\r\n  const MAX_INTEGER = Math.pow(2, 53) - 1;\r\n\r\n  const client = server.plugins.elasticsearch.client;\r\n  const config = server.config();\r\n\r\n  return function (response) {\r\n    const newConfig = {};\r\n\r\n    // Check to see if there are any doc. If not then we set the build number and id\r\n    if (response.hits.hits.length === 0) {\r\n      return client.create({\r\n        index: config.get('kibana.index'),\r\n        type: 'config',\r\n        body: { buildNum: config.get('pkg.buildNum') },\r\n        id: config.get('pkg.version')\r\n      });\r\n    }\r\n\r\n    // if we already have a the current version in the index then we need to stop\r\n    const devConfig = _.find(response.hits.hits, function currentVersion(hit) {\r\n      return hit._id !== '@@version' && hit._id === config.get('pkg.version');\r\n    });\r\n\r\n    if (devConfig) return Promise.resolve();\r\n\r\n    // Look for upgradeable configs. If none of them are upgradeable\r\n    // then resolve with null.\r\n    const body = _.find(response.hits.hits, isUpgradeable.bind(null, server));\r\n    if (!body) return Promise.resolve();\r\n\r\n    // if the build number is still the template string (which it wil be in development)\r\n    // then we need to set it to the max interger. Otherwise we will set it to the build num\r\n    body._source.buildNum = config.get('pkg.buildNum');\r\n\r\n    server.log(['plugin', 'elasticsearch'], {\r\n      tmpl: 'Upgrade config from <%= prevVersion %> to <%= newVersion %>',\r\n      prevVersion: body._id,\r\n      newVersion: config.get('pkg.version')\r\n    });\r\n\r\n    return client.create({\r\n      index: config.get('kibana.index'),\r\n      type: 'config',\r\n      body: body._source,\r\n      id: config.get('pkg.version')\r\n    });\r\n  };\r\n};\r\n\r\n"
      ]
    },
    "mtime": 1465716670342
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/is_upgradeable.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar semver = require('semver');\nvar utils = require('requirefrom')('src/utils');\nvar rcVersionRegex = /(\\d+\\.\\d+\\.\\d+)\\-rc(\\d+)/i;\n\nmodule.exports = function (server, doc) {\n  var config = server.config();\n  if (/beta|snapshot/i.test(doc._id)) return false;\n  if (!doc._id) return false;\n  if (doc._id === config.get('pkg.version')) return false;\n\n  var packageRcRelease = Infinity;\n  var rcRelease = Infinity;\n  var packageVersion = config.get('pkg.version');\n  var version = doc._id;\n  var matches = doc._id.match(rcVersionRegex);\n  var packageMatches = config.get('pkg.version').match(rcVersionRegex);\n\n  if (matches) {\n    version = matches[1];\n    rcRelease = parseInt(matches[2], 10);\n  }\n\n  if (packageMatches) {\n    packageVersion = packageMatches[1];\n    packageRcRelease = parseInt(packageMatches[2], 10);\n  }\n\n  try {\n    if (semver.gte(version, packageVersion) && rcRelease >= packageRcRelease) return false;\n  } catch (e) {\n    return false;\n  }\n  return true;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9pc191cGdyYWRlYWJsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNqQyxJQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDbEQsSUFBTSxjQUFjLEdBQUcsMkJBQTJCLENBQUM7O0FBRW5ELE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUUsR0FBRyxFQUFFO0FBQ3RDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixNQUFJLGdCQUFnQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFDakQsTUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFDM0IsTUFBSSxHQUFHLENBQUMsR0FBRyxLQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUM7O0FBRXhELE1BQUksZ0JBQWdCLEdBQUcsUUFBUSxDQUFDO0FBQ2hDLE1BQUksU0FBUyxHQUFHLFFBQVEsQ0FBQztBQUN6QixNQUFJLGNBQWMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQy9DLE1BQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFDdEIsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDOUMsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7O0FBRXZFLE1BQUksT0FBTyxFQUFFO0FBQ1gsV0FBTyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyQixhQUFTLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztHQUN0Qzs7QUFFRCxNQUFJLGNBQWMsRUFBRTtBQUNsQixrQkFBYyxHQUFHLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQyxvQkFBZ0IsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0dBQ3BEOztBQUVELE1BQUk7QUFDRixRQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLGNBQWMsQ0FBQyxJQUFJLFNBQVMsSUFBSSxnQkFBZ0IsRUFBRSxPQUFPLEtBQUssQ0FBQztHQUN4RixDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQ1YsV0FBTyxLQUFLLENBQUM7R0FDZDtBQUNELFNBQU8sSUFBSSxDQUFDO0NBQ2IsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvaXNfdXBncmFkZWFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzZW12ZXIgPSByZXF1aXJlKCdzZW12ZXInKTtcclxuY29uc3QgdXRpbHMgPSByZXF1aXJlKCdyZXF1aXJlZnJvbScpKCdzcmMvdXRpbHMnKTtcclxuY29uc3QgcmNWZXJzaW9uUmVnZXggPSAvKFxcZCtcXC5cXGQrXFwuXFxkKylcXC1yYyhcXGQrKS9pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VydmVyLCBkb2MpIHtcclxuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XHJcbiAgaWYgKC9iZXRhfHNuYXBzaG90L2kudGVzdChkb2MuX2lkKSkgcmV0dXJuIGZhbHNlO1xyXG4gIGlmICghZG9jLl9pZCkgcmV0dXJuIGZhbHNlO1xyXG4gIGlmIChkb2MuX2lkID09PSBjb25maWcuZ2V0KCdwa2cudmVyc2lvbicpKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gIGxldCBwYWNrYWdlUmNSZWxlYXNlID0gSW5maW5pdHk7XHJcbiAgbGV0IHJjUmVsZWFzZSA9IEluZmluaXR5O1xyXG4gIGxldCBwYWNrYWdlVmVyc2lvbiA9IGNvbmZpZy5nZXQoJ3BrZy52ZXJzaW9uJyk7XHJcbiAgbGV0IHZlcnNpb24gPSBkb2MuX2lkO1xyXG4gIGNvbnN0IG1hdGNoZXMgPSBkb2MuX2lkLm1hdGNoKHJjVmVyc2lvblJlZ2V4KTtcclxuICBjb25zdCBwYWNrYWdlTWF0Y2hlcyA9IGNvbmZpZy5nZXQoJ3BrZy52ZXJzaW9uJykubWF0Y2gocmNWZXJzaW9uUmVnZXgpO1xyXG5cclxuICBpZiAobWF0Y2hlcykge1xyXG4gICAgdmVyc2lvbiA9IG1hdGNoZXNbMV07XHJcbiAgICByY1JlbGVhc2UgPSBwYXJzZUludChtYXRjaGVzWzJdLCAxMCk7XHJcbiAgfVxyXG5cclxuICBpZiAocGFja2FnZU1hdGNoZXMpIHtcclxuICAgIHBhY2thZ2VWZXJzaW9uID0gcGFja2FnZU1hdGNoZXNbMV07XHJcbiAgICBwYWNrYWdlUmNSZWxlYXNlID0gcGFyc2VJbnQocGFja2FnZU1hdGNoZXNbMl0sIDEwKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBpZiAoc2VtdmVyLmd0ZSh2ZXJzaW9uLCBwYWNrYWdlVmVyc2lvbikgJiYgcmNSZWxlYXNlID49IHBhY2thZ2VSY1JlbGVhc2UpIHJldHVybiBmYWxzZTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/is_upgradeable.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,IAAM,KAAK,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,WAAW,CAAC,CAAC;AAClD,IAAM,cAAc,GAAG,2BAA2B,CAAC;;AAEnD,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,GAAG,EAAE;AACtC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAI,gBAAgB,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,OAAO,KAAK,CAAC;AACjD,MAAI,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC;AAC3B,MAAI,GAAG,CAAC,GAAG,KAAK,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,OAAO,KAAK,CAAC;;AAExD,MAAI,gBAAgB,GAAG,QAAQ,CAAC;AAChC,MAAI,SAAS,GAAG,QAAQ,CAAC;AACzB,MAAI,cAAc,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAC/C,MAAI,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC;AACtB,MAAM,OAAO,GAAG,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;AAC9C,MAAM,cAAc,GAAG,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;;AAEvE,MAAI,OAAO,EAAE;AACX,WAAO,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AACrB,aAAS,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;GACtC;;AAED,MAAI,cAAc,EAAE;AAClB,kBAAc,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC;AACnC,oBAAgB,GAAG,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;GACpD;;AAED,MAAI;AACF,QAAI,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,cAAc,CAAC,IAAI,SAAS,IAAI,gBAAgB,EAAE,OAAO,KAAK,CAAC;GACxF,CAAC,OAAO,CAAC,EAAE;AACV,WAAO,KAAK,CAAC;GACd;AACD,SAAO,IAAI,CAAC;CACb,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/is_upgradeable.js",
      "sourcesContent": [
        "const semver = require('semver');\r\nconst utils = require('requirefrom')('src/utils');\r\nconst rcVersionRegex = /(\\d+\\.\\d+\\.\\d+)\\-rc(\\d+)/i;\r\n\r\nmodule.exports = function (server, doc) {\r\n  const config = server.config();\r\n  if (/beta|snapshot/i.test(doc._id)) return false;\r\n  if (!doc._id) return false;\r\n  if (doc._id === config.get('pkg.version')) return false;\r\n\r\n  let packageRcRelease = Infinity;\r\n  let rcRelease = Infinity;\r\n  let packageVersion = config.get('pkg.version');\r\n  let version = doc._id;\r\n  const matches = doc._id.match(rcVersionRegex);\r\n  const packageMatches = config.get('pkg.version').match(rcVersionRegex);\r\n\r\n  if (matches) {\r\n    version = matches[1];\r\n    rcRelease = parseInt(matches[2], 10);\r\n  }\r\n\r\n  if (packageMatches) {\r\n    packageVersion = packageMatches[1];\r\n    packageRcRelease = parseInt(packageMatches[2], 10);\r\n  }\r\n\r\n  try {\r\n    if (semver.gte(version, packageVersion) && rcRelease >= packageRcRelease) return false;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n"
      ]
    },
    "mtime": 1465716670326
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/create_kibana_index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar SetupError = require('./setup_error');\nvar format = require('util').format;\nmodule.exports = function (server) {\n  var client = server.plugins.elasticsearch.client;\n  var index = server.config().get('kibana.index');\n\n  function handleError(message) {\n    return function (err) {\n      throw new SetupError(server, message, err);\n    };\n  }\n\n  return client.indices.create({\n    index: index,\n    body: {\n      settings: {\n        number_of_shards: 1\n      },\n      mappings: {\n        config: {\n          properties: {\n            buildNum: {\n              type: 'string',\n              index: 'not_analyzed'\n            }\n          }\n        }\n      }\n    }\n  })['catch'](handleError('Unable to create Kibana index \"<%= kibana.index %>\"')).then(function () {\n    return client.cluster.health({\n      waitForStatus: 'yellow',\n      index: index\n    })['catch'](handleError('Waiting for Kibana index \"<%= kibana.index %>\" to come online failed.'));\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9jcmVhdGVfa2liYW5hX2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQzVDLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDdEMsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUM7QUFDbkQsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFbEQsV0FBUyxXQUFXLENBQUMsT0FBTyxFQUFFO0FBQzVCLFdBQU8sVUFBVSxHQUFHLEVBQUU7QUFDcEIsWUFBTSxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQzVDLENBQUM7R0FDSDs7QUFFRCxTQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzNCLFNBQUssRUFBRSxLQUFLO0FBQ1osUUFBSSxFQUFFO0FBQ0osY0FBUSxFQUFFO0FBQ1Isd0JBQWdCLEVBQUUsQ0FBQztPQUNwQjtBQUNELGNBQVEsRUFBRTtBQUNSLGNBQU0sRUFBRTtBQUNOLG9CQUFVLEVBQUU7QUFDVixvQkFBUSxFQUFFO0FBQ1Isa0JBQUksRUFBRSxRQUFRO0FBQ2QsbUJBQUssRUFBRSxjQUFjO2FBQ3RCO1dBQ0Y7U0FDRjtPQUNGO0tBQ0Y7R0FDRixDQUFDLFNBQ0ksQ0FBQyxXQUFXLENBQUMscURBQXFELENBQUMsQ0FBQyxDQUN6RSxJQUFJLENBQUMsWUFBWTtBQUNoQixXQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzNCLG1CQUFhLEVBQUUsUUFBUTtBQUN2QixXQUFLLEVBQUUsS0FBSztLQUNiLENBQUMsU0FDSSxDQUFDLFdBQVcsQ0FBQyx1RUFBdUUsQ0FBQyxDQUFDLENBQUM7R0FDOUYsQ0FBQyxDQUFDO0NBQ0osQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvY3JlYXRlX2tpYmFuYV9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNldHVwRXJyb3IgPSByZXF1aXJlKCcuL3NldHVwX2Vycm9yJyk7XHJcbmNvbnN0IGZvcm1hdCA9IHJlcXVpcmUoJ3V0aWwnKS5mb3JtYXQ7XHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHNlcnZlcikge1xyXG4gIGNvbnN0IGNsaWVudCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2xpZW50O1xyXG4gIGNvbnN0IGluZGV4ID0gc2VydmVyLmNvbmZpZygpLmdldCgna2liYW5hLmluZGV4Jyk7XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUVycm9yKG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgIHRocm93IG5ldyBTZXR1cEVycm9yKHNlcnZlciwgbWVzc2FnZSwgZXJyKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2xpZW50LmluZGljZXMuY3JlYXRlKHtcclxuICAgIGluZGV4OiBpbmRleCxcclxuICAgIGJvZHk6IHtcclxuICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICBudW1iZXJfb2Zfc2hhcmRzOiAxXHJcbiAgICAgIH0sXHJcbiAgICAgIG1hcHBpbmdzOiB7XHJcbiAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICAgIGJ1aWxkTnVtOiB7XHJcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXHJcbiAgICAgICAgICAgICAgaW5kZXg6ICdub3RfYW5hbHl6ZWQnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KVxyXG4gIC5jYXRjaChoYW5kbGVFcnJvcignVW5hYmxlIHRvIGNyZWF0ZSBLaWJhbmEgaW5kZXggXCI8JT0ga2liYW5hLmluZGV4ICU+XCInKSlcclxuICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gY2xpZW50LmNsdXN0ZXIuaGVhbHRoKHtcclxuICAgICAgd2FpdEZvclN0YXR1czogJ3llbGxvdycsXHJcbiAgICAgIGluZGV4OiBpbmRleFxyXG4gICAgfSlcclxuICAgIC5jYXRjaChoYW5kbGVFcnJvcignV2FpdGluZyBmb3IgS2liYW5hIGluZGV4IFwiPCU9IGtpYmFuYS5pbmRleCAlPlwiIHRvIGNvbWUgb25saW5lIGZhaWxlZC4nKSk7XHJcbiAgfSk7XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/create_kibana_index.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,UAAU,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC5C,IAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;AACtC,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;;AAElD,WAAS,WAAW,CAAC,OAAO,EAAE;AAC5B,WAAO,UAAU,GAAG,EAAE;AACpB,YAAM,IAAI,UAAU,CAAC,MAAM,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;KAC5C,CAAC;GACH;;AAED,SAAO,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;AAC3B,SAAK,EAAE,KAAK;AACZ,QAAI,EAAE;AACJ,cAAQ,EAAE;AACR,wBAAgB,EAAE,CAAC;OACpB;AACD,cAAQ,EAAE;AACR,cAAM,EAAE;AACN,oBAAU,EAAE;AACV,oBAAQ,EAAE;AACR,kBAAI,EAAE,QAAQ;AACd,mBAAK,EAAE,cAAc;aACtB;WACF;SACF;OACF;KACF;GACF,CAAC,SACI,CAAC,WAAW,CAAC,qDAAqD,CAAC,CAAC,CACzE,IAAI,CAAC,YAAY;AAChB,WAAO,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;AAC3B,mBAAa,EAAE,QAAQ;AACvB,WAAK,EAAE,KAAK;KACb,CAAC,SACI,CAAC,WAAW,CAAC,uEAAuE,CAAC,CAAC,CAAC;GAC9F,CAAC,CAAC;CACJ,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/create_kibana_index.js",
      "sourcesContent": [
        "const SetupError = require('./setup_error');\r\nconst format = require('util').format;\r\nmodule.exports = function (server) {\r\n  const client = server.plugins.elasticsearch.client;\r\n  const index = server.config().get('kibana.index');\r\n\r\n  function handleError(message) {\r\n    return function (err) {\r\n      throw new SetupError(server, message, err);\r\n    };\r\n  }\r\n\r\n  return client.indices.create({\r\n    index: index,\r\n    body: {\r\n      settings: {\r\n        number_of_shards: 1\r\n      },\r\n      mappings: {\r\n        config: {\r\n          properties: {\r\n            buildNum: {\r\n              type: 'string',\r\n              index: 'not_analyzed'\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  })\r\n  .catch(handleError('Unable to create Kibana index \"<%= kibana.index %>\"'))\r\n  .then(function () {\r\n    return client.cluster.health({\r\n      waitForStatus: 'yellow',\r\n      index: index\r\n    })\r\n    .catch(handleError('Waiting for Kibana index \"<%= kibana.index %>\" to come online failed.'));\r\n  });\r\n};\r\n"
      ]
    },
    "mtime": 1465716670326
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/setup_error.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar util = require('util');\n\nfunction SetupError(server, template, err) {\n  var config = server.config().get();\n  // don't override other setup errors\n  if (err && err instanceof SetupError) return err;\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = _.template(template)(config);\n  if (err) {\n    this.origError = err;\n    if (err.stack) this.stack = err.stack;\n  }\n}\nutil.inherits(SetupError, Error);\nmodule.exports = SetupError;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9zZXR1cF9lcnJvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM1QixJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRTdCLFNBQVMsVUFBVSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFO0FBQ3pDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQzs7QUFFckMsTUFBSSxHQUFHLElBQUksR0FBRyxZQUFZLFVBQVUsRUFBRSxPQUFPLEdBQUcsQ0FBQztBQUNqRCxPQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNoRCxNQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO0FBQ2xDLE1BQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM1QyxNQUFJLEdBQUcsRUFBRTtBQUNQLFFBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO0FBQ3JCLFFBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUM7R0FDdkM7Q0FDRjtBQUNELElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ2pDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9zZXR1cF9lcnJvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuY29uc3QgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcclxuXHJcbmZ1bmN0aW9uIFNldHVwRXJyb3Ioc2VydmVyLCB0ZW1wbGF0ZSwgZXJyKSB7XHJcbiAgY29uc3QgY29uZmlnID0gc2VydmVyLmNvbmZpZygpLmdldCgpO1xyXG4gIC8vIGRvbid0IG92ZXJyaWRlIG90aGVyIHNldHVwIGVycm9yc1xyXG4gIGlmIChlcnIgJiYgZXJyIGluc3RhbmNlb2YgU2V0dXBFcnJvcikgcmV0dXJuIGVycjtcclxuICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcclxuICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XHJcbiAgdGhpcy5tZXNzYWdlID0gXy50ZW1wbGF0ZSh0ZW1wbGF0ZSkoY29uZmlnKTtcclxuICBpZiAoZXJyKSB7XHJcbiAgICB0aGlzLm9yaWdFcnJvciA9IGVycjtcclxuICAgIGlmIChlcnIuc3RhY2spIHRoaXMuc3RhY2sgPSBlcnIuc3RhY2s7XHJcbiAgfVxyXG59XHJcbnV0aWwuaW5oZXJpdHMoU2V0dXBFcnJvciwgRXJyb3IpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFNldHVwRXJyb3I7XHJcblxyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/setup_error.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;AAE7B,SAAS,UAAU,CAAC,MAAM,EAAE,QAAQ,EAAE,GAAG,EAAE;AACzC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,CAAC;;AAErC,MAAI,GAAG,IAAI,GAAG,YAAY,UAAU,EAAE,OAAO,GAAG,CAAC;AACjD,OAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AAChD,MAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;AAClC,MAAI,CAAC,OAAO,GAAG,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;AAC5C,MAAI,GAAG,EAAE;AACP,QAAI,CAAC,SAAS,GAAG,GAAG,CAAC;AACrB,QAAI,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;GACvC;CACF;AACD,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;AACjC,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/setup_error.js",
      "sourcesContent": [
        "const _ = require('lodash');\r\nconst util = require('util');\r\n\r\nfunction SetupError(server, template, err) {\r\n  const config = server.config().get();\r\n  // don't override other setup errors\r\n  if (err && err instanceof SetupError) return err;\r\n  Error.captureStackTrace(this, this.constructor);\r\n  this.name = this.constructor.name;\r\n  this.message = _.template(template)(config);\r\n  if (err) {\r\n    this.origError = err;\r\n    if (err.stack) this.stack = err.stack;\r\n  }\r\n}\r\nutil.inherits(SetupError, Error);\r\nmodule.exports = SetupError;\r\n\r\n"
      ]
    },
    "mtime": 1465716670342
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/check_es_version.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar esBool = require('./es_bool');\nvar versionSatisfies = require('./version_satisfies');\nvar SetupError = require('./setup_error');\n\nmodule.exports = function (server) {\n  server.log(['plugin', 'debug'], 'Checking Elasticsearch version');\n\n  var client = server.plugins.elasticsearch.client;\n  var engineVersion = server.config().get('elasticsearch.engineVersion');\n\n  return client.nodes.info().then(function (info) {\n    var badNodes = _.filter(info.nodes, function (node) {\n      // remove client nodes (Logstash)\n      var isClient = _.get(node, 'attributes.client');\n      if (isClient != null && esBool(isClient) === true) {\n        return false;\n      }\n\n      // remove nodes that satify required engine version\n      return !versionSatisfies(node.version, engineVersion);\n    });\n\n    if (!badNodes.length) return true;\n\n    var badNodeNames = badNodes.map(function (node) {\n      return 'Elasticsearch v' + node.version + ' @ ' + node.http_address + ' (' + node.ip + ')';\n    });\n\n    var message = 'This version of Kibana requires Elasticsearch ' + (engineVersion + ' on all nodes. I found ') + ('the following incompatible nodes in your cluster: ' + badNodeNames.join(','));\n\n    throw new SetupError(server, message);\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9jaGVja19lc192ZXJzaW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVCLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNwQyxJQUFNLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ3hELElBQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFNUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxRQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxFQUFFLGdDQUFnQyxDQUFDLENBQUM7O0FBRWxFLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLDZCQUE2QixDQUFDLENBQUM7O0FBRXpFLFNBQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FDekIsSUFBSSxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQ3BCLFFBQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxVQUFVLElBQUksRUFBRTs7QUFFcEQsVUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztBQUNsRCxVQUFJLFFBQVEsSUFBSSxJQUFJLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLElBQUksRUFBRTtBQUNqRCxlQUFPLEtBQUssQ0FBQztPQUNkOzs7QUFHRCxhQUFPLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQztLQUN2RCxDQUFDLENBQUM7O0FBRUgsUUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsT0FBTyxJQUFJLENBQUM7O0FBRWxDLFFBQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBVSxJQUFJLEVBQUU7QUFDaEQsYUFBTyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQztLQUM1RixDQUFDLENBQUM7O0FBRUgsUUFBTSxPQUFPLEdBQUcsb0RBQ2IsYUFBYSw2QkFBeUIsMkRBQ1ksWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBRSxDQUFDOztBQUU5RSxVQUFNLElBQUksVUFBVSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztHQUN2QyxDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9jaGVja19lc192ZXJzaW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5jb25zdCBlc0Jvb2wgPSByZXF1aXJlKCcuL2VzX2Jvb2wnKTtcclxuY29uc3QgdmVyc2lvblNhdGlzZmllcyA9IHJlcXVpcmUoJy4vdmVyc2lvbl9zYXRpc2ZpZXMnKTtcclxuY29uc3QgU2V0dXBFcnJvciA9IHJlcXVpcmUoJy4vc2V0dXBfZXJyb3InKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHNlcnZlcikge1xyXG4gIHNlcnZlci5sb2coWydwbHVnaW4nLCAnZGVidWcnXSwgJ0NoZWNraW5nIEVsYXN0aWNzZWFyY2ggdmVyc2lvbicpO1xyXG5cclxuICBjb25zdCBjbGllbnQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNsaWVudDtcclxuICBjb25zdCBlbmdpbmVWZXJzaW9uID0gc2VydmVyLmNvbmZpZygpLmdldCgnZWxhc3RpY3NlYXJjaC5lbmdpbmVWZXJzaW9uJyk7XHJcblxyXG4gIHJldHVybiBjbGllbnQubm9kZXMuaW5mbygpXHJcbiAgLnRoZW4oZnVuY3Rpb24gKGluZm8pIHtcclxuICAgIGNvbnN0IGJhZE5vZGVzID0gXy5maWx0ZXIoaW5mby5ub2RlcywgZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgLy8gcmVtb3ZlIGNsaWVudCBub2RlcyAoTG9nc3Rhc2gpXHJcbiAgICAgIGNvbnN0IGlzQ2xpZW50ID0gXy5nZXQobm9kZSwgJ2F0dHJpYnV0ZXMuY2xpZW50Jyk7XHJcbiAgICAgIGlmIChpc0NsaWVudCAhPSBudWxsICYmIGVzQm9vbChpc0NsaWVudCkgPT09IHRydWUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJlbW92ZSBub2RlcyB0aGF0IHNhdGlmeSByZXF1aXJlZCBlbmdpbmUgdmVyc2lvblxyXG4gICAgICByZXR1cm4gIXZlcnNpb25TYXRpc2ZpZXMobm9kZS52ZXJzaW9uLCBlbmdpbmVWZXJzaW9uKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghYmFkTm9kZXMubGVuZ3RoKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCBiYWROb2RlTmFtZXMgPSBiYWROb2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgcmV0dXJuICdFbGFzdGljc2VhcmNoIHYnICsgbm9kZS52ZXJzaW9uICsgJyBAICcgKyBub2RlLmh0dHBfYWRkcmVzcyArICcgKCcgKyBub2RlLmlwICsgJyknO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGBUaGlzIHZlcnNpb24gb2YgS2liYW5hIHJlcXVpcmVzIEVsYXN0aWNzZWFyY2ggYCArXHJcbiAgICBgJHtlbmdpbmVWZXJzaW9ufSBvbiBhbGwgbm9kZXMuIEkgZm91bmQgYCArXHJcbiAgICBgdGhlIGZvbGxvd2luZyBpbmNvbXBhdGlibGUgbm9kZXMgaW4geW91ciBjbHVzdGVyOiAke2JhZE5vZGVOYW1lcy5qb2luKCcsJyl9YDtcclxuXHJcbiAgICB0aHJvdyBuZXcgU2V0dXBFcnJvcihzZXJ2ZXIsIG1lc3NhZ2UpO1xyXG4gIH0pO1xyXG59O1xyXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/check_es_version.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAM,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACpC,IAAM,gBAAgB,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;AACxD,IAAM,UAAU,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;;AAE5C,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,QAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,EAAE,gCAAgC,CAAC,CAAC;;AAElE,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;;AAEzE,SAAO,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,CACzB,IAAI,CAAC,UAAU,IAAI,EAAE;AACpB,QAAM,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE;;AAEpD,UAAM,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;AAClD,UAAI,QAAQ,IAAI,IAAI,IAAI,MAAM,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE;AACjD,eAAO,KAAK,CAAC;OACd;;;AAGD,aAAO,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;KACvD,CAAC,CAAC;;AAEH,QAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,OAAO,IAAI,CAAC;;AAElC,QAAM,YAAY,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,IAAI,EAAE;AAChD,aAAO,iBAAiB,GAAG,IAAI,CAAC,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;KAC5F,CAAC,CAAC;;AAEH,QAAM,OAAO,GAAG,oDACb,aAAa,6BAAyB,2DACY,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE,CAAC;;AAE9E,UAAM,IAAI,UAAU,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;GACvC,CAAC,CAAC;CACJ,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/check_es_version.js",
      "sourcesContent": [
        "const _ = require('lodash');\r\nconst esBool = require('./es_bool');\r\nconst versionSatisfies = require('./version_satisfies');\r\nconst SetupError = require('./setup_error');\r\n\r\nmodule.exports = function (server) {\r\n  server.log(['plugin', 'debug'], 'Checking Elasticsearch version');\r\n\r\n  const client = server.plugins.elasticsearch.client;\r\n  const engineVersion = server.config().get('elasticsearch.engineVersion');\r\n\r\n  return client.nodes.info()\r\n  .then(function (info) {\r\n    const badNodes = _.filter(info.nodes, function (node) {\r\n      // remove client nodes (Logstash)\r\n      const isClient = _.get(node, 'attributes.client');\r\n      if (isClient != null && esBool(isClient) === true) {\r\n        return false;\r\n      }\r\n\r\n      // remove nodes that satify required engine version\r\n      return !versionSatisfies(node.version, engineVersion);\r\n    });\r\n\r\n    if (!badNodes.length) return true;\r\n\r\n    const badNodeNames = badNodes.map(function (node) {\r\n      return 'Elasticsearch v' + node.version + ' @ ' + node.http_address + ' (' + node.ip + ')';\r\n    });\r\n\r\n    const message = `This version of Kibana requires Elasticsearch ` +\r\n    `${engineVersion} on all nodes. I found ` +\r\n    `the following incompatible nodes in your cluster: ${badNodeNames.join(',')}`;\r\n\r\n    throw new SetupError(server, message);\r\n  });\r\n};\r\n"
      ]
    },
    "mtime": 1465716670311
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/es_bool.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar map = {\n  'false': false,\n  'off': false,\n  'no': false,\n  '0': false,\n  'true': true,\n  'on': true,\n  'yes': true,\n  '1': true\n};\nmodule.exports = function (str) {\n  var bool = map[String(str)];\n  if (typeof bool !== 'boolean') {\n    throw new TypeError('\"' + str + '\" does not map to an esBool');\n  }\n  return bool;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9lc19ib29sLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTSxHQUFHLEdBQUc7QUFDVixTQUFPLEVBQUUsS0FBSztBQUNkLE9BQUssRUFBRSxLQUFLO0FBQ1osTUFBSSxFQUFFLEtBQUs7QUFDWCxLQUFHLEVBQUUsS0FBSztBQUNWLFFBQU0sRUFBRSxJQUFJO0FBQ1osTUFBSSxFQUFFLElBQUk7QUFDVixPQUFLLEVBQUUsSUFBSTtBQUNYLEtBQUcsRUFBRSxJQUFJO0NBQ1YsQ0FBQztBQUNGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxHQUFHLEVBQUU7QUFDOUIsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzlCLE1BQUksT0FBTyxJQUFJLEtBQUssU0FBUyxFQUFFO0FBQzdCLFVBQU0sSUFBSSxTQUFTLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyw2QkFBNkIsQ0FBQyxDQUFDO0dBQ2hFO0FBQ0QsU0FBTyxJQUFJLENBQUM7Q0FDYixDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9lc19ib29sLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbWFwID0ge1xyXG4gICdmYWxzZSc6IGZhbHNlLFxyXG4gICdvZmYnOiBmYWxzZSxcclxuICAnbm8nOiBmYWxzZSxcclxuICAnMCc6IGZhbHNlLFxyXG4gICd0cnVlJzogdHJ1ZSxcclxuICAnb24nOiB0cnVlLFxyXG4gICd5ZXMnOiB0cnVlLFxyXG4gICcxJzogdHJ1ZVxyXG59O1xyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICBjb25zdCBib29sID0gbWFwW1N0cmluZyhzdHIpXTtcclxuICBpZiAodHlwZW9mIGJvb2wgIT09ICdib29sZWFuJykge1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCInICsgc3RyICsgJ1wiIGRvZXMgbm90IG1hcCB0byBhbiBlc0Jvb2wnKTtcclxuICB9XHJcbiAgcmV0dXJuIGJvb2w7XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/es_bool.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,GAAG,GAAG;AACV,SAAO,EAAE,KAAK;AACd,OAAK,EAAE,KAAK;AACZ,MAAI,EAAE,KAAK;AACX,KAAG,EAAE,KAAK;AACV,QAAM,EAAE,IAAI;AACZ,MAAI,EAAE,IAAI;AACV,OAAK,EAAE,IAAI;AACX,KAAG,EAAE,IAAI;CACV,CAAC;AACF,MAAM,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE;AAC9B,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AAC9B,MAAI,OAAO,IAAI,KAAK,SAAS,EAAE;AAC7B,UAAM,IAAI,SAAS,CAAC,GAAG,GAAG,GAAG,GAAG,6BAA6B,CAAC,CAAC;GAChE;AACD,SAAO,IAAI,CAAC;CACb,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/es_bool.js",
      "sourcesContent": [
        "const map = {\r\n  'false': false,\r\n  'off': false,\r\n  'no': false,\r\n  '0': false,\r\n  'true': true,\r\n  'on': true,\r\n  'yes': true,\r\n  '1': true\r\n};\r\nmodule.exports = function (str) {\r\n  const bool = map[String(str)];\r\n  if (typeof bool !== 'boolean') {\r\n    throw new TypeError('\"' + str + '\" does not map to an esBool');\r\n  }\r\n  return bool;\r\n};\r\n"
      ]
    },
    "mtime": 1465716557023
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/version_satisfies.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar semver = require('semver');\n\nmodule.exports = function (actual, expected) {\n  try {\n    var ver = cleanVersion(actual);\n    return semver.satisfies(ver, expected);\n  } catch (err) {\n    return false;\n  }\n\n  function cleanVersion(version) {\n    var match = version.match(/\\d+\\.\\d+\\.\\d+/);\n    if (!match) return version;\n    return match[0];\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi92ZXJzaW9uX3NhdGlzZmllcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFakMsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRSxRQUFRLEVBQUU7QUFDM0MsTUFBSTtBQUNGLFFBQU0sR0FBRyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNqQyxXQUFPLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0dBQ3hDLENBQUMsT0FBTyxHQUFHLEVBQUU7QUFDWixXQUFPLEtBQUssQ0FBQztHQUNkOztBQUVELFdBQVMsWUFBWSxDQUFDLE9BQU8sRUFBRTtBQUM3QixRQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQzdDLFFBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxPQUFPLENBQUM7QUFDM0IsV0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7R0FDakI7Q0FDRixDQUFDIiwiZmlsZSI6IkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi92ZXJzaW9uX3NhdGlzZmllcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNlbXZlciA9IHJlcXVpcmUoJ3NlbXZlcicpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYWN0dWFsLCBleHBlY3RlZCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB2ZXIgPSBjbGVhblZlcnNpb24oYWN0dWFsKTtcclxuICAgIHJldHVybiBzZW12ZXIuc2F0aXNmaWVzKHZlciwgZXhwZWN0ZWQpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2xlYW5WZXJzaW9uKHZlcnNpb24pIHtcclxuICAgIGNvbnN0IG1hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxkK1xcLlxcZCtcXC5cXGQrLyk7XHJcbiAgICBpZiAoIW1hdGNoKSByZXR1cm4gdmVyc2lvbjtcclxuICAgIHJldHVybiBtYXRjaFswXTtcclxuICB9XHJcbn07XHJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/version_satisfies.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,QAAQ,EAAE;AAC3C,MAAI;AACF,QAAM,GAAG,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC;AACjC,WAAO,MAAM,CAAC,SAAS,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;GACxC,CAAC,OAAO,GAAG,EAAE;AACZ,WAAO,KAAK,CAAC;GACd;;AAED,WAAS,YAAY,CAAC,OAAO,EAAE;AAC7B,QAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;AAC7C,QAAI,CAAC,KAAK,EAAE,OAAO,OAAO,CAAC;AAC3B,WAAO,KAAK,CAAC,CAAC,CAAC,CAAC;GACjB;CACF,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/version_satisfies.js",
      "sourcesContent": [
        "const semver = require('semver');\r\n\r\nmodule.exports = function (actual, expected) {\r\n  try {\r\n    const ver = cleanVersion(actual);\r\n    return semver.satisfies(ver, expected);\r\n  } catch (err) {\r\n    return false;\r\n  }\r\n\r\n  function cleanVersion(version) {\r\n    const match = version.match(/\\d+\\.\\d+\\.\\d+/);\r\n    if (!match) return version;\r\n    return match[0];\r\n  }\r\n};\r\n"
      ]
    },
    "mtime": 1465716670342
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/create_proxy.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar createAgent = require('./create_agent');\nvar mapUri = require('./map_uri');\n\nvar _require = require('url');\n\nvar resolve = _require.resolve;\n\nvar _require2 = require('lodash');\n\nvar assign = _require2.assign;\n\nfunction createProxy(server, method, route, config) {\n\n  var options = {\n    method: method,\n    path: createProxy.createPath(route),\n    config: {\n      timeout: {\n        socket: server.config().get('elasticsearch.requestTimeout')\n      }\n    },\n    handler: {\n      proxy: {\n        mapUri: mapUri(server),\n        passThrough: true,\n        agent: createAgent(server),\n        xforward: true,\n        timeout: server.config().get('elasticsearch.requestTimeout')\n      }\n    }\n  };\n\n  assign(options.config, config);\n\n  server.route(options);\n};\n\ncreateProxy.createPath = function createPath(path) {\n  var pre = '/elasticsearch';\n  var sep = path[0] === '/' ? '' : '/';\n  return '' + pre + sep + path;\n};\n\nmodule.exports = createProxy;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9jcmVhdGVfcHJveHkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUM5QyxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7O2VBQ2hCLE9BQU8sQ0FBQyxLQUFLLENBQUM7O0lBQTFCLE9BQU8sWUFBUCxPQUFPOztnQkFDSSxPQUFPLENBQUMsUUFBUSxDQUFDOztJQUE1QixNQUFNLGFBQU4sTUFBTTs7QUFFZCxTQUFTLFdBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUU7O0FBRWxELE1BQU0sT0FBTyxHQUFHO0FBQ2QsVUFBTSxFQUFFLE1BQU07QUFDZCxRQUFJLEVBQUUsV0FBVyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUM7QUFDbkMsVUFBTSxFQUFFO0FBQ04sYUFBTyxFQUFFO0FBQ1AsY0FBTSxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsOEJBQThCLENBQUM7T0FDNUQ7S0FDRjtBQUNELFdBQU8sRUFBRTtBQUNQLFdBQUssRUFBRTtBQUNMLGNBQU0sRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ3RCLG1CQUFXLEVBQUUsSUFBSTtBQUNqQixhQUFLLEVBQUUsV0FBVyxDQUFDLE1BQU0sQ0FBQztBQUMxQixnQkFBUSxFQUFFLElBQUk7QUFDZCxlQUFPLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQztPQUM3RDtLQUNGO0dBQ0YsQ0FBQzs7QUFFRixRQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQzs7QUFFL0IsUUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztDQUN2QixDQUFDOztBQUVGLFdBQVcsQ0FBQyxVQUFVLEdBQUcsU0FBUyxVQUFVLENBQUMsSUFBSSxFQUFFO0FBQ2pELE1BQU0sR0FBRyxHQUFHLGdCQUFnQixDQUFDO0FBQzdCLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQztBQUN2QyxjQUFVLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFHO0NBQzlCLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxXQUFXLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9wbHVnaW5zL2VsYXN0aWNzZWFyY2gvbGliL2NyZWF0ZV9wcm94eS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNyZWF0ZUFnZW50ID0gcmVxdWlyZSgnLi9jcmVhdGVfYWdlbnQnKTtcclxuY29uc3QgbWFwVXJpID0gcmVxdWlyZSgnLi9tYXBfdXJpJyk7XHJcbmNvbnN0IHsgcmVzb2x2ZSB9ID0gcmVxdWlyZSgndXJsJyk7XHJcbmNvbnN0IHsgYXNzaWduIH0gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVByb3h5KHNlcnZlciwgbWV0aG9kLCByb3V0ZSwgY29uZmlnKSB7XHJcblxyXG4gIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICBtZXRob2Q6IG1ldGhvZCxcclxuICAgIHBhdGg6IGNyZWF0ZVByb3h5LmNyZWF0ZVBhdGgocm91dGUpLFxyXG4gICAgY29uZmlnOiB7XHJcbiAgICAgIHRpbWVvdXQ6IHtcclxuICAgICAgICBzb2NrZXQ6IHNlcnZlci5jb25maWcoKS5nZXQoJ2VsYXN0aWNzZWFyY2gucmVxdWVzdFRpbWVvdXQnKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlcjoge1xyXG4gICAgICBwcm94eToge1xyXG4gICAgICAgIG1hcFVyaTogbWFwVXJpKHNlcnZlciksXHJcbiAgICAgICAgcGFzc1Rocm91Z2g6IHRydWUsXHJcbiAgICAgICAgYWdlbnQ6IGNyZWF0ZUFnZW50KHNlcnZlciksXHJcbiAgICAgICAgeGZvcndhcmQ6IHRydWUsXHJcbiAgICAgICAgdGltZW91dDogc2VydmVyLmNvbmZpZygpLmdldCgnZWxhc3RpY3NlYXJjaC5yZXF1ZXN0VGltZW91dCcpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfTtcclxuXHJcbiAgYXNzaWduKG9wdGlvbnMuY29uZmlnLCBjb25maWcpO1xyXG5cclxuICBzZXJ2ZXIucm91dGUob3B0aW9ucyk7XHJcbn07XHJcblxyXG5jcmVhdGVQcm94eS5jcmVhdGVQYXRoID0gZnVuY3Rpb24gY3JlYXRlUGF0aChwYXRoKSB7XHJcbiAgY29uc3QgcHJlID0gJy9lbGFzdGljc2VhcmNoJztcclxuICBjb25zdCBzZXAgPSBwYXRoWzBdID09PSAnLycgPyAnJyA6ICcvJztcclxuICByZXR1cm4gYCR7cHJlfSR7c2VwfSR7cGF0aH1gO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVQcm94eTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/create_proxy.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,WAAW,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC9C,IAAM,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;;eAChB,OAAO,CAAC,KAAK,CAAC;;IAA1B,OAAO,YAAP,OAAO;;gBACI,OAAO,CAAC,QAAQ,CAAC;;IAA5B,MAAM,aAAN,MAAM;;AAEd,SAAS,WAAW,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE;;AAElD,MAAM,OAAO,GAAG;AACd,UAAM,EAAE,MAAM;AACd,QAAI,EAAE,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC;AACnC,UAAM,EAAE;AACN,aAAO,EAAE;AACP,cAAM,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,8BAA8B,CAAC;OAC5D;KACF;AACD,WAAO,EAAE;AACP,WAAK,EAAE;AACL,cAAM,EAAE,MAAM,CAAC,MAAM,CAAC;AACtB,mBAAW,EAAE,IAAI;AACjB,aAAK,EAAE,WAAW,CAAC,MAAM,CAAC;AAC1B,gBAAQ,EAAE,IAAI;AACd,eAAO,EAAE,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,8BAA8B,CAAC;OAC7D;KACF;GACF,CAAC;;AAEF,QAAM,CAAC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;;AAE/B,QAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;CACvB,CAAC;;AAEF,WAAW,CAAC,UAAU,GAAG,SAAS,UAAU,CAAC,IAAI,EAAE;AACjD,MAAM,GAAG,GAAG,gBAAgB,CAAC;AAC7B,MAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC;AACvC,cAAU,GAAG,GAAG,GAAG,GAAG,IAAI,CAAG;CAC9B,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,WAAW,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/create_proxy.js",
      "sourcesContent": [
        "const createAgent = require('./create_agent');\r\nconst mapUri = require('./map_uri');\r\nconst { resolve } = require('url');\r\nconst { assign } = require('lodash');\r\n\r\nfunction createProxy(server, method, route, config) {\r\n\r\n  const options = {\r\n    method: method,\r\n    path: createProxy.createPath(route),\r\n    config: {\r\n      timeout: {\r\n        socket: server.config().get('elasticsearch.requestTimeout')\r\n      }\r\n    },\r\n    handler: {\r\n      proxy: {\r\n        mapUri: mapUri(server),\r\n        passThrough: true,\r\n        agent: createAgent(server),\r\n        xforward: true,\r\n        timeout: server.config().get('elasticsearch.requestTimeout')\r\n      }\r\n    },\r\n  };\r\n\r\n  assign(options.config, config);\r\n\r\n  server.route(options);\r\n};\r\n\r\ncreateProxy.createPath = function createPath(path) {\r\n  const pre = '/elasticsearch';\r\n  const sep = path[0] === '/' ? '' : '/';\r\n  return `${pre}${sep}${path}`;\r\n};\r\n\r\nmodule.exports = createProxy;\r\n"
      ]
    },
    "mtime": 1465716670326
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/create_agent.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _Map = require('babel-runtime/core-js/map')['default'];\n\nvar url = require('url');\nvar _ = require('lodash');\nvar readFile = function readFile(file) {\n  return require('fs').readFileSync(file, 'utf8');\n};\nvar http = require('http');\nvar https = require('https');\n\nmodule.exports = _.memoize(function (server) {\n  var config = server.config();\n  var target = url.parse(config.get('elasticsearch.url'));\n\n  if (!/^https/.test(target.protocol)) return new http.Agent();\n\n  var agentOptions = {\n    rejectUnauthorized: config.get('elasticsearch.ssl.verify')\n  };\n\n  if (_.size(config.get('elasticsearch.ssl.ca'))) {\n    agentOptions.ca = config.get('elasticsearch.ssl.ca').map(readFile);\n  }\n\n  // Add client certificate and key if required by elasticsearch\n  if (config.get('elasticsearch.ssl.cert') && config.get('elasticsearch.ssl.key')) {\n    agentOptions.cert = readFile(config.get('elasticsearch.ssl.cert'));\n    agentOptions.key = readFile(config.get('elasticsearch.ssl.key'));\n  }\n\n  return new https.Agent(agentOptions);\n});\n\n// See https://lodash.com/docs#memoize: We use a Map() instead of the default, because we want the keys in the cache\n// to be the server objects, and by default these would be coerced to strings as keys (which wouldn't be useful)\nmodule.exports.cache = new _Map();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9jcmVhdGVfYWdlbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMzQixJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDNUIsSUFBTSxRQUFRLEdBQUcsU0FBWCxRQUFRLENBQUksSUFBSTtTQUFLLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQztDQUFBLENBQUM7QUFDcEUsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdCLElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFL0IsTUFBTSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsTUFBTSxFQUFFO0FBQzNDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDOztBQUUxRCxNQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsT0FBTyxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQzs7QUFFN0QsTUFBTSxZQUFZLEdBQUc7QUFDbkIsc0JBQWtCLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQztHQUMzRCxDQUFDOztBQUVGLE1BQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUMsRUFBRTtBQUM5QyxnQkFBWSxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0dBQ3BFOzs7QUFHRCxNQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLEVBQUU7QUFDL0UsZ0JBQVksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDO0FBQ25FLGdCQUFZLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQztHQUNsRTs7QUFFRCxTQUFPLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztDQUN0QyxDQUFDLENBQUM7Ozs7QUFJSCxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxVQUFTLENBQUMiLCJmaWxlIjoiRDovYmFja3VwL29wbGF0ZS9raWJhbmExL3NyYy9wbHVnaW5zL2VsYXN0aWNzZWFyY2gvbGliL2NyZWF0ZV9hZ2VudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHVybCA9IHJlcXVpcmUoJ3VybCcpO1xyXG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmNvbnN0IHJlYWRGaWxlID0gKGZpbGUpID0+IHJlcXVpcmUoJ2ZzJykucmVhZEZpbGVTeW5jKGZpbGUsICd1dGY4Jyk7XHJcbmNvbnN0IGh0dHAgPSByZXF1aXJlKCdodHRwJyk7XHJcbmNvbnN0IGh0dHBzID0gcmVxdWlyZSgnaHR0cHMnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gXy5tZW1vaXplKGZ1bmN0aW9uIChzZXJ2ZXIpIHtcclxuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XHJcbiAgY29uc3QgdGFyZ2V0ID0gdXJsLnBhcnNlKGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2gudXJsJykpO1xyXG5cclxuICBpZiAoIS9eaHR0cHMvLnRlc3QodGFyZ2V0LnByb3RvY29sKSkgcmV0dXJuIG5ldyBodHRwLkFnZW50KCk7XHJcblxyXG4gIGNvbnN0IGFnZW50T3B0aW9ucyA9IHtcclxuICAgIHJlamVjdFVuYXV0aG9yaXplZDogY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5zc2wudmVyaWZ5JylcclxuICB9O1xyXG5cclxuICBpZiAoXy5zaXplKGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc3NsLmNhJykpKSB7XHJcbiAgICBhZ2VudE9wdGlvbnMuY2EgPSBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnNzbC5jYScpLm1hcChyZWFkRmlsZSk7XHJcbiAgfVxyXG5cclxuICAvLyBBZGQgY2xpZW50IGNlcnRpZmljYXRlIGFuZCBrZXkgaWYgcmVxdWlyZWQgYnkgZWxhc3RpY3NlYXJjaFxyXG4gIGlmIChjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnNzbC5jZXJ0JykgJiYgY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5zc2wua2V5JykpIHtcclxuICAgIGFnZW50T3B0aW9ucy5jZXJ0ID0gcmVhZEZpbGUoY29uZmlnLmdldCgnZWxhc3RpY3NlYXJjaC5zc2wuY2VydCcpKTtcclxuICAgIGFnZW50T3B0aW9ucy5rZXkgPSByZWFkRmlsZShjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnNzbC5rZXknKSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbmV3IGh0dHBzLkFnZW50KGFnZW50T3B0aW9ucyk7XHJcbn0pO1xyXG5cclxuLy8gU2VlIGh0dHBzOi8vbG9kYXNoLmNvbS9kb2NzI21lbW9pemU6IFdlIHVzZSBhIE1hcCgpIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQsIGJlY2F1c2Ugd2Ugd2FudCB0aGUga2V5cyBpbiB0aGUgY2FjaGVcclxuLy8gdG8gYmUgdGhlIHNlcnZlciBvYmplY3RzLCBhbmQgYnkgZGVmYXVsdCB0aGVzZSB3b3VsZCBiZSBjb2VyY2VkIHRvIHN0cmluZ3MgYXMga2V5cyAod2hpY2ggd291bGRuJ3QgYmUgdXNlZnVsKVxyXG5tb2R1bGUuZXhwb3J0cy5jYWNoZSA9IG5ldyBNYXAoKTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/create_agent.js"
      ],
      "names": [],
      "mappings": ";;;;AAAA,IAAM,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;AAC3B,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAM,QAAQ,GAAG,SAAX,QAAQ,CAAI,IAAI;SAAK,OAAO,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,CAAC;CAAA,CAAC;AACpE,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,IAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;AAE/B,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC,UAAU,MAAM,EAAE;AAC3C,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,CAAC;;AAE1D,MAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,OAAO,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;;AAE7D,MAAM,YAAY,GAAG;AACnB,sBAAkB,EAAE,MAAM,CAAC,GAAG,CAAC,0BAA0B,CAAC;GAC3D,CAAC;;AAEF,MAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC,EAAE;AAC9C,gBAAY,CAAC,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;GACpE;;;AAGD,MAAI,MAAM,CAAC,GAAG,CAAC,wBAAwB,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,EAAE;AAC/E,gBAAY,CAAC,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,CAAC;AACnE,gBAAY,CAAC,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC;GAClE;;AAED,SAAO,IAAI,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;CACtC,CAAC,CAAC;;;;AAIH,MAAM,CAAC,OAAO,CAAC,KAAK,GAAG,UAAS,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/create_agent.js",
      "sourcesContent": [
        "const url = require('url');\r\nconst _ = require('lodash');\r\nconst readFile = (file) => require('fs').readFileSync(file, 'utf8');\r\nconst http = require('http');\r\nconst https = require('https');\r\n\r\nmodule.exports = _.memoize(function (server) {\r\n  const config = server.config();\r\n  const target = url.parse(config.get('elasticsearch.url'));\r\n\r\n  if (!/^https/.test(target.protocol)) return new http.Agent();\r\n\r\n  const agentOptions = {\r\n    rejectUnauthorized: config.get('elasticsearch.ssl.verify')\r\n  };\r\n\r\n  if (_.size(config.get('elasticsearch.ssl.ca'))) {\r\n    agentOptions.ca = config.get('elasticsearch.ssl.ca').map(readFile);\r\n  }\r\n\r\n  // Add client certificate and key if required by elasticsearch\r\n  if (config.get('elasticsearch.ssl.cert') && config.get('elasticsearch.ssl.key')) {\r\n    agentOptions.cert = readFile(config.get('elasticsearch.ssl.cert'));\r\n    agentOptions.key = readFile(config.get('elasticsearch.ssl.key'));\r\n  }\r\n\r\n  return new https.Agent(agentOptions);\r\n});\r\n\r\n// See https://lodash.com/docs#memoize: We use a Map() instead of the default, because we want the keys in the cache\r\n// to be the server objects, and by default these would be coerced to strings as keys (which wouldn't be useful)\r\nmodule.exports.cache = new Map();\r\n"
      ]
    },
    "mtime": 1465716670311
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/map_uri.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar querystring = require('querystring');\nvar resolve = require('url').resolve;\nmodule.exports = function mapUri(server, prefix) {\n  var config = server.config();\n  return function (request, done) {\n    var path = request.path.replace('/elasticsearch', '');\n    var url = config.get('elasticsearch.url');\n    if (path) {\n      if (/\\/$/.test(url)) url = url.substring(0, url.length - 1);\n      url += path;\n    }\n    var query = querystring.stringify(request.query);\n    if (query) url += '?' + query;\n    done(null, url);\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoL2xpYi9tYXBfdXJpLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzNDLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDdkMsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLE1BQU0sQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQy9DLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixTQUFPLFVBQVUsT0FBTyxFQUFFLElBQUksRUFBRTtBQUM5QixRQUFNLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN4RCxRQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDMUMsUUFBSSxJQUFJLEVBQUU7QUFDUixVQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDNUQsU0FBRyxJQUFJLElBQUksQ0FBQztLQUNiO0FBQ0QsUUFBTSxLQUFLLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbkQsUUFBSSxLQUFLLEVBQUUsR0FBRyxJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUM7QUFDOUIsUUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztHQUNqQixDQUFDO0NBQ0gsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaC9saWIvbWFwX3VyaS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTtcclxuY29uc3QgcmVzb2x2ZSA9IHJlcXVpcmUoJ3VybCcpLnJlc29sdmU7XHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWFwVXJpKHNlcnZlciwgcHJlZml4KSB7XHJcbiAgY29uc3QgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xyXG4gIHJldHVybiBmdW5jdGlvbiAocmVxdWVzdCwgZG9uZSkge1xyXG4gICAgY29uc3QgcGF0aCA9IHJlcXVlc3QucGF0aC5yZXBsYWNlKCcvZWxhc3RpY3NlYXJjaCcsICcnKTtcclxuICAgIGxldCB1cmwgPSBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnVybCcpO1xyXG4gICAgaWYgKHBhdGgpIHtcclxuICAgICAgaWYgKC9cXC8kLy50ZXN0KHVybCkpIHVybCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmxlbmd0aCAtIDEpO1xyXG4gICAgICB1cmwgKz0gcGF0aDtcclxuICAgIH1cclxuICAgIGNvbnN0IHF1ZXJ5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHJlcXVlc3QucXVlcnkpO1xyXG4gICAgaWYgKHF1ZXJ5KSB1cmwgKz0gJz8nICsgcXVlcnk7XHJcbiAgICBkb25lKG51bGwsIHVybCk7XHJcbiAgfTtcclxufTtcclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/map_uri.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,WAAW,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AAC3C,IAAM,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;AACvC,MAAM,CAAC,OAAO,GAAG,SAAS,MAAM,CAAC,MAAM,EAAE,MAAM,EAAE;AAC/C,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,SAAO,UAAU,OAAO,EAAE,IAAI,EAAE;AAC9B,QAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,EAAE,CAAC,CAAC;AACxD,QAAI,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;AAC1C,QAAI,IAAI,EAAE;AACR,UAAI,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAC5D,SAAG,IAAI,IAAI,CAAC;KACb;AACD,QAAM,KAAK,GAAG,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACnD,QAAI,KAAK,EAAE,GAAG,IAAI,GAAG,GAAG,KAAK,CAAC;AAC9B,QAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;GACjB,CAAC;CACH,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch/lib/map_uri.js",
      "sourcesContent": [
        "const querystring = require('querystring');\r\nconst resolve = require('url').resolve;\r\nmodule.exports = function mapUri(server, prefix) {\r\n  const config = server.config();\r\n  return function (request, done) {\r\n    const path = request.path.replace('/elasticsearch', '');\r\n    let url = config.get('elasticsearch.url');\r\n    if (path) {\r\n      if (/\\/$/.test(url)) url = url.substring(0, url.length - 1);\r\n      url += path;\r\n    }\r\n    const query = querystring.stringify(request.query);\r\n    if (query) url += '?' + query;\r\n    done(null, url);\r\n  };\r\n};\r\n"
      ]
    },
    "mtime": 1465716670342
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch_status-master/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./server/routes",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "api"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _serverRoutes = require('./server/routes');\n\nvar _serverRoutes2 = _interopRequireDefault(_serverRoutes);\n\nexports['default'] = function (kibana) {\n  return new kibana.Plugin({\n    require: ['elasticsearch'],\n\n    uiExports: {\n      // Register the app component of our plugin to uiExports\n      app: {\n        // The title of the app (will be shown to the user)\n        title: 'Indices',\n        // An description of the application.\n        description: 'An awesome Kibana plugin',\n        // The require reference to the JavaScript file for this app\n        main: 'plugins/elasticsearch_status/dejavu',\n        //autoload: kibana.autoload.require.concat(\n        //  'plugins/elasticsearch_status/src/js/helper/feed'\n        //),\n        // The require reference to the icon of the app\n        icon: 'plugins/elasticsearch_status/icon.svg',\n        injectVars: function injectVars(server, options) {\n          var config = server.config();\n          return {\n            kbnIndex: config.get('kibana.index'),\n            esShardTimeout: config.get('elasticsearch.shardTimeout'),\n            esApiVersion: config.get('elasticsearch.apiVersion'),\n            BRANCH: 'master'\n          };\n        }\n      }\n    },\n\n    // The init method will be executed when the Kibana server starts and loads\n    // this plugin. It is used to set up everything that you need.\n    init: function init(server, options) {\n      // Just call the api module that we imported above (the server/routes.js file)\n      // and pass the server to it, so it can register several API interfaces at the server.\n      (0, _serverRoutes2['default'])(kibana.config.get('optimize.bundleDir'), server);\n    }\n\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoX3N0YXR1cy1tYXN0ZXIvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7NEJBQWdCLGlCQUFpQjs7OztxQkFFbEIsVUFBVSxNQUFNLEVBQUU7QUFDL0IsU0FBTyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDdkIsV0FBTyxFQUFFLENBQUMsZUFBZSxDQUFDOztBQUUxQixhQUFTLEVBQUU7O0FBRVQsU0FBRyxFQUFFOztBQUVILGFBQUssRUFBRSxTQUFTOztBQUVoQixtQkFBVyxFQUFFLDBCQUEwQjs7QUFFdkMsWUFBSSxFQUFFLHFDQUFxQzs7Ozs7QUFLM0MsWUFBSSxFQUFFLHVDQUF1QztBQUM3QyxrQkFBVSxFQUFFLG9CQUFVLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDckMsY0FBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzdCLGlCQUFPO0FBQ0wsb0JBQVEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQztBQUNwQywwQkFBYyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsNEJBQTRCLENBQUM7QUFDeEQsd0JBQVksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLDBCQUEwQixDQUFDO0FBQ3BELGtCQUFNLEVBQUcsUUFBUTtXQUNsQixDQUFDO1NBQ0g7T0FDRjtLQUNGOzs7O0FBSUQsUUFBSSxFQUFBLGNBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRTs7O0FBR3BCLHFDQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLEVBQUMsTUFBTSxDQUFDLENBQUM7S0FDckQ7O0dBRUYsQ0FBQyxDQUFDO0NBQ0o7O0FBQUEsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaF9zdGF0dXMtbWFzdGVyL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFwaSBmcm9tICcuL3NlcnZlci9yb3V0ZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoa2liYW5hKSB7XG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG4gICAgcmVxdWlyZTogWydlbGFzdGljc2VhcmNoJ10sXG5cbiAgICB1aUV4cG9ydHM6IHtcbiAgICAgIC8vIFJlZ2lzdGVyIHRoZSBhcHAgY29tcG9uZW50IG9mIG91ciBwbHVnaW4gdG8gdWlFeHBvcnRzXG4gICAgICBhcHA6IHtcbiAgICAgICAgLy8gVGhlIHRpdGxlIG9mIHRoZSBhcHAgKHdpbGwgYmUgc2hvd24gdG8gdGhlIHVzZXIpXG4gICAgICAgIHRpdGxlOiAnSW5kaWNlcycsXG4gICAgICAgIC8vIEFuIGRlc2NyaXB0aW9uIG9mIHRoZSBhcHBsaWNhdGlvbi5cbiAgICAgICAgZGVzY3JpcHRpb246ICdBbiBhd2Vzb21lIEtpYmFuYSBwbHVnaW4nLFxuICAgICAgICAvLyBUaGUgcmVxdWlyZSByZWZlcmVuY2UgdG8gdGhlIEphdmFTY3JpcHQgZmlsZSBmb3IgdGhpcyBhcHBcbiAgICAgICAgbWFpbjogJ3BsdWdpbnMvZWxhc3RpY3NlYXJjaF9zdGF0dXMvZGVqYXZ1JyxcbiAgICAgICAgLy9hdXRvbG9hZDoga2liYW5hLmF1dG9sb2FkLnJlcXVpcmUuY29uY2F0KFxuICAgICAgICAvLyAgJ3BsdWdpbnMvZWxhc3RpY3NlYXJjaF9zdGF0dXMvc3JjL2pzL2hlbHBlci9mZWVkJ1xuICAgICAgICAvLyksXG4gICAgICAgIC8vIFRoZSByZXF1aXJlIHJlZmVyZW5jZSB0byB0aGUgaWNvbiBvZiB0aGUgYXBwXG4gICAgICAgIGljb246ICdwbHVnaW5zL2VsYXN0aWNzZWFyY2hfc3RhdHVzL2ljb24uc3ZnJyxcbiAgICAgICAgaW5qZWN0VmFyczogZnVuY3Rpb24gKHNlcnZlciwgb3B0aW9ucykge1xuICAgICAgICAgIHZhciBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtibkluZGV4OiBjb25maWcuZ2V0KCdraWJhbmEuaW5kZXgnKSxcbiAgICAgICAgICAgIGVzU2hhcmRUaW1lb3V0OiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLnNoYXJkVGltZW91dCcpLFxuICAgICAgICAgICAgZXNBcGlWZXJzaW9uOiBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoLmFwaVZlcnNpb24nKSxcbiAgICAgICAgICAgIEJSQU5DSCA6ICdtYXN0ZXInXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBUaGUgaW5pdCBtZXRob2Qgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRoZSBLaWJhbmEgc2VydmVyIHN0YXJ0cyBhbmQgbG9hZHNcbiAgICAvLyB0aGlzIHBsdWdpbi4gSXQgaXMgdXNlZCB0byBzZXQgdXAgZXZlcnl0aGluZyB0aGF0IHlvdSBuZWVkLlxuICAgIGluaXQoc2VydmVyLCBvcHRpb25zKSB7XG4gICAgICAvLyBKdXN0IGNhbGwgdGhlIGFwaSBtb2R1bGUgdGhhdCB3ZSBpbXBvcnRlZCBhYm92ZSAodGhlIHNlcnZlci9yb3V0ZXMuanMgZmlsZSlcbiAgICAgIC8vIGFuZCBwYXNzIHRoZSBzZXJ2ZXIgdG8gaXQsIHNvIGl0IGNhbiByZWdpc3RlciBzZXZlcmFsIEFQSSBpbnRlcmZhY2VzIGF0IHRoZSBzZXJ2ZXIuXG4gICAgICBhcGkoa2liYW5hLmNvbmZpZy5nZXQoJ29wdGltaXplLmJ1bmRsZURpcicpLHNlcnZlcik7XG4gICAgfVxuXG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch_status-master/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;4BAAgB,iBAAiB;;;;qBAElB,UAAU,MAAM,EAAE;AAC/B,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,WAAO,EAAE,CAAC,eAAe,CAAC;;AAE1B,aAAS,EAAE;;AAET,SAAG,EAAE;;AAEH,aAAK,EAAE,SAAS;;AAEhB,mBAAW,EAAE,0BAA0B;;AAEvC,YAAI,EAAE,qCAAqC;;;;;AAK3C,YAAI,EAAE,uCAAuC;AAC7C,kBAAU,EAAE,oBAAU,MAAM,EAAE,OAAO,EAAE;AACrC,cAAI,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC7B,iBAAO;AACL,oBAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC;AACpC,0BAAc,EAAE,MAAM,CAAC,GAAG,CAAC,4BAA4B,CAAC;AACxD,wBAAY,EAAE,MAAM,CAAC,GAAG,CAAC,0BAA0B,CAAC;AACpD,kBAAM,EAAG,QAAQ;WAClB,CAAC;SACH;OACF;KACF;;;;AAID,QAAI,EAAA,cAAC,MAAM,EAAE,OAAO,EAAE;;;AAGpB,qCAAI,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,oBAAoB,CAAC,EAAC,MAAM,CAAC,CAAC;KACrD;;GAEF,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch_status-master/index.js",
      "sourcesContent": [
        "import api from './server/routes';\n\nexport default function (kibana) {\n  return new kibana.Plugin({\n    require: ['elasticsearch'],\n\n    uiExports: {\n      // Register the app component of our plugin to uiExports\n      app: {\n        // The title of the app (will be shown to the user)\n        title: 'Indices',\n        // An description of the application.\n        description: 'An awesome Kibana plugin',\n        // The require reference to the JavaScript file for this app\n        main: 'plugins/elasticsearch_status/dejavu',\n        //autoload: kibana.autoload.require.concat(\n        //  'plugins/elasticsearch_status/src/js/helper/feed'\n        //),\n        // The require reference to the icon of the app\n        icon: 'plugins/elasticsearch_status/icon.svg',\n        injectVars: function (server, options) {\n          var config = server.config();\n          return {\n            kbnIndex: config.get('kibana.index'),\n            esShardTimeout: config.get('elasticsearch.shardTimeout'),\n            esApiVersion: config.get('elasticsearch.apiVersion'),\n            BRANCH : 'master'\n          };\n        }\n      }\n    },\n\n    // The init method will be executed when the Kibana server starts and loads\n    // this plugin. It is used to set up everything that you need.\n    init(server, options) {\n      // Just call the api module that we imported above (the server/routes.js file)\n      // and pass the server to it, so it can register several API interfaces at the server.\n      api(kibana.config.get('optimize.bundleDir'),server);\n    }\n\n  });\n};\n"
      ]
    },
    "mtime": 1473148100759
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch_status-master/server/routes.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _Object$keys = require('babel-runtime/core-js/object/keys')['default'];\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar logger = require('./loggerUtil').getLogger(\"cheese\");\nvar _ = require('lodash');\n\nexports['default'] = function (bundleDir, server) {\n\n  // We can use this method, since we have set the require in the index.js to\n  // elasticsearch. So we can access the elasticsearch plugins safely here.\n  var call = server.plugins.elasticsearch.callWithRequest;\n\n  // Register a GET API at /api/elasticsearch_status/indices that returns\n  // an array of all indices in the elasticsearch. The server is actually an\n  // HAPI server and the complete documentation of the \"route\" method can be\n  // found in the official documentation: http://hapijs.com/api#serverrouteoptions\n  server.route({\n    path: '/api/elasticsearch_status/indices',\n    method: 'GET',\n    // The handler method will be called with the request that was made to this\n    // API and a reply method as 2nd parameter, that must be called with the\n    // content, that should be returned to the client.\n    handler: function handler(req, reply) {\n\n      // The call method that we just got from elasticsearch has the following\n      // syntax: the first parameter should be the request that actually came\n      // from the client. The callWithRequest method will take care about\n      // passing authentication data from kibana to elasticsearch or return\n      // authorization requests, etc.\n      // Second parameter to the function is the name of the javascript method\n      // you would like to call, as you can find it here in the documentation:\n      // https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/\n      // The third parameter will be passed as a parameter to the javascript method\n      // (it should contain the data you would have also passed to the client directly).\n      // The method returns a promise, which will be resolved with the data returned\n      // from Elasticsearch.\n      call(req, 'cluster.state').then(function (response) {\n        // Return just the names of all indices to the client.\n        logger.debug(\"****************************\\n\");\n        logger.debug(\"indices=\" + JSON.stringify(response));\n        logger.debug(\"indices\\n\");\n        var res = response.metadata.indices;\n        reply(_Object$keys(res));\n      });\n    }\n  });\n  server.route({\n    path: '/api/elasticsearch_status/{index}/types',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      call(req, 'cluster.state').then(function (response) {\n        // Return just the names of all indices to the client.\n        logger.debug(\"****************************\\n\" + req.params.index);\n        logger.debug(\"types=\" + JSON.stringify(response.metadata.indices[req.params.index].mappings));\n        logger.debug(\"types\\n\");\n        var res = response.metadata.indices[req.params.index].mappings;\n        reply(_Object$keys(res));\n      });\n    }\n  });\n  server.route({\n    // We can use path variables in here, that can be accessed on the request\n    // object in the handler.\n    path: '/api/elasticsearch_status/{index}/all',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      call(req, 'count', {\n        index: req.params.index\n      }).then(function (response) {\n        logger.debug(\"****************************\\n\" + req.params.index);\n        logger.debug(\"count\" + JSON.stringify(response));\n        logger.debug(\"count\\n\");\n        reply(response && response.count);\n      });\n    }\n  });\n  // Add a route to retrieve the status of an index by its index\n  server.route({\n    // We can use path variables in here, that can be accessed on the request\n    // object in the handler.\n    path: '/api/elasticsearch_status/{index}/{type}/{from}/{size}',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      call(req, 'search', {\n        index: req.params.index,\n        type: req.params.type,\n        from: req.params.from,\n        size: req.params.size\n      }).then(function (response) {\n        logger.debug(\"****************************\\n\" + req.params.index + \",type=\" + req.params.type + \",from=\" + req.params.from + \",size=\" + req.params.size);\n        logger.debug(\"searchData=\" + JSON.stringify(response));\n        logger.debug(\"searchData\\n\");\n        reply(response);\n      });\n    }\n  });\n  server.route({\n    // We can use path variables in here, that can be accessed on the request\n    // object in the handler.\n    path: '/api/elasticsearch_status/{index}/mapping',\n    method: 'GET',\n    handler: function handler(req, reply) {\n      call(req, 'indices.getMapping', {\n        index: req.params.index\n      }).then(function (response) {\n        logger.debug(\"****************************\\n\" + req.params.index);\n        logger.debug(\"mapping=\" + JSON.stringify(response));\n        logger.debug(\"mapping\\n\");\n        reply(response);\n      });\n    }\n  });\n  server.exposeStaticDir('/dejavu/{path*}', bundleDir + '/../dejavu');\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoX3N0YXR1cy1tYXN0ZXIvc2VydmVyL3JvdXRlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN6RCxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O3FCQUNYLFVBQVUsU0FBUyxFQUFFLE1BQU0sRUFBRTs7OztBQUkxQyxNQUFJLElBQUksR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUM7Ozs7OztBQU14RCxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsUUFBSSxFQUFFLG1DQUFtQztBQUN6QyxVQUFNLEVBQUUsS0FBSzs7OztBQUliLFdBQU8sRUFBQSxpQkFBQyxHQUFHLEVBQUUsS0FBSyxFQUFFOzs7Ozs7Ozs7Ozs7OztBQWNsQixVQUFJLENBQUMsR0FBRyxFQUFFLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLFFBQVEsRUFBRTs7QUFFbEQsY0FBTSxDQUFDLEtBQUssQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0FBQy9DLGNBQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNwRCxjQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzFCLFlBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO0FBQ3BDLGFBQUssQ0FDSCxhQUFZLEdBQUcsQ0FBQyxDQUNqQixDQUFDO09BQ0gsQ0FBQyxDQUFDO0tBQ0o7R0FDRixDQUFDLENBQUM7QUFDSCxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsUUFBSSxFQUFFLHlDQUF5QztBQUMvQyxVQUFNLEVBQUUs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QUM7OztBQUdYLFFBQUksRUFBRSwyQ0FBMkM7QUFDakQsVUFBTSxFQUFFLEtBQUs7QUFDYixXQUFPLEVBQUEsaUJBQUMsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUNsQixVQUFJLENBQUMsR0FBRyxFQUFFLG9CQUFvQixFQUFFO0FBQzlCLGFBQUssRUFBRSxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUs7T0FDeEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLFFBQVEsRUFBRTtBQUMxQixjQUFNLENBQUMsS0FBSyxDQUFDLGdDQUFnQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbEUsY0FBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ3BELGNBQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDMUIsYUFBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO09BQ2pCLENBQUMsQ0FBQztLQUNKO0dBQ0YsQ0FBQyxDQUFDO0FBQ0gsUUFBTSxDQUFDLGVBQWUsQ0FBQyxpQkFBaUIsRUFBRSxTQUFTLEdBQUcsWUFBWSxDQUFDLENBQUM7Q0FFckU7O0FBQUEsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaF9zdGF0dXMtbWFzdGVyL3NlcnZlci9yb3V0ZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbG9nZ2VyID0gcmVxdWlyZSgnLi9sb2dnZXJVdGlsJykuZ2V0TG9nZ2VyKFwiY2hlZXNlXCIpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChidW5kbGVEaXIsIHNlcnZlcikge1xuXG4gIC8vIFdlIGNhbiB1c2UgdGhpcyBtZXRob2QsIHNpbmNlIHdlIGhhdmUgc2V0IHRoZSByZXF1aXJlIGluIHRoZSBpbmRleC5qcyB0b1xuICAvLyBlbGFzdGljc2VhcmNoLiBTbyB3ZSBjYW4gYWNjZXNzIHRoZSBlbGFzdGljc2VhcmNoIHBsdWdpbnMgc2FmZWx5IGhlcmUuXG4gIGxldCBjYWxsID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jYWxsV2l0aFJlcXVlc3Q7XG5cbiAgLy8gUmVnaXN0ZXIgYSBHRVQgQVBJIGF0IC9hcGkvZWxhc3RpY3NlYXJjaF9zdGF0dXMvaW5kaWNlcyB0aGF0IHJldHVybnNcbiAgLy8gYW4gYXJyYXkgb2YgYWxsIGluZGljZXMgaW4gdGhlIGVsYXN0aWNzZWFyY2guIFRoZSBzZXJ2ZXIgaXMgYWN0dWFsbHkgYW5cbiAgLy8gSEFQSSBzZXJ2ZXIgYW5kIHRoZSBjb21wbGV0ZSBkb2N1bWVudGF0aW9uIG9mIHRoZSBcInJvdXRlXCIgbWV0aG9kIGNhbiBiZVxuICAvLyBmb3VuZCBpbiB0aGUgb2ZmaWNpYWwgZG9jdW1lbnRhdGlvbjogaHR0cDovL2hhcGlqcy5jb20vYXBpI3NlcnZlcnJvdXRlb3B0aW9uc1xuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6ICcvYXBpL2VsYXN0aWNzZWFyY2hfc3RhdHVzL2luZGljZXMnLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgLy8gVGhlIGhhbmRsZXIgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIHJlcXVlc3QgdGhhdCB3YXMgbWFkZSB0byB0aGlzXG4gICAgLy8gQVBJIGFuZCBhIHJlcGx5IG1ldGhvZCBhcyAybmQgcGFyYW1ldGVyLCB0aGF0IG11c3QgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgLy8gY29udGVudCwgdGhhdCBzaG91bGQgYmUgcmV0dXJuZWQgdG8gdGhlIGNsaWVudC5cbiAgICBoYW5kbGVyKHJlcSwgcmVwbHkpIHtcblxuICAgICAgLy8gVGhlIGNhbGwgbWV0aG9kIHRoYXQgd2UganVzdCBnb3QgZnJvbSBlbGFzdGljc2VhcmNoIGhhcyB0aGUgZm9sbG93aW5nXG4gICAgICAvLyBzeW50YXg6IHRoZSBmaXJzdCBwYXJhbWV0ZXIgc2hvdWxkIGJlIHRoZSByZXF1ZXN0IHRoYXQgYWN0dWFsbHkgY2FtZVxuICAgICAgLy8gZnJvbSB0aGUgY2xpZW50LiBUaGUgY2FsbFdpdGhSZXF1ZXN0IG1ldGhvZCB3aWxsIHRha2UgY2FyZSBhYm91dFxuICAgICAgLy8gcGFzc2luZyBhdXRoZW50aWNhdGlvbiBkYXRhIGZyb20ga2liYW5hIHRvIGVsYXN0aWNzZWFyY2ggb3IgcmV0dXJuXG4gICAgICAvLyBhdXRob3JpemF0aW9uIHJlcXVlc3RzLCBldGMuXG4gICAgICAvLyBTZWNvbmQgcGFyYW1ldGVyIHRvIHRoZSBmdW5jdGlvbiBpcyB0aGUgbmFtZSBvZiB0aGUgamF2YXNjcmlwdCBtZXRob2RcbiAgICAgIC8vIHlvdSB3b3VsZCBsaWtlIHRvIGNhbGwsIGFzIHlvdSBjYW4gZmluZCBpdCBoZXJlIGluIHRoZSBkb2N1bWVudGF0aW9uOlxuICAgICAgLy8gaHR0cHM6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9lbGFzdGljc2VhcmNoL2NsaWVudC9qYXZhc2NyaXB0LWFwaS9jdXJyZW50L1xuICAgICAgLy8gVGhlIHRoaXJkIHBhcmFtZXRlciB3aWxsIGJlIHBhc3NlZCBhcyBhIHBhcmFtZXRlciB0byB0aGUgamF2YXNjcmlwdCBtZXRob2RcbiAgICAgIC8vIChpdCBzaG91bGQgY29udGFpbiB0aGUgZGF0YSB5b3Ugd291bGQgaGF2ZSBhbHNvIHBhc3NlZCB0byB0aGUgY2xpZW50IGRpcmVjdGx5KS5cbiAgICAgIC8vIFRoZSBtZXRob2QgcmV0dXJucyBhIHByb21pc2UsIHdoaWNoIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgZGF0YSByZXR1cm5lZFxuICAgICAgLy8gZnJvbSBFbGFzdGljc2VhcmNoLlxuICAgICAgY2FsbChyZXEsICdjbHVzdGVyLnN0YXRlJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgLy8gUmV0dXJuIGp1c3QgdGhlIG5hbWVzIG9mIGFsbCBpbmRpY2VzIHRvIHRoZSBjbGllbnQuXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIioqKioqKioqKioqKioqKioqKioqKioqKioqKipcXG5cIik7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcImluZGljZXM9XCIgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpO1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJpbmRpY2VzXFxuXCIpO1xuICAgICAgICB2YXIgcmVzID0gcmVzcG9uc2UubWV0YWRhdGEuaW5kaWNlcztcbiAgICAgICAgcmVwbHkoXG4gICAgICAgICAgT2JqZWN0LmtleXMocmVzKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiAnL2FwaS9lbGFzdGljc2VhcmNoX3N0YXR1cy97aW5kZXh9L3R5cGVzJyxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGhhbmRsZXIocmVxLCByZXBseSkge1xuICAgICAgY2FsbChyZXEsICdjbHVzdGVyLnN0YXRlJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgLy8gUmV0dXJuIGp1c3QgdGhlIG5hbWVzIG9mIGFsbCBpbmRpY2VzIHRvIHRoZSBjbGllbnQuXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIioqKioqKioqKioqKioqKioqKioqKioqKioqKipcXG5cIiArIHJlcS5wYXJhbXMuaW5kZXgpO1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJ0eXBlcz1cIiArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLm1ldGFkYXRhLmluZGljZXNbcmVxLnBhcmFtcy5pbmRleF0ubWFwcGluZ3MpKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwidHlwZXNcXG5cIik7XG4gICAgICAgIHZhciByZXMgPSByZXNwb25zZS5tZXRhZGF0YS5pbmRpY2VzW3JlcS5wYXJhbXMuaW5kZXhdLm1hcHBpbmdzO1xuICAgICAgICByZXBseShcbiAgICAgICAgICBPYmplY3Qua2V5cyhyZXMpXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBzZXJ2ZXIucm91dGUoe1xuICAgIC8vIFdlIGNhbiB1c2UgcGF0aCB2YXJpYWJsZXMgaW4gaGVyZSwgdGhhdCBjYW4gYmUgYWNjZXNzZWQgb24gdGhlIHJlcXVlc3RcbiAgICAvLyBvYmplY3QgaW4gdGhlIGhhbmRsZXIuXG4gICAgcGF0aDogJy9hcGkvZWxhc3RpY3NlYXJjaF9zdGF0dXMve2luZGV4fS9hbGwnLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcihyZXEsIHJlcGx5KSB7XG4gICAgICBjYWxsKHJlcSwgJ2NvdW50Jywge1xuICAgICAgICBpbmRleDogcmVxLnBhcmFtcy5pbmRleFxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxcblwiICsgcmVxLnBhcmFtcy5pbmRleCk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcImNvdW50XCIgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpO1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJjb3VudFxcblwiKTtcbiAgICAgICAgcmVwbHkocmVzcG9uc2UgJiYgcmVzcG9uc2UuY291bnQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgLy8gQWRkIGEgcm91dGUgdG8gcmV0cmlldmUgdGhlIHN0YXR1cyBvZiBhbiBpbmRleCBieSBpdHMgaW5kZXhcbiAgc2VydmVyLnJvdXRlKHtcbiAgICAvLyBXZSBjYW4gdXNlIHBhdGggdmFyaWFibGVzIGluIGhlcmUsIHRoYXQgY2FuIGJlIGFjY2Vzc2VkIG9uIHRoZSByZXF1ZXN0XG4gICAgLy8gb2JqZWN0IGluIHRoZSBoYW5kbGVyLlxuICAgIHBhdGg6ICcvYXBpL2VsYXN0aWNzZWFyY2hfc3RhdHVzL3tpbmRleH0ve3R5cGV9L3tmcm9tfS97c2l6ZX0nLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcihyZXEsIHJlcGx5KSB7XG4gICAgICBjYWxsKHJlcSwgJ3NlYXJjaCcsIHtcbiAgICAgICAgaW5kZXg6IHJlcS5wYXJhbXMuaW5kZXgsXG4gICAgICAgIHR5cGU6IHJlcS5wYXJhbXMudHlwZSxcbiAgICAgICAgZnJvbTogcmVxLnBhcmFtcy5mcm9tLFxuICAgICAgICBzaXplOiByZXEucGFyYW1zLnNpemVcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIioqKioqKioqKioqKioqKioqKioqKioqKioqKipcXG5cIlxuICAgICAgICAgICsgcmVxLnBhcmFtcy5pbmRleCArIFwiLHR5cGU9XCIgKyByZXEucGFyYW1zLnR5cGUgKyBcIixmcm9tPVwiICsgcmVxLnBhcmFtcy5mcm9tICsgXCIsc2l6ZT1cIiArIHJlcS5wYXJhbXMuc2l6ZSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcInNlYXJjaERhdGE9XCIgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpO1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJzZWFyY2hEYXRhXFxuXCIpO1xuICAgICAgICByZXBseShyZXNwb25zZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBzZXJ2ZXIucm91dGUoe1xuICAgIC8vIFdlIGNhbiB1c2UgcGF0aCB2YXJpYWJsZXMgaW4gaGVyZSwgdGhhdCBjYW4gYmUgYWNjZXNzZWQgb24gdGhlIHJlcXVlc3RcbiAgICAvLyBvYmplY3QgaW4gdGhlIGhhbmRsZXIuXG4gICAgcGF0aDogJy9hcGkvZWxhc3RpY3NlYXJjaF9zdGF0dXMve2luZGV4fS9tYXBwaW5nJyxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGhhbmRsZXIocmVxLCByZXBseSkge1xuICAgICAgY2FsbChyZXEsICdpbmRpY2VzLmdldE1hcHBpbmcnLCB7XG4gICAgICAgIGluZGV4OiByZXEucGFyYW1zLmluZGV4XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBsb2dnZXIuZGVidWcoXCIqKioqKioqKioqKioqKioqKioqKioqKioqKioqXFxuXCIgKyByZXEucGFyYW1zLmluZGV4KTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwibWFwcGluZz1cIiArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIm1hcHBpbmdcXG5cIik7XG4gICAgICAgIHJlcGx5KHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHNlcnZlci5leHBvc2VTdGF0aWNEaXIoJy9kZWphdnUve3BhdGgqfScsIGJ1bmRsZURpciArICcvLi4vZGVqYXZ1Jyk7XG5cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch_status-master/server/routes.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch_status-master/server/routes.js",
      "sourcesContent": [
        "var logger = require('./loggerUtil').getLogger(\"cheese\");\nvar _ = require('lodash');\nexport default function (bundleDir, server) {\n\n  // We can use this method, since we have set the require in the index.js to\n  // elasticsearch. So we can access the elasticsearch plugins safely here.\n  let call = server.plugins.elasticsearch.callWithRequest;\n\n  // Register a GET API at /api/elasticsearch_status/indices that returns\n  // an array of all indices in the elasticsearch. The server is actually an\n  // HAPI server and the complete documentation of the \"route\" method can be\n  // found in the official documentation: http://hapijs.com/api#serverrouteoptions\n  server.route({\n    path: '/api/elasticsearch_status/indices',\n    method: 'GET',\n    // The handler method will be called with the request that was made to this\n    // API and a reply method as 2nd parameter, that must be called with the\n    // content, that should be returned to the client.\n    handler(req, reply) {\n\n      // The call method that we just got from elasticsearch has the following\n      // syntax: the first parameter should be the request that actually came\n      // from the client. The callWithRequest method will take care about\n      // passing authentication data from kibana to elasticsearch or return\n      // authorization requests, etc.\n      // Second parameter to the function is the name of the javascript method\n      // you would like to call, as you can find it here in the documentation:\n      // https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/\n      // The third parameter will be passed as a parameter to the javascript method\n      // (it should contain the data you would have also passed to the client directly).\n      // The method returns a promise, which will be resolved with the data returned\n      // from Elasticsearch.\n      call(req, 'cluster.state').then(function (response) {\n        // Return just the names of all indices to the client.\n        logger.debug(\"****************************\\n\");\n        logger.debug(\"indices=\" + JSON.stringify(response));\n        logger.debug(\"indices\\n\");\n        var res = response.metadata.indices;\n        reply(\n          Object.keys(res)\n        );\n      });\n    }\n  });\n  server.route({\n    path: '/api/elasticsearch_status/{index}/types',\n    method: 'GET',\n    handler(req, reply) {\n      call(req, 'cluster.state').then(function (response) {\n        // Return just the names of all indices to the client.\n        logger.debug(\"****************************\\n\" + req.params.index);\n        logger.debug(\"types=\" + JSON.stringify(response.metadata.indices[req.params.index].mappings));\n        logger.debug(\"types\\n\");\n        var res = response.metadata.indices[req.params.index].mappings;\n        reply(\n          Object.keys(res)\n        );\n      });\n    }\n  });\n  server.route({\n    // We can use path variables in here, that can be accessed on the request\n    // object in the handler.\n    path: '/api/elasticsearch_status/{index}/all',\n    method: 'GET',\n    handler(req, reply) {\n      call(req, 'count', {\n        index: req.params.index\n      }).then(function (response) {\n        logger.debug(\"****************************\\n\" + req.params.index);\n        logger.debug(\"count\" + JSON.stringify(response));\n        logger.debug(\"count\\n\");\n        reply(response && response.count);\n      });\n    }\n  });\n  // Add a route to retrieve the status of an index by its index\n  server.route({\n    // We can use path variables in here, that can be accessed on the request\n    // object in the handler.\n    path: '/api/elasticsearch_status/{index}/{type}/{from}/{size}',\n    method: 'GET',\n    handler(req, reply) {\n      call(req, 'search', {\n        index: req.params.index,\n        type: req.params.type,\n        from: req.params.from,\n        size: req.params.size\n      }).then(function (response) {\n        logger.debug(\"****************************\\n\"\n          + req.params.index + \",type=\" + req.params.type + \",from=\" + req.params.from + \",size=\" + req.params.size);\n        logger.debug(\"searchData=\" + JSON.stringify(response));\n        logger.debug(\"searchData\\n\");\n        reply(response);\n      });\n    }\n  });\n  server.route({\n    // We can use path variables in here, that can be accessed on the request\n    // object in the handler.\n    path: '/api/elasticsearch_status/{index}/mapping',\n    method: 'GET',\n    handler(req, reply) {\n      call(req, 'indices.getMapping', {\n        index: req.params.index\n      }).then(function (response) {\n        logger.debug(\"****************************\\n\" + req.params.index);\n        logger.debug(\"mapping=\" + JSON.stringify(response));\n        logger.debug(\"mapping\\n\");\n        reply(response);\n      });\n    }\n  });\n  server.exposeStaticDir('/dejavu/{path*}', bundleDir + '/../dejavu');\n\n};\n"
      ]
    },
    "mtime": 1474540534974
  },
  "{\"filename\":\"D:/backup/oplate/kibana1/src/plugins/elasticsearch_status-master/server/loggerUtil.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":false,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":1,\"blacklist\":[],\"optional\":[\"runtime\"],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "/**\n * Copyright (c) 2010-2015 EEFUNG Software Co.Ltd. All rights reserved.\n * 版权所有 (c) 2010-2015 湖南蚁坊软件有限公司。保留所有权利。\n * Created by liwenjun on 2016/9/9.\n */\n'use strict';\n\nvar log4js = require('log4js'),\n    loggerConfig = require(\"./logger\").log4js;\n\nlog4js.configure(loggerConfig);\n\n//获取logger的方法\nfunction getLogger(logId) {\n  var logger = log4js.getLogger(logId);\n  if (logger != null) {\n    var logConfig;\n    for (var index in loggerConfig.appenders) {\n      logConfig = loggerConfig.appenders[index];\n      if (logConfig && logConfig.category && logConfig.category === logId) {\n        break;\n      }\n    }\n    if (logConfig != null) {\n      logger.setLevel(logConfig.logLevel);\n    } else {\n      throw 'no logger with logId : ' + logId + ' found';\n    }\n    return logger;\n  } else {\n    throw 'no logger with logId : ' + logId + ' found';\n  }\n}\nexports.getLogger = getLogger;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2JhY2t1cC9vcGxhdGUva2liYW5hMS9zcmMvcGx1Z2lucy9lbGFzdGljc2VhcmNoX3N0YXR1cy1tYXN0ZXIvc2VydmVyL2xvZ2dlclV0aWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUtBLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7SUFDMUIsWUFBWSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUM7O0FBRTlDLE1BQU0sQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7OztBQUcvQixTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUU7QUFDeEIsTUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNyQyxNQUFJLE1BQU0sSUFBSSxJQUFJLEVBQUU7QUFDbEIsUUFBSSxTQUFTLENBQUM7QUFDZCxTQUFJLElBQUksS0FBSyxJQUFLLFlBQVksQ0FBQyxTQUFTLEVBQUM7QUFDdkMsZUFBUyxHQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDeEMsVUFBRyxTQUFTLElBQUUsU0FBUyxDQUFDLFFBQVEsSUFBRSxTQUFTLENBQUMsUUFBUSxLQUFHLEtBQUssRUFBQztBQUMzRCxjQUFNO09BQ1A7S0FDRjtBQUNELFFBQUksU0FBUyxJQUFJLElBQUksRUFBRTtBQUNyQixZQUFNLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUNyQyxNQUFNO0FBQ0wsWUFBTSx5QkFBeUIsR0FBRyxLQUFLLEdBQUcsUUFBUSxDQUFDO0tBQ3BEO0FBQ0QsV0FBTyxNQUFNLENBQUM7R0FDZixNQUFNO0FBQ0wsVUFBTSx5QkFBeUIsR0FBRyxLQUFLLEdBQUcsUUFBUSxDQUFDO0dBQ3BEO0NBQ0Y7QUFDRCxPQUFPLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQyIsImZpbGUiOiJEOi9iYWNrdXAvb3BsYXRlL2tpYmFuYTEvc3JjL3BsdWdpbnMvZWxhc3RpY3NlYXJjaF9zdGF0dXMtbWFzdGVyL3NlcnZlci9sb2dnZXJVdGlsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxNSBFRUZVTkcgU29mdHdhcmUgQ28uTHRkLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICog54mI5p2D5omA5pyJIChjKSAyMDEwLTIwMTUg5rmW5Y2X6JqB5Z2K6L2v5Lu25pyJ6ZmQ5YWs5Y+444CC5L+d55WZ5omA5pyJ5p2D5Yip44CCXG4gKiBDcmVhdGVkIGJ5IGxpd2VuanVuIG9uIDIwMTYvOS85LlxuICovXG52YXIgbG9nNGpzID0gcmVxdWlyZSgnbG9nNGpzJylcbiAgLCBsb2dnZXJDb25maWcgPSByZXF1aXJlKFwiLi9sb2dnZXJcIikubG9nNGpzO1xuXG5sb2c0anMuY29uZmlndXJlKGxvZ2dlckNvbmZpZyk7XG5cbi8v6I635Y+WbG9nZ2Vy55qE5pa55rOVXG5mdW5jdGlvbiBnZXRMb2dnZXIobG9nSWQpIHtcbiAgdmFyIGxvZ2dlciA9IGxvZzRqcy5nZXRMb2dnZXIobG9nSWQpO1xuICBpZiAobG9nZ2VyICE9IG51bGwpIHtcbiAgICB2YXIgbG9nQ29uZmlnO1xuICAgIGZvcih2YXIgaW5kZXggIGluIGxvZ2dlckNvbmZpZy5hcHBlbmRlcnMpe1xuICAgICAgbG9nQ29uZmlnPWxvZ2dlckNvbmZpZy5hcHBlbmRlcnNbaW5kZXhdO1xuICAgICAgaWYobG9nQ29uZmlnJiZsb2dDb25maWcuY2F0ZWdvcnkmJmxvZ0NvbmZpZy5jYXRlZ29yeT09PWxvZ0lkKXtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChsb2dDb25maWcgIT0gbnVsbCkge1xuICAgICAgbG9nZ2VyLnNldExldmVsKGxvZ0NvbmZpZy5sb2dMZXZlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93ICdubyBsb2dnZXIgd2l0aCBsb2dJZCA6ICcgKyBsb2dJZCArICcgZm91bmQnO1xuICAgIH1cbiAgICByZXR1cm4gbG9nZ2VyO1xuICB9IGVsc2Uge1xuICAgIHRocm93ICdubyBsb2dnZXIgd2l0aCBsb2dJZCA6ICcgKyBsb2dJZCArICcgZm91bmQnO1xuICB9XG59XG5leHBvcnRzLmdldExvZ2dlciA9IGdldExvZ2dlcjtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "D:/backup/oplate/kibana1/src/plugins/elasticsearch_status-master/server/loggerUtil.js"
      ],
      "names": [],
      "mappings": ";;;;;;;AAKA,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC;IAC1B,YAAY,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC;;AAE9C,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;;;AAG/B,SAAS,SAAS,CAAC,KAAK,EAAE;AACxB,MAAI,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;AACrC,MAAI,MAAM,IAAI,IAAI,EAAE;AAClB,QAAI,SAAS,CAAC;AACd,SAAI,IAAI,KAAK,IAAK,YAAY,CAAC,SAAS,EAAC;AACvC,eAAS,GAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;AACxC,UAAG,SAAS,IAAE,SAAS,CAAC,QAAQ,IAAE,SAAS,CAAC,QAAQ,KAAG,KAAK,EAAC;AAC3D,cAAM;OACP;KACF;AACD,QAAI,SAAS,IAAI,IAAI,EAAE;AACrB,YAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;KACrC,MAAM;AACL,YAAM,yBAAyB,GAAG,KAAK,GAAG,QAAQ,CAAC;KACpD;AACD,WAAO,MAAM,CAAC;GACf,MAAM;AACL,UAAM,yBAAyB,GAAG,KAAK,GAAG,QAAQ,CAAC;GACpD;CACF;AACD,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC",
      "file": "D:/backup/oplate/kibana1/src/plugins/elasticsearch_status-master/server/loggerUtil.js",
      "sourcesContent": [
        "/**\n * Copyright (c) 2010-2015 EEFUNG Software Co.Ltd. All rights reserved.\n * 版权所有 (c) 2010-2015 湖南蚁坊软件有限公司。保留所有权利。\n * Created by liwenjun on 2016/9/9.\n */\nvar log4js = require('log4js')\n  , loggerConfig = require(\"./logger\").log4js;\n\nlog4js.configure(loggerConfig);\n\n//获取logger的方法\nfunction getLogger(logId) {\n  var logger = log4js.getLogger(logId);\n  if (logger != null) {\n    var logConfig;\n    for(var index  in loggerConfig.appenders){\n      logConfig=loggerConfig.appenders[index];\n      if(logConfig&&logConfig.category&&logConfig.category===logId){\n        break;\n      }\n    }\n    if (logConfig != null) {\n      logger.setLevel(logConfig.logLevel);\n    } else {\n      throw 'no logger with logId : ' + logId + ' found';\n    }\n    return logger;\n  } else {\n    throw 'no logger with logId : ' + logId + ' found';\n  }\n}\nexports.getLogger = getLogger;\n"
      ]
    },
    "mtime": 1474525390186
  }
}